## ü§î –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –º–æ–¥—É–ª–µ–π

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è (–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ Strudel):

1. **–ü—Ä–æ–±–ª–µ–º–∞ –∏–º–ø–æ—Ä—Ç–∞** \- –º–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ ES6 vs CommonJS
2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ TypeScript —Ç–∏–ø–æ–≤** \- –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏
3. **–ê—É–¥–∏–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç –±—Ä–∞—É–∑–µ—Ä–∞** \- —Ç—Ä–µ–±—É–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ –ø–µ—Ä–≤–æ–º—É –∫–ª–∏–∫—É
4. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** \- –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π

## üèóÔ∏è –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–π –ø–æ–¥—Ö–æ–¥: –£—Ä–æ–≤–Ω–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏

### –£—Ä–æ–≤–µ–Ω—å 1: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–∞–ø—Ç–µ—Ä–æ–≤

text

```
src/adapters/
‚îú‚îÄ‚îÄ audio/
‚îÇ   ‚îú‚îÄ‚îÄ AudioAdapter.ts      # –ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ ToneAdapter.ts       # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Tone.js
‚îÇ   ‚îî‚îÄ‚îÄ StrudelAdapter.ts    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è Strudel
‚îú‚îÄ‚îÄ midi/
‚îÇ   ‚îî‚îÄ‚îÄ WebMIDIAdapter.ts
‚îî‚îÄ‚îÄ pattern/
    ‚îî‚îÄ‚îÄ PatternEngineAdapter.ts
```

### –£—Ä–æ–≤–µ–Ω—å 2: –§–∞–±—Ä–∏–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

typescript

```
interface AudioProvider {
  init(): Promise<void>;
  playNote(frequency: number, duration: number): void;
  createSynth(type: string): Synth;
}

class ProviderFactory {
  static async createAudioProvider(type: 'tone' | 'strudel' | 'webaudio'): Promise<AudioProvider> {
    switch(type) {
      case 'tone': return new ToneAdapter();
      case 'strudel': return new StrudelAdapter();
      default: return new WebAudioAdapter();
    }
  }
}
```

### –£—Ä–æ–≤–µ–Ω—å 3: –ò–∑–æ–ª—è—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

typescript

```
// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å–±–æ—Ä–∫–∏
async function loadStrudel() {
  try {
    // –í–∞—Ä–∏–∞–Ω—Ç 1: CDN
    const strudel = await import('https://cdn.jsdelivr.net/npm/@strudel.cycles/core@0.10.0/dist/index.js');
    return strudel;
  } catch (e) {
    // –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞
    const strudel = await import('@strudel.cycles/core');
    return strudel;
  }
}
```

## üõ°Ô∏è –†–µ—à–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–æ–¥—É–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

**–†–µ—à–µ–Ω–∏–µ:** Web Workers + iframe –∏–∑–æ–ª—è—Ü–∏—è

typescript

```
// Strudel –≤ Web Worker
const strudelWorker = new Worker('/workers/strudel-worker.js');
strudelWorker.postMessage({ type: 'eval', code: 'note("c4")' });
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ TypeScript —Ç–∏–ø–æ–≤

**–†–µ—à–µ–Ω–∏–µ:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–π + —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

bash

```
# –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤
npm run generate-types --package=@strudel.cycles/core
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–∞—É–¥–∏–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç)

**–†–µ—à–µ–Ω–∏–µ:** Singleton –º–µ–Ω–µ–¥–∂–µ—Ä –∞—É–¥–∏–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

typescript

```
class AudioContextManager {
  private static instance: AudioContext;
  
  static getContext(): AudioContext {
    if (!this.instance) {
      this.instance = new (window.AudioContext || window.webkitAudioContext)();
    }
    return this.instance;
  }
  
  static resumeOnClick() {
    document.addEventListener('click', () => {
      this.instance?.resume();
    }, { once: true });
  }
}
```

## üìã –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–π –ø–ª–∞–Ω –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

### –§–∞–∑–∞ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã** –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:
	- `AudioEngine` \- –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞
	- `PatternEngine` \- –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
	- `MIDIEngine` \- —Ä–∞–±–æ—Ç–∞ —Å MIDI
	- `VisualizationEngine` \- –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
2. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API**:

typescript

```
interface UCHModule {
  name: string;
  version: string;
  init(config: ModuleConfig): Promise<void>;
  destroy(): void;
  getApi(): ModuleApi;
}
```

### –§–∞–∑–∞ 2: –°–∏—Å—Ç–µ–º–∞ –ø–ª–∞–≥–∏–Ω–æ–≤

text

```
uch-plugins/
‚îú‚îÄ‚îÄ strudel-tidal/
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ uch-plugin.json    # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø–ª–∞–≥–∏–Ω–∞
‚îÇ   ‚îî‚îÄ‚îÄ src/
‚îÇ       ‚îú‚îÄ‚îÄ adapter.ts
‚îÇ       ‚îú‚îÄ‚îÄ node.tsx       # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–æ–¥—ã
‚îÇ       ‚îî‚îÄ‚îÄ worker.js      # –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
‚îî‚îÄ‚îÄ tone-synths/
    ‚îî‚îÄ‚îÄ ...
```

### –§–∞–∑–∞ 3: –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

typescript

```
class ModuleManager {
  async install(moduleName: string, version?: string): Promise<UCHModule> {
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
    // 2. –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ CDN –∏–ª–∏ npm
    // 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
    // 4. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ
  }
  
  async uninstall(moduleName: string): Promise<void> {
    // 1. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
    // 2. –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞
    // 3. –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
  }
}
```

## üîß –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ –¥–ª—è —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏ (Strudel)

### –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

1. **CDN –∑–∞–≥—Ä—É–∑–∫–∞** –≤–º–µ—Å—Ç–æ npm
2. **Web Worker** –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏
3. **–ü—Ä–æ—Å—Ç–æ–π –∞–¥–∞–ø—Ç–µ—Ä** —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º API

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:

1. **–°–æ–∑–¥–∞—Ç—å `PluginSDK`** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –º–æ–¥—É–ª–µ–π
2. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç** –º–æ–¥—É–ª–µ–π UCH
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Å–æ—á–Ω–∏—Ü—É** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞

1. **–°–æ–∑–¥–∞—Ç—å issue:** "–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤"
2. **–ù–∞—á–∞—Ç—å —Å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:** –ü—Ä–æ—Å—Ç–æ–π AudioAdapter
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å API:** –ö–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –º–æ–¥—É–ª–∏ –¥–ª—è UCH
4. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø–ª–∞–≥–∏–Ω:** –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

## üéØ –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ò–∑–æ–ª—è—Ü–∏—è** \- –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –≤ —Å–≤–æ—ë–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
2. **–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è** \- –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π
3. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** \- –ø–∞–¥–µ–Ω–∏–µ –º–æ–¥—É–ª—è –Ω–µ –ª–æ–º–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É
4. **–ì–æ—Ä—è—á–∞—è –∑–∞–º–µ–Ω–∞** \- –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–∞ –ª–µ—Ç—É
5. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** \- –º–æ–¥—É–ª–∏ –≥—Ä—É–∑—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω—ã

---

**–ß—Ç–æ –¥—É–º–∞–µ—Ç–µ –æ —Ç–∞–∫–æ–º –ø–æ–¥—Ö–æ–¥–µ?** –≠—Ç–æ —Ä–µ—à–∏—Ç —Ç–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Strudel –∏ —Å–æ–∑–¥–∞—Å—Ç –æ—Å–Ω–æ–≤—É –¥–ª—è –±—É–¥—É—â–∏—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.
