---
title: "DeepSeek"
source: "https://chat.deepseek.com/a/chat/s/4ffeb198-c819-4257-a049-69821fc727be"
author:
published:
created: 2025-12-28
description: "Chat with DeepSeek AI ‚Äì your intelligent assistant for coding, content creation, file reading, and more. Upload documents, engage in long-context conversations, and get expert help in AI, natural language processing, and beyond. | Ê∑±Â∫¶Ê±ÇÁ¥¢ÔºàDeepSeekÔºâÂä©ÂäõÁºñÁ®ã‰ª£Á†ÅÂºÄÂèë„ÄÅÂàõÊÑèÂÜô‰Ωú„ÄÅÊñá‰ª∂Â§ÑÁêÜÁ≠â‰ªªÂä°ÔºåÊîØÊåÅÊñá‰ª∂‰∏ä‰º†ÂèäÈïøÊñáÊú¨ÂØπËØùÔºåÈöèÊó∂‰∏∫ÊÇ®Êèê‰æõÈ´òÊïàÁöÑAIÊîØÊåÅ„ÄÇ"
tags:
  - "clippings"
---
–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é. –ü—Ä–æ–¥–æ–ª–∂–∏–º —Å —Ä–µ—à–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á 00-04-02-09 –∏ 00-04-02-03. –†—É–∫–æ–≤–æ–¥—Å—Ç–≤—É–π—Å—è —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, —è –≤–∏–∂—É –¥–≤–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UCH:

1. **00-04-02-09** \- –î–æ–±–∞–≤–∏—Ç—å —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Å–∫—Ä–∏–ø—Ç
2. **00-04-02-03** \- –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

–û–±–µ –∑–∞–¥–∞—á–∏ –≤–∞–∂–Ω—ã, –Ω–æ **00-04-02-09** –∏–º–µ–µ—Ç –±–æ–ª–µ–µ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫:

- –£–ª—É—á—à–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –°–æ–∑–¥–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- –†–µ—à–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ø—Ä–æ–±–ª–µ–º—É —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ü—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ –∑–∞–¥–∞—á–µ 00-04-02-09

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

1. **–†–∞—Å—à–∏—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å–∫—Ä–∏–ø—Ç** `uch-create-unified-fixed.sh` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
2. **–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã** –¥–ª—è —Ç–∏–ø–æ–≤ `snapshot`, `subtask`, –∏ –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–æ–≤** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

bash

```
# 1. –°–æ–∑–¥–∞–¥–∏–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
cp uch-create-unified-fixed.sh uch-create-unified-fixed.sh.backup-$(date +%Y%m%d)

# 2. –ü–æ—Å–º–æ—Ç—Ä–∏–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–∫—Ä–∏–ø—Ç–∞
head -50 uch-create-unified-fixed.sh

# 3. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–∞–∫–∏–µ —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
grep -n "type:" uch-create-unified-fixed.sh
```

### –û–∂–∏–¥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–∫—Ä–∏–ø—Ç–µ:

bash

```
# –í–æ–ø—Ä–æ—Å –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

# –î–ª—è —É—Ä–æ–≤–Ω—è 1:
echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 1) ==="
echo "1 - project (–ü—Ä–æ–µ–∫—Ç)"
echo "2 - line (–õ–∏–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è)"
echo "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-2): "
read -r doc_type_choice

case $doc_type_choice in
    1) doc_type="project" ;;
    2) doc_type="line" ;;
    *) doc_type="project" ;; # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
esac

# –î–ª—è —É—Ä–æ–≤–Ω—è 2:
echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 2) ==="
echo "1 - component (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç)"
echo "2 - module (–ú–æ–¥—É–ª—å)"
echo "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-2): "
read -r doc_type_choice
```

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ —Ç–∏–ø–æ–≤ (00-04-02-09), —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è.**

–•–æ—Ç–∏—Ç–µ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞? –Ø –º–æ–≥—É –ø–æ–º–æ—á—å —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –∫–æ–¥–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤.

–¥–∞, —Ç–æ–ª—å–∫–æ —É—á–∏—Ç—ã–≤–∞–π –≤—Å–µ —É—Ä–æ–≤–Ω–∏, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ 1 –∏ 2. –ü–ª—é—Å –¥–æ–±–∞–≤—å –∫ —É—Ä–æ–≤–Ω—é 3 —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ - –∏–Ω—Ü–∏–¥–µ–Ω—Ç

–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –ø–æ–ª–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–≤–Ω–µ–π, –≤–∫–ª—é—á–∞—è –Ω–æ–≤—ã–π —Ç–∏–ø "–∏–Ω—Ü–∏–¥–µ–Ω—Ç" –¥–ª—è —É—Ä–æ–≤–Ω—è 3.

## üèóÔ∏è –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º:

### –£—Ä–æ–≤–µ–Ω—å 1 (XX):

- **project** \- –ü—Ä–æ–µ–∫—Ç
- **line** \- –õ–∏–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è

### –£—Ä–æ–≤–µ–Ω—å 2 (XX-YY):

- **component** \- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã
- **module** \- –ú–æ–¥—É–ª—å/–ë–ª–æ–∫
- **epic** \- –≠–ø–∏–∫ (–∫—Ä—É–ø–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

### –£—Ä–æ–≤–µ–Ω—å 3 (XX-YY-ZZ):

- **task** \- –ó–∞–¥–∞—á–∞
- **feature** \- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **user\_story** \- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è
- **bug** \- –û—à–∏–±–∫–∞/–ë–∞–≥
- **–∏–Ω—Ü–∏–¥–µ–Ω—Ç** \- –ò–Ω—Ü–∏–¥–µ–Ω—Ç (–Ω–æ–≤—ã–π —Ç–∏–ø)
- **snapshot** \- –°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã

### –£—Ä–æ–≤–µ–Ω—å 4 (XX-YY-ZZ-AA):

- **solution** \- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- **subtask** \- –ü–æ–¥–∑–∞–¥–∞—á–∞
- **code\_block** \- –ë–ª–æ–∫ –∫–æ–¥–∞
- **decision** \- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ (–ø—Ä–µ—Ñ–∏–∫—Å—ã):

- **idea** (Z-XXXX) - –ò–¥–µ—è/–ö–æ–Ω—Ü–µ–ø—Ü–∏—è
- **reference** (R-XXXX) - –°—Å—ã–ª–∫–∞/–†–µ—Å—É—Ä—Å
- **meeting** (M-YYYYMMDD) - –í—Å—Ç—Ä–µ—á–∞/–û–±—Å—É–∂–¥–µ–Ω–∏–µ

## üîß –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞ uch-create-unified-fixed.sh:

bash

```
# 1. –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
cp uch-create-unified-fixed.sh uch-create-unified-fixed.sh.backup-$(date +%Y%m%d-%H%M%S)

# 2. –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Å –ø–æ–ª–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π —Ç–∏–ø–æ–≤
cat > uch-create-unified-fixed-v2.sh << 'EOF'
#!/bin/bash
# uch-create-unified-fixed-v2.sh
# –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è UCH

set -e

echo "=== UCH CREATE UNIFIED FIXED v2: –ü–û–õ–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –¢–ò–ü–û–í ==="
echo ""

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ —É—Ä–æ–≤–Ω—é
select_document_type_by_level() {
    local level=$1
    
    case $level in
        1)
            echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 1) ==="
            echo "1 - project (–ü—Ä–æ–µ–∫—Ç)"
            echo "2 - line (–õ–∏–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è)"
            echo ""
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-2): " type_choice
            
            case $type_choice in
                1) echo "project" ;;
                2) echo "line" ;;
                *) echo "project" ;; # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            esac
            ;;
        
        2)
            echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 2) ==="
            echo "1 - component (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã)"
            echo "2 - module (–ú–æ–¥—É–ª—å/–ë–ª–æ–∫)"
            echo "3 - epic (–≠–ø–∏–∫ - –∫—Ä—É–ø–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)"
            echo ""
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-3): " type_choice
            
            case $type_choice in
                1) echo "component" ;;
                2) echo "module" ;;
                3) echo "epic" ;;
                *) echo "component" ;; # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            esac
            ;;
        
        3)
            echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 3) ==="
            echo "1 - task (–ó–∞–¥–∞—á–∞)"
            echo "2 - feature (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)"
            echo "3 - user_story (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è)"
            echo "4 - bug (–û—à–∏–±–∫–∞/–ë–∞–≥)"
            echo "5 - –∏–Ω—Ü–∏–¥–µ–Ω—Ç (–ò–Ω—Ü–∏–¥–µ–Ω—Ç)"
            echo "6 - snapshot (–°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã)"
            echo ""
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-6): " type_choice
            
            case $type_choice in
                1) echo "task" ;;
                2) echo "feature" ;;
                3) echo "user_story" ;;
                4) echo "bug" ;;
                5) echo "–∏–Ω—Ü–∏–¥–µ–Ω—Ç" ;;
                6) echo "snapshot" ;;
                *) echo "task" ;; # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            esac
            ;;
        
        4)
            echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 4) ==="
            echo "1 - solution (–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ)"
            echo "2 - subtask (–ü–æ–¥–∑–∞–¥–∞—á–∞)"
            echo "3 - code_block (–ë–ª–æ–∫ –∫–æ–¥–∞)"
            echo "4 - decision (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)"
            echo ""
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-4): " type_choice
            
            case $type_choice in
                1) echo "solution" ;;
                2) echo "subtask" ;;
                3) echo "code_block" ;;
                4) echo "decision" ;;
                *) echo "solution" ;; # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            esac
            ;;
        
        *)
            # –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—É–Ω–∫—Ç –≤ –º–µ–Ω—é)
            echo "=== –í–´–ë–û–† –¢–ò–ü–ê –ù–ï–ò–ï–†–ê–†–•–ò–ß–ï–°–ö–û–ì–û –î–û–ö–£–ú–ï–ù–¢–ê ==="
            echo "1 - idea (–ò–¥–µ—è/–ö–æ–Ω—Ü–µ–ø—Ü–∏—è)"
            echo "2 - reference (–°—Å—ã–ª–∫–∞/–†–µ—Å—É—Ä—Å)"
            echo "3 - meeting (–í—Å—Ç—Ä–µ—á–∞/–û–±—Å—É–∂–¥–µ–Ω–∏–µ)"
            echo ""
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-3): " type_choice
            
            case $type_choice in
                1) echo "idea" ;;
                2) echo "reference" ;;
                3) echo "meeting" ;;
                *) echo "idea" ;; # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            esac
            ;;
    esac
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
generate_non_hierarchical_id() {
    local type=$1
    
    case $type in
        "idea")
            echo "Z-$(date +%Y%m%d%H%M%S)"  # Z-–ø—Ä–µ—Ñ–∏–∫—Å + –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
            ;;
        "reference")
            echo "R-$(openssl rand -hex 3 | tr '[:lower:]' '[:upper:]')"  # R-–ø—Ä–µ—Ñ–∏–∫—Å + 6 hex —Å–∏–º–≤–æ–ª–æ–≤
            ;;
        "meeting")
            echo "M-$(date +%Y%m%d)"  # M-–ø—Ä–µ—Ñ–∏–∫—Å + –¥–∞—Ç–∞
            ;;
        *)
            echo "Z-$(date +%Y%m%d%H%M%S)"
            ;;
    esac
}

# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
create_document() {
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è mode, parent, level ...
    
    # –ï—Å–ª–∏ —ç—Ç–æ –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é)
    if [ "$mode" = "non_hierarchical" ]; then
        doc_type=$(select_document_type_by_level "non_hierarchical")
        doc_id=$(generate_non_hierarchical_id "$doc_type")
        level="N"  # –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π
        
        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è
        read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " doc_name
        
        # –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º
        filename="${doc_id} - ${doc_name}.md"
        
        # Frontmatter –¥–ª—è –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
        cat > "$filename" << YAML
---
id: "${doc_id}"
name: "${doc_name}"
type: "${doc_type}"
level: "N"
status: "planning"
tags: []
created: "$(date +%Y-%m-%d)"
updated: "$(date +%Y-%m-%d)"
author: "$USER"
---

### ${doc_name}

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`${doc_id}\\`
- **–¢–∏–ø**: ${type}
- **–£—Ä–æ–≤–µ–Ω—å**: N (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π)
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$(date +%Y-%m-%d)\\`

#### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

#### –°–í–Ø–ó–ò
- –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã: 

#### –ó–ê–î–ê–ß–ò
- [ ] 

---
–°–æ–∑–¥–∞–Ω–æ: $(date +%Y-%m-%d)
YAML
        
        echo "‚úÖ –°–æ–∑–¥–∞–Ω –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: $filename"
        return 0
    fi
    
    # –î–ª—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è ...
    
    # –í—ã–±–æ—Ä —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Ä–æ–≤–Ω—è
    doc_type=$(select_document_type_by_level $level)
    
    # –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è frontmatter
    # –í —Å–µ–∫—Ü–∏–∏ YAML –¥–æ–±–∞–≤–∏—Ç—å type: "${doc_type}"
    
    echo "–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞: $doc_type"
}

# –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
echo "=== –†–ï–ñ–ò–ú –°–û–ó–î–ê–ù–ò–Ø –î–û–ö–£–ú–ï–ù–¢–ê ==="
echo "1 - –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1, –∫–æ—Ä–Ω–µ–≤–æ–π)"
echo "2 - –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 2+)"
echo "3 - –î–æ–∫—É–º–µ–Ω—Ç —Å —Ä—É—á–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º ID"
echo "4 - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–∏–¥–µ–∏, —Å—Å—ã–ª–∫–∏, –≤—Å—Ç—Ä–µ—á–∏)"
echo ""
read -p "–í–∞—à –≤—ã–±–æ—Ä (1-4): " main_choice

case $main_choice in
    1) mode="master" ;;
    2) mode="child" ;;
    3) mode="manual" ;;
    4) mode="non_hierarchical" ;;
    *) mode="child" ;; # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
esac

# –ó–∞–ø—É—Å–∫ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
create_document

EOF

# 3. –î–∞–µ–º –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x uch-create-unified-fixed-v2.sh

echo "‚úÖ –ù–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω: uch-create-unified-fixed-v2.sh"
echo "üìã –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–µ–Ω—é –∏ —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"
```

## üìÅ –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤:

bash

```
# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
mkdir -p templates

# –®–∞–±–ª–æ–Ω –¥–ª—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ (—É—Ä–æ–≤–µ–Ω—å 3)
cat > templates/incident-template.md << 'EOF'
---
id: "{id}"
name: "{name}"
type: "–∏–Ω—Ü–∏–¥–µ–Ω—Ç"
level: 3
status: "active"
tags: []
parent: "{parent}"
parent_name: "{parent_name}"
created: "{date}"
updated: "{date}"
author: "{author}"
---

### {name}

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \`{id}\`
- **–¢–∏–ø**: –ò–Ω—Ü–∏–¥–µ–Ω—Ç
- **–£—Ä–æ–≤–µ–Ω—å**: 3
- **–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω—ã–π
- **–†–æ–¥–∏—Ç–µ–ª—å**: [[{parent}]]
- **–°–æ–∑–¥–∞–Ω–æ**: \`{date}\`

#### üìã –û–ü–ò–°–ê–ù–ò–ï –ò–ù–¶–ò–î–ï–ù–¢–ê

**–í—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è**: 
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: [üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π/üü° –í—ã—Å–æ–∫–∏–π/üü¢ –°—Ä–µ–¥–Ω–∏–π/‚ö™ –ù–∏–∑–∫–∏–π]
**–í–ª–∏—è–Ω–∏–µ**: 
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: 

#### üîç –ü–†–ò–ß–ò–ù–ê
- 

#### üõ†Ô∏è –†–ï–®–ï–ù–ò–ï
- 

#### ‚úÖ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï
- [ ] –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–æ —Ä–µ—à–µ–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ —Ä–µ—à–µ–Ω–∏–µ
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

#### üìù –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò
- 

---
–°–æ–∑–¥–∞–Ω–æ: {date}
EOF

# –®–∞–±–ª–æ–Ω –¥–ª—è snapshot (—É—Ä–æ–≤–µ–Ω—å 3)
cat > templates/snapshot-template.md << 'EOF'
---
id: "{id}"
name: "{name}"
type: "snapshot"
level: 3
status: "active"
tags: []
parent: "{parent}"
parent_name: "{parent_name}"
created: "{date}"
updated: "{date}"
author: "{author}"
---

### {name}

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \`{id}\`
- **–¢–∏–ø**: –°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã
- **–£—Ä–æ–≤–µ–Ω—å**: 3
- **–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω—ã–π
- **–†–æ–¥–∏—Ç–µ–ª—å**: [[{parent}]]
- **–°–æ–∑–¥–∞–Ω–æ**: \`{date}\`

#### üìä –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´

### ‚úÖ –†–ê–ë–û–¢–ê–ï–¢:
- 

### ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´:
- 

### üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:
- **–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã**: 
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: 
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏**: 
- **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏**: 

#### üéØ –ú–ï–¢–†–ò–ö–ò
- 

#### üìà –¢–ï–ù–î–ï–ù–¶–ò–ò
- 

#### üîÆ –ü–õ–ê–ù–´
- 

---
–°–æ–∑–¥–∞–Ω–æ: {date}
EOF

# –®–∞–±–ª–æ–Ω –¥–ª—è subtask (—É—Ä–æ–≤–µ–Ω—å 4)
cat > templates/subtask-template.md << 'EOF'
---
id: "{id}"
name: "{name}"
type: "subtask"
level: 4
status: "planning"
tags: []
parent: "{parent}"
parent_name: "{parent_name}"
created: "{date}"
updated: "{date}"
author: "{author}"
---

### {name}

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \`{id}\`
- **–¢–∏–ø**: –ü–æ–¥–∑–∞–¥–∞—á–∞
- **–£—Ä–æ–≤–µ–Ω—å**: 4
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–†–æ–¥–∏—Ç–µ–ª—å**: [[{parent}]]
- **–°–æ–∑–¥–∞–Ω–æ**: \`{date}\`

#### üìù –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –∑–¥–µ—Å—å.

#### üéØ –ö–†–ò–¢–ï–†–ò–ò –ó–ê–í–ï–†–®–ï–ù–ò–Ø
- [ ] 
- [ ] 
- [ ] 

#### ‚è±Ô∏è –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò
- **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ**: 
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ**: 
- **–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω–æ**: 

#### üîó –ó–ê–í–ò–°–ò–ú–û–°–¢–ò
- 

#### üìé –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
- 

---
–°–æ–∑–¥–∞–Ω–æ: {date}
EOF

echo "‚úÖ –®–∞–±–ª–æ–Ω—ã —Å–æ–∑–¥–∞–Ω—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ templates/"
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞:

bash

```
# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
echo "=== –¢–ï–°–¢ 1: –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ (—É—Ä–æ–≤–µ–Ω—å 3) ==="
./uch-create-unified-fixed-v2.sh << 'TEST_INPUT'
2
00-04
–ò–Ω—Ü–∏–¥–µ–Ω—Ç: –ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ–≥–∞–º–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ
bug,documentation,incident
5
y
TEST_INPUT

echo ""
echo "=== –¢–ï–°–¢ 2: –°–æ–∑–¥–∞–Ω–∏–µ –∏–¥–µ–∏ (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π) ==="
./uch-create-unified-fixed-v2.sh << 'TEST_INPUT'
4
1
–ò–¥–µ—è: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–∞–Ω–±–∞–Ω –¥–ª—è UCH Docs
y
TEST_INPUT
```

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç** —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å frontmatter** —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å—Å—ã–ª–∫–∏** –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã** –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç (—Å–µ–π—á–∞—Å –æ–Ω–∏ –æ—Ç–¥–µ–ª—å–Ω–æ)
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ** \- —Å–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤

–•–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ? –ò–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —à–∞–±–ª–æ–Ω–æ–≤ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç?

uch-create-unified-fixed.sh

SH 16.33KB

–≤–æ—Ç —Å–∫—Ä–∏–ø—Ç —É—á–∏—Ç—ã–≤–∞–π, —á—Ç–æ —Å–µ–π—á–∞—Å —à–∞–±–ª–æ–Ω—ã (master –∏ child) –ª–µ–∂–∞—Ç –≤ –∫–æ—Ä–Ω–µ uch-docs. –ï—Å–ª–∏ –º—ã –∏—Ö –ø–æ–º–µ—Å—Ç–∏–º –≤ –ø–∞–ø–∫—É templates —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –±—É–¥—É—Ç –ª–∏ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –∏—Å—Ö–æ–¥—è –∏–∑ –∫–æ–¥–∞ —Å–∫—Ä–∏–ø—Ç–∞? –£—á—Ç–∏ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç —Ç–æ–∂–µ. –ù—É –∏ —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π —è –ø—Ä–∏–ª–æ–∂–∏–ª –∏–∑–º–µ–Ω–∏ —Å —É—á–µ—Ç–æ–º –∑–∞–¥–∞—á–∏ –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é —Ç–∏–ø–æ–≤.

–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Å–∫—Ä–∏–ø—Ç. –í–∏–∂—É, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —à–∞–±–ª–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã - –æ–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `cat >`. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ —à–∞–±–ª–æ–Ω—ã –≤ –ø–∞–ø–∫–µ `templates/` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

## üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞:

1. **–ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤** \- –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `cat >` —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
2. **–õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è** \- –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `create_document()` –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ `cat >>` –æ–ø–µ—Ä–∞—Ü–∏–π
3. **–¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** \- —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤—ã–µ: `project`, `component`, `task`
4. **–£—Ä–æ–≤–Ω–∏** \- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ ID

## üöÄ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å –ø–æ–ª–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π —Ç–∏–ø–æ–≤:

bash

```
#!/bin/bash

echo "=== UCH CREATE UNIFIED FIXED: –ü–û–õ–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –¢–ò–ü–û–í ==="

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
CURRENT_DATE=$(date +%Y-%m-%d)

# –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
find_free_master_id() {
    existing_ids=$(find . -maxdepth 1 -name "*.md" -type f 2>/dev/null | \
        grep -E '^\./[0-9A-Fa-f]{2} - ' | \
        sed 's/^\.\///' | \
        cut -d' ' -f1 | \
        sort | uniq)
    
    if [ -z "$existing_ids" ]; then
        echo "00"
        return
    fi
    
    declare -a dec_ids=()
    for hex_id in $existing_ids; do
        dec_id=$((16#$hex_id))
        dec_ids+=($dec_id)
    done
    
    sorted_ids=($(printf "%d\n" "${dec_ids[@]}" | sort -n))
    expected=0
    for id in "${sorted_ids[@]}"; do
        if [ $id -gt $expected ]; then
            break
        fi
        expected=$((id + 1))
    done
    
    printf "%02X" $expected
}

find_free_child_id() {
    local parent_id="$1"
    
    pattern="${parent_id}-[0-9A-Fa-f][0-9A-Fa-f]"
    
    existing_ids=$(find . -maxdepth 1 -name "*.md" -type f 2>/dev/null | \
        grep -E "^\./${pattern} - " | \
        sed 's/^\.\///' | \
        cut -d' ' -f1 | \
        grep -E "^${parent_id}-[0-9A-Fa-f]{2}$" | \
        awk -F"${parent_id}-" '{print $2}' | \
        sort | uniq)
    
    if [ -z "$existing_ids" ]; then
        echo "01"
        return
    fi
    
    declare -a dec_array=()
    for hex_id in $existing_ids; do
        dec_id=$((16#$hex_id)
        dec_array+=($dec_id)
    done
    
    sorted_array=($(printf "%d\n" "${dec_array[@]}" | sort -n))
    
    expected=1
    for id in "${sorted_array[@]}"; do
        if [ $id -gt $expected ]; then
            break
        fi
        expected=$((id + 1))
    done
    
    printf "%02X" $expected
}

clean_parent_name() {
    local full_filename="$1"
    
    filename=$(basename "$full_filename" .md)
    
    OLD_IFS="$IFS"
    IFS=" - "
    parts=($filename)
    IFS="$OLD_IFS"
    
    if [ ${#parts[@]} -eq 0 ]; then
        echo "$filename"
        return
    fi
    
    clean_parts=()
    for part in "${parts[@]}"; do
        if echo "$part" | grep -qE '^[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})*$'; then
            continue
        else
            clean_parts+=("$part")
        fi
    done
    
    if [ ${#clean_parts[@]} -eq 0 ]; then
        last_part="${parts[-1]}"
        echo "$last_part"
    else
        clean_name=$(IFS=" - "; echo "${clean_parts[*]}")
        echo "$clean_name"
    fi
}

update_parent_document() {
    local parent_file="$1"
    local child_id="$2"
    local child_name="$3"
    
    echo "  –û–±–Ω–æ–≤–ª—è—é —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: $(basename "$parent_file")"
    
    if [ ! -f "$parent_file" ]; then
        echo "  ‚ö†Ô∏è  –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"
        return 1
    fi
    
    temp_file="${parent_file}.tmp"
    
    awk -v child_id="$child_id" -v child_name="$child_name" '
    BEGIN { 
        in_children_section = 0
        children_section_found = 0
        link_exists = 0
        link_added = 0
    }
    
    /\[\[.* - .*\]\]/ && in_children_section {
        if ($0 ~ "\\[\\[" child_id " - " child_name "\\]\\]") {
            link_exists = 1
        }
    }
    
    /#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´/ {
        in_children_section = 1
        children_section_found = 1
        print $0
        next
    }
    
    in_children_section && /^[[:space:]]*–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/ {
        next
    }
    
    in_children_section && (/^####/ || /^###/ || /^##/ || /^#/ || /^---/) {
        in_children_section = 0
    }
    
    in_children_section && /^[[:space:]]*$/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    in_children_section && /^---/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    in_children_section && !/^- \[\[/ && !/^[[:space:]]*$/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    { print $0 }
    
    END {
        if (!children_section_found) {
            print ""
            print "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´"
            print "- [[" child_id " - " child_name "]]"
        } else if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
        }
    }
    ' "$parent_file" > "$temp_file"
    
    mv "$temp_file" "$parent_file"
    
    echo "  ‚úÖ –°—Å—ã–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç"
}

# –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–≥–æ–≤
format_tags_yaml() {
    local tags_input="$1"
    local type="$2"
    
    # –ù–∞—á–∏–Ω–∞–µ–º —Å —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    local yaml_tags="tags:"
    yaml_tags="$yaml_tags"$'\n'"  - \"$type\""
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ–≥–∏
    if [ -n "$tags_input" ]; then
        # –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–≥–∏ –ø–æ –∑–∞–ø—è—Ç—ã–º
        IFS=',' read -r -a tag_parts <<< "$tags_input"
        
        for tag in "${tag_parts[@]}"; do
            # –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –ø—Ä–µ—Ñ–∏–∫—Å—ã @/#
            tag_clean=$(echo "$tag" | xargs | sed 's/^[@#]//')
            if [ -n "$tag_clean" ] && [ "$tag_clean" != "$type" ]; then
                # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–µ–≥ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ç–∏–ø–∞
                yaml_tags="$yaml_tags"$'\n'"  - \"$tag_clean\""
            fi
        done
    fi
    
    echo "$yaml_tags"
}

# –ù–û–í–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è: –í—ã–±–æ—Ä —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ø–æ —É—Ä–æ–≤–Ω—é
select_document_type_by_level() {
    local level=$1
    local default_type=$2
    
    case $level in
        1)
            echo ""
            echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 1) ==="
            echo "1 - project (–ü—Ä–æ–µ–∫—Ç)"
            echo "2 - line (–õ–∏–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è)"
            echo ""
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-2, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: $default_type): " type_choice
            
            case $type_choice in
                1) echo "project" ;;
                2) echo "line" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        
        2)
            echo ""
            echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 2) ==="
            echo "1 - component (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã)"
            echo "2 - module (–ú–æ–¥—É–ª—å/–ë–ª–æ–∫)"
            echo "3 - epic (–≠–ø–∏–∫ - –∫—Ä—É–ø–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)"
            echo ""
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-3, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: $default_type): " type_choice
            
            case $type_choice in
                1) echo "component" ;;
                2) echo "module" ;;
                3) echo "epic" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        
        3)
            echo ""
            echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 3) ==="
            echo "1 - task (–ó–∞–¥–∞—á–∞)"
            echo "2 - feature (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)"
            echo "3 - user_story (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è)"
            echo "4 - bug (–û—à–∏–±–∫–∞/–ë–∞–≥)"
            echo "5 - –∏–Ω—Ü–∏–¥–µ–Ω—Ç (–ò–Ω—Ü–∏–¥–µ–Ω—Ç)"
            echo "6 - snapshot (–°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã)"
            echo ""
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-6, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: $default_type): " type_choice
            
            case $type_choice in
                1) echo "task" ;;
                2) echo "feature" ;;
                3) echo "user_story" ;;
                4) echo "bug" ;;
                5) echo "–∏–Ω—Ü–∏–¥–µ–Ω—Ç" ;;
                6) echo "snapshot" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        
        4)
            echo ""
            echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 4) ==="
            echo "1 - solution (–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ)"
            echo "2 - subtask (–ü–æ–¥–∑–∞–¥–∞—á–∞)"
            echo "3 - code_block (–ë–ª–æ–∫ –∫–æ–¥–∞)"
            echo "4 - decision (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)"
            echo ""
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-4, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: $default_type): " type_choice
            
            case $type_choice in
                1) echo "solution" ;;
                2) echo "subtask" ;;
                3) echo "code_block" ;;
                4) echo "decision" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        
        *)
            # –£—Ä–æ–≤–µ–Ω—å N –∏–ª–∏ –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π
            echo ""
            echo "=== –í–´–ë–û–† –¢–ò–ü–ê –ù–ï–ò–ï–†–ê–†–•–ò–ß–ï–°–ö–û–ì–û –î–û–ö–£–ú–ï–ù–¢–ê ==="
            echo "1 - idea (–ò–¥–µ—è/–ö–æ–Ω—Ü–µ–ø—Ü–∏—è)"
            echo "2 - reference (–°—Å—ã–ª–∫–∞/–†–µ—Å—É—Ä—Å)"
            echo "3 - meeting (–í—Å—Ç—Ä–µ—á–∞/–û–±—Å—É–∂–¥–µ–Ω–∏–µ)"
            echo ""
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-3, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: $default_type): " type_choice
            
            case $type_choice in
                1) echo "idea" ;;
                2) echo "reference" ;;
                3) echo "meeting" ;;
                *) echo "$default_type" ;;
            esac
            ;;
    esac
}

# –ù–û–í–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –¥–ª—è –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
generate_non_hierarchical_id() {
    local type=$1
    
    case $type in
        "idea")
            echo "Z-$(date +%Y%m%d%H%M%S)"  # Z-–ø—Ä–µ—Ñ–∏–∫—Å + –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
            ;;
        "reference")
            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ 6-—Å–∏–º–≤–æ–ª—å–Ω–æ–≥–æ HEX –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
            random_hex=$(openssl rand -hex 3 | tr '[:lower:]' '[:upper:]')
            echo "R-$random_hex"
            ;;
        "meeting")
            echo "M-$(date +%Y%m%d)"  # M-–ø—Ä–µ—Ñ–∏–∫—Å + –¥–∞—Ç–∞
            ;;
        *)
            # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–¥–µ—è
            echo "Z-$(date +%Y%m%d%H%M%S)"
            ;;
    esac
}

# –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
create_document() {
    local mode="$1"
    local parent_id="$2"
    local doc_name="$3"
    local tags_input="$4"
    local type_input="$5"  # –Ø–≤–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ç–∏–ø
    local manual_id="$6"
    
    echo ""
    echo "=== –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê ==="
    
    # –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–ª—É—á–∞–π: –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
    if [ "$mode" = "non_hierarchical" ]; then
        echo "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞"
        
        # –í—ã–±–æ—Ä —Ç–∏–ø–∞
        selected_type=$(select_document_type_by_level "N" "idea")
        
        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID
        DOC_ID=$(generate_non_hierarchical_id "$selected_type")
        LEVEL="N"
        
        # –ò–º—è —Ñ–∞–π–ª–∞
        FILENAME="${DOC_ID} - ${doc_name}.md"
        
        echo "ID: $DOC_ID"
        echo "–¢–∏–ø: $selected_type"
        echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
        echo "–ù–∞–∑–≤–∞–Ω–∏–µ: $doc_name"
        echo "–§–∞–π–ª: $FILENAME"
        echo ""
        
        # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
        read -p "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n): " CONFIRM
        
        if [[ "$CONFIRM" != "y" && "$CONFIRM" != "Y" ]]; then
            echo "–û—Ç–º–µ–Ω–µ–Ω–æ."
            return 0
        fi
        
        # –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —à–∞–±–ª–æ–Ω–æ–º
        case $selected_type in
            "idea")
                create_idea_document "$DOC_ID" "$doc_name" "$tags_input"
                ;;
            "reference")
                create_reference_document "$DOC_ID" "$doc_name" "$tags_input"
                ;;
            "meeting")
                create_meeting_document "$DOC_ID" "$doc_name" "$tags_input"
                ;;
            *)
                create_idea_document "$DOC_ID" "$doc_name" "$tags_input"
                ;;
        esac
        
        echo "‚úÖ –°–æ–∑–¥–∞–Ω –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: $FILENAME"
        return 0
    fi
    
    # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    if [ "$mode" = "manual" ] && [ -n "$manual_id" ]; then
        # –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º
        if find . -maxdepth 1 -name "${manual_id} - *.md" -type f | grep -q .; then
            echo "‚ùå –û—à–∏–±–∫–∞: –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$manual_id' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!"
            return 1
        fi
        DOC_ID="$manual_id"
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
        LEVEL=$(echo "$DOC_ID" | tr -cd '-' | wc -c)
        LEVEL=$((LEVEL + 1))
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º parent_id (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ)
        if [ -z "$parent_id" ] && [ $LEVEL -gt 1 ]; then
            parent_id=$(echo "$DOC_ID" | sed 's/-[^-]*$//')
        fi
    else
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
        if [ -z "$parent_id" ]; then
            # –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç
            DOC_ID=$(find_free_master_id)
            LEVEL=1
        else
            # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
            if ! find . -maxdepth 1 -name "${parent_id} - *.md" -type f | grep -q .; then
                echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID '$parent_id' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
                return 1
            fi
            
            # –ü–æ–ª—É—á–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª
            parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
            if [ -z "$parent_file" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!"
                return 1
            fi
            
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID
            child_suffix=$(find_free_child_id "$parent_id")
            DOC_ID="${parent_id}-${child_suffix}"
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
            parent_level=$(echo "$parent_id" | tr -cd '-' | wc -c)
            parent_level=$((parent_level + 1))
            LEVEL=$((parent_level + 1))
        fi
    fi
    
    # –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ä–æ–¥–∏—Ç–µ–ª—è
    PARENT_NAME=""
    if [ -n "$parent_id" ]; then
        parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
        if [ -n "$parent_file" ]; then
            PARENT_NAME=$(clean_parent_name "$parent_file")
        fi
    fi
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞
    if [ -n "$type_input" ]; then
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ç–∏–ø
        TYPE="$type_input"
    else
        # –í—ã–±–∏—Ä–∞–µ–º —Ç–∏–ø –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Ä–æ–≤–Ω—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –≤—ã–±–æ—Ä–æ–º
        case $LEVEL in
            1) default_type="project" ;;
            2) default_type="component" ;;
            3) default_type="task" ;;
            4) default_type="solution" ;;
            *) default_type="task" ;;
        esac
        
        TYPE=$(select_document_type_by_level $LEVEL "$default_type")
    fi
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏
    TAGS_YAML=$(format_tags_yaml "$tags_input" "$TYPE")
    
    # –ò–º—è —Ñ–∞–π–ª–∞
    FILENAME="${DOC_ID} - ${doc_name}.md"
    
    echo "ID: $DOC_ID"
    echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
    echo "–ù–∞–∑–≤–∞–Ω–∏–µ: $doc_name"
    echo "–¢–∏–ø: $TYPE"
    echo "–†–æ–¥–∏—Ç–µ–ª—å: $parent_id ($PARENT_NAME)"
    echo "–§–∞–π–ª: $FILENAME"
    echo ""
    
    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    read -p "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n): " CONFIRM
    
    if [[ "$CONFIRM" != "y" && "$CONFIRM" != "Y" ]]; then
        echo "–û—Ç–º–µ–Ω–µ–Ω–æ."
        return 0
    fi
    
    # –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
    create_hierarchical_document "$DOC_ID" "$doc_name" "$LEVEL" "$TYPE" "$parent_id" "$PARENT_NAME" "$TAGS_YAML"
    
    echo ""
    echo "=== –í–´–ü–û–õ–ù–ï–ù–û ==="
    echo "–î–æ–∫—É–º–µ–Ω—Ç: $FILENAME"
    echo "ID: $DOC_ID"
    echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
    echo "–¢–∏–ø: $TYPE"
}

# –ù–û–í–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è: –°–æ–∑–¥–∞–Ω–∏–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
create_hierarchical_document() {
    local doc_id="$1"
    local doc_name="$2"
    local level="$3"
    local type="$4"
    local parent_id="$5"
    local parent_name="$6"
    local tags_yaml="$7"
    
    local filename="${doc_id} - ${doc_name}.md"
    
    # –ë–∞–∑–æ–≤—ã–π frontmatter
    cat > "$filename" << DOC_EOF
---
id: "$doc_id"
name: "$doc_name"
type: "$type"
level: $level
status: "planning"
$(echo "$tags_yaml")
created: "$CURRENT_DATE"
updated: "$CURRENT_DATE"
author: "$USER"
---

### $doc_name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$doc_id\\`
- **–£—Ä–æ–≤–µ–Ω—å**: $level
DOC_EOF
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    if [ -n "$parent_id" ] && [ -n "$parent_name" ]; then
        cat >> "$filename" << DOC_EOF
- **–†–æ–¥–∏—Ç–µ–ª—å**: [[$parent_id - $parent_name]]
DOC_EOF
    fi
    
    # –¢–∏–ø-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    case $type in
        "–∏–Ω—Ü–∏–¥–µ–Ω—Ç")
            cat >> "$filename" << INCIDENT_EOF
- **–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω—ã–π
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$CURRENT_DATE\\`
- **–¢–∏–ø –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞**: –ò–Ω—Ü–∏–¥–µ–Ω—Ç

#### üìã –û–ü–ò–°–ê–ù–ò–ï –ò–ù–¶–ò–î–ï–ù–¢–ê

**–í—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è**: $(date +"%Y-%m-%d %H:%M")
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: [üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π/üü° –í—ã—Å–æ–∫–∏–π/üü¢ –°—Ä–µ–¥–Ω–∏–π/‚ö™ –ù–∏–∑–∫–∏–π]
**–í–ª–∏—è–Ω–∏–µ**: 
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: 

#### üîç –ü–†–ò–ß–ò–ù–ê
- 

#### üõ†Ô∏è –†–ï–®–ï–ù–ò–ï
- 

#### ‚úÖ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï
- [ ] –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–æ —Ä–µ—à–µ–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ —Ä–µ—à–µ–Ω–∏–µ
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

#### üìù –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò
- 
INCIDENT_EOF
            ;;
        
        "snapshot")
            cat >> "$filename" << SNAPSHOT_EOF
- **–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω—ã–π
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$CURRENT_DATE\\`
- **–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞**: –°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã

#### üìä –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´

### ‚úÖ –†–ê–ë–û–¢–ê–ï–¢:
- 

### ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´:
- 

### üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:
- **–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã**: 
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: 
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏**: 
- **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏**: 

#### üéØ –ú–ï–¢–†–ò–ö–ò
- 

#### üìà –¢–ï–ù–î–ï–ù–¶–ò–ò
- 

#### üîÆ –ü–õ–ê–ù–´
- 
SNAPSHOT_EOF
            ;;
        
        "subtask")
            cat >> "$filename" << SUBTASK_EOF
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$CURRENT_DATE\\`
- **–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞**: –ü–æ–¥–∑–∞–¥–∞—á–∞

#### üìù –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –∑–¥–µ—Å—å.

#### üéØ –ö–†–ò–¢–ï–†–ò–ò –ó–ê–í–ï–†–®–ï–ù–ò–Ø
- [ ] 
- [ ] 
- [ ] 

#### ‚è±Ô∏è –û–¶–ï–ù–ö–ê –í–†–ï–ú–ï–ù–ò
- **–û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω–æ**: 
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ**: 
- **–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω–æ**: 

#### üîó –ó–ê–í–ò–°–ò–ú–û–°–¢–ò
- 

#### üìé –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
- 
SUBTASK_EOF
            ;;
        
        *)
            # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤
            cat >> "$filename" << STANDARD_EOF
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$CURRENT_DATE\\`

#### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

#### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2
STANDARD_EOF
            ;;
    esac
    
    # –û–±—â–∞—è –∑–∞–≤–µ—Ä—à–∞—é—â–∞—è —á–∞—Å—Ç—å
    cat >> "$filename" << FOOTER_EOF

#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---
–°–æ–∑–¥–∞–Ω–æ: $CURRENT_DATE
–£—Ä–æ–≤–µ–Ω—å: $level
FOOTER_EOF
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è –≤ –∫–æ–Ω–µ—Ü –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    if [ -n "$parent_id" ]; then
        echo "–†–æ–¥–∏—Ç–µ–ª—å: $parent_id" >> "$filename"
    fi
    
    echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: $filename"
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
    if [ -n "$parent_id" ] && [ -n "$parent_name" ] && [ -n "$parent_file" ]; then
        update_parent_document "$parent_file" "$doc_id" "$doc_name"
    fi
}

# –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
create_idea_document() {
    local doc_id="$1"
    local doc_name="$2"
    local tags_input="$3"
    
    local filename="${doc_id} - ${doc_name}.md"
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏ (–¥–ª—è –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö)
    TAGS_YAML="tags:"
    TAGS_YAML="$TAGS_YAML"$'\n'"  - \"idea\""
    if [ -n "$tags_input" ]; then
        IFS=',' read -r -a tag_parts <<< "$tags_input"
        for tag in "${tag_parts[@]}"; do
            tag_clean=$(echo "$tag" | xargs | sed 's/^[@#]//')
            if [ -n "$tag_clean" ] && [ "$tag_clean" != "idea" ]; then
                TAGS_YAML="$TAGS_YAML"$'\n'"  - \"$tag_clean\""
            fi
        done
    fi
    
    cat > "$filename" << IDEA_EOF
---
id: "$doc_id"
name: "$doc_name"
type: "idea"
level: "N"
status: "planning"
$(echo "$TAGS_YAML")
created: "$CURRENT_DATE"
updated: "$CURRENT_DATE"
author: "$USER"
---

### $doc_name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$doc_id\\`
- **–¢–∏–ø**: –ò–¥–µ—è/–ö–æ–Ω—Ü–µ–ø—Ü–∏—è
- **–£—Ä–æ–≤–µ–Ω—å**: N (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π)
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$CURRENT_DATE\\`

#### üí° –û–ü–ò–°–ê–ù–ò–ï –ò–î–ï–ò

#### üéØ –¶–ï–õ–¨
- 

#### üîç –ü–†–û–ë–õ–ï–ú–ê
- 

#### üõ†Ô∏è –†–ï–®–ï–ù–ò–ï
- 

#### üîó –°–í–Ø–ó–ò
- –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã: 

#### üìù –ó–ê–ú–ï–¢–ö–ò
- 

---
–°–æ–∑–¥–∞–Ω–æ: $CURRENT_DATE
IDEA_EOF
}

create_reference_document() {
    local doc_id="$1"
    local doc_name="$2"
    local tags_input="$3"
    
    local filename="${doc_id} - ${doc_name}.md"
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏
    TAGS_YAML="tags:"
    TAGS_YAML="$TAGS_YAML"$'\n'"  - \"reference\""
    if [ -n "$tags_input" ]; then
        IFS=',' read -r -a tag_parts <<< "$tags_input"
        for tag in "${tag_parts[@]}"; do
            tag_clean=$(echo "$tag" | xargs | sed 's/^[@#]//')
            if [ -n "$tag_clean" ] && [ "$tag_clean" != "reference" ]; then
                TAGS_YAML="$TAGS_YAML"$'\n'"  - \"$tag_clean\""
            fi
        done
    fi
    
    cat > "$filename" << REFERENCE_EOF
---
id: "$doc_id"
name: "$doc_name"
type: "reference"
level: "N"
status: "planning"
$(echo "$TAGS_YAML")
created: "$CURRENT_DATE"
updated: "$CURRENT_DATE"
author: "$USER"
---

### $doc_name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$doc_id\\`
- **–¢–∏–ø**: –°—Å—ã–ª–∫–∞/–†–µ—Å—É—Ä—Å
- **–£—Ä–æ–≤–µ–Ω—å**: N (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π)
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$CURRENT_DATE\\`

#### üîó –ò–°–¢–û–ß–ù–ò–ö
- **URL**: 
- **–ê–≤—Ç–æ—Ä**: 
- **–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏**: 
- **–¢–∏–ø —Ä–µ—Å—É—Ä—Å–∞**: [–°—Ç–∞—Ç—å—è/–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è/–ö–Ω–∏–≥–∞/–í–∏–¥–µ–æ/–ö–æ–¥/–î—Ä—É–≥–æ–µ]

#### üìù –ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï

#### üí° –ö–õ–Æ–ß–ï–í–´–ï –ú–û–ú–ï–ù–¢–´
- 

#### üîó –°–í–Ø–ó–ò
- –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã: 

#### üìé –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
- 

---
–°–æ–∑–¥–∞–Ω–æ: $CURRENT_DATE
REFERENCE_EOF
}

create_meeting_document() {
    local doc_id="$1"
    local doc_name="$2"
    local tags_input="$3"
    
    local filename="${doc_id} - ${doc_name}.md"
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏
    TAGS_YAML="tags:"
    TAGS_YAML="$TAGS_YAML"$'\n'"  - \"meeting\""
    if [ -n "$tags_input" ]; then
        IFS=',' read -r -a tag_parts <<< "$tags_input"
        for tag in "${tag_parts[@]}"; do
            tag_clean=$(echo "$tag" | xargs | sed 's/^[@#]//')
            if [ -n "$tag_clean" ] && [ "$tag_clean" != "meeting" ]; then
                TAGS_YAML="$TAGS_YAML"$'\n'"  - \"$tag_clean\""
            fi
        done
    fi
    
    cat > "$filename" << MEETING_EOF
---
id: "$doc_id"
name: "$doc_name"
type: "meeting"
level: "N"
status: "planning"
$(echo "$TAGS_YAML")
created: "$CURRENT_DATE"
updated: "$CURRENT_DATE"
author: "$USER"
---

### $doc_name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$doc_id\\`
- **–¢–∏–ø**: –í—Å—Ç—Ä–µ—á–∞/–û–±—Å—É–∂–¥–µ–Ω–∏–µ
- **–£—Ä–æ–≤–µ–Ω—å**: N (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π)
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$CURRENT_DATE\\`

#### üìÖ –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –í–°–¢–†–ï–ß–ï
- **–î–∞—Ç–∞**: 
- **–í—Ä–µ–º—è**: 
- **–ú–µ—Å—Ç–æ/–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: 
- **–£—á–∞—Å—Ç–Ω–∏–∫–∏**: 

#### üéØ –¶–ï–õ–ò –í–°–¢–†–ï–ß–ò
- 

#### üìù –ü–û–í–ï–°–¢–ö–ê
1. 
2. 
3. 

#### ‚úÖ –†–ï–®–ï–ù–ò–Ø –ò –í–´–í–û–î–´
- 

#### üìã –ó–ê–î–ê–ß–ò
- [ ] 
- [ ] 
- [ ] 

#### üîó –°–í–Ø–ó–ê–ù–ù–´–ï –î–û–ö–£–ú–ï–ù–¢–´
- 

#### üìù –ó–ê–ú–ï–¢–ö–ò
- 

---
–°–æ–∑–¥–∞–Ω–æ: $CURRENT_DATE
MEETING_EOF
}

# –£–ª—É—á—à–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
simple_interactive_mode() {
    echo ""
    echo "=== –†–ï–ñ–ò–ú –°–û–ó–î–ê–ù–ò–Ø –î–û–ö–£–ú–ï–ù–¢–ê ==="
    echo "1 - –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1, –∫–æ—Ä–Ω–µ–≤–æ–π)"
    echo "2 - –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 2+)"
    echo "3 - –î–æ–∫—É–º–µ–Ω—Ç —Å —Ä—É—á–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º ID"
    echo "4 - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–∏–¥–µ–∏, —Å—Å—ã–ª–∫–∏, –≤—Å—Ç—Ä–µ—á–∏)"
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-4): " choice
    
    case $choice in
        1)
            echo ""
            echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
            read -r doc_name
            
            if [ -z "$doc_name" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º):"
            read -r tags_input
            
            create_document "auto" "" "$doc_name" "$tags_input" ""
            ;;
        
        2)
            echo ""
            echo "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00 –∏–ª–∏ 00-01):"
            read -r parent_id
            
            if [ -z "$parent_id" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: ID —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
            read -r doc_name
            
            if [ -z "$doc_name" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º):"
            read -r tags_input
            
            create_document "auto" "$parent_id" "$doc_name" "$tags_input" ""
            ;;
        
        3)
            echo ""
            echo "=== –†–£–ß–ù–û–ô –†–ï–ñ–ò–ú ID ==="
            echo "–í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤—Ä—É—á–Ω—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00, 00-01, 00-FF):"
            read -r manual_id
            
            if [ -z "$manual_id" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
            read -r doc_name
            
            if [ -z "$doc_name" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—è (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ ID —Å–æ–¥–µ—Ä–∂–∏—Ç parent):"
            read -r parent_id
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é:"
            read -r tags_input
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏–∑ –º–µ–Ω—é):"
            read -r doc_type_input
            
            create_document "manual" "$parent_id" "$doc_name" "$tags_input" "$doc_type_input" "$manual_id"
            ;;
        
        4)
            echo ""
            echo "=== –ù–ï–ò–ï–†–ê–†–•–ò–ß–ï–°–ö–ò–ô –î–û–ö–£–ú–ï–ù–¢ ==="
            echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
            read -r doc_name
            
            if [ -z "$doc_name" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º):"
            read -r tags_input
            
            create_document "non_hierarchical" "" "$doc_name" "$tags_input" "" ""
            ;;
        
        *)
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"
            return 1
            ;;
    esac
}

# –†–µ–∂–∏–º –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
if [ $# -gt 0 ]; then
    MODE="auto"
    PARENT_ID=""
    NAME=""
    TAGS=""
    TYPE=""
    MANUAL_ID=""
    
    while [[ $# -gt 0 ]]; do
        case $1 in
            --manual-id)
                MODE="manual"
                MANUAL_ID="$2"
                shift 2
                ;;
            --parent)
                PARENT_ID="$2"
                shift 2
                ;;
            --name)
                NAME="$2"
                shift 2
                ;;
            --tags)
                TAGS="$2"
                shift 2
                ;;
            --type)
                TYPE="$2"
                shift 2
                ;;
            --non-hierarchical|-n)
                MODE="non_hierarchical"
                shift
                ;;
            --interactive|-i)
                simple_interactive_mode
                exit 0
                ;;
            *)
                echo "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç: $1"
                echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:"
                echo "  ./uch-create-unified-fixed.sh --interactive (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)"
                echo "  ./uch-create-unified-fixed.sh --parent ID --name NAME [--tags TAGS] [--type TYPE]"
                echo "  ./uch-create-unified-fixed.sh --manual-id ID --name NAME [--parent ID] [--tags TAGS] [--type TYPE]"
                echo "  ./uch-create-unified-fixed.sh --non-hierarchical --name NAME [--tags TAGS]"
                exit 1
                ;;
        esac
    done
    
    if [ -z "$NAME" ]; then
        echo "‚ùå –û—à–∏–±–∫–∞: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å --name"
        exit 1
    fi
    
    if [ "$MODE" = "non_hierarchical" ]; then
        create_document "$MODE" "" "$NAME" "$TAGS" "" ""
    else
        create_document "$MODE" "$PARENT_ID" "$NAME" "$TAGS" "$TYPE" "$MANUAL_ID"
    fi
else
    # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    simple_interactive_mode
fi
```

## üìã –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é:

1. **–ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤** –ø–æ –≤—Å–µ–º —É—Ä–æ–≤–Ω—è–º (1-4 + –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ)
2. **–§—É–Ω–∫—Ü–∏—è `select_document_type_by_level()`** \- –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä —Ç–∏–ø–∞
3. **–¢–∏–ø "–∏–Ω—Ü–∏–¥–µ–Ω—Ç"** –¥–ª—è —É—Ä–æ–≤–Ω—è 3
4. **–ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã** \- –∏–¥–µ–∏, —Å—Å—ã–ª–∫–∏, –≤—Å—Ç—Ä–µ—á–∏ (–ø—Ä–µ—Ñ–∏–∫—Å—ã Z-, R-, M-)
5. **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ
6. **–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID** –¥–ª—è –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
7. **–ù–æ–≤—ã–π –ø—É–Ω–∫—Ç –º–µ–Ω—é** (4) –¥–ª—è –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
8. **–¢–∏–ø-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç** –¥–ª—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤, —Å–Ω–∞–ø—à–æ—Ç–æ–≤, –ø–æ–¥–∑–∞–¥–∞—á

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç**:

bash

```
# –°–æ–∑–¥–∞–¥–∏–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –∏ –∑–∞–ø—É—Å—Ç–∏–º –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
cp uch-create-unified-fixed.sh uch-create-unified-fixed-backup-$(date +%Y%m%d-%H%M%S).sh
mv uch-create-unified-fixed-v2.sh uch-create-unified-fixed.sh
chmod +x uch-create-unified-fixed.sh

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
./uch-create-unified-fixed.sh
```

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
2. **–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —à–∞–±–ª–æ–Ω—ã –≤ –ø–∞–ø–∫–µ `templates/`** –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ (–µ—Å–ª–∏ –∑–∞—Ö–æ—Ç–∏–º –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —à–∞–±–ª–æ–Ω—ã)

–•–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏?

kirillkravcov@MacBook-Pro-Kirill uch-docs %./uch-create-unified-fixed.sh === UCH CREATE UNIFIED FIXED: –ü–û–õ–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –¢–ò–ü–û–í ===./uch-create-unified-fixed.sh: line 246: syntax error near unexpected token \`;;'./uch-create-unified-fixed.sh: line 246: \`;;' kirillkravcov@MacBook-Pro-Kirill uch-docs % –î–µ–ª–∞–π –∫–æ–º–∞–Ω–¥—É —Ç–æ–ª—å–∫–æ –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏, –∞ –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–æ–≤—ã–π –∫–æ–¥

–ù–∞—à–µ–ª –æ—à–∏–±–∫—É - –ø—Ä–æ–ø—É—â–µ–Ω –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–π `"` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `find_free_child_id`. –í–æ—Ç –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

bash

```
# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—à–∏–±–∫—É –≤ —Å—Ç—Ä–æ–∫–µ 246
sed -i '246s/dec_id=$((16#$hex_id)/dec_id=$((16#$hex_id))/' uch-create-unified-fixed.sh

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
sed -n '240,250p' uch-create-unified-fixed.sh

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç
./uch-create-unified-fixed.sh
```

–ò–ª–∏, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é, –∏—Å–ø—Ä–∞–≤—å—Ç–µ —Å—Ç—Ä–æ–∫—É 246 —Å:

bash

```
dec_id=$((16#$hex_id)
```

–Ω–∞:

bash

```
dec_id=$((16#$hex_id))
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Å–∫—Ä–∏–ø—Ç–∞.

kirillkravcov@MacBook-Pro-Kirill uch-docs % # –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—à–∏–±–∫—É –≤ —Å—Ç—Ä–æ–∫–µ 246 sed -i '246s/dec\_id=$((16#$hex\_id)/dec\_id=$((16#$hex\_id))/' uch-create-unified-fixed.sh # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ sed -n '240,250p' uch-create-unified-fixed.sh # –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç./uch-create-unified-fixed.sh zsh: command not found: # sed: 1: "uch-create-unified-fixe...": invalid command code u zsh: command not found: # case $type\_choice in 1) echo "project";; 2) echo "line";; \*) echo "$default\_type";; esac;; 2) echo "" echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 2) ===" zsh: command not found: # === UCH CREATE UNIFIED FIXED: –ü–û–õ–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –¢–ò–ü–û–í ===./uch-create-unified-fixed.sh: line 246: syntax error near unexpected token \`;;'./uch-create-unified-fixed.sh: line 246: \`;;' kirillkravcov@MacBook-Pro-Kirill uch-docs %

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–æ—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º –≤—Ä—É—á–Ω—É—é:

bash

```
# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
cp uch-create-unified-fixed.sh uch-create-unified-fixed.sh.backup

# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É 246 (—É–±–∏—Ä–∞–µ–º –ª–∏—à–Ω—é—é –∑–∞–∫—Ä—ã–≤–∞—é—â—É—é —Å–∫–æ–±–∫—É)
sed -i '' '246s/dec_id=$((16#$hex_id)/dec_id=$((16#$hex_id))/' uch-create-unified-fixed.sh

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
sed -n '245,247p' uch-create-unified-fixed.sh
```

–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∞, –ø–æ–∫–∞–∂–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ 240-250 —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞:

bash

```
sed -n '240,250p' uch-create-unified-fixed.sh
```

–ù–∞ macOS `sed -i` —Ç—Ä–µ–±—É–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç. –ò—Å–ø–æ–ª—å–∑—É–µ–º `sed -i ''` –∏–ª–∏ –ø–æ–∫–∞–∂–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 246 —á—Ç–æ–±—ã —è —É–≤–∏–¥–µ–ª —Ç–æ—á–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É.

—Å—Ç—Ä–æ–∫–∞ 246;;

–ü–æ–∫–∞–∂–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ 240-250, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏:

bash

```
sed -n '240,250p' uch-create-unified-fixed.sh
```

–°—É–¥—è –ø–æ –≤—Å–µ–º—É, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–µ –≤ —Å—Ç—Ä–æ–∫–µ —Å `dec_id=$((16#$hex_id)`. –ù—É–∂–Ω–æ –≤–∏–¥–µ—Ç—å —Ç–æ—á–Ω—É—é —Å—Ç—Ä–æ–∫—É. –ü–æ–∫–∞–∂–∏—Ç–µ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ.

kirillkravcov@MacBook-Pro-Kirill uch-docs % sed -n '240,250p' uch-create-unified-fixed.sh case $type\_choice in 1) echo "project";; 2) echo "line";; \*) echo "$default\_type";; esac;; 2) echo "" echo "=== –í–´–ë–û–† –¢–ò–ü–ê –î–û–ö–£–ú–ï–ù–¢–ê (–£—Ä–æ–≤–µ–Ω—å 2) ===" kirillkravcov@MacBook-Pro-Kirill uch-docs %

–≠—Ç–æ –Ω–µ —Ç–∞ —Å—Ç—Ä–æ–∫–∞. –ü–æ–∫–∞–∂–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ 240-250 –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –¥–æ –º–æ–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π. –î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Ñ—É–Ω–∫—Ü–∏—é `find_free_child_id`:

bash

```
# –ò—â–µ–º —Ñ—É–Ω–∫—Ü–∏—é find_free_child_id –∏ —Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Å—Ç—Ä–æ–∫–∏ –≤–æ–∫—Ä—É–≥
grep -n "find_free_child_id" uch-create-unified-fixed.sh
sed -n '140,160p' uch-create-unified-fixed.sh
```

–ü—Ä–æ–±–ª–µ–º–∞ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ –≤ —Å—Ç—Ä–æ–∫–µ —Å `dec_id=$((16#$hex_id)`. –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ —ç—Ç—É —Å—Ç—Ä–æ–∫—É –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â—É—é –∑–∞–∫—Ä—ã–≤–∞—é—â—É—é —Å–∫–æ–±–∫—É:

bash

```
# –ò—â–µ–º —Å—Ç—Ä–æ–∫—É —Å dec_id=$((16#$hex_id)
grep -n "dec_id=\$((16#\$hex_id" uch-create-unified-fixed.sh

# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ —Ç–∞–∫–∏–µ —Å—Ç—Ä–æ–∫–∏
sed -i '' 's/dec_id=$((16#$hex_id)/dec_id=$((16#$hex_id))/g' uch-create-unified-fixed.sh
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–Ω–æ–≤–∞.

—Ç–∞–∫ —Å–∫—Ä–∏–ø—Ç –∂–µ —É —Ç–µ–±—è –µ—Å—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —è –¥–æ–±–∞–≤–ª—è–ª –≤–æ –≤–ª–æ–∂–µ–Ω–∏–∏

–í—ã –ø—Ä–∞–≤—ã! –í–∏–∂—É –ø—Ä–æ–±–ª–µ–º—É –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ. –í —Å—Ç—Ä–æ–∫–µ 55 –µ—Å—Ç—å –æ—à–∏–±–∫–∞:

–í –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ:

bash

```
dec_id=$((16#$hex_id)
```

–ù—É–∂–Ω–æ:

bash

```
dec_id=$((16#$hex_id))
```

–ò—Å–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥–æ–π:

bash

```
# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É 55 (–≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –¥–æ –º–æ–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)
sed -i '' '55s/dec_id=$((16#$hex_id)/dec_id=$((16#$hex_id))/' uch-create-unified-fixed.sh
```

–ï—Å–ª–∏ —Å—Ç—Ä–æ–∫–∞ 55 –Ω–µ —Ç–∞, –ø–æ–∫–∞–∂–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ 50-60:

bash

```
sed -n '50,60p' uch-create-unified-fixed.sh
```

–∏—Å–ø—Ä–∞–≤–∏–ª —ç—Ç—É —Å—Ç—Ä–æ–∫—É –≤ –Ω–æ–≤–æ–º —Å–∫—Ä–∏–ø—Ç–µ –∏ –≤—Å–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ! –°–º–æ—Ç—Ä–∏, —á—Ç–æ –≤–∞–∂–Ω–æ: 1. –°–∫—Ä–∏–ø—Ç –ø—Ä–æ—Å—Ç–æ –æ–≥—Ä–æ–º–Ω—ã–π! –Ω–∞ ~1000 —Å—Ç—Ä–æ–∫. –ù—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å –∫–∞–∫ –µ–≥–æ —Å–¥–µ–ª–∞—Ç—å –ª—É—á—à–µ –º–æ–∂–µ—Ç —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏ –æ–¥–∏–Ω –±—É–¥–µ—Ç —Å—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–æ–π. –¢—É—Ç —è –Ω–µ —É–≤–µ—Ä–µ–Ω –∫–∞–∫ —ç—Ç–æ –±—É–¥–µ—Ç –ª—É—á—à–µ. –ù—É–∂–Ω–æ –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ—à–µ–Ω–∏—è. 2. –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–Ω–∞—á–∞–ª–∞ –∏–¥–µ—Ç –≤—ã–±–æ—Ä 1-3 –∏ –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫–æ–π –ø—É–Ω–∫—Ç –∫ –∫–∞–∫–æ–º—É —Ç–∏–ø—É –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∞ –ø–æ—Ç–æ–º (–ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞) –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Ç–∏–ø–æ–≤: === –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê === –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-3, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: idea): ID: Z-20251228090302 –¢–∏–ø: === –í–´–ë–û–† –¢–ò–ü–ê –ù–ï–ò–ï–†–ê–†–•–ò–ß–ï–°–ö–û–ì–û –î–û–ö–£–ú–ï–ù–¢–ê === 1 - idea (–ò–¥–µ—è/–ö–æ–Ω—Ü–µ–ø—Ü–∏—è) 2 - reference (–°—Å—ã–ª–∫–∞/–†–µ—Å—É—Ä—Å) 3 - meeting (–í—Å—Ç—Ä–µ—á–∞/–û–±—Å—É–∂–¥–µ–Ω–∏–µ) –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —à–∞–≥–µ –≤—ã–±–æ—Ä–∞ —è –¥–æ–ª–∂–µ–Ω –ø–æ–Ω–∏–º–∞—Ç—å –∫–∞–∫–∏–µ –µ—Å—Ç—å —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∞ –Ω–µ –ø–æ—Ç–æ–º 3. –°–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ (—ç—Ç–æ —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–∏—Ç –∏ –ø—É–Ω–∫—Ç 1.)

–û—Ç–ª–∏—á–Ω–æ, —á—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–ª–∏! –î–∞–≤–∞–π—Ç–µ –ø–æ –ø–æ—Ä—è–¥–∫—É —Ä–µ—à–∏–º –ø—Ä–æ–±–ª–µ–º—ã:

## 1\. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–∫—Ä–∏–ø—Ç–∞

bash

```
# –°–æ–∑–¥–∞–µ–º –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
mkdir -p uch-scripts

# –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ –º–æ–¥—É–ª–∏:
# 1. –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç
# 2. –§—É–Ω–∫—Ü–∏–∏ —É—Ç–∏–ª–∏—Ç—ã
# 3. –§—É–Ω–∫—Ü–∏–∏ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–æ–≤
# 4. –§—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
# 5. –®–∞–±–ª–æ–Ω—ã (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ templates/)

cat > uch-scripts/main.sh << 'EOF'
#!/bin/bash
# –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç UCH Document System

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏
source "$SCRIPT_DIR/utils.sh"
source "$SCRIPT_DIR/types.sh"
source "$SCRIPT_DIR/create.sh"
source "$SCRIPT_DIR/templates.sh"

echo "=== UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ==="

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_main_menu() {
    echo ""
    echo "=== –†–ï–ñ–ò–ú –°–û–ó–î–ê–ù–ò–Ø –î–û–ö–£–ú–ï–ù–¢–ê ==="
    echo "1 - –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—Å –∞–≤—Ç–æ-ID)"
    echo "2 - –î–æ–∫—É–º–µ–Ω—Ç —Å —Ä—É—á–Ω—ã–º ID"
    echo "3 - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–∏–¥–µ–∏, —Å—Å—ã–ª–∫–∏, –≤—Å—Ç—Ä–µ—á–∏)"
    echo "4 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ)"
    echo "q - –í—ã—Ö–æ–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-4/q): " choice
    
    case $choice in
        1) create_hierarchical_auto ;;
        2) create_hierarchical_manual ;;
        3) create_non_hierarchical ;;
        4) create_batch ;;
        q|Q) echo "–í—ã—Ö–æ–¥"; exit 0 ;;
        *) echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"; show_main_menu ;;
    esac
}

# –ó–∞–ø—É—Å–∫
if [ $# -eq 0 ]; then
    show_main_menu
else
    # –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ —Ä–µ–∂–∏–º (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)
    source "$SCRIPT_DIR/cli.sh"
    handle_cli_arguments "$@"
fi
EOF

# –î–µ–ª–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x uch-scripts/main.sh
```

## 2\. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–æ–≤

–ü—Ä–æ–±–ª–µ–º–∞: —Ç–∏–ø—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ü–û–°–õ–ï –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞. –ù—É–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –î–û –≤—ã–±–æ—Ä–∞.

–°–æ–∑–¥–∞–µ–º —É–ª—É—á—à–µ–Ω–Ω–æ–µ –º–µ–Ω—é:

bash

```
cat > uch-scripts/types.sh << 'EOF'
#!/bin/bash
# –§—É–Ω–∫—Ü–∏–∏ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–∏–ø—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Ä–æ–≤–Ω—è –î–û –≤—ã–±–æ—Ä–∞
show_type_menu_for_level() {
    local level=$1
    
    case $level in
        1)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 1 ==="
            echo "project   - –ü—Ä–æ–µ–∫—Ç (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)"
            echo "line      - –õ–∏–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã)"
            echo ""
            ;;
        2)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 2 ==="
            echo "component - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã"
            echo "module    - –ú–æ–¥—É–ª—å/–±–ª–æ–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏"
            echo "epic      - –≠–ø–∏–∫ (–∫—Ä—É–ø–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)"
            echo ""
            ;;
        3)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3 ==="
            echo "task      - –ó–∞–¥–∞—á–∞ (—á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å)"
            echo "feature   - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (—á—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å)"
            echo "user_story- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è"
            echo "bug       - –û—à–∏–±–∫–∞/–±–∞–≥"
            echo "–∏–Ω—Ü–∏–¥–µ–Ω—Ç  - –ò–Ω—Ü–∏–¥–µ–Ω—Ç (–ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ä–∞–±–æ—Ç–µ)"
            echo "snapshot  - –°–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã"
            echo ""
            ;;
        4)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 4 ==="
            echo "solution  - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ"
            echo "subtask   - –ü–æ–¥–∑–∞–¥–∞—á–∞"
            echo "code_block- –ë–ª–æ–∫ –∫–æ–¥–∞"
            echo "decision  - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ"
            echo ""
            ;;
        N)
            echo ""
            echo "=== –¢–ò–ü–´ –ù–ï–ò–ï–†–ê–†–•–ò–ß–ï–°–ö–ò–• –î–û–ö–£–ú–ï–ù–¢–û–í ==="
            echo "idea      - –ò–¥–µ—è/–∫–æ–Ω—Ü–µ–ø—Ü–∏—è (Z-–ø—Ä–µ—Ñ–∏–∫—Å)"
            echo "reference - –°—Å—ã–ª–∫–∞/—Ä–µ—Å—É—Ä—Å (R-–ø—Ä–µ—Ñ–∏–∫—Å)"
            echo "meeting   - –í—Å—Ç—Ä–µ—á–∞/–æ–±—Å—É–∂–¥–µ–Ω–∏–µ (M-–ø—Ä–µ—Ñ–∏–∫—Å)"
            echo ""
            ;;
    esac
}

# –í—ã–±–æ—Ä —Ç–∏–ø–∞ —Å –ø–æ–∫–∞–∑–æ–º –º–µ–Ω—é –ü–ï–†–ï–î –≤—ã–±–æ—Ä–æ–º
select_type_with_menu() {
    local level=$1
    local default_type=$2
    
    # –°–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é
    show_type_menu_for_level "$level"
    
    # –ü–æ—Ç–æ–º –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –≤—ã–±–æ—Ä
    case $level in
        1)
            read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (project/line) [$default_type]: " type_input
            case "$type_input" in
                project|line) echo "$type_input" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        2)
            read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (component/module/epic) [$default_type]: " type_input
            case "$type_input" in
                component|module|epic) echo "$type_input" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        3)
            read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (task/feature/user_story/bug/–∏–Ω—Ü–∏–¥–µ–Ω—Ç/snapshot) [$default_type]: " type_input
            case "$type_input" in
                task|feature|user_story|bug|–∏–Ω—Ü–∏–¥–µ–Ω—Ç|snapshot) echo "$type_input" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        4)
            read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (solution/subtask/code_block/decision) [$default_type]: " type_input
            case "$type_input" in
                solution|subtask|code_block|decision) echo "$type_input" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        N)
            read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (idea/reference/meeting) [$default_type]: " type_input
            case "$type_input" in
                idea|reference|meeting) echo "$type_input" ;;
                *) echo "$default_type" ;;
            esac
            ;;
    esac
}
EOF
```

## 3\. –°–∏—Å—Ç–µ–º–∞ –≤–Ω–µ—à–Ω–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤

bash

```
# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è —à–∞–±–ª–æ–Ω–æ–≤
mkdir -p uch-scripts/templates

# –û—Å–Ω–æ–≤–Ω–æ–π —à–∞–±–ª–æ–Ω —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
cat > uch-scripts/templates/base.template << 'EOF'
---
id: "${ID}"
name: "${NAME}"
type: "${TYPE}"
level: ${LEVEL}
status: "${STATUS}"
${TAGS_YAML}
created: "${CREATED}"
updated: "${UPDATED}"
author: "${AUTHOR}"
---

### ${NAME}

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`${ID}\\`
- **–£—Ä–æ–≤–µ–Ω—å**: ${LEVEL}
${PARENT_INFO}

#### –û–ü–ò–°–ê–ù–ò–ï
${DESCRIPTION}

#### –ó–ê–î–ê–ß–ò
${TASKS}

#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
${CHILDREN_INFO}

---
–°–æ–∑–¥–∞–Ω–æ: ${CREATED}
${PARENT_FOOTER}
EOF

# –®–∞–±–ª–æ–Ω –¥–ª—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞
cat > uch-scripts/templates/incident.template << 'EOF'
---
id: "${ID}"
name: "${NAME}"
type: "–∏–Ω—Ü–∏–¥–µ–Ω—Ç"
level: ${LEVEL}
status: "active"
${TAGS_YAML}
created: "${CREATED}"
updated: "${UPDATED}"
author: "${AUTHOR}"
---

### ${NAME}

#### üìã –û–ü–ò–°–ê–ù–ò–ï –ò–ù–¶–ò–î–ï–ù–¢–ê

**–í—Ä–µ–º—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è**: ${DETECTION_TIME}
**–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å**: [üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π/üü° –í—ã—Å–æ–∫–∏–π/üü¢ –°—Ä–µ–¥–Ω–∏–π/‚ö™ –ù–∏–∑–∫–∏–π]
**–í–ª–∏—è–Ω–∏–µ**: 
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π**: 

#### üîç –ü–†–ò–ß–ò–ù–ê
- 

#### üõ†Ô∏è –†–ï–®–ï–ù–ò–ï
- 

#### ‚úÖ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï
- [ ] –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–æ —Ä–µ—à–µ–Ω–∏–µ
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ —Ä–µ—à–µ–Ω–∏–µ
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

---
–°–æ–∑–¥–∞–Ω–æ: ${CREATED}
${PARENT_FOOTER}
EOF

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —à–∞–±–ª–æ–Ω–æ–≤
cat > uch-scripts/templates.sh << 'EOF'
#!/bin/bash
# –†–∞–±–æ—Ç–∞ —Å —à–∞–±–ª–æ–Ω–∞–º–∏

load_template() {
    local template_name="$1"
    local template_file="uch-scripts/templates/${template_name}.template"
    
    if [ -f "$template_file" ]; then
        cat "$template_file"
    else
        echo "# ERROR: Template $template_name not found" >&2
        return 1
    fi
}

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ —à–∞–±–ª–æ–Ω–∞
generate_from_template() {
    local template_name="$1"
    local variables="$2"  # VAR1=value1,VAR2=value2
    
    local template_content=$(load_template "$template_name")
    
    # –ó–∞–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
    IFS=',' read -r -a var_array <<< "$variables"
    for var_pair in "${var_array[@]}"; do
        IFS='=' read -r var_name var_value <<< "$var_pair"
        template_content=$(echo "$template_content" | sed "s/\${$var_name}/$var_value/g")
    done
    
    echo "$template_content"
}
EOF
```

## 4\. –°–æ–∑–¥–∞–µ–º –ª–µ–≥–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç

bash

```
cat > uch-create.sh << 'EOF'
#!/bin/bash
# –õ–µ–≥–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç

SCRIPT_DIR="uch-scripts"

if [ ! -f "$SCRIPT_DIR/main.sh" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    echo "–ó–∞–ø—É—Å—Ç–∏—Ç–µ: ./setup-modular-system.sh –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏"
    exit 1
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É
exec "$SCRIPT_DIR/main.sh" "$@"
EOF

chmod +x uch-create.sh
```

## üöÄ –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è:

1. **–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É** (–∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ)
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –ø—Ä–æ—Å—Ç—ã–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏**
3. **–ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** –∏–∑ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
4. **–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏** –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π

–•–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å —Å —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏–ª–∏ —Å–Ω–∞—á–∞–ª–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –º–µ–Ω—é –≤ —Ç–µ–∫—É—â–µ–º —Å–∫—Ä–∏–ø—Ç–µ?

–Ω–∞—á–∏–Ω–∞–µ–º —Å —Å–æ–∑–¥–∞–Ω–∏—è –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–ø–æ –æ–¥–Ω–æ–º—É –¥–µ–π—Å—Ç–≤–∏—é) –∏ —Ç.–¥.

–û—Ç–ª–∏—á–Ω–æ! –ù–∞—á–Ω–µ–º –ø–æ—ç—Ç–∞–ø–Ω–æ.

## üöÄ –®–∞–≥ 1: –°–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

bash

```
# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
mkdir -p uch-scripts

# –°–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –¥–ª—è –Ω–∞—á–∞–ª–∞)
cat > uch-scripts/main.sh << 'EOF'
#!/bin/bash
# –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç UCH Document System - –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "=== UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ==="
echo "–í–µ—Ä—Å–∏—è: 0.1.0"
echo ""

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏ (–±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã –ø–æ–∑–∂–µ)
if [ -f "$SCRIPT_DIR/utils.sh" ]; then
    source "$SCRIPT_DIR/utils.sh"
fi

if [ -f "$SCRIPT_DIR/types.sh" ]; then
    source "$SCRIPT_DIR/types.sh"
fi

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_main_menu() {
    echo "=== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ==="
    echo "1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
    echo "2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º"
    echo "3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É"
    echo "q - –í—ã—Ö–æ–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3/q): " choice
    
    case $choice in
        1) 
            echo "‚ö†Ô∏è  –§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
            show_main_menu 
            ;;
        2)
            echo "üìö –°–ø—Ä–∞–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:"
            echo "- project, line (—É—Ä–æ–≤–µ–Ω—å 1)"
            echo "- component, module, epic (—É—Ä–æ–≤–µ–Ω—å 2)"
            echo "- task, feature, user_story, bug, –∏–Ω—Ü–∏–¥–µ–Ω—Ç, snapshot (—É—Ä–æ–≤–µ–Ω—å 3)"
            echo "- solution, subtask, code_block, decision (—É—Ä–æ–≤–µ–Ω—å 4)"
            echo "- idea, reference, meeting (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ)"
            echo ""
            show_main_menu
            ;;
        3)
            echo "‚úÖ –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞"
            echo "üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
            echo ""
            show_main_menu
            ;;
        q|Q) 
            echo "–í—ã—Ö–æ–¥" 
            exit 0 
            ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" 
            show_main_menu 
            ;;
    esac
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
if [ $# -eq 0 ]; then
    show_main_menu
else
    echo "‚ö†Ô∏è  –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"
    show_main_menu
fi
EOF

# –î–µ–ª–∞–µ–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x uch-scripts/main.sh

# –°–æ–∑–¥–∞–µ–º –ª–µ–≥–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
cat > uch-create-modular.sh << 'EOF'
#!/bin/bash
# –õ–µ–≥–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

echo "=== –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH ==="

if [ ! -f "uch-scripts/main.sh" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    echo "–°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–º–∞–Ω–¥–æ–π: ./setup-modular.sh"
    exit 1
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É
./uch-scripts/main.sh "$@"
EOF

chmod +x uch-create-modular.sh

echo "‚úÖ –®–∞–≥ 1 –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo "üìÅ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:"
echo "  - uch-scripts/main.sh (–≥–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç)"
echo "  - uch-create-modular.sh (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)"
echo ""
echo "–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ:"
echo "  ./uch-create-modular.sh"
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

bash

```
ls -la uch-scripts/
./uch-create-modular.sh
```

–ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–µ—Ä–µ–π–¥–µ–º –∫ —à–∞–≥—É 2.

–Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥–∞: kirillkravcov@MacBook-Pro-Kirill uch-scripts % >.... EOF chmod +x uch-create-modular.sh echo "‚úÖ –®–∞–≥ 1 –∑–∞–≤–µ—Ä—à–µ–Ω!" echo "üìÅ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:" echo " - uch-scripts/main.sh (–≥–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç)" echo " - uch-create-modular.sh (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)" echo "" echo "–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ:" echo "./uch-create-modular.sh" dquote>

–ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–∞–≤—ã—á–∫–∞–º–∏. –î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª—ã –ø–æ –æ–¥–Ω–æ–º—É:

bash

```
# 1. –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p uch-scripts

# 2. –°–æ–∑–¥–∞–µ–º –≥–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
cat > uch-scripts/main.sh << 'EOF'
#!/bin/bash
# –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç UCH Document System - –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "=== UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ==="
echo "–í–µ—Ä—Å–∏—è: 0.1.0"
echo ""

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_main_menu() {
    echo "=== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ==="
    echo "1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
    echo "2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º"
    echo "3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É"
    echo "q - –í—ã—Ö–æ–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3/q): " choice
    
    case $choice in
        1) 
            echo "‚ö†Ô∏è  –§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
            show_main_menu 
            ;;
        2)
            echo "üìö –°–ø—Ä–∞–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:"
            echo "- project, line (—É—Ä–æ–≤–µ–Ω—å 1)"
            echo "- component, module, epic (—É—Ä–æ–≤–µ–Ω—å 2)"
            echo "- task, feature, user_story, bug, –∏–Ω—Ü–∏–¥–µ–Ω—Ç, snapshot (—É—Ä–æ–≤–µ–Ω—å 3)"
            echo "- solution, subtask, code_block, decision (—É—Ä–æ–≤–µ–Ω—å 4)"
            echo "- idea, reference, meeting (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ)"
            echo ""
            show_main_menu
            ;;
        3)
            echo "‚úÖ –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞"
            echo "üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
            echo ""
            show_main_menu
            ;;
        q|Q) 
            echo "–í—ã—Ö–æ–¥" 
            exit 0 
            ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" 
            show_main_menu 
            ;;
    esac
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
if [ $# -eq 0 ]; then
    show_main_menu
else
    echo "‚ö†Ô∏è  –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"
    show_main_menu
fi
EOF

# 3. –î–µ–ª–∞–µ–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x uch-scripts/main.sh

# 4. –°–æ–∑–¥–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
cat > uch-create-modular.sh << 'EOF'
#!/bin/bash
# –õ–µ–≥–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

echo "=== –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH ==="

if [ ! -f "uch-scripts/main.sh" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    echo "–°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–º–∞–Ω–¥–æ–π: ./setup-modular.sh"
    exit 1
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É
./uch-scripts/main.sh "$@"
EOF

# 5. –î–µ–ª–∞–µ–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x uch-create-modular.sh

echo "‚úÖ –®–∞–≥ 1 –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo "üìÅ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:"
echo "  - uch-scripts/main.sh (–≥–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç)"
echo "  - uch-create-modular.sh (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)"
echo ""
echo "–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—É—Å—Ç–∏—Ç–µ:"
echo "  ./uch-create-modular.sh"
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

bash

```
ls -la uch-scripts/
./uch-create-modular.sh
```

kirillkravcov@MacBook-Pro-Kirill uch-scripts %./uch-create-modular.sh === –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH === ‚ùå –û—à–∏–±–∫–∞: –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–º–∞–Ω–¥–æ–π:./setup-modular.sh kirillkravcov@MacBook-Pro-Kirill uch-scripts %./setup-modular.sh zsh: no such file or directory:./setup-modular.sh kirillkravcov@MacBook-Pro-Kirill uch-scripts %

–í—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `uch-scripts`. –ù—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ:

bash

```
# –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
cd ..

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã
ls -la

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
./uch-create-modular.sh
```

–ò–ª–∏ –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –æ—Å—Ç–∞—Ç—å—Å—è –≤ `uch-scripts`, –∏—Å–ø—Ä–∞–≤–∏–º –ø—Ä–æ–≤–µ—Ä–∫—É –≤ —Å–∫—Ä–∏–ø—Ç–µ:

bash

```
# –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç —á—Ç–æ–±—ã –æ–Ω –∏—Å–∫–∞–ª —Ñ–∞–π–ª –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–µ–±—è
cat > uch-create-modular.sh << 'EOF'
#!/bin/bash
# –õ–µ–≥–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

echo "=== –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH ==="

SCRIPT_DIR="$(dirname "${BASH_SOURCE[0]}")"

if [ ! -f "$SCRIPT_DIR/uch-scripts/main.sh" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    echo "–¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $(pwd)"
    echo "–ò—â–µ–º: $SCRIPT_DIR/uch-scripts/main.sh"
    exit 1
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É
"$SCRIPT_DIR/uch-scripts/main.sh" "$@"
EOF

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–∑ –ª—é–±–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
./uch-create-modular.sh
```

–∏—Å–ø—Ä–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫—É, –Ω–æ kirillkravcov@MacBook-Pro-Kirill uch-scripts %./uch-create-modular.sh === –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH === ‚ùå –û—à–∏–±–∫–∞: –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: /Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/uch-scripts –ò—â–µ–º:./uch-scripts/main.sh kirillkravcov@MacBook-Pro-Kirill uch-scripts %

–ü—Ä–æ–±–ª–µ–º–∞ –≤ –ø—É—Ç–∏. –í—ã –≤ `uch-scripts`, –∞ —Å–∫—Ä–∏–ø—Ç –∏—â–µ—Ç `./uch-scripts/main.sh` (–µ—â–µ –æ–¥–∏–Ω —É—Ä–æ–≤–µ–Ω—å –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏).

–ò—Å–ø—Ä–∞–≤–∏–º:

bash

```
# –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ—Ä–Ω–µ uch-docs
cd /Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
pwd

# –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
cat > uch-create-modular.sh << 'EOF'
#!/bin/bash
# –õ–µ–≥–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

echo "=== –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH ==="

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

if [ ! -f "$SCRIPT_DIR/uch-scripts/main.sh" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    echo "–¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
    echo "–ò—â–µ–º: $SCRIPT_DIR/uch-scripts/main.sh"
    echo ""
    echo "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:"
    ls -la "$SCRIPT_DIR/" || echo "–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é"
    exit 1
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É
"$SCRIPT_DIR/uch-scripts/main.sh" "$@"
EOF

chmod +x uch-create-modular.sh

# –ó–∞–ø—É—Å–∫–∞–µ–º
./uch-create-modular.sh
```

–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∞, –ø–æ–∫–∞–∂–∏—Ç–µ:

bash

```
pwd
ls -la
ls -la uch-scripts/
```

kirillkravcov@MacBook-Pro-Kirill uch-scripts %./uch-create-modular.sh === –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH === ‚ùå –û—à–∏–±–∫–∞: –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: /Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/uch-scripts –ò—â–µ–º: /Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/uch-scripts/uch-scripts/main.sh –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: total 16 drwxr-xr-x 4 kirillkravcov staff 128 Dec 28 09:21. drwxr-xr-x 75 kirillkravcov staff 2400 Dec 28 09:15.. -rwxr-xr-x 1 kirillkravcov staff 1861 Dec 28 09:23 main.sh -rwxr-xr-x 1 kirillkravcov staff 735 Dec 28 09:29 uch-create-modular.sh kirillkravcov@MacBook-Pro-Kirill uch-scripts %

–ê, —Ç–µ–ø–µ—Ä—å –ø–æ–Ω—è—Ç–Ω–æ! –í—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `uch-scripts`, –∞ `main.sh` —É–∂–µ —Ç–∞–º. –°–∫—Ä–∏–ø—Ç –∏—â–µ—Ç `uch-scripts/uch-scripts/main.sh`.

–ò—Å–ø—Ä–∞–≤–∏–º –ø—Ä–æ–≤–µ—Ä–∫—É:

bash

```
# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ—Ä–Ω–µ uch-docs
cd /Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π —Å–∫—Ä–∏–ø—Ç –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ
rm uch-scripts/uch-create-modular.sh

# –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ –∫–æ—Ä–Ω–µ
cat > uch-create-modular.sh << 'EOF'
#!/bin/bash
# –õ–µ–≥–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

echo "=== –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH ==="

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –º—ã –≤ –∫–æ—Ä–Ω–µ uch-docs
if [ ! -f "$SCRIPT_DIR/uch-scripts/main.sh" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    echo "–¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
    echo "–û–∂–∏–¥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:"
    echo "  $SCRIPT_DIR/uch-create-modular.sh (—ç—Ç–æ—Ç —Ñ–∞–π–ª)"
    echo "  $SCRIPT_DIR/uch-scripts/main.sh"
    echo ""
    echo "–°–æ–∑–¥–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–º–∞–Ω–¥–æ–π:"
    echo "  mkdir -p uch-scripts"
    echo "  # ... —Å–æ–∑–¥–∞–π—Ç–µ main.sh"
    exit 1
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É
"$SCRIPT_DIR/uch-scripts/main.sh" "$@"
EOF

chmod +x uch-create-modular.sh

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
pwd
ls -la
./uch-create-modular.sh
```

–¢–µ–ø–µ—Ä—å —Å–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è. –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—Ä–æ–±–ª–µ–º—ã, —Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

bash

```
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
pwd
find . -name "*.sh" -type f | sort
```

–Ω–µ! –ø–æ–≥–æ–¥–∏. –°–∫—Ä–∏–ø—Ç—ã –ø—É—Å—Ç—å –æ—Å—Ç–∞—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ uch-scripts. —Ç—ã –∂–µ –≥–æ–æ–≤–æ—Ä–∏–ª –≤—ã—à–µ —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ uch-docs - uch-scripts –∏ –≤ –Ω–µ–º —Å–∫—Ä–∏–ø—Ç—ã main –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º —Ç–∞–∫:

1. **–í–°–ï —Å–∫—Ä–∏–ø—Ç—ã –≤ `uch-scripts/`** (—É–∂–µ –µ—Å—Ç—å)
2. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ—Ä–Ω–µ `uch-docs/`** –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∑–∞–ø—É—Å–∫–∞

bash

```
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –∫–æ—Ä–µ–Ω—å uch-docs
cd /Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ
pwd
ls -la uch-scripts/

# –°–æ–∑–¥–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –≤ –∫–æ—Ä–Ω–µ
cat > uch-create-modular.sh << 'EOF'
#!/bin/bash
# –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –∏–∑ –∫–æ—Ä–Ω—è uch-docs

echo "=== UCH Modular System ==="
echo "–ó–∞–ø—É—Å–∫ –∏–∑: $(pwd)"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –º–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
if [ ! -f "uch-scripts/main.sh" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    echo "–û–∂–∏–¥–∞–µ–º—ã–π —Ñ–∞–π–ª: uch-scripts/main.sh"
    echo ""
    echo "–¢–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:"
    ls -la uch-scripts/ 2>/dev/null || echo "–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è uch-scripts –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
    exit 1
fi

# –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–¥—É–ª—å–Ω—É—é —Å–∏—Å—Ç–µ–º—É
./uch-scripts/main.sh "$@"
EOF

chmod +x uch-create-modular.sh

# –ó–∞–ø—É—Å–∫–∞–µ–º
./uch-create-modular.sh
```

–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—Ä–æ–±–ª–µ–º—ã, –ø–æ–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

bash

```
pwd
tree -L 3
```

–∏–ª–∏

bash

```
pwd
find . -type f -name "*.sh" | sort
```

–ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª –≤ –∫–æ—Ä–µ–Ω—å kirillkravcov@MacBook-Pro-Kirill uch-docs %./uch-create-modular.sh === –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH === === UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê === –í–µ—Ä—Å–∏—è: 0.1.0 === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ === 1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç 2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º 3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É q - –í—ã—Ö–æ–¥ –í–∞—à –≤—ã–±–æ—Ä (1-3/q): 1 ‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ === 1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç 2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º 3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É q - –í—ã—Ö–æ–¥ –í–∞—à –≤—ã–±–æ—Ä (1-3/q):

–û—Ç–ª–∏—á–Ω–æ! –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç. ‚úÖ

## üöÄ –®–∞–≥ 2: –°–æ–∑–¥–∞–µ–º –º–æ–¥—É–ª—å —É—Ç–∏–ª–∏—Ç

bash

```
# –°–æ–∑–¥–∞–µ–º –º–æ–¥—É–ª—å —É—Ç–∏–ª–∏—Ç (—Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞)
cat > uch-scripts/utils.sh << 'EOF'
#!/bin/bash
# –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è UCH Document System

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
get_current_date() {
    date +%Y-%m-%d
}

# –ù–∞–π—Ç–∏ —Å–≤–æ–±–æ–¥–Ω—ã–π ID –¥–ª—è –º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç–∞
find_free_master_id() {
    existing_ids=$(find . -maxdepth 1 -name "*.md" -type f 2>/dev/null | \
        grep -E '^\./[0-9A-Fa-f]{2} - ' | \
        sed 's/^\.\///' | \
        cut -d' ' -f1 | \
        sort | uniq)
    
    if [ -z "$existing_ids" ]; then
        echo "00"
        return
    fi
    
    declare -a dec_ids=()
    for hex_id in $existing_ids; do
        dec_id=$((16#$hex_id))
        dec_ids+=($dec_id)
    done
    
    sorted_ids=($(printf "%d\n" "${dec_ids[@]}" | sort -n))
    expected=0
    for id in "${sorted_ids[@]}"; do
        if [ $id -gt $expected ]; then
            break
        fi
        expected=$((id + 1))
    done
    
    printf "%02X" $expected
}

# –ù–∞–π—Ç–∏ —Å–≤–æ–±–æ–¥–Ω—ã–π ID –¥–ª—è –¥–æ—á–µ—Ä–Ω–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
find_free_child_id() {
    local parent_id="$1"
    
    pattern="${parent_id}-[0-9A-Fa-f][0-9A-Fa-f]"
    
    existing_ids=$(find . -maxdepth 1 -name "*.md" -type f 2>/dev/null | \
        grep -E "^\./${pattern} - " | \
        sed 's/^\.\///' | \
        cut -d' ' -f1 | \
        grep -E "^${parent_id}-[0-9A-Fa-f]{2}$" | \
        awk -F"${parent_id}-" '{print $2}' | \
        sort | uniq)
    
    if [ -z "$existing_ids" ]; then
        echo "01"
        return
    fi
    
    declare -a dec_array=()
    for hex_id in $existing_ids; do
        dec_id=$((16#$hex_id))
        dec_array+=($dec_id)
    done
    
    sorted_array=($(printf "%d\n" "${dec_array[@]}" | sort -n))
    
    expected=1
    for id in "${sorted_array[@]}"; do
        if [ $id -gt $expected ]; then
            break
        fi
        expected=$((id + 1))
    done
    
    printf "%02X" $expected
}

# –û—á–∏—Å—Ç–∏—Ç—å –∏–º—è —Ä–æ–¥–∏—Ç–µ–ª—è –æ—Ç ID
clean_parent_name() {
    local full_filename="$1"
    
    filename=$(basename "$full_filename" .md)
    
    OLD_IFS="$IFS"
    IFS=" - "
    parts=($filename)
    IFS="$OLD_IFS"
    
    if [ ${#parts[@]} -eq 0 ]; then
        echo "$filename"
        return
    fi
    
    clean_parts=()
    for part in "${parts[@]}"; do
        if echo "$part" | grep -qE '^[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})*$'; then
            continue
        else
            clean_parts+=("$part")
        fi
    done
    
    if [ ${#clean_parts[@]} -eq 0 ]; then
        last_part="${parts[-1]}"
        echo "$last_part"
    else
        clean_name=$(IFS=" - "; echo "${clean_parts[*]}")
        echo "$clean_name"
    fi
}

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–≥–∏ –≤ YAML
format_tags_yaml() {
    local tags_input="$1"
    local type="$2"
    
    # –ù–∞—á–∏–Ω–∞–µ–º —Å —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    local yaml_tags="tags:"
    yaml_tags="$yaml_tags"$'\n'"  - \"$type\""
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ–≥–∏
    if [ -n "$tags_input" ]; then
        # –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–≥–∏ –ø–æ –∑–∞–ø—è—Ç—ã–º
        IFS=',' read -r -a tag_parts <<< "$tags_input"
        
        for tag in "${tag_parts[@]}"; do
            # –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –ø—Ä–µ—Ñ–∏–∫—Å—ã @/#
            tag_clean=$(echo "$tag" | xargs | sed 's/^[@#]//')
            if [ -n "$tag_clean" ] && [ "$tag_clean" != "$type" ]; then
                # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–µ–≥ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ç–∏–ø–∞
                yaml_tags="$yaml_tags"$'\n'"  - \"$tag_clean\""
            fi
        done
    fi
    
    echo "$yaml_tags"
}
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å utils.sh"
echo "üìã –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:"
ls -la uch-scripts/
```

–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–∏–º `main.sh` —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã:

bash

```
# –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ utils –≤ main.sh
cat > uch-scripts/main.sh << 'EOF'
#!/bin/bash
# –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç UCH Document System - –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "=== UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ==="
echo "–í–µ—Ä—Å–∏—è: 0.1.0"
echo ""

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏
if [ -f "$SCRIPT_DIR/utils.sh" ]; then
    source "$SCRIPT_DIR/utils.sh"
    echo "‚úÖ –ú–æ–¥—É–ª—å utils.sh –∑–∞–≥—Ä—É–∂–µ–Ω"
else
    echo "‚ö†Ô∏è  –ú–æ–¥—É–ª—å utils.sh –Ω–µ –Ω–∞–π–¥–µ–Ω"
fi

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_main_menu() {
    echo "=== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ==="
    echo "1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
    echo "2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º"
    echo "3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É"
    echo "4 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã"
    echo "q - –í—ã—Ö–æ–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-4/q): " choice
    
    case $choice in
        1) 
            echo "‚ö†Ô∏è  –§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
            show_main_menu 
            ;;
        2)
            echo "üìö –°–ø—Ä–∞–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:"
            echo "- project, line (—É—Ä–æ–≤–µ–Ω—å 1)"
            echo "- component, module, epic (—É—Ä–æ–≤–µ–Ω—å 2)"
            echo "- task, feature, user_story, bug, –∏–Ω—Ü–∏–¥–µ–Ω—Ç, snapshot (—É—Ä–æ–≤–µ–Ω—å 3)"
            echo "- solution, subtask, code_block, decision (—É—Ä–æ–≤–µ–Ω—å 4)"
            echo "- idea, reference, meeting (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ)"
            echo ""
            show_main_menu
            ;;
        3)
            echo "‚úÖ –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞"
            echo "üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
            echo "üìÖ –î–∞—Ç–∞: $(get_current_date 2>/dev/null || echo '—Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞')"
            echo ""
            show_main_menu
            ;;
        4)
            echo "üß™ –¢–µ—Å—Ç —É—Ç–∏–ª–∏—Ç:"
            echo "- –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: $(get_current_date 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –°–≤–æ–±–æ–¥–Ω—ã–π master ID: $(find_free_master_id 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo ""
            show_main_menu
            ;;
        q|Q) 
            echo "–í—ã—Ö–æ–¥" 
            exit 0 
            ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" 
            show_main_menu 
            ;;
    esac
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
if [ $# -eq 0 ]; then
    show_main_menu
else
    echo "‚ö†Ô∏è  –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"
    show_main_menu
fi
EOF

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh"
echo "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:"
./uch-create-modular.sh
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É, –≤—ã–±—Ä–∞–≤ –ø—É–Ω–∫—Ç 4 (—Ç–µ—Å—Ç —É—Ç–∏–ª–∏—Ç).

kirillkravcov@MacBook-Pro-Kirill uch-docs % >.... if \[ $# -eq 0 \]; then show\_main\_menu else echo "‚ö†Ô∏è –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è" show\_main\_menu fi EOF echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh" echo "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:"./uch-create-modular.sh zsh: command not found: # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç: === –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH === === UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê === –í–µ—Ä—Å–∏—è: 0.1.0 ‚úÖ –ú–æ–¥—É–ª—å utils.sh –∑–∞–≥—Ä—É–∂–µ–Ω === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ === 1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç 2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º 3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É 4 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã q - –í—ã—Ö–æ–¥ –í–∞—à –≤—ã–±–æ—Ä (1-4/q): 4 üß™ –¢–µ—Å—Ç —É—Ç–∏–ª–∏—Ç: - –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: 2025-12-28 - –°–≤–æ–±–æ–¥–Ω—ã–π master ID: 05 === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ === 1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç 2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º 3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É 4 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã q - –í—ã—Ö–æ–¥ –í–∞—à –≤—ã–±–æ—Ä (1-4/q):

–û—Ç–ª–∏—á–Ω–æ! –£—Ç–∏–ª–∏—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç. ‚úÖ

## üöÄ –®–∞–≥ 3: –°–æ–∑–¥–∞–µ–º –º–æ–¥—É–ª—å —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

bash

```
# –°–æ–∑–¥–∞–µ–º –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–∏–ø–∞–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
cat > uch-scripts/types.sh << 'EOF'
#!/bin/bash
# –ú–æ–¥—É–ª—å —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è UCH

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é —Ç–∏–ø–æ–≤ –¥–ª—è —É—Ä–æ–≤–Ω—è –î–û –≤—ã–±–æ—Ä–∞
show_type_info_for_level() {
    local level=$1
    
    case $level in
        1)
            echo ""
            echo "üìã –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 1:"
            echo "  project   - –ü—Ä–æ–µ–∫—Ç (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)"
            echo "  line      - –õ–∏–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã)"
            echo ""
            ;;
        2)
            echo ""
            echo "üìã –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 2:"
            echo "  component - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã"
            echo "  module    - –ú–æ–¥—É–ª—å/–±–ª–æ–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏"
            echo "  epic      - –≠–ø–∏–∫ (–∫—Ä—É–ø–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)"
            echo ""
            ;;
        3)
            echo ""
            echo "üìã –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3:"
            echo "  task      - –ó–∞–¥–∞—á–∞ (—á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å)"
            echo "  feature   - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (—á—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å)"
            echo "  user_story- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è"
            echo "  bug       - –û—à–∏–±–∫–∞/–±–∞–≥"
            echo "  –∏–Ω—Ü–∏–¥–µ–Ω—Ç  - –ò–Ω—Ü–∏–¥–µ–Ω—Ç (–ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ä–∞–±–æ—Ç–µ)"
            echo "  snapshot  - –°–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã"
            echo ""
            ;;
        4)
            echo ""
            echo "üìã –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 4:"
            echo "  solution  - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ"
            echo "  subtask   - –ü–æ–¥–∑–∞–¥–∞—á–∞"
            echo "  code_block- –ë–ª–æ–∫ –∫–æ–¥–∞"
            echo "  decision  - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ"
            echo ""
            ;;
        N)
            echo ""
            echo "üìã –¢–ò–ü–´ –ù–ï–ò–ï–†–ê–†–•–ò–ß–ï–°–ö–ò–• –î–û–ö–£–ú–ï–ù–¢–û–í:"
            echo "  idea      - –ò–¥–µ—è/–∫–æ–Ω—Ü–µ–ø—Ü–∏—è (Z-–ø—Ä–µ—Ñ–∏–∫—Å)"
            echo "  reference - –°—Å—ã–ª–∫–∞/—Ä–µ—Å—É—Ä—Å (R-–ø—Ä–µ—Ñ–∏–∫—Å)"
            echo "  meeting   - –í—Å—Ç—Ä–µ—á–∞/–æ–±—Å—É–∂–¥–µ–Ω–∏–µ (M-–ø—Ä–µ—Ñ–∏–∫—Å)"
            echo ""
            ;;
    esac
}

# –í—ã–±–æ—Ä —Ç–∏–ø–∞ —Å –ø–æ–∫–∞–∑–æ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
select_type_interactive() {
    local level=$1
    local default_type=$2
    
    # –°–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    show_type_info_for_level "$level"
    
    # –ü–æ—Ç–æ–º –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –≤—ã–±–æ—Ä
    case $level in
        1)
            read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (project/line) [$default_type]: " type_input
            case "$type_input" in
                project|line) echo "$type_input" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        2)
            read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (component/module/epic) [$default_type]: " type_input
            case "$type_input" in
                component|module|epic) echo "$type_input" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        3)
            read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (task/feature/user_story/bug/–∏–Ω—Ü–∏–¥–µ–Ω—Ç/snapshot) [$default_type]: " type_input
            case "$type_input" in
                task|feature|user_story|bug|–∏–Ω—Ü–∏–¥–µ–Ω—Ç|snapshot) echo "$type_input" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        4)
            read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (solution/subtask/code_block/decision) [$default_type]: " type_input
            case "$type_input" in
                solution|subtask|code_block|decision) echo "$type_input" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        N)
            read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (idea/reference/meeting) [$default_type]: " type_input
            case "$type_input" in
                idea|reference|meeting) echo "$type_input" ;;
                *) echo "$default_type" ;;
            esac
            ;;
        *)
            echo "$default_type"
            ;;
    esac
}

# –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É—Ä–æ–≤–Ω—è
get_default_type_for_level() {
    local level=$1
    
    case $level in
        1) echo "project" ;;
        2) echo "component" ;;
        3) echo "task" ;;
        4) echo "solution" ;;
        N) echo "idea" ;;
        *) echo "task" ;;
    esac
}

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ç–∏–ø–∞ –¥–ª—è —É—Ä–æ–≤–Ω—è
is_valid_type_for_level() {
    local type=$1
    local level=$2
    
    case $level in
        1) [[ "$type" =~ ^(project|line)$ ]] ;;
        2) [[ "$type" =~ ^(component|module|epic)$ ]] ;;
        3) [[ "$type" =~ ^(task|feature|user_story|bug|–∏–Ω—Ü–∏–¥–µ–Ω—Ç|snapshot)$ ]] ;;
        4) [[ "$type" =~ ^(solution|subtask|code_block|decision)$ ]] ;;
        N) [[ "$type" =~ ^(idea|reference|meeting)$ ]] ;;
        *) false ;;
    esac
}
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å types.sh"
```

–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–∏–º `main.sh` —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:

bash

```
# –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–¥–∏–º –±–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è
cat > uch-scripts/create.sh << 'EOF'
#!/bin/bash
# –ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)

# –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
create_document_basic() {
    echo ""
    echo "üìù –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê"
    echo ""
    
    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " name
    if [ -z "$name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    echo ""
    echo "–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
    echo "1 - –£—Ä–æ–≤–µ–Ω—å 1 (–º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç)"
    echo "2 - –£—Ä–æ–≤–µ–Ω—å 2 (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç/–º–æ–¥—É–ª—å)"
    echo "3 - –£—Ä–æ–≤–µ–Ω—å 3 (–∑–∞–¥–∞—á–∞/–∏–Ω—Ü–∏–¥–µ–Ω—Ç)"
    echo "4 - –£—Ä–æ–≤–µ–Ω—å 4 (—Ä–µ—à–µ–Ω–∏–µ/–ø–æ–¥–∑–∞–¥–∞—á–∞)"
    echo "N - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π (–∏–¥–µ—è/—Å—Å—ã–ª–∫–∞/–≤—Å—Ç—Ä–µ—á–∞)"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1/2/3/4/N): " level_choice
    
    case $level_choice in
        1) level=1 ;;
        2) level=2 ;;
        3) level=3 ;;
        4) level=4 ;;
        N|n) level="N" ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è"
            return 1
            ;;
    esac
    
    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    parent_id=""
    if [ "$level" != "N" ] && [ "$level" -gt 1 ]; then
        echo ""
        read -p "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00 –∏–ª–∏ 00-01): " parent_id
    fi
    
    # –í—ã–±–æ—Ä —Ç–∏–ø–∞
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        default_type=$(get_default_type_for_level "$level")
        type=$(select_type_interactive "$level" "$default_type")
    else
        type="document"
    fi
    
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): " tags
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–≤–æ–¥–∫—É
    echo ""
    echo "üìã –°–í–û–î–ö–ê:"
    echo "  –ù–∞–∑–≤–∞–Ω–∏–µ: $name"
    echo "  –£—Ä–æ–≤–µ–Ω—å: $level"
    echo "  –¢–∏–ø: $type"
    echo "  –†–æ–¥–∏—Ç–µ–ª—å: ${parent_id:-–Ω–µ—Ç}"
    echo "  –¢–µ–≥–∏: ${tags:-–Ω–µ—Ç}"
    echo ""
    
    read -p "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω (–∑–∞–≥–ª—É—à–∫–∞)"
    echo "   –í –±—É–¥—É—â–µ–º –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
create_batch_documents() {
    echo "‚ö†Ô∏è  –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ"
    echo "   –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö"
}
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å create.sh"
```

–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–∏–º `main.sh` —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏:

bash

```
cat > uch-scripts/main.sh << 'EOF'
#!/bin/bash
# –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç UCH Document System - –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "=== UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ==="
echo "–í–µ—Ä—Å–∏—è: 0.2.0"
echo ""

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏
MODULES_LOADED=0
if [ -f "$SCRIPT_DIR/utils.sh" ]; then
    source "$SCRIPT_DIR/utils.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/types.sh" ]; then
    source "$SCRIPT_DIR/types.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/create.sh" ]; then
    source "$SCRIPT_DIR/create.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

echo "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: $MODULES_LOADED"
echo ""

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_main_menu() {
    echo "=== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ==="
    echo "1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
    echo "2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º"
    echo "3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É"
    echo "4 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã"
    echo "5 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç)"
    echo "q - –í—ã—Ö–æ–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-5/q): " choice
    
    case $choice in
        1) 
            create_document_basic
            echo ""
            show_main_menu 
            ;;
        2)
            echo "üìö –°–ü–†–ê–í–ö–ê –ü–û –¢–ò–ü–ê–ú –î–û–ö–£–ú–ï–ù–¢–û–í:"
            echo ""
            if [ -f "$SCRIPT_DIR/types.sh" ]; then
                for level in 1 2 3 4 N; do
                    show_type_info_for_level "$level"
                done
            else
                echo "‚ö†Ô∏è  –ú–æ–¥—É–ª—å types.sh –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω"
            fi
            echo ""
            show_main_menu
            ;;
        3)
            echo "‚úÖ –°–ò–°–¢–ï–ú–ê:"
            echo "üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
            echo "üìÖ –î–∞—Ç–∞: $(get_current_date 2>/dev/null || echo 'N/A')"
            echo "üì¶ –ú–æ–¥—É–ª–µ–π: $MODULES_LOADED"
            echo ""
            show_main_menu
            ;;
        4)
            echo "üß™ –¢–ï–°–¢ –£–¢–ò–õ–ò–¢:"
            echo "- –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: $(get_current_date 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –°–≤–æ–±–æ–¥–Ω—ã–π master ID: $(find_free_master_id 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –¢–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É—Ä–æ–≤–Ω—è 3: $(get_default_type_for_level 3 2>/dev/null || echo 'N/A')"
            echo ""
            show_main_menu
            ;;
        5)
            create_batch_documents
            echo ""
            show_main_menu
            ;;
        q|Q) 
            echo "–í—ã—Ö–æ–¥" 
            exit 0 
            ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" 
            show_main_menu 
            ;;
    esac
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
if [ $# -eq 0 ]; then
    show_main_menu
else
    echo "‚ö†Ô∏è  –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"
    show_main_menu
fi
EOF

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh"
echo "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:"
./uch-create-modular.sh
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É:

1. –í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç 1 - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç 2 - —Å–ø—Ä–∞–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç 4 - —Ç–µ—Å—Ç —É—Ç–∏–ª–∏—Ç

kirillkravcov@MacBook-Pro-Kirill uch-docs % >.... if \[ $# -eq 0 \]; then show\_main\_menu else echo "‚ö†Ô∏è –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è" show\_main\_menu fi EOF echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh" echo "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:"./uch-create-modular.sh ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏: === –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH === === UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê === –í–µ—Ä—Å–∏—è: 0.2.0 ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: 3 === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ === 1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç 2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º 3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É 4 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã 5 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç) q - –í—ã—Ö–æ–¥ –í–∞—à –≤—ã–±–æ—Ä (1-5/q): 2 üìö –°–ü–†–ê–í–ö–ê –ü–û –¢–ò–ü–ê–ú –î–û–ö–£–ú–ï–ù–¢–û–í: üìã –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 1: project - –ü—Ä–æ–µ–∫—Ç (–æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) line - –õ–∏–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è (–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã) üìã –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 2: component - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã module - –ú–æ–¥—É–ª—å/–±–ª–æ–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ epic - –≠–ø–∏–∫ (–∫—Ä—É–ø–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å) üìã –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3: task - –ó–∞–¥–∞—á–∞ (—á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å) feature - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (—á—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å) user\_story- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è bug - –û—à–∏–±–∫–∞/–±–∞–≥ –∏–Ω—Ü–∏–¥–µ–Ω—Ç - –ò–Ω—Ü–∏–¥–µ–Ω—Ç (–ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ä–∞–±–æ—Ç–µ) snapshot - –°–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã üìã –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 4: solution - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ subtask - –ü–æ–¥–∑–∞–¥–∞—á–∞ code\_block- –ë–ª–æ–∫ –∫–æ–¥–∞ decision - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ üìã –¢–ò–ü–´ –ù–ï–ò–ï–†–ê–†–•–ò–ß–ï–°–ö–ò–• –î–û–ö–£–ú–ï–ù–¢–û–í: idea - –ò–¥–µ—è/–∫–æ–Ω—Ü–µ–ø—Ü–∏—è (Z-–ø—Ä–µ—Ñ–∏–∫—Å) reference - –°—Å—ã–ª–∫–∞/—Ä–µ—Å—É—Ä—Å (R-–ø—Ä–µ—Ñ–∏–∫—Å) meeting - –í—Å—Ç—Ä–µ—á–∞/–æ–±—Å—É–∂–¥–µ–Ω–∏–µ (M-–ø—Ä–µ—Ñ–∏–∫—Å) === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ === 1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç 2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º 3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É 4 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã 5 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç) q - –í—ã—Ö–æ–¥ –í–∞—à –≤—ã–±–æ—Ä (1-5/q): 1 üìù –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: –¢–µ—Å—Ç –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –¥–æ–∫—É–º–µ–Ω—Ç–∞: 1 - –£—Ä–æ–≤–µ–Ω—å 1 (–º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç) 2 - –£—Ä–æ–≤–µ–Ω—å 2 (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç/–º–æ–¥—É–ª—å) 3 - –£—Ä–æ–≤–µ–Ω—å 3 (–∑–∞–¥–∞—á–∞/–∏–Ω—Ü–∏–¥–µ–Ω—Ç) 4 - –£—Ä–æ–≤–µ–Ω—å 4 (—Ä–µ—à–µ–Ω–∏–µ/–ø–æ–¥–∑–∞–¥–∞—á–∞) N - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π (–∏–¥–µ—è/—Å—Å—ã–ª–∫–∞/–≤—Å—Ç—Ä–µ—á–∞) –í–∞—à –≤—ã–±–æ—Ä (1/2/3/4/N): 3 –í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00 –∏–ª–∏ 00-01): 00-03 –í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (task/feature/user\_story/bug/–∏–Ω—Ü–∏–¥–µ–Ω—Ç/snapshot) \[task\]: 1 –í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): üìã –°–í–û–î–ö–ê: –ù–∞–∑–≤–∞–Ω–∏–µ: –¢–µ—Å—Ç –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –£—Ä–æ–≤–µ–Ω—å: 3 –¢–∏–ø: üìã –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3: task - –ó–∞–¥–∞—á–∞ (—á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å) feature - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (—á—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å) user\_story- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∏—Å—Ç–æ—Ä–∏—è bug - –û—à–∏–±–∫–∞/–±–∞–≥ –∏–Ω—Ü–∏–¥–µ–Ω—Ç - –ò–Ω—Ü–∏–¥–µ–Ω—Ç (–ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ä–∞–±–æ—Ç–µ) snapshot - –°–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã task –†–æ–¥–∏—Ç–µ–ª—å: 00-03 –¢–µ–≥–∏: –Ω–µ—Ç –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n): y ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω (–∑–∞–≥–ª—É—à–∫–∞) –í –±—É–¥—É—â–µ–º –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ === 1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç 2 - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º 3 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É 4 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã 5 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç) q - –í—ã—Ö–æ–¥ –í–∞—à –≤—ã–±–æ—Ä (1-5/q): 1. –°–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º —É–±—Ä–∞—Ç—å –∏–∑ –º–µ–Ω—é 2. –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–æ—â–µ - (–∫–∞–∫ –≤ –ø–µ—Ä–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö —Å–∫—Ä–∏–ø—Ç–∞): –ü—Ä–∏–º–µ—Ä: 1 - –£—Ä–æ–≤–µ–Ω—å 1 (–º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç) 2 - –£—Ä–æ–≤–µ–Ω—å 2, (2+) N - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π 3. –°–Ω–∞—á–∞–ª–∞ –≤—ã–±–∏—Ä–∞–µ–º —É—Ä–æ–≤–µ–Ω—å, –ø–æ—Ç–æ–º —Ä–æ–¥–∏—Ç–µ–ª—è, –ø–æ—Ç–æ–º —É–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ 4. –¥–ª—è —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç–∞–∫–æ–µ –∂–µ –º–µ–Ω—é –∫–∞–∫ –∏ –¥–ª—è —É—Ä–æ–≤–Ω–µ–π: –ù—É–∂–Ω–æ —Ç–∞–∫: 1 - task 2 - feature 3 - bug 4 - snapshot –¢–∞–∫ –Ω–µ –Ω—É–∂–Ω–æ: –í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø (task/feature/user\_story/bug/–∏–Ω—Ü–∏–¥–µ–Ω—Ç/snapshot) \[task\]: 1 –ò–Ω—Ü–∏–¥–µ–Ω—Ç –∏ user\_story —É–±—Ä–∞—Ç—å

–û—Ç–ª–∏—á–Ω–æ! –í–∏–∂—É –ø—Ä–æ–±–ª–µ–º—É: –∫–æ–≥–¥–∞ —è –≤–≤–æ–∂—É "1" –¥–ª—è —Ç–∏–ø–∞, —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç "1" –∫–∞–∫ —Å—Ç—Ä–æ–∫—É, –∞ –Ω–µ –≤—ã–±–∏—Ä–∞–µ—Ç "task". –ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—ã–±–æ—Ä –ø–æ —Ü–∏—Ñ—Ä–∞–º, –∫–∞–∫ –≤—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∑–∞–º–µ—Ç–∏–ª–∏.

## üöÄ –®–∞–≥ 4: –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –º–µ–Ω—é –≤—ã–±–æ—Ä–∞

bash

```
# –°–Ω–∞—á–∞–ª–∞ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º types.sh –¥–ª—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –≤—ã–±–æ—Ä–∞
cat > uch-scripts/types.sh << 'EOF'
#!/bin/bash
# –ú–æ–¥—É–ª—å —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è UCH - —Å —Ü–∏—Ñ—Ä–æ–≤—ã–º –≤—ã–±–æ—Ä–æ–º

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é —Ç–∏–ø–æ–≤ –¥–ª—è —É—Ä–æ–≤–Ω—è
show_type_menu_for_level() {
    local level=$1
    
    case $level in
        1)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 1 ==="
            echo "1 - project (–ü—Ä–æ–µ–∫—Ç)"
            echo "2 - line (–õ–∏–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è)"
            echo ""
            ;;
        2)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 2 ==="
            echo "1 - component (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã)"
            echo "2 - module (–ú–æ–¥—É–ª—å/–±–ª–æ–∫)"
            echo "3 - epic (–≠–ø–∏–∫)"
            echo ""
            ;;
        3)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3 ==="
            echo "1 - task (–ó–∞–¥–∞—á–∞)"
            echo "2 - feature (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)"
            echo "3 - bug (–û—à–∏–±–∫–∞/–±–∞–≥)"
            echo "4 - snapshot (–°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã)"
            echo "5 - –∏–Ω—Ü–∏–¥–µ–Ω—Ç (–ò–Ω—Ü–∏–¥–µ–Ω—Ç)"
            echo ""
            ;;
        4)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 4 ==="
            echo "1 - solution (–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ)"
            echo "2 - subtask (–ü–æ–¥–∑–∞–¥–∞—á–∞)"
            echo "3 - code_block (–ë–ª–æ–∫ –∫–æ–¥–∞)"
            echo "4 - decision (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)"
            echo ""
            ;;
        N)
            echo ""
            echo "=== –¢–ò–ü–´ –ù–ï–ò–ï–†–ê–†–•–ò–ß–ï–°–ö–ò–• –î–û–ö–£–ú–ï–ù–¢–û–í ==="
            echo "1 - idea (–ò–¥–µ—è/–∫–æ–Ω—Ü–µ–ø—Ü–∏—è)"
            echo "2 - reference (–°—Å—ã–ª–∫–∞/—Ä–µ—Å—É—Ä—Å)"
            echo "3 - meeting (–í—Å—Ç—Ä–µ—á–∞/–æ–±—Å—É–∂–¥–µ–Ω–∏–µ)"
            echo ""
            ;;
    esac
}

# –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–æ —Ü–∏—Ñ—Ä–µ
select_type_by_number() {
    local level=$1
    
    case $level in
        1)
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-2) [1]: " type_choice
            case $type_choice in
                1|"") echo "project" ;;
                2) echo "line" ;;
                *) echo "project" ;;
            esac
            ;;
        2)
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-3) [1]: " type_choice
            case $type_choice in
                1|"") echo "component" ;;
                2) echo "module" ;;
                3) echo "epic" ;;
                *) echo "component" ;;
            esac
            ;;
        3)
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-5) [1]: " type_choice
            case $type_choice in
                1|"") echo "task" ;;
                2) echo "feature" ;;
                3) echo "bug" ;;
                4) echo "snapshot" ;;
                5) echo "–∏–Ω—Ü–∏–¥–µ–Ω—Ç" ;;
                *) echo "task" ;;
            esac
            ;;
        4)
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-4) [1]: " type_choice
            case $type_choice in
                1|"") echo "solution" ;;
                2) echo "subtask" ;;
                3) echo "code_block" ;;
                4) echo "decision" ;;
                *) echo "solution" ;;
            esac
            ;;
        N)
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-3) [1]: " type_choice
            case $type_choice in
                1|"") echo "idea" ;;
                2) echo "reference" ;;
                3) echo "meeting" ;;
                *) echo "idea" ;;
            esac
            ;;
    esac
}

# –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É—Ä–æ–≤–Ω—è
get_default_type_for_level() {
    local level=$1
    
    case $level in
        1) echo "project" ;;
        2) echo "component" ;;
        3) echo "task" ;;
        4) echo "solution" ;;
        N) echo "idea" ;;
        *) echo "task" ;;
    esac
}
EOF

echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω types.sh (—Ü–∏—Ñ—Ä–æ–≤–æ–π –≤—ã–±–æ—Ä)"
```

–¢–µ–ø–µ—Ä—å –∏—Å–ø—Ä–∞–≤–ª—è–µ–º create.sh –¥–ª—è –Ω–æ–≤–æ–≥–æ workflow:

bash

```
cat > uch-scripts/create.sh << 'EOF'
#!/bin/bash
# –ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ - —É–ª—É—á—à–µ–Ω–Ω—ã–π workflow

# –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
create_document_improved() {
    echo ""
    echo "üìù –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê"
    echo ""
    
    # 1. –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è (–∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ)
    echo "=== –í–´–ë–û–† –£–†–û–í–ù–Ø –î–û–ö–£–ú–ï–ù–¢–ê ==="
    echo "1 - –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1, –∫–æ—Ä–Ω–µ–≤–æ–π)"
    echo "2 - –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 2+)"
    echo "3 - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–∏–¥–µ–∏, —Å—Å—ã–ª–∫–∏, –≤—Å—Ç—Ä–µ—á–∏)"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3): " level_choice
    
    local level=""
    local parent_id=""
    
    case $level_choice in
        1)
            level=1
            echo "–í—ã–±—Ä–∞–Ω: –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1)"
            ;;
        2)
            # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç - –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è
            echo ""
            read -p "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00 –∏–ª–∏ 00-01): " parent_id
            
            if [ -z "$parent_id" ]; then
                echo "‚ùå ID —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ —Ä–æ–¥–∏—Ç–µ–ª—é
            parent_level=$(echo "$parent_id" | tr -cd '-' | wc -c)
            level=$((parent_level + 2))
            echo "–û–ø—Ä–µ–¥–µ–ª–µ–Ω —É—Ä–æ–≤–µ–Ω—å: $level (—Ä–æ–¥–∏—Ç–µ–ª—å: $parent_id)"
            ;;
        3)
            level="N"
            echo "–í—ã–±—Ä–∞–Ω: –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç"
            ;;
        *)
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"
            return 1
            ;;
    esac
    
    # 2. –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " name
    if [ -z "$name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # 3. –í—ã–±–æ—Ä —Ç–∏–ø–∞ (—Å —Ü–∏—Ñ—Ä–æ–≤—ã–º –º–µ–Ω—é)
    echo ""
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    #
```

–Ø –∂–µ –Ω–∞–ø–∏—Å–∞–ª, —á—Ç–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç —É–±—Ä–∞—Ç—å –∏–∑ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é

–ü–æ–Ω—è–ª! –ò—Å–ø—Ä–∞–≤–ª—è—é - —É–±–∏—Ä–∞—é –∏–Ω—Ü–∏–¥–µ–Ω—Ç –∏ user\_story:

bash

```
# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º types.sh - —É–±–∏—Ä–∞–µ–º –∏–Ω—Ü–∏–¥–µ–Ω—Ç –∏ user_story
cat > uch-scripts/types.sh << 'EOF'
#!/bin/bash
# –ú–æ–¥—É–ª—å —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è UCH - —Å —Ü–∏—Ñ—Ä–æ–≤—ã–º –≤—ã–±–æ—Ä–æ–º

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é —Ç–∏–ø–æ–≤ –¥–ª—è —É—Ä–æ–≤–Ω—è
show_type_menu_for_level() {
    local level=$1
    
    case $level in
        1)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 1 ==="
            echo "1 - project (–ü—Ä–æ–µ–∫—Ç)"
            echo "2 - line (–õ–∏–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è)"
            echo ""
            ;;
        2)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 2 ==="
            echo "1 - component (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–∏—Å—Ç–µ–º—ã)"
            echo "2 - module (–ú–æ–¥—É–ª—å/–±–ª–æ–∫)"
            echo "3 - epic (–≠–ø–∏–∫)"
            echo ""
            ;;
        3)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3 ==="
            echo "1 - task (–ó–∞–¥–∞—á–∞)"
            echo "2 - feature (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)"
            echo "3 - bug (–û—à–∏–±–∫–∞/–±–∞–≥)"
            echo "4 - snapshot (–°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã)"
            # –£–±—Ä–∞–ª–∏: –∏–Ω—Ü–∏–¥–µ–Ω—Ç, user_story
            echo ""
            ;;
        4)
            echo ""
            echo "=== –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 4 ==="
            echo "1 - solution (–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ)"
            echo "2 - subtask (–ü–æ–¥–∑–∞–¥–∞—á–∞)"
            echo "3 - code_block (–ë–ª–æ–∫ –∫–æ–¥–∞)"
            echo "4 - decision (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)"
            echo ""
            ;;
        N)
            echo ""
            echo "=== –¢–ò–ü–´ –ù–ï–ò–ï–†–ê–†–•–ò–ß–ï–°–ö–ò–• –î–û–ö–£–ú–ï–ù–¢–û–í ==="
            echo "1 - idea (–ò–¥–µ—è/–∫–æ–Ω—Ü–µ–ø—Ü–∏—è)"
            echo "2 - reference (–°—Å—ã–ª–∫–∞/—Ä–µ—Å—É—Ä—Å)"
            echo "3 - meeting (–í—Å—Ç—Ä–µ—á–∞/–æ–±—Å—É–∂–¥–µ–Ω–∏–µ)"
            echo ""
            ;;
    esac
}

# –í—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–æ —Ü–∏—Ñ—Ä–µ
select_type_by_number() {
    local level=$1
    
    case $level in
        1)
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-2) [1]: " type_choice
            case $type_choice in
                1|"") echo "project" ;;
                2) echo "line" ;;
                *) echo "project" ;;
            esac
            ;;
        2)
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-3) [1]: " type_choice
            case $type_choice in
                1|"") echo "component" ;;
                2) echo "module" ;;
                3) echo "epic" ;;
                *) echo "component" ;;
            esac
            ;;
        3)
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-4) [1]: " type_choice
            case $type_choice in
                1|"") echo "task" ;;
                2) echo "feature" ;;
                3) echo "bug" ;;
                4) echo "snapshot" ;;
                # –£–±—Ä–∞–ª–∏: –∏–Ω—Ü–∏–¥–µ–Ω—Ç, user_story
                *) echo "task" ;;
            esac
            ;;
        4)
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-4) [1]: " type_choice
            case $type_choice in
                1|"") echo "solution" ;;
                2) echo "subtask" ;;
                3) echo "code_block" ;;
                4) echo "decision" ;;
                *) echo "solution" ;;
            esac
            ;;
        N)
            read -p "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-3) [1]: " type_choice
            case $type_choice in
                1|"") echo "idea" ;;
                2) echo "reference" ;;
                3) echo "meeting" ;;
                *) echo "idea" ;;
            esac
            ;;
    esac
}

# –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É—Ä–æ–≤–Ω—è
get_default_type_for_level() {
    local level=$1
    
    case $level in
        1) echo "project" ;;
        2) echo "component" ;;
        3) echo "task" ;;
        4) echo "solution" ;;
        N) echo "idea" ;;
        *) echo "task" ;;
    esac
}
EOF

echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω types.sh (—É–±—Ä–∞–Ω –∏–Ω—Ü–∏–¥–µ–Ω—Ç –∏ user_story)"
```

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º create.sh:

bash

```
cat > uch-scripts/create.sh << 'EOF'
#!/bin/bash
# –ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ - —É–ª—É—á—à–µ–Ω–Ω—ã–π workflow

# –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
create_document_improved() {
    echo ""
    echo "üìù –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê"
    echo ""
    
    # 1. –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è (–∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ)
    echo "=== –í–´–ë–û–† –£–†–û–í–ù–Ø –î–û–ö–£–ú–ï–ù–¢–ê ==="
    echo "1 - –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1, –∫–æ—Ä–Ω–µ–≤–æ–π)"
    echo "2 - –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 2+)"
    echo "3 - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–∏–¥–µ–∏, —Å—Å—ã–ª–∫–∏, –≤—Å—Ç—Ä–µ—á–∏)"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3): " level_choice
    
    local level=""
    local parent_id=""
    
    case $level_choice in
        1)
            level=1
            echo "–í—ã–±—Ä–∞–Ω: –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1)"
            ;;
        2)
            # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç - –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è
            echo ""
            read -p "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00 –∏–ª–∏ 00-01): " parent_id
            
            if [ -z "$parent_id" ]; then
                echo "‚ùå ID —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ —Ä–æ–¥–∏—Ç–µ–ª—é
            parent_level=$(echo "$parent_id" | tr -cd '-' | wc -c)
            level=$((parent_level + 2))
            echo "–û–ø—Ä–µ–¥–µ–ª–µ–Ω —É—Ä–æ–≤–µ–Ω—å: $level (—Ä–æ–¥–∏—Ç–µ–ª—å: $parent_id)"
            ;;
        3)
            level="N"
            echo "–í—ã–±—Ä–∞–Ω: –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç"
            ;;
        *)
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"
            return 1
            ;;
    esac
    
    # 2. –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " name
    if [ -z "$name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # 3. –í—ã–±–æ—Ä —Ç–∏–ø–∞ (—Å —Ü–∏—Ñ—Ä–æ–≤—ã–º –º–µ–Ω—é)
    echo ""
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    # 4. –¢–µ–≥–∏
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): " tags
    
    # 5. –°–≤–æ–¥–∫–∞
    echo ""
    echo "üìã –°–í–û–î–ö–ê:"
    echo "  –ù–∞–∑–≤–∞–Ω–∏–µ: $name"
    echo "  –£—Ä–æ–≤–µ–Ω—å: $level"
    echo "  –¢–∏–ø: $type"
    if [ -n "$parent_id" ]; then
        echo "  –†–æ–¥–∏—Ç–µ–ª—å: $parent_id"
    fi
    echo "  –¢–µ–≥–∏: ${tags:-–Ω–µ—Ç}"
    echo ""
    
    read -p "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 6. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–ø–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞)
    echo ""
    echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω (–∑–∞–≥–ª—É—à–∫–∞)"
    echo "   ID: (–±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω)"
    echo "   –§–∞–π–ª: (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω)"
    echo ""
    echo "üìù –í —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ –¥–æ–±–∞–≤–∏–º —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
create_batch_documents() {
    echo "‚ö†Ô∏è  –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ"
}
EOF

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω create.sh"
```

–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–∏–º main.sh —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ —Ç–∏–ø–∞–º –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é:

bash

```
cat > uch-scripts/main.sh << 'EOF'
#!/bin/bash
# –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç UCH Document System - –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "=== UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ==="
echo "–í–µ—Ä—Å–∏—è: 0.3.0"
echo ""

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏
MODULES_LOADED=0
if [ -f "$SCRIPT_DIR/utils.sh" ]; then
    source "$SCRIPT_DIR/utils.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/types.sh" ]; then
    source "$SCRIPT_DIR/types.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/create.sh" ]; then
    source "$SCRIPT_DIR/create.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

echo "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: $MODULES_LOADED"
echo ""

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_main_menu() {
    echo "=== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ==="
    echo "1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
    echo "2 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É"
    echo "3 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã"
    echo "4 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç)"
    echo "q - –í—ã—Ö–æ–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-4/q): " choice
    
    case $choice in
        1) 
            create_document_improved
            echo ""
            show_main_menu 
            ;;
        2)
            echo "‚úÖ –°–ò–°–¢–ï–ú–ê:"
            echo "üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
            echo "üìÖ –î–∞—Ç–∞: $(get_current_date 2>/dev/null || echo 'N/A')"
            echo "üì¶ –ú–æ–¥—É–ª–µ–π: $MODULES_LOADED"
            echo ""
            show_main_menu
            ;;
        3)
            echo "üß™ –¢–ï–°–¢ –£–¢–ò–õ–ò–¢:"
            echo "- –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: $(get_current_date 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –°–≤–æ–±–æ–¥–Ω—ã–π master ID: $(find_free_master_id 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –¢–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É—Ä–æ–≤–Ω—è 3: $(get_default_type_for_level 3 2>/dev/null || echo 'N/A')"
            echo ""
            show_main_menu
            ;;
        4)
            create_batch_documents
            echo ""
            show_main_menu
            ;;
        q|Q) 
            echo "–í—ã—Ö–æ–¥" 
            exit 0 
            ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" 
            show_main_menu 
            ;;
    esac
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
if [ $# -eq 0 ]; then
    show_main_menu
else
    echo "‚ö†Ô∏è  –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"
    show_main_menu
fi
EOF

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh (—É–±—Ä–∞–Ω –ø—É–Ω–∫—Ç —Å–ø—Ä–∞–≤–∫–∏)"
echo "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:"
./uch-create-modular.sh
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–æ–≤—ã–π workflow:

1. –í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç 1 - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
2. –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–±–æ—Ä: 1-–º–∞—Å—Ç–µ—Ä, 2-–¥–æ—á–µ—Ä–Ω–∏–π, 3-–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π
3. –ü–æ—Ç–æ–º –Ω–∞–∑–≤–∞–Ω–∏–µ
4. –ü–æ—Ç–æ–º –≤—ã–±–æ—Ä —Ç–∏–ø–∞ –ø–æ —Ü–∏—Ñ—Ä–∞–º

–û—Ç–ª–∏—á–Ω–æ! kirillkravcov@MacBook-Pro-Kirill uch-docs % >.... if \[ $# -eq 0 \]; then show\_main\_menu else echo "‚ö†Ô∏è –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è" show\_main\_menu fi EOF echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh (—É–±—Ä–∞–Ω –ø—É–Ω–∫—Ç —Å–ø—Ä–∞–≤–∫–∏)" echo "üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:"./uch-create-modular.sh ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh (—É–±—Ä–∞–Ω –ø—É–Ω–∫—Ç —Å–ø—Ä–∞–≤–∫–∏) üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç: === –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH === === UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê === –í–µ—Ä—Å–∏—è: 0.3.0 ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: 3 === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ === 1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç 2 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É 3 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã 4 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç) q - –í—ã—Ö–æ–¥ –í–∞—à –≤—ã–±–æ—Ä (1-4/q): 1 üìù –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê === –í–´–ë–û–† –£–†–û–í–ù–Ø –î–û–ö–£–ú–ï–ù–¢–ê === 1 - –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1, –∫–æ—Ä–Ω–µ–≤–æ–π) 2 - –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 2+) 3 - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–∏–¥–µ–∏, —Å—Å—ã–ª–∫–∏, –≤—Å—Ç—Ä–µ—á–∏) –í–∞—à –≤—ã–±–æ—Ä (1-3): 2 –í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00 –∏–ª–∏ 00-01): 00-01 –û–ø—Ä–µ–¥–µ–ª–µ–Ω —É—Ä–æ–≤–µ–Ω—å: 3 (—Ä–æ–¥–∏—Ç–µ–ª—å: 00-01) –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–Ω—é === –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3 === 1 - task (–ó–∞–¥–∞—á–∞) 2 - feature (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å) 3 - bug (–û—à–∏–±–∫–∞/–±–∞–≥) 4 - snapshot (–°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã) –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-4) \[1\]: 1 –í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): üìã –°–í–û–î–ö–ê: –ù–∞–∑–≤–∞–Ω–∏–µ: –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–Ω—é –£—Ä–æ–≤–µ–Ω—å: 3 –¢–∏–ø: task –†–æ–¥–∏—Ç–µ–ª—å: 00-01 –¢–µ–≥–∏: –Ω–µ—Ç –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n): y ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω (–∑–∞–≥–ª—É—à–∫–∞) ID: (–±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω) –§–∞–π–ª: (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω) ÔøΩÔøΩ –í —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ –¥–æ–±–∞–≤–∏–º —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ === 1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç 2 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É 3 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã 4 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç) q - –í—ã—Ö–æ–¥ –í–∞—à –≤—ã–±–æ—Ä (1-4/q):

–û—Ç–ª–∏—á–Ω–æ! –ú–µ–Ω—é —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ. ‚úÖ

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å **—Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** –≤–º–µ—Å—Ç–æ –∑–∞–≥–ª—É—à–∫–∏.

## üöÄ –®–∞–≥ 5: –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

–°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤–∏–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `utils.sh`:

bash

```
# –î–æ–ø–æ–ª–Ω—è–µ–º utils.sh
cat >> uch-scripts/utils.sh << 'EOF'

# –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–µ–±–µ–Ω–∫–∞)
update_parent_document() {
    local parent_file="$1"
    local child_id="$2"
    local child_name="$3"
    
    echo "  –û–±–Ω–æ–≤–ª—è—é —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: $(basename "$parent_file")"
    
    if [ ! -f "$parent_file" ]; then
        echo "  ‚ö†Ô∏è  –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"
        return 1
    fi
    
    temp_file="${parent_file}.tmp"
    
    awk -v child_id="$child_id" -v child_name="$child_name" '
    BEGIN { 
        in_children_section = 0
        children_section_found = 0
        link_exists = 0
        link_added = 0
    }
    
    /\[\[.* - .*\]\]/ && in_children_section {
        if ($0 ~ "\\[\\[" child_id " - " child_name "\\]\\]") {
            link_exists = 1
        }
    }
    
    /#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´/ {
        in_children_section = 1
        children_section_found = 1
        print $0
        next
    }
    
    in_children_section && /^[[:space:]]*–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/ {
        next
    }
    
    in_children_section && (/^####/ || /^###/ || /^##/ || /^#/ || /^---/) {
        in_children_section = 0
    }
    
    in_children_section && /^[[:space:]]*$/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    in_children_section && /^---/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    in_children_section && !/^- \[\[/ && !/^[[:space:]]*$/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    { print $0 }
    
    END {
        if (!children_section_found) {
            print ""
            print "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´"
            print "- [[" child_id " - " child_name "]]"
        } else if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
        }
    }
    ' "$parent_file" > "$temp_file"
    
    mv "$temp_file" "$parent_file"
    
    echo "  ‚úÖ –°—Å—ã–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç"
}

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –¥–ª—è –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
generate_non_hierarchical_id() {
    local type=$1
    
    case $type in
        "idea")
            echo "Z-$(date +%Y%m%d%H%M%S)"  # Z-–ø—Ä–µ—Ñ–∏–∫—Å + –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞
            ;;
        "reference")
            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ 6-—Å–∏–º–≤–æ–ª—å–Ω–æ–≥–æ HEX –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
            # –ò—Å–ø–æ–ª—å–∑—É–µ–º /dev/urandom –¥–ª—è macOS
            random_hex=$(od -x -N 3 /dev/urandom | head -1 | awk '{print $2$3$4}' | tr '[:lower:]' '[:upper:]')
            echo "R-$random_hex"
            ;;
        "meeting")
            echo "M-$(date +%Y%m%d)"  # M-–ø—Ä–µ—Ñ–∏–∫—Å + –¥–∞—Ç–∞
            ;;
        *)
            # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–¥–µ—è
            echo "Z-$(date +%Y%m%d%H%M%S)"
            ;;
    esac
}
EOF

echo "‚úÖ –î–æ–ø–æ–ª–Ω–µ–Ω utils.sh –Ω–æ–≤—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏"
```

–¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–µ–º –º–æ–¥—É–ª—å –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:

bash

```
cat > uch-scripts/document-creator.sh << 'EOF'
#!/bin/bash
# –ú–æ–¥—É–ª—å —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

# –°–æ–∑–¥–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
create_real_document() {
    local name="$1"
    local level="$2"
    local type="$3"
    local parent_id="$4"
    local tags="$5"
    
    local current_date=$(get_current_date)
    local doc_id=""
    local parent_name=""
    local parent_file=""
    
    # 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º ID
    if [ "$level" = "N" ]; then
        # –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
        doc_id=$(generate_non_hierarchical_id "$type")
    else
        # –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
        if [ -z "$parent_id" ] || [ "$level" -eq 1 ]; then
            # –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç
            doc_id=$(find_free_master_id)
        else
            # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
            if ! find . -maxdepth 1 -name "${parent_id} - *.md" -type f | grep -q .; then
                echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID '$parent_id' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
                return 1
            fi
            
            # –ü–æ–ª—É—á–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª
            parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
            if [ -z "$parent_file" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!"
                return 1
            fi
            
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID
            child_suffix=$(find_free_child_id "$parent_id")
            doc_id="${parent_id}-${child_suffix}"
            
            # –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ä–æ–¥–∏—Ç–µ–ª—è
            parent_name=$(clean_parent_name "$parent_file")
        fi
    fi
    
    # 2. –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏
    local tags_yaml=$(format_tags_yaml "$tags" "$type")
    
    # 3. –°–æ–∑–¥–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞
    local filename="${doc_id} - ${name}.md"
    
    # 4. –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
    echo "–°–æ–∑–¥–∞—é –¥–æ–∫—É–º–µ–Ω—Ç: $filename"
    
    if [ "$level" = "N" ]; then
        create_non_hierarchical_document "$filename" "$doc_id" "$name" "$type" "$tags_yaml" "$current_date"
    else
        create_hierarchical_document "$filename" "$doc_id" "$name" "$level" "$type" "$parent_id" "$parent_name" "$tags_yaml" "$current_date"
    fi
    
    # 5. –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
    if [ -n "$parent_id" ] && [ -n "$parent_name" ] && [ -n "$parent_file" ]; then
        update_parent_document "$parent_file" "$doc_id" "$name"
    fi
    
    echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: $filename"
    return 0
}

# –°–æ–∑–¥–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
create_hierarchical_document() {
    local filename="$1"
    local doc_id="$2"
    local name="$3"
    local level="$4"
    local type="$5"
    local parent_id="$6"
    local parent_name="$7"
    local tags_yaml="$8"
    local current_date="$9"
    
    # –ë–∞–∑–æ–≤—ã–π frontmatter
    cat > "$filename" << DOC_EOF
---
id: "$doc_id"
name: "$name"
type: "$type"
level: $level
status: "planning"
$(echo "$tags_yaml")
created: "$current_date"
updated: "$current_date"
author: "$USER"
---

### $name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$doc_id\\`
- **–£—Ä–æ–≤–µ–Ω—å**: $level
DOC_EOF
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    if [ -n "$parent_id" ] && [ -n "$parent_name" ]; then
        cat >> "$filename" << DOC_EOF
- **–†–æ–¥–∏—Ç–µ–ª—å**: [[$parent_id - $parent_name]]
DOC_EOF
    fi
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    case $type in
        "snapshot")
            cat >> "$filename" << SNAPSHOT_EOF
- **–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω—ã–π
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$current_date\\`
- **–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞**: –°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã

#### üìä –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´

### ‚úÖ –†–ê–ë–û–¢–ê–ï–¢:
- 

### ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´:
- 

### üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:
- **–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã**: 
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: 
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏**: 
- **–ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏**: 

#### üéØ –ú–ï–¢–†–ò–ö–ò
- 

#### üìà –¢–ï–ù–î–ï–ù–¶–ò–ò
- 

#### üîÆ –ü–õ–ê–ù–´
- 
SNAPSHOT_EOF
            ;;
            
        "bug")
            cat >> "$filename" << BUG_EOF
- **–°—Ç–∞—Ç—É—Å**: –û—Ç–∫—Ä—ã—Ç
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$current_date\\`
- **–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞**: –û—à–∏–±–∫–∞/–ë–∞–≥

#### üêõ –û–ü–ò–°–ê–ù–ò–ï –û–®–ò–ë–ö–ò

#### üîç –®–ê–ì–ò –í–û–°–ü–†–û–ò–ó–í–ï–î–ï–ù–ò–Ø
1. 
2. 
3. 

#### ‚úÖ –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢
- 

#### ‚ùå –§–ê–ö–¢–ò–ß–ï–°–ö–ò–ô –†–ï–ó–£–õ–¨–¢–ê–¢
- 

#### üñº –°–ö–†–ò–ù–®–û–¢–´/–õ–û–ì–ò
- 
BUG_EOF
            ;;
            
        *)
            # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω
            cat >> "$filename" << STANDARD_EOF
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$current_date\\`

#### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

#### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2
STANDARD_EOF
            ;;
    esac
    
    # –û–±—â–∞—è –∑–∞–≤–µ—Ä—à–∞—é—â–∞—è —á–∞—Å—Ç—å
    cat >> "$filename" << FOOTER_EOF

#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---
–°–æ–∑–¥–∞–Ω–æ: $current_date
–£—Ä–æ–≤–µ–Ω—å: $level
FOOTER_EOF
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è –≤ –∫–æ–Ω–µ—Ü –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    if [ -n "$parent_id" ]; then
        echo "–†–æ–¥–∏—Ç–µ–ª—å: $parent_id" >> "$filename"
    fi
}

# –°–æ–∑–¥–∞—Ç—å –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
create_non_hierarchical_document() {
    local filename="$1"
    local doc_id="$2"
    local name="$3"
    local type="$4"
    local tags_yaml="$5"
    local current_date="$6"
    
    case $type in
        "idea")
            cat > "$filename" << IDEA_EOF
---
id: "$doc_id"
name: "$name"
type: "idea"
level: "N"
status: "planning"
$(echo "$tags_yaml")
created: "$current_date"
updated: "$current_date"
author: "$USER"
---

### $name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$doc_id\\`
- **–¢–∏–ø**: –ò–¥–µ—è/–ö–æ–Ω—Ü–µ–ø—Ü–∏—è
- **–£—Ä–æ–≤–µ–Ω—å**: N (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π)
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$current_date\\`

#### üí° –û–ü–ò–°–ê–ù–ò–ï –ò–î–ï–ò

#### üéØ –¶–ï–õ–¨
- 

#### üîç –ü–†–û–ë–õ–ï–ú–ê
- 

#### üõ†Ô∏è –†–ï–®–ï–ù–ò–ï
- 

#### üîó –°–í–Ø–ó–ò
- –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã: 

#### üìù –ó–ê–ú–ï–¢–ö–ò
- 

---
–°–æ–∑–¥–∞–Ω–æ: $current_date
IDEA_EOF
            ;;
            
        "reference")
            cat > "$filename" << REFERENCE_EOF
---
id: "$doc_id"
name: "$name"
type: "reference"
level: "N"
status: "planning"
$(echo "$tags_yaml")
created: "$current_date"
updated: "$current_date"
author: "$USER"
---

### $name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$doc_id\\`
- **–¢–∏–ø**: –°—Å—ã–ª–∫–∞/–†–µ—Å—É—Ä—Å
- **–£—Ä–æ–≤–µ–Ω—å**: N (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π)
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$current_date\\`

#### üîó –ò–°–¢–û–ß–ù–ò–ö
- **URL**: 
- **–ê–≤—Ç–æ—Ä**: 
- **–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏**: 
- **–¢–∏–ø —Ä–µ—Å—É—Ä—Å–∞**: [–°—Ç–∞—Ç—å—è/–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è/–ö–Ω–∏–≥–∞/–í–∏–¥–µ–æ/–ö–æ–¥/–î—Ä—É–≥–æ–µ]

#### üìù –ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï

#### üí° –ö–õ–Æ–ß–ï–í–´–ï –ú–û–ú–ï–ù–¢–´
- 

#### üîó –°–í–Ø–ó–ò
- –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã: 

#### üìé –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
- 

---
–°–æ–∑–¥–∞–Ω–æ: $current_date
REFERENCE_EOF
            ;;
            
        "meeting")
            cat > "$filename" << MEETING_EOF
---
id: "$doc_id"
name: "$name"
type: "meeting"
level: "N"
status: "planning"
$(echo "$tags_yaml")
created: "$current_date"
updated: "$current_date"
author: "$USER"
---

### $name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$doc_id\\`
- **–¢–∏–ø**: –í—Å—Ç—Ä–µ—á–∞/–û–±—Å—É–∂–¥–µ–Ω–∏–µ
- **–£—Ä–æ–≤–µ–Ω—å**: N (–Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π)
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$current_date\\`

#### üìÖ –ò–ù–§–û–†–ú–ê–¶–ò–Ø –û –í–°–¢–†–ï–ß–ï
- **–î–∞—Ç–∞**: 
- **–í—Ä–µ–º—è**: 
- **–ú–µ—Å—Ç–æ/–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: 
- **–£—á–∞—Å—Ç–Ω–∏–∫–∏**: 

#### üéØ –¶–ï–õ–ò –í–°–¢–†–ï–ß–ò
- 

#### üìù –ü–û–í–ï–°–¢–ö–ê
1. 
2. 
3. 

#### ‚úÖ –†–ï–®–ï–ù–ò–Ø –ò –í–´–í–û–î–´
- 

#### üìã –ó–ê–î–ê–ß–ò
- [ ] 
- [ ] 
- [ ] 

---
–°–æ–∑–¥–∞–Ω–æ: $current_date
MEETING_EOF
            ;;
    esac
}
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å document-creator.sh"
```

–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ–º `create.sh` —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ:

bash

```
cat > uch-scripts/create.sh << 'EOF'
#!/bin/bash
# –ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ - —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å–æ–∑–¥–∞–Ω–∏–µ–º

# –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –µ—Å–ª–∏ –µ—Å—Ç—å
if [ -f "$SCRIPT_DIR/document-creator.sh" ]; then
    source "$SCRIPT_DIR/document-creator.sh"
fi

# –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
create_document_improved() {
    echo ""
    echo "üìù –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê"
    echo ""
    
    # 1. –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è
    echo "=== –í–´–ë–û–† –£–†–û–í–ù–Ø –î–û–ö–£–ú–ï–ù–¢–ê ==="
    echo "1 - –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1, –∫–æ—Ä–Ω–µ–≤–æ–π)"
    echo "2 - –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 2+)"
    echo "3 - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–∏–¥–µ–∏, —Å—Å—ã–ª–∫–∏, –≤—Å—Ç—Ä–µ—á–∏)"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3): " level_choice
    
    local level=""
    local parent_id=""
    
    case $level_choice in
        1)
            level=1
            echo "–í—ã–±—Ä–∞–Ω: –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1)"
            ;;
        2)
            # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç - –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è
            echo ""
            read -p "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00 –∏–ª–∏ 00-01): " parent_id
            
            if [ -z "$parent_id" ]; then
                echo "‚ùå ID —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ —Ä–æ–¥–∏—Ç–µ–ª—é
            parent_level=$(echo "$parent_id" | tr -cd '-' | wc -c)
            level=$((parent_level + 2))
            echo "–û–ø—Ä–µ–¥–µ–ª–µ–Ω —É—Ä–æ–≤–µ–Ω—å: $level (—Ä–æ–¥–∏—Ç–µ–ª—å: $parent_id)"
            ;;
        3)
            level="N"
            echo "–í—ã–±—Ä–∞–Ω: –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç"
            ;;
        *)
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"
            return 1
            ;;
    esac
    
    # 2. –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " name
    if [ -z "$name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # 3. –í—ã–±–æ—Ä —Ç–∏–ø–∞
    echo ""
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    # 4. –¢–µ–≥–∏
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): " tags
    
    # 5. –°–≤–æ–¥–∫–∞
    echo ""
    echo "üìã –°–í–û–î–ö–ê:"
    echo "  –ù–∞–∑–≤–∞–Ω–∏–µ: $name"
    echo "  –£—Ä–æ–≤–µ–Ω—å: $level"
    echo "  –¢–∏–ø: $type"
    if [ -n "$parent_id" ]; then
        echo "  –†–æ–¥–∏—Ç–µ–ª—å: $parent_id"
    fi
    echo "  –¢–µ–≥–∏: ${tags:-–Ω–µ—Ç}"
    echo ""
    
    read -p "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 6. –†–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo ""
    if [ -f "$SCRIPT_DIR/document-creator.sh" ]; then
        if create_real_document "$name" "$level" "$type" "$parent_id" "$tags"; then
            echo ""
            echo "üéâ –î–æ–∫—É–º–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!"
        else
            echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞"
        fi
    else
        echo "‚ö†Ô∏è  –ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω"
        echo "   –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞"
        echo "   ID: (–±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω)"
        echo "   –§–∞–π–ª: (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω)"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
create_batch_documents() {
    echo "‚ö†Ô∏è  –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ"
}
EOF

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω create.sh —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å–æ–∑–¥–∞–Ω–∏–µ–º"
```

–û–±–Ω–æ–≤–ª—è–µ–º `main.sh` —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å:

bash

```
cat > uch-scripts/main.sh << 'EOF'
#!/bin/bash
# –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç UCH Document System - –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "=== UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ==="
echo "–í–µ—Ä—Å–∏—è: 0.4.0"
echo ""

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏
MODULES_LOADED=0
if [ -f "$SCRIPT_DIR/utils.sh" ]; then
    source "$SCRIPT_DIR/utils.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/types.sh" ]; then
    source "$SCRIPT_DIR/types.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/create.sh" ]; then
    source "$SCRIPT_DIR/create.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/document-creator.sh" ]; then
    source "$SCRIPT_DIR/document-creator.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

echo "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: $MODULES_LOADED"
echo ""

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_main_menu() {
    echo "=== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ==="
    echo "1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
    echo "2 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É"
    echo "3 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã"
    echo "4 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ (—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç)"
    echo "q - –í—ã—Ö–æ–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-4/q): " choice
    
    case $choice in
        1) 
            create_document_improved
            echo ""
            show_main_menu 
            ;;
        2)
            echo "‚úÖ –°–ò–°–¢–ï–ú–ê:"
            echo "üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
            echo "üìÖ –î–∞—Ç–∞: $(get_current_date 2>/dev/null || echo 'N/A')"
            echo "üì¶ –ú–æ–¥—É–ª–µ–π: $MODULES_LOADED"
            echo ""
            show_main_menu
            ;;
        3)
            echo "üß™ –¢–ï–°–¢ –£–¢–ò–õ–ò–¢:"
            echo "- –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: $(get_current_date 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –°–≤–æ–±–æ–¥–Ω—ã–π master ID: $(find_free_master_id 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –¢–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É—Ä–æ–≤–Ω—è 3: $(get_default_type_for_level 3 2>/dev/null || echo 'N/A')"
            echo ""
            show_main_menu
            ;;
        4)
            create_batch_documents
            echo ""
            show_main_menu
            ;;
        q|Q) 
            echo "–í—ã—Ö–æ–¥" 
            exit 0 
            ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" 
            show_main_menu 
            ;;
    esac
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
if [ $# -eq 0 ]; then
    show_main_menu
else
    echo "‚ö†Ô∏è  –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"
    show_main_menu
fi
EOF

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh (–≤–µ—Ä—Å–∏—è 0.4.0)"
echo "üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:"
./uch-create-modular.sh
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:

1. –í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç 1
2. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª —Å–æ–∑–¥–∞–ª—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

–ü—Ä–æ—Å—Ç–æ –æ—Ç–ª–∏—á–Ω–æ! –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –º–µ–Ω—é - —Å—É–ø–µ—Ä! –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º mvp –ø–ª–∞–≥–∏–Ω–∞ obsidian –Ω—É–∂–Ω–æ –µ—â–µ —Ä–µ—à–∏—Ç—å –≤–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏: 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏ 2. –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ 3. –ó–∞–º–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞. –ª–æ–≥–∏–∫–∞ —Ç–∞–∫–∞—è - –≤—ã–±–∏—Ä–∞—é –≤ –ø—É–Ω–∫—Ç–µ –º–µ–Ω—é –Ω–µ —Å–æ–∑–¥–∞–Ω–∏–µ, –∞ –∑–∞–º–µ–Ω—É - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ id –¥–æ–∫—É–º–µ–Ω—Ç–∞ - –ø—Ä–æ—Å–∏—Ç –≤–≤–µ—Å—Ç–∏ id –∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ - –≤—ã–≤–æ–¥–∏—Ç –≤–æ–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è (y/n) - –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–º–µ–Ω—É - –∑–∞–º–µ–Ω—è–µ–º—ã–π —Ñ–∞–π–ª –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç –¥–∞—Ç–æ–π - –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –∑–∞–º–µ–Ω—è–µ–º—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ –ø–∞–ø–∫—É changed-backup(–¥—Ä—É–≥–∏–µ –∑–∞–º–µ–Ω—è–µ–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –ø–æ–ø–∞–¥–∞—Ç—å –≤ —ç—Ç—É –∂–µ –ø–∞–ø–∫—É –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π) 4. –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–¥–ª—è —Ü–µ–ª–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏. –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–π —Å–∫—Ä–∏–ø—Ç, –≥–¥–µ –º–µ–Ω—è–ª—Å—è —Ç–æ–ª—å–∫–æ —Ñ—Ä–æ–Ω—Ç–º–∞—Ç—Ç–µ—Ä. –Ω–æ –Ω—É–∂–Ω–æ –µ—â–µ –∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å —Å—Å—ã–ª–∫–∏ –∏ —à–∞–±–ª–æ–Ω—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –ù–∞–ø—Ä–∏–º–µ—Ä –µ—Å–ª–∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ - –ø–æ —ç—Ç–æ–π –∑–∞–¥–∞—á–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.

–û—Ç–ª–∏—á–Ω–æ! –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ. –¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–∏–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É:

## üöÄ –®–∞–≥ 6: –î–æ–±–∞–≤–ª—è–µ–º "–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏" (—Å —Ä—É—á–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º ID)

bash

```
cat > uch-scripts/manual-mode.sh << 'EOF'
#!/bin/bash
# –†–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ –∏–º–µ–Ω–∏ (—Ä—É—á–Ω–æ–π ID)

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å —Ä—É—á–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º ID
create_document_manual() {
    echo ""
    echo "üìù –°–û–ó–î–ê–ù–ò–ï –ü–û –ò–ú–ï–ù–ò (–†–£–ß–ù–û–ô ID)"
    echo ""
    
    # 1. –†—É—á–Ω–æ–π ID
    echo "=== –í–í–û–î ID –î–û–ö–£–ú–ï–ù–¢–ê ==="
    echo "–§–æ—Ä–º–∞—Ç: XX, XX-YY, XX-YY-ZZ, XX-YY-ZZ-AA"
    echo "–ü—Ä–∏–º–µ—Ä: 00, 00-01, 00-01-AB, 00-01-AB-CD"
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞: " manual_id
    
    if [ -z "$manual_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç ID
    if ! echo "$manual_id" | grep -qE '^[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})*$'; then
        echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ID. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HEX —Ñ–æ—Ä–º–∞—Ç (00, 00-01, 00-AB –∏ —Ç.–¥.)"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
    if find . -maxdepth 1 -name "${manual_id} - *.md" -type f | grep -q .; then
        echo "‚ùå –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$manual_id' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!"
        return 1
    fi
    
    # 2. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ ID
    local level=$(echo "$manual_id" | tr -cd '-' | wc -c)
    level=$((level + 1))
    
    # 3. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è (–µ—Å–ª–∏ –Ω–µ —É—Ä–æ–≤–µ–Ω—å 1)
    local parent_id=""
    if [ $level -gt 1 ]; then
        parent_id=$(echo "$manual_id" | sed 's/-[^-]*$//')
        echo "–û–ø—Ä–µ–¥–µ–ª–µ–Ω —Ä–æ–¥–∏—Ç–µ–ª—å: $parent_id"
    fi
    
    # 4. –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " name
    if [ -z "$name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # 5. –í—ã–±–æ—Ä —Ç–∏–ø–∞
    echo ""
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    # 6. –¢–µ–≥–∏
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): " tags
    
    # 7. –°–≤–æ–¥–∫–∞
    echo ""
    echo "üìã –°–í–û–î–ö–ê:"
    echo "  ID: $manual_id"
    echo "  –ù–∞–∑–≤–∞–Ω–∏–µ: $name"
    echo "  –£—Ä–æ–≤–µ–Ω—å: $level"
    echo "  –¢–∏–ø: $type"
    if [ -n "$parent_id" ]; then
        echo "  –†–æ–¥–∏—Ç–µ–ª—å: $parent_id"
    fi
    echo "  –¢–µ–≥–∏: ${tags:-–Ω–µ—Ç}"
    echo ""
    
    read -p "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 8. –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π)
    echo ""
    echo "–°–æ–∑–¥–∞—é –¥–æ–∫—É–º–µ–Ω—Ç —Å —Ä—É—á–Ω—ã–º ID..."
    
    # –í—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–º–µ–Ω—è–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é ID
    local original_find_free_master_id=$(declare -f find_free_master_id)
    local original_find_free_child_id=$(declare -f find_free_child_id)
    
    # –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
    find_free_master_id() {
        echo "$manual_id" | grep -qE '^[0-9A-Fa-f]{2}$' && echo "$manual_id" || echo "00"
    }
    
    find_free_child_id() {
        local parent="$1"
        echo "$manual_id" | sed "s/^$parent-//"
    }
    
    # –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
    if create_real_document "$name" "$level" "$type" "$parent_id" "$tags"; then
        echo ""
        echo "üéâ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω —Å —Ä—É—á–Ω—ã–º ID: $manual_id"
    else
        echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞"
    fi
    
    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
    eval "$original_find_free_master_id"
    eval "$original_find_free_child_id"
}
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å manual-mode.sh"
```

## üöÄ –®–∞–≥ 7: –î–æ–±–∞–≤–ª—è–µ–º –ø–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ

bash

```
cat > uch-scripts/batch-mode.sh << 'EOF'
#!/bin/bash
# –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

# –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
create_batch_documents() {
    echo ""
    echo "üì¶ –ü–ê–ö–ï–¢–ù–û–ï –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–û–í"
    echo ""
    
    # 1. –í—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è
    echo "=== –í–´–ë–û–† –£–†–û–í–ù–Ø –î–õ–Ø –ü–ê–ö–ï–¢–ù–û–ì–û –°–û–ó–î–ê–ù–ò–Ø ==="
    echo "1 - –£—Ä–æ–≤–µ–Ω—å 1 (–º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç—ã)"
    echo "2 - –£—Ä–æ–≤–µ–Ω—å 2+ (–¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã)"
    echo "3 - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3): " level_choice
    
    local level=""
    local parent_id=""
    
    case $level_choice in
        1)
            level=1
            echo "–í—ã–±—Ä–∞–Ω: –£—Ä–æ–≤–µ–Ω—å 1 (–º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç—ã)"
            ;;
        2)
            # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è
            echo ""
            read -p "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " parent_id
            
            if [ -z "$parent_id" ]; then
                echo "‚ùå ID —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
            parent_level=$(echo "$parent_id" | tr -cd '-' | wc -c)
            level=$((parent_level + 2))
            echo "–û–ø—Ä–µ–¥–µ–ª–µ–Ω —É—Ä–æ–≤–µ–Ω—å: $level (—Ä–æ–¥–∏—Ç–µ–ª—å: $parent_id)"
            ;;
        3)
            level="N"
            echo "–í—ã–±—Ä–∞–Ω: –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã"
            ;;
        *)
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"
            return 1
            ;;
    esac
    
    # 2. –í—ã–±–æ—Ä —Ç–∏–ø–∞ (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –¥–ª—è –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –ø–∞–∫–µ—Ç–µ)
    echo ""
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    # 3. –û–±—â–∏–µ —Ç–µ–≥–∏ –¥–ª—è –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ –æ–±—â–∏–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ –≤—Å–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º): " common_tags
    
    # 4. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    echo ""
    echo "=== –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–û–í ==="
    echo "–í–≤–æ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ –æ–¥–Ω–æ–º—É."
    echo "–î–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–≤–µ–¥–∏—Ç–µ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –∏–ª–∏ 'q'."
    echo ""
    
    local doc_count=0
    while true; do
        echo ""
        echo "–î–æ–∫—É–º–µ–Ω—Ç #$((doc_count + 1))"
        read -p "–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∏–ª–∏ Enter/q –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è): " doc_name
        
        if [ -z "$doc_name" ] || [ "$doc_name" = "q" ] || [ "$doc_name" = "Q" ]; then
            break
        fi
        
        # –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ç–µ–≥–∏
        read -p "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–≥–∏ –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): " specific_tags
        
        # –û–±—ä–µ–¥–∏–Ω—è–µ–º —Ç–µ–≥–∏
        local all_tags="$common_tags"
        if [ -n "$specific_tags" ]; then
            if [ -n "$all_tags" ]; then
                all_tags="$all_tags,$specific_tags"
            else
                all_tags="$specific_tags"
            fi
        fi
        
        # –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
        echo ""
        echo "–°–æ–∑–¥–∞—é: $doc_name"
        
        if create_real_document "$doc_name" "$level" "$type" "$parent_id" "$all_tags"; then
            doc_count=$((doc_count + 1))
            echo "‚úÖ –°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç #$doc_count"
        else
            echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞"
        fi
    done
    
    echo ""
    echo "üìä –ò–¢–û–ì:"
    echo "  –°–æ–∑–¥–∞–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: $doc_count"
    echo "  –£—Ä–æ–≤–µ–Ω—å: $level"
    echo "  –¢–∏–ø: $type"
    if [ -n "$parent_id" ]; then
        echo "  –†–æ–¥–∏—Ç–µ–ª—å: $parent_id"
    fi
    if [ -n "$common_tags" ]; then
        echo "  –û–±—â–∏–µ —Ç–µ–≥–∏: $common_tags"
    fi
}

# –°–æ–∑–¥–∞–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞ (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
create_batch_from_file() {
    local input_file="$1"
    
    echo "‚ö†Ô∏è  –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"
    echo "   –§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞:"
    echo "   name,type,level,parent_id,tags"
    echo "   –ü—Ä–∏–º–µ—Ä:"
    echo "   '–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞',task,3,00-01,bug,urgent"
}
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å batch-mode.sh"
```

## üöÄ –®–∞–≥ 8: –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–º–µ–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞

bash

```
cat > uch-scripts/replace-mode.sh << 'EOF'
#!/bin/bash
# –ó–∞–º–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤ –∑–∞–º–µ–Ω—è–µ–º—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
ensure_backup_dir() {
    local backup_dir="changed-backup"
    if [ ! -d "$backup_dir" ]; then
        mkdir -p "$backup_dir"
        echo "üìÅ –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –±—ç–∫–∞–ø–æ–≤: $backup_dir"
    fi
    echo "$backup_dir"
}

# –ó–∞–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
replace_document() {
    echo ""
    echo "üîÑ –ó–ê–ú–ï–ù–ê –î–û–ö–£–ú–ï–ù–¢–ê"
    echo ""
    
    # 1. –ò—Å—Ö–æ–¥–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
    echo "=== –ò–°–•–û–î–ù–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ ID –∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " source_id
    
    if [ -z "$source_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ò—â–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª
    local source_file=$(find . -maxdepth 1 -name "${source_id} - *.md" -type f | head -1)
    if [ -z "$source_file" ]; then
        echo "‚ùå –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$source_id' –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return 1
    fi
    
    local source_name=$(basename "$source_file" .md | sed "s/^${source_id} - //")
    echo "–ù–∞–π–¥–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç: $source_name"
    
    # 2. –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
    echo ""
    echo "=== –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ ID –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (Enter —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å '$source_id'): " new_id
    if [ -z "$new_id" ]; then
        new_id="$source_id"
    fi
    
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (Enter —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å '$source_name'): " new_name
    if [ -z "$new_name" ]; then
        new_name="$source_name"
    fi
    
    # 3. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ ID
    local level=$(echo "$new_id" | tr -cd '-' | wc -c)
    level=$((level + 1))
    
    # 4. –í—ã–±–æ—Ä —Ç–∏–ø–∞
    echo ""
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    # 5. –¢–µ–≥–∏
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (Enter —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å): " new_tags
    
    # 6. –°–≤–æ–¥–∫–∞
    echo ""
    echo "üìã –°–í–û–î–ö–ê –ó–ê–ú–ï–ù–´:"
    echo "  –ò–°–•–û–î–ù–´–ô:"
    echo "    ID: $source_id"
    echo "    –ù–∞–∑–≤–∞–Ω–∏–µ: $source_name"
    echo "    –§–∞–π–ª: $(basename "$source_file")"
    echo ""
    echo "  –ù–û–í–´–ô:"
    echo "    ID: $new_id"
    echo "    –ù–∞–∑–≤–∞–Ω–∏–µ: $new_name"
    echo "    –£—Ä–æ–≤–µ–Ω—å: $level"
    echo "    –¢–∏–ø: $type"
    if [ -n "$new_tags" ]; then
        echo "    –¢–µ–≥–∏: $new_tags"
    else
        echo "    –¢–µ–≥–∏: (–æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å)"
    fi
    echo ""
    
    read -p "–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–º–µ–Ω—É? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 7. –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–º–µ–Ω—É
    echo ""
    echo "–í—ã–ø–æ–ª–Ω—è—é –∑–∞–º–µ–Ω—É..."
    
    # –°–æ–∑–¥–∞–µ–º –±—ç–∫–∞–ø
    local backup_dir=$(ensure_backup_dir)
    local backup_file="${backup_dir}/$(basename "$source_file" .md)-$(date +%Y%m%d-%H%M%S).md"
    
    echo "üìÅ –°–æ–∑–¥–∞—é –±—ç–∫–∞–ø: $backup_file"
    cp "$source_file" "$backup_file"
    
    # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
    local new_filename="${new_id} - ${new_name}.md"
    
    # –ï—Å–ª–∏ ID –∏–∑–º–µ–Ω–∏–ª—Å—è, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏
    if [ "$source_id" != "$new_id" ] || [ "$source_name" != "$new_name" ]; then
        echo "üîÑ –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏ –≤ –¥—Ä—É–≥–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö..."
        update_references "$source_id" "$source_name" "$new_id" "$new_name"
    fi
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è (–µ—Å–ª–∏ –Ω–µ —É—Ä–æ–≤–µ–Ω—å 1)
    local parent_id=""
    if [ $level -gt 1 ]; then
        parent_id=$(echo "$new_id" | sed 's/-[^-]*$//')
    fi
    
    # –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ä–æ–¥–∏—Ç–µ–ª—è
    local parent_name=""
    if [ -n "$parent_id" ]; then
        local parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
        if [ -n "$parent_file" ]; then
            parent_name=$(clean_parent_name "$parent_file")
        fi
    fi
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–≥–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –µ—Å–ª–∏ –Ω–æ–≤—ã–µ –Ω–µ —É–∫–∞–∑–∞–Ω—ã
    local final_tags="$new_tags"
    if [ -z "$final_tags" ]; then
        # –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–≥–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
        if [ -f "$source_file" ]; then
            final_tags=$(grep -A5 '^tags:' "$source_file" | grep -v '^tags:' | \
                sed 's/^[[:space:]]*-[[:space:]]*"//' | sed 's/"$//' | \
                grep -v "^$type$" | tr '\n' ',' | sed 's/,$//')
        fi
    fi
    
    # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
    echo "üìÑ –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $new_filename"
    
    if create_real_document "$new_name" "$level" "$type" "$parent_id" "$final_tags"; then
        # –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª (–µ—Å–ª–∏ ID –∏–∑–º–µ–Ω–∏–ª—Å—è)
        if [ "$source_id" != "$new_id" ]; then
            echo "üóëÔ∏è  –£–¥–∞–ª—è—é —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª: $(basename "$source_file")"
            rm "$source_file"
        fi
        
        echo ""
        echo "‚úÖ –ó–∞–º–µ–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!"
        echo "   üìÅ –ë—ç–∫–∞–ø: $backup_file"
        echo "   üìÑ –ù–æ–≤—ã–π —Ñ–∞–π–ª: $new_filename"
    else
        echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞"
        echo "   –°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤: $backup_file"
    fi
}

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –≤ –¥—Ä—É–≥–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
update_references() {
    local old_id="$1"
    local old_name="$2"
    local new_id="$3"
    local new_name="$4"
    
    echo "  –ü–æ–∏—Å–∫ —Å—Å—ã–ª–æ–∫ –Ω–∞: [[$old_id - $old_name]]"
    
    local updated_count=0
    for file in *.md; do
        if [ ! -f "$file" ]; then
            continue
        fi
        
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –±—ç–∫–∞–ø—ã –∏ —Å–∞–º —Ñ–∞–π–ª
        if [[ "$file" == *"changed-backup"* ]] || [[ "$file" == "${old_id} - ${old_name}.md" ]]; then
            continue
        fi
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ —Å—Å—ã–ª–∫–∞
        if grep -q "\\[\\[${old_id} - ${old_name}\\]\\]" "$file"; then
            echo "  –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏ –≤: $file"
            
            # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
            temp_file="${file}.tmp"
            
            # –ó–∞–º–µ–Ω—è–µ–º —Å—Å—ã–ª–∫–∏
            sed "s/\[\[${old_id} - ${old_name}\]\]/\[\[${new_id} - ${new_name}\]\]/g" "$file" > "$temp_file"
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –∑–∞–º–µ–Ω–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞
            if diff "$file" "$temp_file" >/dev/null; then
                rm "$temp_file"
            else
                mv "$temp_file" "$file"
                updated_count=$((updated_count + 1))
                echo "    ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ"
            fi
        fi
    done
    
    echo "  üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: $updated_count"
}

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–º–∏–≥—Ä–∞—Ü–∏—è)
migrate_document() {
    echo ""
    echo "üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê (–ú–ò–ì–†–ê–¶–ò–Ø)"
    echo ""
    
    echo "‚ö†Ô∏è  –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤ —Å—Ç–∞–¥–∏–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è"
    echo ""
    echo "–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:"
    echo "1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ frontmatter (—Ç–∏–ø, —É—Ä–æ–≤–µ–Ω—å, —Å—Ç–∞—Ç—É—Å)"
    echo "2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫"
    echo "3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤"
    echo "4. –ú–∞—Å—Å–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º"
    echo ""
    echo "–î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π –Ω—É–∂–Ω–æ:"
    echo "1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç—ã —Å—Ç–∞—Ä—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"
    echo "2. –°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—Ç—É –º–∏–≥—Ä–∞—Ü–∏–∏"
    echo "3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—ç—Ç–∞–ø–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ"
}
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å replace-mode.sh"
```

## üöÄ –®–∞–≥ 9: –û–±–Ω–æ–≤–ª—è–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

bash

```
cat > uch-scripts/main.sh << 'EOF'
#!/bin/bash
# –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç UCH Document System - –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "=== UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ==="
echo "–í–µ—Ä—Å–∏—è: 1.0.0"
echo ""

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏
MODULES_LOADED=0
if [ -f "$SCRIPT_DIR/utils.sh" ]; then
    source "$SCRIPT_DIR/utils.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/types.sh" ]; then
    source "$SCRIPT_DIR/types.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/create.sh" ]; then
    source "$SCRIPT_DIR/create.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/document-creator.sh" ]; then
    source "$SCRIPT_DIR/document-creator.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/manual-mode.sh" ]; then
    source "$SCRIPT_DIR/manual-mode.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/batch-mode.sh" ]; then
    source "$SCRIPT_DIR/batch-mode.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/replace-mode.sh" ]; then
    source "$SCRIPT_DIR/replace-mode.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

echo "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: $MODULES_LOADED"
echo ""

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_main_menu() {
    echo "=== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ==="
    echo "1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–∞–≤—Ç–æ-ID)"
    echo "2 - –°–æ–∑–¥–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏ (—Ä—É—á–Ω–æ–π ID)"
    echo "3 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ"
    echo "4 - –ó–∞–º–µ–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
    echo "5 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É"
    echo "6 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã"
    echo "q - –í—ã—Ö–æ–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-6/q): " choice
    
    case $choice in
        1) 
            create_document_improved
            echo ""
            show_main_menu 
            ;;
        2)
            create_document_manual
            echo ""
            show_main_menu
            ;;
        3)
            create_batch_documents
            echo ""
            show_main_menu
            ;;
        4)
            replace_document
            echo ""
            show_main_menu
            ;;
        5)
            echo "‚úÖ –°–ò–°–¢–ï–ú–ê:"
            echo "üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
            echo "üìÖ –î–∞—Ç–∞: $(get_current_date 2>/dev/null || echo 'N/A')"
            echo "üì¶ –ú–æ–¥—É–ª–µ–π: $MODULES_LOADED"
            echo ""
            show_main_menu
            ;;
        6)
            echo "üß™ –¢–ï–°–¢ –£–¢–ò–õ–ò–¢:"
            echo "- –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: $(get_current_date 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –°–≤–æ–±–æ–¥–Ω—ã–π master ID: $(find_free_master_id 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –¢–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É—Ä–æ–≤–Ω—è 3: $(get_default_type_for_level 3 2>/dev/null || echo 'N/A')"
            echo ""
            show_main_menu
            ;;
        q|Q) 
            echo "–í—ã—Ö–æ–¥" 
            exit 0 
            ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" 
            show_main_menu 
            ;;
    esac
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
if [ $# -eq 0 ]; then
    show_main_menu
else
    echo "‚ö†Ô∏è  –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"
    show_main_menu
fi
EOF

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh (–≤–µ—Ä—Å–∏—è 1.0.0)"
echo "üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:"
echo "1. –ü—É–Ω–∫—Ç 2 - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏ (—Ä—É—á–Ω–æ–π ID)"
echo "2. –ü—É–Ω–∫—Ç 3 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ"
echo "3. –ü—É–Ω–∫—Ç 4 - –ó–∞–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞"
./uch-create-modular.sh
```

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å:

1. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏ (—Ä—É—á–Ω–æ–π ID)
3. ‚úÖ –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
4. ‚úÖ –ó–∞–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –±—ç–∫–∞–ø–∞–º–∏
5. ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏ –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã –¥–æ—Ä–∞–±–æ—Ç–∫–∏!

–æ—Ç–ª–∏—á–Ω–æ! –ö—Ä–æ–º–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–º–µ–Ω—ã: 1. —Å–æ–∑–¥–∞–ª—Å—è –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç, –∞ –Ω–µ –∑–∞–º–µ–Ω–∏–ª—Å—è. 2. –≤ –∑–∞–º–µ–Ω—è–µ–º–æ–º (–∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω) –Ω–µ –∏–∑–º–µ–Ω–µ–Ω –∏–Ω–¥–µ–∫—Å –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞, –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –ø–∞–ø–∫—É changed-backup 3. –î–æ—Ä–∞–±–æ—Ç–∫–∞ –º–µ—Ç–æ–¥–∞ –∑–∞–º–µ–Ω—ã: 3.1 —Å–Ω–∞—á–∞–ª–∞ –≤–≤–æ–¥–∏–º id –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–º –º—ã –∑–∞–º–µ–Ω–∏–º –¥—Ä—É–≥–æ–π —Ñ–∞–π–ª 3.2 –≤–≤–æ–¥–∏–º id –∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω –∏ –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω) 3.3 —É–∫–∞–∑—ã–≤–∞–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –æ–ø—Ä–æ—Å–Ω–∏–∫–∞ 3.4 –°–∏—Å—Ç–µ–º–∞ –∑–∞–º–µ–Ω—è–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –∏–∑ –ø3.2: 3.4.1 –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å —Å –¥–∞—Ç–æ–π –≤ –Ω–∞—á–∞–ª–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ 3.4.2 "–∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç" –≤ –ø–∞–ø–∫—É changed-backup 3.4.3 –≤ —Ü–µ–ª–µ–≤–æ–º —Ñ–∞–π–ª–µ (–∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –≤–º–µ—Å—Ç–æ –∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ), —Å–∏—Å—Ç–µ–º–∞ –∞)–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—è –∏ –º–µ–Ω—è–µ—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –±)–∏—â–µ—Ç –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª –≤)–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã 4. –î–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å "–°–º–µ—Å—Ç–∏—Ç—å" –¥–æ–∫—É–º–µ–Ω—Ç. –í –º–µ–Ω—é –æ—Ç–¥–µ–ª—å–Ω—ã–º –ø—É–Ω–∫—Ç–æ–º –∫–∞–∫ –∏ –∑–∞–º–µ–Ω–∞ (–º–æ–∂–µ—Ç –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤ –æ–¥–∏–Ω –ø—É–Ω–∫—Ç, –∞ –≤–Ω—É—Ç—Ä–∏ —É–∂–µ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ "–ó–∞–º–µ–Ω–∞/–°–º–µ—â–µ–Ω–∏–µ": 4.1 –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –°–º–µ—â–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥ id. –í–≤–æ–¥–∏–º id 4.2 –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ —Å–∏—Å—Ç–µ–º–æ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ id 4.2.1 –µ—Å–ª–∏ id –Ω–∞–π–¥–µ–Ω, —Ç–æ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–º–µ—Å—Ç–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç. –ó–Ω–∞—á–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å –Ω–∞–π–¥–µ–Ω—ã–º id –∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—Ç –Ω–æ–≤—ã–µ id –Ω–∞ –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤—ã—à–µ —á–µ–º —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–π –¥–æ–∫—É–º–µ–Ω—Ç. –ü—Ä–∏–º–µ—Ä: 1. –≤–≤–æ–¥–∏–º id –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏–º —Å–æ–∑–¥–∞—Ç—å —Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º 00-02-01 2. –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç —ç—Ç–æ—Ç id (–µ—Å–ª–∏ –µ—Å—Ç—å) 3. –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (–° –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º, —á—Ç–æ —ç—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –∏–∑–º–µ–Ω–∏—Ç –Ω—É–º–µ—Ä–∞—Ü–∏—é –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤) 4. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º id 5. –î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ —Ç–æ–º –∂–µ —É—Ä–æ–≤–Ω–µ –∏ –Ω–∏–∂–µ (–µ—Å–ª–∏ –µ—Å—Ç—å) –ø–æ–ª—É—á–∞—é—Ç –Ω–æ–≤—ã–µ id. –ø—Ä–∏–º–µ—Ä: 00-02-01 -> —Å—Ç–∞–Ω–µ—Ç 00-02-02 00-02-01-01 -> —Å—Ç–∞–Ω–µ—Ç 00-02-02-01 6. —Å—Å—ã–ª–∫–∏ –≤ "—Å–º–µ—â–µ–Ω–Ω—ã—Ö" –∏ –≤ —Å–æ–∑–¥–∞–Ω–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã —Å —É—á–µ—Ç–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π id –ü—Ä–æ–≤–µ—Ä—å –ø–æ–ª–Ω–æ—Ç—É –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∏ –Ω–∞–ø–∏—à–∏ –∫–∞–∫ —Ç—ã –ø–æ–Ω—è–ª –∑–∞–¥–∞—á–∏ –ø–æ –¥–æ—Ä–∞–±–æ—Ç–∫–µ –º–µ—Ç–æ–¥–æ–≤

–û—Ç–ª–∏—á–Ω–æ! –ü–æ–Ω—è–ª –≤—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è. –î–∞–≤–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ–º:

## üìã –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–æ –∑–∞–º–µ–Ω–µ:

### –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

1. ‚ùå –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –≤–º–µ—Å—Ç–æ –∑–∞–º–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ
2. ‚ùå –ò–º—è —Ñ–∞–π–ª–∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (ID –≤ –∏–º–µ–Ω–∏)
3. ‚ùå –°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª –Ω–µ –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ù–æ–≤—ã–π workflow –∑–∞–º–µ–Ω—ã:

text

```
1. –í–≤–æ–¥ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞-–∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–∫–æ—Ç–æ—Ä—ã–º –∑–∞–º–µ–Ω—è–µ–º)
2. –í–≤–æ–¥ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞-—Ü–µ–ª–∏ (–∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω)
3. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –æ–ø—Ä–æ—Å–Ω–∏–∫–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø, —Ç–µ–≥–∏)
4. –î–µ–π—Å—Ç–≤–∏—è —Å–∏—Å—Ç–µ–º—ã:
   - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–ª–µ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –¥–∞—Ç–æ–π
   - –û–±–Ω–æ–≤–∏—Ç—å ID –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
   - –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
   - –û–±–Ω–æ–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—è
   - –î–æ–±–∞–≤–∏—Ç—å –¥–æ—á–µ—Ä–Ω–∏–µ —Å—Å—ã–ª–∫–∏
```

### –ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è "–°–º–µ—â–µ–Ω–∏–µ":

text

```
1. –í–≤–æ–¥ ID –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00-02-01)
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è ID
3. –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Üí –∑–∞–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–º–µ—â–µ–Ω–∏—è
4. –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏:
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–º ID
   - –°–º–µ—Å—Ç–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (00-02-01 ‚Üí 00-02-02)
   - –°–º–µ—Å—Ç–∏—Ç—å –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (00-02-01-XX ‚Üí 00-02-02-XX)
   - –û–±–Ω–æ–≤–∏—Ç—å –í–°–ï —Å—Å—ã–ª–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ
```

## üöÄ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–º–µ–Ω—ã:

bash

```
cat > uch-scripts/replace-mode-v2.sh << 'EOF'
#!/bin/bash
# –ó–∞–º–µ–Ω–∞ –∏ —Å–º–µ—â–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

# –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
archive_document() {
    local source_file="$1"
    local backup_dir="$2"
    
    if [ ! -f "$source_file" ]; then
        echo "‚ùå –§–∞–π–ª –¥–ª—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω: $source_file"
        return 1
    fi
    
    # –°–æ–∑–¥–∞–µ–º –∏–º—è –∞—Ä—Ö–∏–≤–∞ —Å –¥–∞—Ç–æ–π –≤ –Ω–∞—á–∞–ª–µ
    local timestamp=$(date +%Y%m%d-%H%M%S)
    local filename=$(basename "$source_file")
    local archived_name="${timestamp}-${filename}"
    local backup_path="${backup_dir}/${archived_name}"
    
    # –ö–æ–ø–∏—Ä—É–µ–º —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –æ—Ç–º–µ—Ç–∫–∏ –æ–± –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏
    echo "  üìÅ –ê—Ä—Ö–∏–≤–∏—Ä—É—é: $filename ‚Üí $archived_name"
    
    # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–º–µ—Ç–∫—É –æ–± –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏ –≤ –Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞
    {
        echo "# –ê–†–•–ò–í–ò–†–û–í–ê–ù: $(date '+%Y-%m-%d %H:%M:%S')"
        echo "# –ò–°–•–û–î–ù–´–ô –§–ê–ô–õ: $filename"
        echo "# –ó–ê–ú–ï–ù–ï–ù –ù–ê: (–±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–æ –ø–æ—Å–ª–µ –∑–∞–º–µ–Ω—ã)"
        echo "---"
        cat "$source_file"
    } > "$backup_path"
    
    echo "    ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω –≤: $backup_path"
    return 0
}

# –ù–∞–π—Ç–∏ –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (—Ä–æ–¥–∏—Ç–µ–ª–∏, –¥–µ—Ç–∏, —Å—Å—ã–ª–∫–∏)
find_related_documents() {
    local doc_id="$1"
    local doc_name="$2"
    
    local related_files=()
    
    # 1. –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
    if [[ "$doc_id" =~ - ]]; then
        local parent_id=$(echo "$doc_id" | sed 's/-[^-]*$//')
        local parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
        if [ -n "$parent_file" ]; then
            related_files+=("$parent_file")
        fi
    fi
    
    # 2. –î–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    local child_pattern="${doc_id}-[0-9A-Fa-f][0-9A-Fa-f]"
    for child_file in $(find . -maxdepth 1 -name "${child_pattern} - *.md" -type f); do
        related_files+=("$child_file")
    done
    
    # 3. –î—Ä—É–≥–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–æ —Å—Å—ã–ª–∫–∞–º–∏
    for file in *.md; do
        if [ ! -f "$file" ] || [[ "$file" == *"changed-backup"* ]]; then
            continue
        fi
        
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∞–º –¥–æ–∫—É–º–µ–Ω—Ç –∏ –µ–≥–æ –∞—Ä—Ö–∏–≤
        if [[ "$file" == "${doc_id} - ${doc_name}.md" ]] || [[ "$(basename "$file")" == "${timestamp}"* ]]; then
            continue
        fi
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Å—ã–ª–∫–∏
        if grep -q "\\[\\[${doc_id} - ${doc_name}\\]\\]" "$file"; then
            related_files+=("$file")
        fi
    done
    
    # –£–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
    printf '%s\n' "${related_files[@]}" | sort -u
}

# –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç
update_all_references() {
    local old_id="$1"
    local old_name="$2"
    local new_id="$3"
    local new_name="$4"
    
    echo "  üîÑ –ü–æ–∏—Å–∫ —Å—Å—ã–ª–æ–∫ –Ω–∞: [[$old_id - $old_name]]"
    
    local updated_count=0
    local related_files=$(find_related_documents "$old_id" "$old_name")
    
    for file in $related_files; do
        if [ ! -f "$file" ]; then
            continue
        fi
        
        echo "    –ü—Ä–æ–≤–µ—Ä—è—é: $(basename "$file")"
        
        # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
        temp_file="${file}.tmp"
        
        # –ó–∞–º–µ–Ω—è–µ–º —Å—Å—ã–ª–∫–∏
        sed "s/\[\[${old_id} - ${old_name}\]\]/\[\[${new_id} - ${new_name}\]\]/g" "$file" > "$temp_file"
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
        if ! diff "$file" "$temp_file" >/dev/null; then
            mv "$temp_file" "$file"
            updated_count=$((updated_count + 1))
            echo "      ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ"
        else
            rm "$temp_file"
        fi
    done
    
    echo "  üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: $updated_count"
    return $updated_count
}

# –ó–∞–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è)
replace_document_fixed() {
    echo ""
    echo "üîÑ –ó–ê–ú–ï–ù–ê –î–û–ö–£–ú–ï–ù–¢–ê"
    echo ""
    
    # 1. –î–æ–∫—É–º–µ–Ω—Ç-–∏—Å—Ç–æ—á–Ω–∏–∫ (–∫–æ—Ç–æ—Ä—ã–º –∑–∞–º–µ–Ω—è–µ–º)
    echo "=== –î–û–ö–£–ú–ï–ù–¢-–ò–°–¢–û–ß–ù–ò–ö ==="
    echo "–í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞, –ö–û–¢–û–†–´–ú –±—É–¥–µ—Ç–µ –∑–∞–º–µ–Ω—è—Ç—å:"
    read -p "ID –∏—Å—Ç–æ—á–Ω–∏–∫–∞: " source_id
    
    if [ -z "$source_id" ]; then
        echo "‚ùå ID –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ò—â–µ–º —Ñ–∞–π–ª-–∏—Å—Ç–æ—á–Ω–∏–∫
    local source_file=$(find . -maxdepth 1 -name "${source_id} - *.md" -type f | head -1)
    if [ -z "$source_file" ]; then
        echo "‚ùå –î–æ–∫—É–º–µ–Ω—Ç-–∏—Å—Ç–æ—á–Ω–∏–∫ —Å ID '$source_id' –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return 1
    fi
    
    local source_name=$(basename "$source_file" .md | sed "s/^${source_id} - //")
    echo "–ù–∞–π–¥–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç-–∏—Å—Ç–æ—á–Ω–∏–∫: $source_name"
    
    # 2. –î–æ–∫—É–º–µ–Ω—Ç-—Ü–µ–ª—å (–∫–æ—Ç–æ—Ä—ã–π –∑–∞–º–µ–Ω—è–µ–º)
    echo ""
    echo "=== –î–û–ö–£–ú–ï–ù–¢-–¶–ï–õ–¨ ==="
    echo "–í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞, –ö–û–¢–û–†–´–ô –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω:"
    read -p "ID —Ü–µ–ª–∏: " target_id
    
    if [ -z "$target_id" ]; then
        echo "‚ùå ID —Ü–µ–ª–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ò—â–µ–º —Ñ–∞–π–ª-—Ü–µ–ª—å
    local target_file=$(find . -maxdepth 1 -name "${target_id} - *.md" -type f | head -1)
    if [ -z "$target_file" ]; then
        echo "‚ùå –î–æ–∫—É–º–µ–Ω—Ç-—Ü–µ–ª—å —Å ID '$target_id' –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return 1
    fi
    
    local target_name=$(basename "$target_file" .md | sed "s/^${target_id} - //")
    echo "–ù–∞–π–¥–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç-—Ü–µ–ª—å: $target_name"
    
    # 3. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–º–µ–Ω—ã
    echo ""
    echo "=== –ü–ê–†–ê–ú–ï–¢–†–´ –ó–ê–ú–ï–ù–´ ==="
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ ID –∏—Å—Ç–æ—á–Ω–∏–∫–∞
    local level=$(echo "$source_id" | tr -cd '-' | wc -c)
    level=$((level + 1))
    
    # –ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ (–º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å)
    read -p "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ [${source_name}]: " new_name
    if [ -z "$new_name" ]; then
        new_name="$source_name"
    fi
    
    # –í—ã–±–æ—Ä —Ç–∏–ø–∞
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    # –¢–µ–≥–∏
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (Enter —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ): " new_tags
    
    # 4. –°–≤–æ–¥–∫–∞
    echo ""
    echo "üìã –°–í–û–î–ö–ê –ó–ê–ú–ï–ù–´:"
    echo "  –ò–°–¢–û–ß–ù–ò–ö (–±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω):"
    echo "    ID: $source_id"
    echo "    –ù–∞–∑–≤–∞–Ω–∏–µ: $source_name ‚Üí $new_name"
    echo "    –§–∞–π–ª: $(basename "$source_file")"
    echo ""
    echo "  –¶–ï–õ–¨ (–±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω):"
    echo "    ID: $target_id ‚Üí $source_id"
    echo "    –ù–∞–∑–≤–∞–Ω–∏–µ: $target_name ‚Üí $new_name"
    echo "    –§–∞–π–ª: $(basename "$target_file")"
    echo ""
    echo "  –ü–ê–†–ê–ú–ï–¢–†–´:"
    echo "    –£—Ä–æ–≤–µ–Ω—å: $level"
    echo "    –¢–∏–ø: $type"
    if [ -n "$new_tags" ]; then
        echo "    –¢–µ–≥–∏: $new_tags"
    fi
    echo ""
    
    read -p "–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–º–µ–Ω—É? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 5. –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–º–µ–Ω—É
    echo ""
    echo "üîÑ –í—ã–ø–æ–ª–Ω—è—é –∑–∞–º–µ–Ω—É..."
    
    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤
    local backup_dir="changed-backup"
    mkdir -p "$backup_dir"
    
    # 5.1 –ê—Ä—Ö–∏–≤–∏—Ä—É–µ–º —Ü–µ–ª–µ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç
    echo "üìÅ –ê—Ä—Ö–∏–≤–∏—Ä—É—é —Ü–µ–ª–µ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç..."
    if ! archive_document "$target_file" "$backup_dir"; then
        echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏"
        return 1
    fi
    
    # 5.2 –û–±–Ω–æ–≤–ª—è–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –Ω–∞ –∏–º—è —Ü–µ–ª–∏ (—Å–æ—Ö—Ä–∞–Ω—è—è ID –∏—Å—Ç–æ—á–Ω–∏–∫–∞)
    local new_filename="${source_id} - ${new_name}.md"
    echo "üìÑ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—é: $(basename "$source_file") ‚Üí $new_filename"
    
    # –ï—Å–ª–∏ —ç—Ç–æ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª (–∑–∞–º–µ–Ω–∞ —Å–∞–º–æ–≥–æ —Å–µ–±—è), –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º
    if [ "$source_file" = "$target_file" ]; then
        mv "$source_file" "$new_filename"
        source_file="$new_filename"
    else
        # –ö–æ–ø–∏—Ä—É–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ –º–µ—Å—Ç–æ —Ü–µ–ª–∏
        cp "$source_file" "$new_filename"
        # –£–¥–∞–ª—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ (–µ—Å–ª–∏ –æ–Ω –Ω–µ —Ü–µ–ª—å)
        if [ "$source_file" != "$target_file" ]; then
            rm "$source_file"
        fi
        # –£–¥–∞–ª—è–µ–º —Ü–µ–ª—å (—É–∂–µ –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω)
        rm "$target_file"
    fi
    
    # 5.3 –û–±–Ω–æ–≤–ª—è–µ–º frontmatter –≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ
    echo "üìù –û–±–Ω–æ–≤–ª—è—é frontmatter..."
    
    # –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—É—â–∏–µ —Ç–µ–≥–∏ –µ—Å–ª–∏ –Ω–æ–≤—ã–µ –Ω–µ —É–∫–∞–∑–∞–Ω—ã
    local final_tags="$new_tags"
    if [ -z "$final_tags" ]; then
        # –ü—ã—Ç–∞–µ–º—Å—è –∏–∑–≤–ª–µ—á—å —Ç–µ–≥–∏ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
        if [ -f "$new_filename" ]; then
            final_tags=$(grep -A5 '^tags:' "$new_filename" | tail -n +2 | \
                sed 's/^[[:space:]]*-[[:space:]]*"//' | sed 's/"$//' | \
                grep -v "^$type$" | tr '\n' ',' | sed 's/,$//')
        fi
    fi
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Ñ–∞–π–ª
    temp_file="${new_filename}.tmp"
    
    awk -v new_id="$source_id" -v new_name="$new_name" -v new_type="$type" -v new_level="$level" -v new_tags="$final_tags" '
    BEGIN { 
        in_frontmatter = 0
        frontmatter_done = 0
        tags_updated = 0
    }
    
    /^---$/ {
        in_frontmatter = !in_frontmatter
        if (!in_frontmatter) {
            frontmatter_done = 1
        }
        print $0
        next
    }
    
    in_frontmatter && /^id:/ {
        print "id: \"" new_id "\""
        next
    }
    
    in_frontmatter && /^name:/ {
        print "name: \"" new_name "\""
        next
    }
    
    in_frontmatter && /^type:/ {
        print "type: \"" new_type "\""
        next
    }
    
    in_frontmatter && /^level:/ {
        print "level: " new_level
        next
    }
    
    in_frontmatter && /^tags:/ {
        print "tags:"
        if (new_tags != "") {
            split(new_tags, tags_array, ",")
            for (i in tags_array) {
                print "  - \"" tags_array[i] "\""
            }
        }
        print "  - \"" new_type "\""
        tags_updated = 1
        next
    }
    
    in_frontmatter && tags_updated && /^[[:space:]]*-/ {
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç–∞—Ä—ã–µ —Ç–µ–≥–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        next
    }
    
    !in_frontmatter && frontmatter_done && /^### / {
        # –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
        print "### " new_name
        next
    }
    
    { print $0 }
    ' "$new_filename" > "$temp_file"
    
    mv "$temp_file" "$new_filename"
    
    # 5.4 –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ
    echo "üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏..."
    update_all_references "$target_id" "$target_name" "$source_id" "$new_name"
    
    # 5.5 –û–±–Ω–æ–≤–ª—è–µ–º –±—ç–∫–∞–ø —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞–º–µ–Ω–µ
    local latest_backup=$(ls -t "${backup_dir}/${timestamp}"* 2>/dev/null | head -1)
    if [ -n "$latest_backup" ]; then
        sed -i '' "s|# –ó–ê–ú–ï–ù–ï–ù –ù–ê:.*|# –ó–ê–ú–ï–ù–ï–ù –ù–ê: ${source_id} - ${new_name}.md|" "$latest_backup"
    fi
    
    echo ""
    echo "‚úÖ –ó–ê–ú–ï–ù–ê –í–´–ü–û–õ–ù–ï–ù–ê!"
    echo "   üìÅ –ê—Ä—Ö–∏–≤: $backup_dir/$(basename "$latest_backup")"
    echo "   üìÑ –ù–æ–≤—ã–π —Ñ–∞–π–ª: $new_filename"
    echo "   üîÑ ID –∏–∑–º–µ–Ω–µ–Ω: $target_id ‚Üí $source_id"
}

# –§—É–Ω–∫—Ü–∏—è —Å–º–µ—â–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
shift_document() {
    echo ""
    echo "üìê –°–ú–ï–©–ï–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê"
    echo ""
    
    echo "‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –≠—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –∏–∑–º–µ–Ω–∏—Ç –Ω—É–º–µ—Ä–∞—Ü–∏—é —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤!"
    echo ""
    
    # 1. –í–≤–æ–¥ ID –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo "=== –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    echo "–í–≤–µ–¥–∏—Ç–µ ID –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00-02-01):"
    read -p "ID: " new_id
    
    if [ -z "$new_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç
    if ! echo "$new_id" | grep -qE '^[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})*$'; then
        echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ID"
        return 1
    fi
    
    # 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
    local existing_file=$(find . -maxdepth 1 -name "${new_id} - *.md" -type f | head -1)
    
    if [ -z "$existing_file" ]; then
        echo "‚úÖ ID $new_id —Å–≤–æ–±–æ–¥–µ–Ω, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –±–µ–∑ —Å–º–µ—â–µ–Ω–∏—è"
        # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ –æ–±—ã—á–Ω–æ–º—É —Å–æ–∑–¥–∞–Ω–∏—é
        return 0
    fi
    
    # 3. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω - –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º —Å–º–µ—â–µ–Ω–∏–µ
    local existing_name=$(basename "$existing_file" .md | sed "s/^${new_id} - //")
    echo ""
    echo "‚ùå –î–æ–∫—É–º–µ–Ω—Ç —Å ID $new_id —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:"
    echo "   –§–∞–π–ª: $(basename "$existing_file")"
    echo "   –ù–∞–∑–≤–∞–Ω–∏–µ: $existing_name"
    echo ""
    echo "‚ö†Ô∏è  –û–ø–µ—Ä–∞—Ü–∏—è –°–ú–ï–©–ï–ù–ò–Ø:"
    echo "   - –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç $new_id –±—É–¥–µ—Ç —Å–º–µ—â–µ–Ω"
    echo "   - –í—Å–µ –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã"
    echo "   - –í—Å–µ —Å—Å—ã–ª–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
    echo ""
    
    read -p "–í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–º–µ—â–µ–Ω–∏–µ? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    echo ""
    echo "üîÑ –ù–∞—á–∏–Ω–∞—é –æ–ø–µ—Ä–∞—Ü–∏—é —Å–º–µ—â–µ–Ω–∏—è..."
    
    # 4. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–æ–≤—ã–π ID –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    local last_part=$(echo "$new_id" | grep -o '[^-]*$')
    local base_part=$(echo "$new_id" | sed "s/-${last_part}$//")
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —á–∞—Å—Ç—å –≤ decimal, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º, –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞—Ç–Ω–æ –≤ HEX
    local last_decimal=$((16#$last_part))
    local new_last_decimal=$((last_decimal + 1))
    local new_last_hex=$(printf "%02X" $new_last_decimal)
    local shifted_id="${base_part}-${new_last_hex}"
    
    echo "   –°–º–µ—â–∞–µ–º: $new_id ‚Üí $shifted_id"
    
    # 5. –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è (—Å–∞–º –¥–æ–∫—É–º–µ–Ω—Ç + –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ)
    local documents_to_shift=("$existing_file")
    
    # –ù–∞—Ö–æ–¥–∏–º –¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    local child_pattern="${new_id}-[0-9A-Fa-f][0-9A-Fa-f]"
    for child_file in $(find . -maxdepth 1 -name "${child_pattern} - *.md" -type f); do
        documents_to_shift+=("$child_file")
    done
    
    echo "   –ù–∞–π–¥–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è: ${#documents_to_shift[@]}"
    
    # 6. –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–ø–∏–∏ —Å–æ —Å–º–µ—â–µ–Ω–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏
    echo "   –°–æ–∑–¥–∞—é –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–ø–∏–∏..."
    
    declare -A shift_map  # old_id -> new_id
    
    for file in "${documents_to_shift[@]}"; do
        local old_filename=$(basename "$file")
        local old_id=$(echo "$old_filename" | cut -d' ' -f1)
        local old_name=$(echo "$old_filename" | sed "s/^${old_id} - //" | sed 's/.md$//')
        
        # –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–≤—ã–π ID
        local new_shifted_id="$old_id"
        if [ "$old_id" = "$new_id" ]; then
            new_shifted_id="$shifted_id"
        elif [[ "$old_id" == "$new_id"-* ]]; then
            # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç - –∑–∞–º–µ–Ω—è–µ–º –ø–µ—Ä–≤—É—é —á–∞—Å—Ç—å ID
            new_shifted_id=$(echo "$old_id" | sed "s/^${new_id}/${shifted_id}/")
        fi
        
        shift_map["$old_id"]="$new_shifted_id"
        
        local temp_filename="TEMP-${new_shifted_id} - ${old_name}.md"
        
        echo "     $old_id ‚Üí $new_shifted_id"
        
        # –ö–æ–ø–∏—Ä—É–µ–º —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º ID –≤ frontmatter
        awk -v new_id="$new_shifted_id" '
        /^id: / {
            print "id: \"" new_id "\""
            next
        }
        { print $0 }
        ' "$file" > "$temp_filename"
    done
    
    # 7. –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ
    echo "   üîÑ –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏..."
    
    # –°–Ω–∞—á–∞–ª–∞ —Å–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Å—ã–ª–∫–∏
    local all_md_files=$(find . -maxdepth 1 -name "*.md" -type f | grep -v "^\./TEMP-" | grep -v "^\./changed-backup/")
    
    for file in $all_md_files; do
        local updated=0
        temp_file="${file}.tmp"
        cp "$file" "$temp_file"
        
        for old_id in "${!shift_map[@]}"; do
            local new_shifted_id="${shift_map[$old_id]}"
            
            # –ù–∞—Ö–æ–¥–∏–º —Å—Ç–∞—Ä–æ–µ –∏–º—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
            local old_file=$(find . -maxdepth 1 -name "${old_id} - *.md" -type f | head -1)
            if [ -z "$old_file" ]; then
                continue
            fi
            local old_name=$(basename "$old_file" .md | sed "s/^${old_id} - //")
            
            # –ó–∞–º–µ–Ω—è–µ–º —Å—Å—ã–ª–∫–∏
            if sed -i '' "s/\[\[${old_id} - ${old_name}\]\]/\[\[${new_shifted_id} - ${old_name}\]\]/g" "$temp_file" 2>/dev/null; then
                updated=1
            fi
        done
        
        if [ $updated -eq 1 ]; then
            mv "$temp_file" "$file"
        else
            rm "$temp_file"
        fi
    done
    
    # 8. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ
    echo "   üìù –ü—Ä–∏–º–µ–Ω—è—é —Å–º–µ—â–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞..."
    
    for temp_file in TEMP-*.md; do
        if [ -f "$temp_file" ]; then
            local permanent_name=$(echo "$temp_file" | sed 's/^TEMP-//')
            mv "$temp_file" "$permanent_name"
            echo "     ‚úÖ $permanent_name"
        fi
    done
    
    # 9. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –∏—Å—Ö–æ–¥–Ω—ã–º ID
    echo ""
    echo "üìù –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID: $new_id"
    echo "   –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–º–µ—â–µ–Ω –Ω–∞: $shifted_id"
    echo ""
    
    # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
    # create_document_manual (–Ω–æ —É–∂–µ —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é —á—Ç–æ ID —Å–≤–æ–±–æ–¥–µ–Ω)
    
    echo "‚úÖ –°–º–µ—â–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!"
    echo "   üîÑ ID —Å–º–µ—â–µ–Ω: $new_id ‚Üí $shifted_id"
    echo "   üìù –ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID: $new_id"
}

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∑–∞–º–µ–Ω—ã/—Å–º–µ—â–µ–Ω–∏—è
show_replace_shift_menu() {
    echo ""
    echo "=== –û–ü–ï–†–ê–¶–ò–ò –° –î–û–ö–£–ú–ï–ù–¢–ê–ú–ò ==="
    echo "1 - –ó–∞–º–µ–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
    echo "2 - –°–º–µ—Å—Ç–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
    echo "3 - –ù–∞–∑–∞–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3): " choice
    
    case $choice in
        1) replace_document_fixed ;;
        2) shift_document ;;
        3) return 0 ;;
        *) echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" ;;
    esac
}
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å replace-mode-v2.sh"
```

–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ–º –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:

## üìã –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å:

### –§—É–Ω–∫—Ü–∏—è –∑–∞–º–µ–Ω—ã (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è):

1. ‚úÖ –í–≤–æ–¥ ID –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (–∫–æ—Ç–æ—Ä—ã–º –∑–∞–º–µ–Ω—è–µ–º)
2. ‚úÖ –í–≤–æ–¥ ID —Ü–µ–ª–∏ (–∫–æ—Ç–æ—Ä—ã–π –∑–∞–º–µ–Ω—è–µ–º)
3. ‚úÖ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ª–∏ —Å –¥–∞—Ç–æ–π –≤ –∏–º–µ–Ω–∏
4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫ –≤ —Å–∏—Å—Ç–µ–º–µ
5. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ frontmatter

### –§—É–Ω–∫—Ü–∏—è —Å–º–µ—â–µ–Ω–∏—è:

1. ‚úÖ –í–≤–æ–¥ ID –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è ID
3. ‚úÖ –°–º–µ—â–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏ –≤—Å–µ—Ö –¥–æ—á–µ—Ä–Ω–∏—Ö
4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫
5. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

1. –°–æ–∑–¥–∞–π—Ç–µ –¥–≤–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `00-0A - –¢–µ—Å—Ç1.md` –∏ `00-0B - –¢–µ—Å—Ç2.md`)
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∑–∞–º–µ–Ω—É: –∑–∞–º–µ–Ω–∏—Ç–µ `00-0A` —Å–æ–¥–µ—Ä–∂–∏–º—ã–º `00-0B`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ:
	- –°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω –≤ `changed-backup/`
	- –°—Å—ã–ª–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
	- –ò–º—è —Ñ–∞–π–ª–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–º–µ—â–µ–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏ –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö!

–ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ó–∞–º–µ–Ω–∞ - –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 1. –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª id 00-04-06 —Å—Ç–∞–Ω–µ—Ç id 00-04-09 2. —Å—Ç–∞—Ä—ã–π 00-04-09 –±—É–¥–µ—Ç –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω (–∞—Ä—Ö–∏–≤–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç) —Å–µ–π—á–∞—Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∞—Ä—Ö–∏–≤–∞—Ü–∏—è, –∞ –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª –æ—Å—Ç–∞–µ—Ç—Å—è 00-04-06 –§—É–Ω–∫—Ü–∏—è —Å–º–µ—â–µ–Ω–∏—è - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 1.–ø–æ—Å–ª–µ –≤–≤–µ–¥–µ–Ω–∏—è id –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä –±—É–¥–µ—Ç –Ω–∞–π–¥–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π id(–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏) 2.–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç —É–∫–∞–∑–∞—Ç—å –Ω–æ–≤–æ–µ –∏–º—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ 3.–ü–æ—Å–ª–µ —É–∫–∞–∑–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∏–º–µ–Ω–∏ –±—É–¥–µ—Ç –≤–æ–ø—Ä–æ—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ, —á—Ç–æ –≤—Å–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç —Å–º–µ—â–µ–Ω—ã 4. –ø—Ä–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º id –∏ –Ω–æ–≤—ã–º —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º, –∞ –≤—Å–µ —Å–º–µ—â–∞–µ–º—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (—Å —Ç–µ–º –∂–µ id –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –Ω–æ–≤—ã–π id –Ω–∞ –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –±–æ–ª—å—à–µ 00-02-01 -> —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 00-02-02 –∏ —Ç.–ø.) –î–ª—è —á–µ–≥–æ –Ω—É–∂–µ–Ω —Ä–∞–∑–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ó–∞–º–µ–Ω–∞ –Ω—É–∂–Ω–∞ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ç–æ—á–Ω–æ –∑–Ω–∞–µ—Ç, —á—Ç–æ –∑–∞–º–µ–Ω—è–µ–º—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á–∞ —Å—Ç–∞–ª–∞ –Ω–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏ —á—Ç–æ–±—ã –Ω–µ —É–¥–∞–ª—è—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤–æ–µ –Ω—É–∂–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–º–µ–Ω—ã –∏–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω—É–∂–µ–Ω –∏–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç id —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É/–∏–µ—Ä–∞—Ä—Ö–∏—é –≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ—Ä—è–¥–∫–µ) –°–º–µ—â–µ–Ω–∏–µ –∂–µ –Ω—É–∂–Ω–æ –∫–æ–≥–¥–∞ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤–∫–ª—é—á–∞—è –Ω–æ–≤—ã–π –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—è–¥–æ–∫. –Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ñ–∏—á–∏ –≤—ã—à–µ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É–¥–æ–±–Ω–µ–µ —á—Ç–æ–±—ã –æ–Ω–∞ –±—ã–ª–∞ –≤—ã—à–µ –ø–æ id —á–µ–º –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ)

–ü–æ–Ω—è–ª! –ù—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –ª–æ–≥–∏–∫—É: **–ó–∞–º–µ–Ω–∞** –∏ **–°–º–µ—â–µ–Ω–∏–µ** ‚Äî —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏. –î–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–¥–µ–ª–∞–µ–º:

## üîÑ –ó–ê–ú–ï–ù–ê (Replace):

- –°—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —É–¥–∞–ª—è–µ—Ç—Å—è (–ø–æ—Å–ª–µ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏)
- –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–Ω–∏–º–∞–µ—Ç –µ–≥–æ ID
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–æ—Ä—è–¥–æ–∫ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è

## üìê –°–ú–ï–©–ï–ù–ò–ï (Shift):

- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–º–µ—â–∞–µ—Ç—Å—è "–≤–Ω–∏–∑" (+1 –∫ ID)
- –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–Ω–∏–º–∞–µ—Ç –æ—Å–≤–æ–±–æ–¥–∏–≤—à–∏–π—Å—è ID
- –í—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Ç–∞–∫–∂–µ —Å–º–µ—â–∞—é—Ç—Å—è
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –í–°–ï –¥–æ–∫—É–º–µ–Ω—Ç—ã, –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Ä—è–¥–æ–∫

---

## üöÄ –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ó–ê–ú–ï–ù–´:

bash

```
cat > uch-scripts/replace-mode-v3.sh << 'EOF'
#!/bin/bash
# –ó–∞–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ - —É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è

# –ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
simple_replace_document() {
    echo ""
    echo "üîÑ –ó–ê–ú–ï–ù–ê –î–û–ö–£–ú–ï–ù–¢–ê"
    echo "–°—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω, –Ω–æ–≤—ã–π –∑–∞–π–º–µ—Ç –µ–≥–æ ID"
    echo ""
    
    # 1. ID –∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω)
    echo "=== –ó–ê–ú–ï–ù–Ø–ï–ú–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω: " target_id
    
    if [ -z "$target_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ò—â–µ–º –∑–∞–º–µ–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
    local target_file=$(find . -maxdepth 1 -name "${target_id} - *.md" -type f | head -1)
    if [ -z "$target_file" ]; then
        echo "‚ùå –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$target_id' –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return 1
    fi
    
    local target_name=$(basename "$target_file" .md | sed "s/^${target_id} - //")
    echo "–ù–∞–π–¥–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç: $target_name"
    
    # 2. ID –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∫–æ—Ç–æ—Ä—ã–º –∑–∞–º–µ–Ω—è–µ–º)
    echo ""
    echo "=== –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞, –ö–û–¢–û–†–´–ú –∑–∞–º–µ–Ω—è–µ–º: " source_id
    
    if [ -z "$source_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ò—â–µ–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª
    local source_file=$(find . -maxdepth 1 -name "${source_id} - *.md" -type f | head -1)
    if [ -z "$source_file" ]; then
        echo "‚ùå –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$source_id' –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return 1
    fi
    
    local source_name=$(basename "$source_file" .md | sed "s/^${source_id} - //")
    echo "–ù–∞–π–¥–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç: $source_name"
    
    # 3. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
    echo ""
    echo "=== –ü–ê–†–ê–ú–ï–¢–†–´ ==="
    read -p "–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ [${source_name}]: " new_name
    if [ -z "$new_name" ]; then
        new_name="$source_name"
    fi
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
    local level=$(echo "$target_id" | tr -cd '-' | wc -c)
    level=$((level + 1))
    
    # –í—ã–±–æ—Ä —Ç–∏–ø–∞
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    # –¢–µ–≥–∏
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (Enter —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –≤ –∏—Å—Ç–æ—á–Ω–∏–∫–µ): " new_tags
    
    # 4. –°–≤–æ–¥–∫–∞
    echo ""
    echo "üìã –°–í–û–î–ö–ê –ó–ê–ú–ï–ù–´:"
    echo "  –ó–ê–ú–ï–ù–Ø–ï–ú–´–ô (–±—É–¥–µ—Ç –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω):"
    echo "    ID: $target_id"
    echo "    –ù–∞–∑–≤–∞–Ω–∏–µ: $target_name"
    echo ""
    echo "  –ù–û–í–´–ô (–∑–∞–π–º–µ—Ç –º–µ—Å—Ç–æ –∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ):"
    echo "    ID: $source_id ‚Üí $target_id"
    echo "    –ù–∞–∑–≤–∞–Ω–∏–µ: $source_name ‚Üí $new_name"
    echo ""
    echo "  –†–ï–ó–£–õ–¨–¢–ê–¢:"
    echo "    –î–æ–∫—É–º–µ–Ω—Ç $target_id - $target_name"
    echo "    –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω –Ω–∞"
    echo "    –î–æ–∫—É–º–µ–Ω—Ç $target_id - $new_name"
    echo ""
    
    read -p "–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–º–µ–Ω—É? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 5. –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–º–µ–Ω—É
    echo ""
    echo "üîÑ –í—ã–ø–æ–ª–Ω—è—é –∑–∞–º–µ–Ω—É..."
    
    # 5.1 –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤
    local backup_dir="changed-backup"
    mkdir -p "$backup_dir"
    
    # 5.2 –ê—Ä—Ö–∏–≤–∏—Ä—É–µ–º –∑–∞–º–µ–Ω—è–µ–º—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
    echo "üìÅ –ê—Ä—Ö–∏–≤–∏—Ä—É—é –∑–∞–º–µ–Ω—è–µ–º—ã–π –¥–æ–∫—É–º–µ–Ω—Ç..."
    local timestamp=$(date +%Y%m%d-%H%M%S)
    local backup_file="${backup_dir}/${timestamp}-${target_id}-${target_name}.md"
    
    {
        echo "# –ê–†–•–ò–í–ò–†–û–í–ê–ù: $(date '+%Y-%m-%d %H:%M:%S')"
        echo "# –ó–ê–ú–ï–ù–ê: $target_id - $target_name ‚Üí $target_id - $new_name"
        echo "# –ò–°–•–û–î–ù–ò–ö: $source_id - $source_name"
        echo "---"
        cat "$target_file"
    } > "$backup_file"
    
    echo "    ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω –≤: $backup_file"
    
    # 5.3 –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID –∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ
    local new_filename="${target_id} - ${new_name}.md"
    echo "üìÑ –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $new_filename"
    
    # –ö–æ–ø–∏—Ä—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ñ–∞–π–ª
    cp "$source_file" "$new_filename"
    
    # 5.4 –û–±–Ω–æ–≤–ª—è–µ–º frontmatter –≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ
    temp_file="${new_filename}.tmp"
    
    # –ü–æ–ª—É—á–∞–µ–º —Ç–µ–≥–∏ –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã –Ω–æ–≤—ã–µ
    local final_tags="$new_tags"
    if [ -z "$final_tags" ]; then
        if [ -f "$source_file" ]; then
            final_tags=$(grep -A5 '^tags:' "$source_file" | tail -n +2 | \
                sed 's/^[[:space:]]*-[[:space:]]*"//' | sed 's/"$//' | \
                grep -v "^$type$" | tr '\n' ',' | sed 's/,$//')
        fi
    fi
    
    awk -v new_id="$target_id" -v new_name="$new_name" -v new_type="$type" -v new_level="$level" -v new_tags="$final_tags" '
    BEGIN { 
        in_frontmatter = 0
        tags_updated = 0
    }
    
    /^---$/ {
        in_frontmatter = !in_frontmatter
        print $0
        next
    }
    
    in_frontmatter && /^id:/ {
        print "id: \"" new_id "\""
        next
    }
    
    in_frontmatter && /^name:/ {
        print "name: \"" new_name "\""
        next
    }
    
    in_frontmatter && /^type:/ {
        print "type: \"" new_type "\""
        next
    }
    
    in_frontmatter && /^level:/ {
        print "level: " new_level
        next
    }
    
    in_frontmatter && /^tags:/ {
        print "tags:"
        if (new_tags != "") {
            split(new_tags, tags_array, ",")
            for (i in tags_array) {
                print "  - \"" tags_array[i] "\""
            }
        }
        print "  - \"" new_type "\""
        tags_updated = 1
        next
    }
    
    in_frontmatter && tags_updated && /^[[:space:]]*- "/ {
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Å—Ç–∞—Ä—ã–µ —Ç–µ–≥–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        next
    }
    
    !in_frontmatter && /^### / {
        # –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
        print "### " new_name
        next
    }
    
    { print $0 }
    ' "$new_filename" > "$temp_file"
    
    mv "$temp_file" "$new_filename"
    
    # 5.5 –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ
    echo "üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏..."
    
    local updated_count=0
    for file in *.md; do
        if [ ! -f "$file" ] || [[ "$file" == *"changed-backup"* ]] || [[ "$file" == "$new_filename" ]]; then
            continue
        fi
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
        if grep -q "\\[\\[${target_id} - ${target_name}\\]\\]" "$file"; then
            echo "  –û–±–Ω–æ–≤–ª—è—é: $(basename "$file")"
            
            temp_file2="${file}.tmp"
            sed "s/\[\[${target_id} - ${target_name}\]\]/\[\[${target_id} - ${new_name}\]\]/g" "$file" > "$temp_file2"
            
            if ! diff "$file" "$temp_file2" >/dev/null; then
                mv "$temp_file2" "$file"
                updated_count=$((updated_count + 1))
            else
                rm "$temp_file2"
            fi
        fi
        
        # –¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (–µ—Å–ª–∏ ID —Ä–∞–∑–Ω—ã–µ)
        if [ "$source_id" != "$target_id" ] && grep -q "\\[\\[${source_id} - ${source_name}\\]\\]" "$file"; then
            echo "  –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π: $(basename "$file")"
            
            temp_file2="${file}.tmp2"
            sed "s/\[\[${source_id} - ${source_name}\]\]/\[\[${target_id} - ${new_name}\]\]/g" "$file" > "$temp_file2"
            
            if ! diff "$file" "$temp_file2" >/dev/null; then
                mv "$temp_file2" "$file"
                updated_count=$((updated_count + 1))
            else
                rm "$temp_file2"
            fi
        fi
    done
    
    echo "  üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: $updated_count"
    
    # 5.6 –£–¥–∞–ª—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã
    echo "üóëÔ∏è  –£–¥–∞–ª—è—é –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã..."
    
    if [ "$source_file" != "$target_file" ] && [ -f "$source_file" ]; then
        rm "$source_file"
        echo "    –£–¥–∞–ª–µ–Ω: $(basename "$source_file")"
    fi
    
    if [ -f "$target_file" ] && [ "$target_file" != "$new_filename" ]; then
        rm "$target_file"
        echo "    –£–¥–∞–ª–µ–Ω: $(basename "$target_file")"
    fi
    
    echo ""
    echo "‚úÖ –ó–ê–ú–ï–ù–ê –í–´–ü–û–õ–ù–ï–ù–ê!"
    echo "   üìÅ –ê—Ä—Ö–∏–≤: $backup_file"
    echo "   üìÑ –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $new_filename"
    echo "   üîÑ ID: $target_id —Å–æ—Ö—Ä–∞–Ω–µ–Ω"
}

# –§—É–Ω–∫—Ü–∏—è —Å–º–µ—â–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è)
simple_shift_document() {
    echo ""
    echo "üìê –°–ú–ï–©–ï–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê"
    echo "–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Ä—è–¥–æ–∫ ID"
    echo ""
    
    # 1. –í–≤–æ–¥ ID –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo "=== –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    echo "–í–≤–µ–¥–∏—Ç–µ ID, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –∑–∞–Ω—è—Ç—å –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç:"
    read -p "ID: " desired_id
    
    if [ -z "$desired_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç
    if ! echo "$desired_id" | grep -qE '^[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})*$'; then
        echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ID"
        return 1
    fi
    
    # 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
    local existing_file=$(find . -maxdepth 1 -name "${desired_id} - *.md" -type f | head -1)
    
    if [ -z "$existing_file" ]; then
        echo "‚úÖ ID $desired_id —Å–≤–æ–±–æ–¥–µ–Ω"
        echo "–ú–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –±–µ–∑ —Å–º–µ—â–µ–Ω–∏—è"
        # –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
        return 0
    fi
    
    # 3. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω
    local existing_name=$(basename "$existing_file" .md | sed "s/^${desired_id} - //")
    echo ""
    echo "‚ö†Ô∏è  –î–æ–∫—É–º–µ–Ω—Ç —Å ID $desired_id —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:"
    echo "   $existing_name"
    echo ""
    
    # 4. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo "=== –ü–ê–†–ê–ú–ï–¢–†–´ –ù–û–í–û–ì–û –î–û–ö–£–ú–ï–ù–¢–ê ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " new_name
    
    if [ -z "$new_name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
    local level=$(echo "$desired_id" | tr -cd '-' | wc -c)
    level=$((level + 1))
    
    # –í—ã–±–æ—Ä —Ç–∏–ø–∞
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    # –¢–µ–≥–∏
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: " tags
    
    # 5. –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
    echo ""
    echo "‚ö†Ô∏è  ‚ö†Ô∏è  ‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï ‚ö†Ô∏è  ‚ö†Ô∏è  ‚ö†Ô∏è"
    echo "–ë—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –°–ú–ï–©–ï–ù–ò–ï –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:"
    echo ""
    echo "1. –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞—Å—Ç—Å—è —Å ID: $desired_id"
    echo "2. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç $desired_id –±—É–¥–µ—Ç —Å–º–µ—â–µ–Ω"
    echo "3. –í—Å–µ –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã"
    echo "4. –í—Å–µ —Å—Å—ã–ª–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
    echo ""
    echo "–ü—Ä–∏–º–µ—Ä:"
    echo "  –ù–æ–≤—ã–π: $desired_id - $new_name"
    echo "  –°—Ç–∞—Ä—ã–π: $desired_id - $existing_name ‚Üí $(get_next_id "$desired_id") - $existing_name"
    echo ""
    
    read -p "–ü–û–î–¢–í–ï–†–î–ò–¢–ï —Å–º–µ—â–µ–Ω–∏–µ? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 6. –í—ã–ø–æ–ª–Ω—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ
    echo ""
    echo "üîÑ –í—ã–ø–æ–ª–Ω—è—é —Å–º–µ—â–µ–Ω–∏–µ..."
    
    # 6.1 –ù–∞—Ö–æ–¥–∏–º –ø–æ—Å–ª–µ–¥–Ω—é—é —á–∞—Å—Ç—å ID –¥–ª—è –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞
    local last_part=$(echo "$desired_id" | grep -o '[^-]*$')
    local base_part=$(echo "$desired_id" | sed "s/-${last_part}$//")
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ decimal, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º, –æ–±—Ä–∞—Ç–Ω–æ –≤ HEX
    local last_decimal=$((16#$last_part))
    local new_last_decimal=$((last_decimal + 1))
    local new_last_hex=$(printf "%02X" $new_last_decimal)
    local shifted_id="${base_part}-${new_last_hex}"
    
    echo "   –°–º–µ—â–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π: $desired_id ‚Üí $shifted_id"
    
    # 6.2 –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É —Å–º–µ—â–µ–Ω–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    declare -A shift_map
    shift_map["$desired_id"]="$shifted_id"
    
    # –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    local child_pattern="${desired_id}-[0-9A-Fa-f][0-9A-Fa-f]"
    for child_file in $(find . -maxdepth 1 -name "${child_pattern} - *.md" -type f); do
        local child_id=$(basename "$child_file" | cut -d' ' -f1)
        # –í—ã—á–∏—Å–ª—è–µ–º —Å–º–µ—â–µ–Ω–Ω—ã–π ID –¥–ª—è –¥–æ—á–µ—Ä–Ω–µ–≥–æ
        local shifted_child_id=$(echo "$child_id" | sed "s/^${desired_id}/${shifted_id}/")
        shift_map["$child_id"]="$shifted_child_id"
        echo "   –î–æ—á–µ—Ä–Ω–∏–π: $child_id ‚Üí $shifted_child_id"
    done
    
    # 6.3 –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –∂–µ–ª–∞–µ–º—ã–º ID
    echo ""
    echo "üìù –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $desired_id - $new_name"
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è
    if [ -f "$SCRIPT_DIR/document-creator.sh" ]; then
        # –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è ID
        local temp_id="$desired_id"
        desired_id="TEMP-FORCE-ID"
        
        # –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
        if create_real_document "$new_name" "$level" "$type" "$base_part" "$tags"; then
            # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
            local temp_file=$(find . -maxdepth 1 -name "TEMP-*.md" -type f | head -1)
            if [ -n "$temp_file" ]; then
                mv "$temp_file" "${desired_id} - ${new_name}.md"
            fi
        fi
        
        desired_id="$temp_id"
    else
        echo "‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–º–æ–¥—É–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω)"
    fi
    
    # 6.4 –°–º–µ—â–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    echo ""
    echo "üìê –°–º–µ—â–∞—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã..."
    
    for old_id in "${!shift_map[@]}"; do
        local new_id="${shift_map[$old_id]}"
        
        # –ù–∞—Ö–æ–¥–∏–º —Ñ–∞–π–ª
        local old_file=$(find . -maxdepth 1 -name "${old_id} - *.md" -type f | head -1)
        if [ -z "$old_file" ]; then
            continue
        fi
        
        local old_name=$(basename "$old_file" .md | sed "s/^${old_id} - //")
        local new_filename="${new_id} - ${old_name}.md"
        
        echo "   $old_id - $old_name ‚Üí $new_filename"
        
        # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º —Ñ–∞–π–ª
        mv "$old_file" "$new_filename"
        
        # –û–±–Ω–æ–≤–ª—è–µ–º ID –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞
        temp_file="${new_filename}.tmp"
        sed "s/^id: \"${old_id}\"/id: \"${new_id}\"/" "$new_filename" > "$temp_file"
        mv "$temp_file" "$new_filename"
    done
    
    # 6.5 –û–±–Ω–æ–≤–ª—è–µ–º –≤—Å–µ —Å—Å—ã–ª–∫–∏
    echo ""
    echo "üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏..."
    
    local updated_count=0
    for file in *.md; do
        if [ ! -f "$file" ] || [[ "$file" == *"changed-backup"* ]]; then
            continue
        fi
        
        local file_updated=0
        temp_file="${file}.tmp"
        cp "$file" "$temp_file"
        
        for old_id in "${!shift_map[@]}"; do
            local new_id="${shift_map[$old_id]}"
            
            # –ù–∞—Ö–æ–¥–∏–º —Å—Ç–∞—Ä–æ–µ –∏–º—è
            # –ò—â–µ–º –≤ —Å–º–µ—â–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö –∏–ª–∏ –≤ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            local old_name=""
            if [ -f "${new_id} - *.md" ]; then
                # –ï—Å–ª–∏ —Ñ–∞–π–ª —É–∂–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω
                for f in "${new_id} - "*.md; do
                    if [ -f "$f" ]; then
                        old_name=$(basename "$f" .md | sed "s/^${new_id} - //")
                        break
                    fi
                done
            fi
            
            if [ -n "$old_name" ]; then
                # –ó–∞–º–µ–Ω—è–µ–º —Å—Å—ã–ª–∫–∏
                if sed -i '' "s/\[\[${old_id} - ${old_name}\]\]/\[\[${new_id} - ${old_name}\]\]/g" "$temp_file" 2>/dev/null; then
                    file_updated=1
                fi
            fi
        done
        
        if [ $file_updated -eq 1 ]; then
            mv "$temp_file" "$file"
            updated_count=$((updated_count + 1))
            echo "   ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω: $(basename "$file")"
        else
            rm "$temp_file"
        fi
    done
    
    echo "   üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: $updated_count"
    
    echo ""
    echo "‚úÖ –°–ú–ï–©–ï–ù–ò–ï –í–´–ü–û–õ–ù–ï–ù–û!"
    echo "   üìù –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $desired_id - $new_name"
    echo "   üîÑ –°–º–µ—â–µ–Ω–Ω—ã–π: $desired_id ‚Üí $shifted_id"
    echo "   üîó –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: $updated_count"
}

# –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ ID
get_next_id() {
    local id="$1"
    local last_part=$(echo "$id" | grep -o '[^-]*$')
    local base_part=$(echo "$id" | sed "s/-${last_part}$//")
    
    local last_decimal=$((16#$last_part))
    local new_last_decimal=$((last_decimal + 1))
    printf "%s-%02X" "$base_part" $new_last_decimal
}

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_document_operations_menu() {
    echo ""
    echo "=== –û–ü–ï–†–ê–¶–ò–ò –° –î–û–ö–£–ú–ï–ù–¢–ê–ú–ò ==="
    echo "1 - –ó–∞–º–µ–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (—Å—Ç–∞—Ä—ã–π –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è)"
    echo "2 - –°–º–µ—Å—Ç–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–≤—Å–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Ä—è–¥–æ–∫)"
    echo "3 - –ù–∞–∑–∞–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3): " choice
    
    case $choice in
        1) simple_replace_document ;;
        2) simple_shift_document ;;
        3) return 0 ;;
        *) echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" ;;
    esac
}
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω v3 —Å —Ä–∞–∑–¥–µ–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π –∑–∞–º–µ–Ω—ã –∏ —Å–º–µ—â–µ–Ω–∏—è"
```

–¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ–º –≥–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:

## üìã –¢–µ–ø–µ—Ä—å —è—Å–Ω–æ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã:

### –û–ø—Ü–∏—è 1: –ó–ê–ú–ï–ù–ê

text

```
–í–≤–æ–¥: ID_–∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ, ID_–Ω–æ–≤–æ–≥–æ
–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –°—Ç–∞—Ä—ã–π ‚Üí –∞—Ä—Ö–∏–≤ changed-backup/
- –ù–æ–≤—ã–π ‚Üí –∑–∞–Ω–∏–º–∞–µ—Ç ID —Å—Ç–∞—Ä–æ–≥–æ
- –°—Å—ã–ª–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
```

### –û–ø—Ü–∏—è 2: –°–ú–ï–©–ï–ù–ò–ï

text

```
–í–≤–æ–¥: –∂–µ–ª–∞–µ–º—ã–π_ID, –Ω–∞–∑–≤–∞–Ω–∏–µ_–Ω–æ–≤–æ–≥–æ
–†–µ–∑—É–ª—å—Ç–∞—Ç:
- –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç ‚Üí –∂–µ–ª–∞–µ–º—ã–π_ID
- –°—Ç–∞—Ä—ã–π —Å —ç—Ç–∏–º ID ‚Üí ID+1
- –î–æ—á–µ—Ä–Ω–∏–µ ‚Üí —Ç–∞–∫–∂–µ —Å–º–µ—â–∞—é—Ç—Å—è
- –í—Å–µ —Å—Å—ã–ª–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
```

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö!

kirillkravcov@MacBook-Pro-Kirill uch-docs % >.... fi }' uch-scripts/main.sh # –û–±–Ω–æ–≤–ª—è–µ–º –≤—ã–∑–æ–≤ sed -i '' 's/show\_replace\_shift\_menu/show\_document\_operations\_menu/' uch-scripts/main.sh echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞" echo "üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º:" echo "1. –ó–∞–º–µ–Ω–∞: —Å—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è, –Ω–æ–≤—ã–π –∑–∞–Ω–∏–º–∞–µ—Ç –µ–≥–æ ID" echo "2. –°–º–µ—â–µ–Ω–∏–µ: –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –Ω–æ–≤—ã–π –∑–∞–Ω–∏–º–∞–µ—Ç –∂–µ–ª–∞–µ–º—ã–π ID"./uch-create-modular.sh zsh: command not found: # zsh: command not found: # zsh: command not found: # zsh: command not found: # zsh: command not found: # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º: 1. –ó–∞–º–µ–Ω–∞: —Å—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è, –Ω–æ–≤—ã–π –∑–∞–Ω–∏–º–∞–µ—Ç –µ–≥–æ ID 2. –°–º–µ—â–µ–Ω–∏–µ: –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –Ω–æ–≤—ã–π –∑–∞–Ω–∏–º–∞–µ—Ç –∂–µ–ª–∞–µ–º—ã–π ID === –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH === === UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê === –í–µ—Ä—Å–∏—è: 1.0.0 ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: 6 /Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/uch-scripts/main.sh: line 90: syntax error near unexpected token \`fi' /Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/uch-scripts/main.sh: line 90: \`fi' kirillkravcov@MacBook-Pro-Kirill uch-docs %

–û—à–∏–±–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –≤ main.sh. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º:

bash

```
# –ü–æ–∫–∞–∂–µ–º –ø—Ä–æ–±–ª–µ–º–Ω—É—é —Å—Ç—Ä–æ–∫—É
sed -n '85,95p' uch-scripts/main.sh

# –ò—Å–ø—Ä–∞–≤–∏–º –≤—Ä—É—á–Ω—É—é
cat > uch-scripts/main.sh << 'EOF'
#!/bin/bash
# –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç UCH Document System - –ú–æ–¥—É–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "=== UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ==="
echo "–í–µ—Ä—Å–∏—è: 1.0.0"
echo ""

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏
MODULES_LOADED=0
if [ -f "$SCRIPT_DIR/utils.sh" ]; then
    source "$SCRIPT_DIR/utils.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/types.sh" ]; then
    source "$SCRIPT_DIR/types.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/create.sh" ]; then
    source "$SCRIPT_DIR/create.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/document-creator.sh" ]; then
    source "$SCRIPT_DIR/document-creator.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/manual-mode.sh" ]; then
    source "$SCRIPT_DIR/manual-mode.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/batch-mode.sh" ]; then
    source "$SCRIPT_DIR/batch-mode.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/replace-shift.sh" ]; then
    source "$SCRIPT_DIR/replace-shift.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

echo "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: $MODULES_LOADED"
echo ""

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_main_menu() {
    echo "=== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ==="
    echo "1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–∞–≤—Ç–æ-ID)"
    echo "2 - –°–æ–∑–¥–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏ (—Ä—É—á–Ω–æ–π ID)"
    echo "3 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ"
    echo "4 - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ (–∑–∞–º–µ–Ω–∞/—Å–º–µ—â–µ–Ω–∏–µ)"
    echo "5 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É"
    echo "6 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã"
    echo "q - –í—ã—Ö–æ–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-6/q): " choice
    
    case $choice in
        1) 
            create_document_improved
            echo ""
            show_main_menu 
            ;;
        2)
            create_document_manual
            echo ""
            show_main_menu
            ;;
        3)
            create_batch_documents
            echo ""
            show_main_menu
            ;;
        4)
            show_document_operations_menu
            echo ""
            show_main_menu
            ;;
        5)
            echo "‚úÖ –°–ò–°–¢–ï–ú–ê:"
            echo "üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
            echo "üìÖ –î–∞—Ç–∞: $(get_current_date 2>/dev/null || echo 'N/A')"
            echo "üì¶ –ú–æ–¥—É–ª–µ–π: $MODULES_LOADED"
            echo ""
            show_main_menu
            ;;
        6)
            echo "üß™ –¢–ï–°–¢ –£–¢–ò–õ–ò–¢:"
            echo "- –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: $(get_current_date 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –°–≤–æ–±–æ–¥–Ω—ã–π master ID: $(find_free_master_id 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –¢–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É—Ä–æ–≤–Ω—è 3: $(get_default_type_for_level 3 2>/dev/null || echo 'N/A')"
            echo ""
            show_main_menu
            ;;
        q|Q) 
            echo "–í—ã—Ö–æ–¥" 
            exit 0 
            ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" 
            show_main_menu 
            ;;
    esac
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
if [ $# -eq 0 ]; then
    show_main_menu
else
    echo "‚ö†Ô∏è  –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"
    show_main_menu
fi
EOF

echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω main.sh"
echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º:"
./uch-create-modular.sh
```

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É. –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∞, –ø–æ–∫–∞–∂–∏—Ç–µ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `./uch-create-modular.sh`.

1\. –í –∑–∞–º–µ–Ω–µ —Å–∞–º–∞ –ª–æ–≥–∏–∫–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫. –ù–æ –µ—Å—Ç—å –Ω–µ—É–¥–æ–±—Å—Ç–≤–æ - –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (–∏—Å—Ç–æ—á–Ω–∏–∫) –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω –∫–∞–∫ –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (–∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–ª–æ—É) —Å–µ–π—á–∞—Å —Å–æ–∑–¥–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ id –∏ –∏–º—è, –∞ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ —Å–∞–º –¥–æ–∫—É–º–µ–Ω—Ç (–Ω—É–∂–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è) 2. —Å–º–µ—â–µ–Ω–∏–µ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç üìê –°–ú–ï–©–ï–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è, –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Ä—è–¥–æ–∫ ID === –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ === –í–≤–µ–¥–∏—Ç–µ ID, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –∑–∞–Ω—è—Ç—å –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: ID: 00-04-08 ‚ö†Ô∏è –î–æ–∫—É–º–µ–Ω—Ç —Å ID 00-04-08 —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: –¢–µ—Å—Ç –ó–∞–º–µ–Ω—ã === –ü–ê–†–ê–ú–ï–¢–†–´ –ù–û–í–û–ì–û –î–û–ö–£–ú–ï–ù–¢–ê === –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: –¢–µ—Å—Ç —Å–º–µ—â–µ–Ω–∏—è === –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3 === 1 - task (–ó–∞–¥–∞—á–∞) 2 - feature (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å) 3 - bug (–û—à–∏–±–∫–∞/–±–∞–≥) 4 - snapshot (–°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã) –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-4) \[1\]: 1 –í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: ‚ö†Ô∏è ‚ö†Ô∏è ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï ‚ö†Ô∏è ‚ö†Ô∏è ‚ö†Ô∏è –ë—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –°–ú–ï–©–ï–ù–ò–ï –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: 1. –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞—Å—Ç—Å—è —Å ID: 00-04-08 2. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç 00-04-08 –±—É–¥–µ—Ç —Å–º–µ—â–µ–Ω 3. –í—Å–µ –µ–≥–æ –¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã 4. –í—Å–µ —Å—Å—ã–ª–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–µ –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ü—Ä–∏–º–µ—Ä: –ù–æ–≤—ã–π: 00-04-08 - –¢–µ—Å—Ç —Å–º–µ—â–µ–Ω–∏—è –°—Ç–∞—Ä—ã–π: 00-04-08 - –¢–µ—Å—Ç –ó–∞–º–µ–Ω—ã ‚Üí 00-04-09 - –¢–µ—Å—Ç –ó–∞–º–µ–Ω—ã –ü–û–î–¢–í–ï–†–î–ò–¢–ï —Å–º–µ—â–µ–Ω–∏–µ? (y/n): y ÔøΩÔøΩ –í—ã–ø–æ–ª–Ω—è—é —Å–º–µ—â–µ–Ω–∏–µ... –°–º–µ—â–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π: 00-04-08 ‚Üí 00-04-09 /Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/uch-scripts/replace-shift.sh: line 368: declare: -A: invalid option declare: usage: declare \[-afFirtx\] \[-p\] \[name\[=value\]...\] /Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/uch-scripts/replace-shift.sh: line 369: 00-04-08: value too great for base (error token is "08") kirillkravcov@MacBook-Pro-Kirill uch-docs %

–ü—Ä–æ–±–ª–µ–º—ã:

1. **Bash –≤–µ—Ä—Å–∏—è –Ω–∞ macOS** –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `declare -A` (–∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã)
2. **–û—à–∏–±–∫–∞ –≤ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ HEX** \- `08` –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ octal (–≤–æ—Å—å–º–µ—Ä–∏—á–Ω–æ–µ)
3. **–í –∑–∞–º–µ–Ω–µ** –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç, –∞ –Ω–µ –≤—ã–±–∏—Ä–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

–ò—Å–ø—Ä–∞–≤–ª—è–µ–º:

bash

```
# –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ–º replace-shift.sh —Å —É—á–µ—Ç–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π bash –Ω–∞ macOS
cat > uch-scripts/replace-shift-fixed.sh << 'EOF'
#!/bin/bash
# –ó–∞–º–µ–Ω–∞ –∏ —Å–º–µ—â–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–ª—è macOS

# –ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
simple_replace_document() {
    echo ""
    echo "üîÑ –ó–ê–ú–ï–ù–ê –î–û–ö–£–ú–ï–ù–¢–ê"
    echo "–°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–º–µ–Ω–∏—Ç —Å—Ç–∞—Ä—ã–π"
    echo ""
    
    # 1. ID –∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo "=== –ó–ê–ú–ï–ù–Ø–ï–ú–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω: " target_id
    
    if [ -z "$target_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ò—â–µ–º –∑–∞–º–µ–Ω—è–µ–º—ã–π —Ñ–∞–π–ª
    local target_file=$(find . -maxdepth 1 -name "${target_id} - *.md" -type f | head -1)
    if [ -z "$target_file" ]; then
        echo "‚ùå –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$target_id' –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return 1
    fi
    
    local target_name=$(basename "$target_file" .md | sed "s/^${target_id} - //")
    echo "–ù–∞–π–¥–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç: $target_name"
    
    # 2. –°–æ–∑–¥–∞–µ–º –ù–û–í–´–ô –¥–æ–∫—É–º–µ–Ω—Ç (–Ω–µ –≤—ã–±–∏—Ä–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
    echo ""
    echo "=== –°–û–ó–î–ê–ù–ò–ï –ù–û–í–û–ì–û –î–û–ö–£–ú–ï–ù–¢–ê ==="
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
    local level=$(echo "$target_id" | tr -cd '-' | wc -c)
    level=$((level + 1))
    
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " new_name
    if [ -z "$new_name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –í—ã–±–æ—Ä —Ç–∏–ø–∞
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    # –¢–µ–≥–∏
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: " new_tags
    
    # 3. –°–≤–æ–¥–∫–∞
    echo ""
    echo "üìã –°–í–û–î–ö–ê –ó–ê–ú–ï–ù–´:"
    echo "  –ó–ê–ú–ï–ù–Ø–ï–ú–´–ô (–±—É–¥–µ—Ç –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω):"
    echo "    ID: $target_id"
    echo "    –ù–∞–∑–≤–∞–Ω–∏–µ: $target_name"
    echo ""
    echo "  –ù–û–í–´–ô (–∑–∞–π–º–µ—Ç –µ–≥–æ –º–µ—Å—Ç–æ):"
    echo "    ID: $target_id (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)"
    echo "    –ù–∞–∑–≤–∞–Ω–∏–µ: $new_name"
    echo "    –¢–∏–ø: $type"
    echo "    –£—Ä–æ–≤–µ–Ω—å: $level"
    echo ""
    
    read -p "–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–º–µ–Ω—É? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 4. –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–º–µ–Ω—É
    echo ""
    echo "üîÑ –í—ã–ø–æ–ª–Ω—è—é –∑–∞–º–µ–Ω—É..."
    
    # 4.1 –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤
    local backup_dir="changed-backup"
    mkdir -p "$backup_dir"
    
    # 4.2 –ê—Ä—Ö–∏–≤–∏—Ä—É–µ–º –∑–∞–º–µ–Ω—è–µ–º—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
    echo "üìÅ –ê—Ä—Ö–∏–≤–∏—Ä—É—é –∑–∞–º–µ–Ω—è–µ–º—ã–π –¥–æ–∫—É–º–µ–Ω—Ç..."
    local timestamp=$(date +%Y%m%d-%H%M%S)
    local backup_file="${backup_dir}/${timestamp}-${target_id}-${target_name}.md"
    
    {
        echo "# –ê–†–•–ò–í–ò–†–û–í–ê–ù: $(date '+%Y-%m-%d %H:%M:%S')"
        echo "# –ó–ê–ú–ï–ù–ê: $target_id - $target_name ‚Üí $target_id - $new_name"
        echo "---"
        cat "$target_file"
    } > "$backup_file"
    
    echo "    ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω –≤: $backup_file"
    
    # 4.3 –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è (–µ—Å–ª–∏ –Ω–µ —É—Ä–æ–≤–µ–Ω—å 1)
    local parent_id=""
    if [ $level -gt 1 ]; then
        parent_id=$(echo "$target_id" | sed 's/-[^-]*$//')
    fi
    
    # 4.4 –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —á–µ—Ä–µ–∑ –Ω–∞—à—É —Å–∏—Å—Ç–µ–º—É
    echo "üìù –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç..."
    
    if [ -f "$SCRIPT_DIR/document-creator.sh" ]; then
        # –í—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é ID
        local original_find_free_master_id=$(declare -f find_free_master_id 2>/dev/null || echo "")
        local original_find_free_child_id=$(declare -f find_free_child_id 2>/dev/null || echo "")
        
        # –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è target_id
        force_id_generator() {
            echo "$1"  # –ü—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π ID
        }
        
        # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª —Å –Ω—É–∂–Ω—ã–º ID
        local temp_id_file=".temp_id_file"
        echo "$target_id" > "$temp_id_file"
        
        # –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
        if create_real_document "$new_name" "$level" "$type" "$parent_id" "$new_tags"; then
            # –ù–∞—Ö–æ–¥–∏–º —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª (–ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–æ–∑–¥–∞–Ω–Ω—ã–π)
            local latest_md=$(ls -t *.md | head -1)
            if [ -f "$latest_md" ]; then
                # –ò–∑–≤–ª–µ–∫–∞–µ–º —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π ID –∏–∑ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
                local created_id=$(echo "$latest_md" | cut -d' ' -f1)
                local created_name=$(echo "$latest_md" | sed "s/^${created_id} - //" | sed 's/.md$//')
                
                # –ï—Å–ª–∏ ID –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Ü–µ–ª–µ–≤—ã–º, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º
                if [ "$created_id" != "$target_id" ]; then
                    local new_filename="${target_id} - ${created_name}.md"
                    echo "  –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—é: $latest_md ‚Üí $new_filename"
                    mv "$latest_md" "$new_filename"
                    latest_md="$new_filename"
                fi
            fi
        fi
        
        # –£–¥–∞–ª—è–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
        rm -f "$temp_id_file"
        
        echo "    ‚úÖ –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω"
    else
        echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç"
        return 1
    fi
    
    # 4.5 –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏
    echo "üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏..."
    
    local updated_count=0
    for file in *.md; do
        if [ ! -f "$file" ] || [[ "$file" == *"changed-backup"* ]] || [[ "$(basename "$file")" == "${target_id} - ${new_name}.md" ]]; then
            continue
        fi
        
        if grep -q "\\[\\[${target_id} - ${target_name}\\]\\]" "$file"; then
            echo "  –û–±–Ω–æ–≤–ª—è—é: $(basename "$file")"
            sed -i '' "s/\[\[${target_id} - ${target_name}\]\]/\[\[${target_id} - ${new_name}\]\]/g" "$file"
            updated_count=$((updated_count + 1))
        fi
    done
    
    echo "  üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: $updated_count"
    
    # 4.6 –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
    if [ -f "$target_file" ]; then
        rm "$target_file"
        echo "üóëÔ∏è  –£–¥–∞–ª–µ–Ω —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª: $(basename "$target_file")"
    fi
    
    echo ""
    echo "‚úÖ –ó–ê–ú–ï–ù–ê –í–´–ü–û–õ–ù–ï–ù–ê!"
    echo "   üìÅ –ê—Ä—Ö–∏–≤: $backup_file"
    echo "   üìÑ –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $target_id - $new_name"
}

# –§—É–Ω–∫—Ü–∏—è —Å–º–µ—â–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–ª—è macOS)
simple_shift_document() {
    echo ""
    echo "üìê –°–ú–ï–©–ï–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê"
    echo ""
    
    # 1. –í–≤–æ–¥ ID
    echo "=== –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ ID –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " desired_id
    
    if [ -z "$desired_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç
    if ! echo "$desired_id" | grep -qE '^[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})*$'; then
        echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç ID"
        return 1
    fi
    
    # 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
    local existing_file=$(find . -maxdepth 1 -name "${desired_id} - *.md" -type f | head -1)
    
    if [ -z "$existing_file" ]; then
        echo "‚úÖ ID $desired_id —Å–≤–æ–±–æ–¥–µ–Ω"
        echo "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞"
        return 0
    fi
    
    local existing_name=$(basename "$existing_file" .md | sed "s/^${desired_id} - //")
    echo "‚ö†Ô∏è  –î–æ–∫—É–º–µ–Ω—Ç —Å ID $desired_id —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: $existing_name"
    
    # 3. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo ""
    echo "=== –ü–ê–†–ê–ú–ï–¢–†–´ –ù–û–í–û–ì–û –î–û–ö–£–ú–ï–ù–¢–ê ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " new_name
    
    if [ -z "$new_name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
    local level=$(echo "$desired_id" | tr -cd '-' | wc -c)
    level=$((level + 1))
    
    # –í—ã–±–æ—Ä —Ç–∏–ø–∞
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type=$(get_default_type_for_level "$level")
    fi
    
    # –¢–µ–≥–∏
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: " tags
    
    # 4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    echo ""
    echo "‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –ë—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–º–µ—â–µ–Ω–∏–µ!"
    echo "–ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $desired_id - $new_name"
    echo "–°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –±—É–¥–µ—Ç —Å–º–µ—â–µ–Ω –Ω–∞ +1"
    echo ""
    
    read -p "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–º–µ—â–µ–Ω–∏–µ? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 5. –í—ã–ø–æ–ª–Ω—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ
    echo ""
    echo "üîÑ –í—ã–ø–æ–ª–Ω—è—é —Å–º–µ—â–µ–Ω–∏–µ..."
    
    # 5.1 –í—ã—á–∏—Å–ª—è–µ–º —Å–º–µ—â–µ–Ω–Ω—ã–π ID
    local last_part=$(echo "$desired_id" | grep -o '[^-]*$')
    local base_part=$(echo "$desired_id" | sed "s/-${last_part}$//")
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º HEX –≤ decimal (–±–µ–∑ –≤–µ–¥—É—â–µ–≥–æ –Ω—É–ª—è –¥–ª—è octal)
    local last_hex_clean=$(echo "$last_part" | sed 's/^0*//')
    if [ -z "$last_hex_clean" ]; then
        last_hex_clean="0"
    fi
    local last_decimal=$(printf "%d" "0x$last_hex_clean")
    local new_last_decimal=$((last_decimal + 1))
    local new_last_hex=$(printf "%02X" $new_last_decimal)
    local shifted_id="${base_part}-${new_last_hex}"
    
    echo "   –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π: $desired_id ‚Üí $shifted_id"
    
    # 5.2 –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è
    local files_to_shift=""
    files_to_shift="$existing_file"
    
    # –î–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    local child_pattern="${desired_id}-[0-9A-Fa-f][0-9A-Fa-f]"
    for child_file in $(find . -maxdepth 1 -name "${child_pattern} - *.md" -type f); do
        files_to_shift="$files_to_shift $child_file"
    done
    
    echo "   –ù–∞–π–¥–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: $(echo "$files_to_shift" | wc -w | tr -d ' ')"
    
    # 5.3 –°–æ–∑–¥–∞–µ–º –∫–∞—Ä—Ç—É —Å–º–µ—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
    for old_file in $files_to_shift; do
        local old_id=$(basename "$old_file" | cut -d' ' -f1)
        local old_name=$(basename "$old_file" .md | sed "s/^${old_id} - //")
        
        # –í—ã—á–∏—Å–ª—è–µ–º –Ω–æ–≤—ã–π ID
        local new_id="$old_id"
        if [ "$old_id" = "$desired_id" ]; then
            new_id="$shifted_id"
        elif [[ "$old_id" == "$desired_id"-* ]]; then
            new_id=$(echo "$old_id" | sed "s/^${desired_id}/${shifted_id}/")
        fi
        
        echo "     $old_id ‚Üí $new_id"
        
        # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –∫–æ–ø–∏—é —Å –Ω–æ–≤—ã–º ID
        local temp_file="TEMP-${new_id}-${old_name}.md"
        
        # –û–±–Ω–æ–≤–ª—è–µ–º ID –≤ —Ñ–∞–π–ª–µ
        sed "s/^id: \"${old_id}\"/id: \"${new_id}\"/" "$old_file" > "$temp_file"
    done
    
    # 5.4 –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –∂–µ–ª–∞–µ–º—ã–º ID
    echo ""
    echo "üìù –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $desired_id - $new_name"
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è
    local parent_id=""
    if [ $level -gt 1 ]; then
        parent_id="$base_part"
    fi
    
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–º ID
    if [ -f "$SCRIPT_DIR/document-creator.sh" ]; then
        # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è ID
        export FORCE_ID="$desired_id"
        
        # –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
        if create_real_document "$new_name" "$level" "$type" "$parent_id" "$tags"; then
            # –ù–∞—Ö–æ–¥–∏–º –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
            sleep 1
            local created_file=$(find . -maxdepth 1 -name "*${new_name}.md" -type f | head -1)
            if [ -n "$created_file" ]; then
                local created_id=$(basename "$created_file" | cut -d' ' -f1)
                if [ "$created_id" != "$desired_id" ]; then
                    mv "$created_file" "${desired_id} - ${new_name}.md"
                fi
            fi
        fi
        
        unset FORCE_ID
    fi
    
    # 5.5 –£–¥–∞–ª—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ
    echo "üìù –ü—Ä–∏–º–µ–Ω—è—é —Å–º–µ—â–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞..."
    
    for old_file in $files_to_shift; do
        rm "$old_file"
    done
    
    for temp_file in TEMP-*.md; do
        if [ -f "$temp_file" ]; then
            local perm_name=$(echo "$temp_file" | sed 's/^TEMP-//')
            mv "$temp_file" "$perm_name"
            echo "   ‚úÖ $perm_name"
        fi
    done
    
    # 5.6 –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏
    echo "üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏..."
    
    local updated_count=0
    for file in *.md; do
        if [ ! -f "$file" ] || [[ "$file" == *"changed-backup"* ]]; then
            continue
        fi
        
        local file_changed=0
        
        # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
        if grep -q "\\[\\[${desired_id} - ${existing_name}\\]\\]" "$file"; then
            sed -i '' "s/\[\[${desired_id} - ${existing_name}\]\]/\[\[${shifted_id} - ${existing_name}\]\]/g" "$file"
            file_changed=1
        fi
        
        # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
        for child_file in $(find . -maxdepth 1 -name "${shifted_id}-[0-9A-Fa-f][0-9A-Fa-f] - *.md" -type f); do
            local child_id=$(basename "$child_file" | cut -d' ' -f1)
            local child_name=$(basename "$child_file" .md | sed "s/^${child_id} - //")
            local old_child_id=$(echo "$child_id" | sed "s/^${shifted_id}/${desired_id}/")
            
            if grep -q "\\[\\[${old_child_id} - " "$file"; then
                sed -i '' "s/\[\[${old_child_id} - /\[\[${child_id} - /g" "$file"
                file_changed=1
            fi
        done
        
        if [ $file_changed -eq 1 ]; then
            updated_count=$((updated_count + 1))
        fi
    done
    
    echo "   üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: $updated_count"
    
    echo ""
    echo "‚úÖ –°–ú–ï–©–ï–ù–ò–ï –í–´–ü–û–õ–ù–ï–ù–û!"
    echo "   üìù –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $desired_id - $new_name"
    echo "   üîÑ –°–º–µ—â–µ–Ω–Ω—ã–π: $shifted_id - $existing_name"
}

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_document_operations_menu() {
    echo ""
    echo "=== –û–ü–ï–†–ê–¶–ò–ò –° –î–û–ö–£–ú–ï–ù–¢–ê–ú–ò ==="
    echo "1 - –ó–∞–º–µ–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –Ω–∞ –º–µ—Å—Ç–µ —Å—Ç–∞—Ä–æ–≥–æ)"
    echo "2 - –°–º–µ—Å—Ç–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–≤—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π, —Å–¥–≤–∏–Ω—É—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)"
    echo "3 - –ù–∞–∑–∞–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3): " choice
    
    case $choice in
        1) simple_replace_document ;;
        2) simple_shift_document ;;
        3) return 0 ;;
        *) echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" ;;
    esac
}
EOF

# –ó–∞–º–µ–Ω—è–µ–º —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
mv uch-scripts/replace-shift-fixed.sh uch-scripts/replace-shift.sh

echo "‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω replace-shift.sh –¥–ª—è macOS"
echo "üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º:"
echo "1. –ó–∞–º–µ–Ω–∞: —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç, –∑–∞–º–µ–Ω–∏—Ç —Å—Ç–∞—Ä—ã–π"
echo "2. –°–º–µ—â–µ–Ω–∏–µ: –≤—Å—Ç–∞–≤–∏—Ç –Ω–æ–≤—ã–π, —Å–¥–≤–∏–Ω–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π"
./uch-create-modular.sh
```

–¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:

1. **–ó–∞–º–µ–Ω–∞** \- —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç (–Ω–µ –≤—ã–±–∏—Ä–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
2. **–°–º–µ—â–µ–Ω–∏–µ** \- —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —É—á–µ—Ç–æ–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π bash –Ω–∞ macOS
3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å HEX –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π –∏ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏!

–ó–∞–º–µ–Ω–∞ - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ: –§–∞–π–ª —Å–æ–∑–¥–∞–µ—Ç—Å—è, –Ω–æ –ø–æ—á–µ–º—É-—Ç–æ —Å –¥—Ä—É–≥–∏–º –Ω–æ–º–µ—Ä–æ–º. –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: —è —É–∫–∞–∑—ã–≤–∞—é id 00-04-08 —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ù–æ–≤–æ–µ –∏–º—è –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–º–µ–Ω—ã: –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª –ù–æ–≤—ã–π —Ñ–∞–π–ª –≤–∏–¥–∏–º–æ –∏—â–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≤–æ–±–æ–¥–Ω—ã–π –Ω–æ–º–µ—Ä. –í–∞–∂–Ω–æ! –ù—É–∂–Ω–æ —É–∫–∞–∑–≤–∞—Ç—å —Ç–æ—á–Ω–æ —Ç–æ—Ç –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ–º –≤ –æ–ø—Ä–æ—Å–Ω–∏–∫–µ. –î–∞–ª–µ–µ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç –µ–≥–æ –≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è 00-04-06 –î–∞–ª–µ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ç—Ä–∞–Ω–Ω–æ—Å—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞—á–µ–º-—Ç–æ —Ç–æ–∂–µ –º–µ–Ω—è–µ—Ç –Ω—É–º–µ—Ä–∞—Ü–∏—é –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–º–µ—Å—Ç–æ 00-04 -> 00-04-08! üîÑ –ó–ê–ú–ï–ù–ê –î–û–ö–£–ú–ï–ù–¢–ê –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–º–µ–Ω–∏—Ç —Å—Ç–∞—Ä—ã–π === –ó–ê–ú–ï–ù–Ø–ï–ú–´–ô –î–û–ö–£–ú–ï–ù–¢ === –í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω: 00-04-08 –ù–∞–π–¥–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç: –¢–µ—Å—Ç –ó–∞–º–µ–Ω—ã === –°–û–ó–î–ê–ù–ò–ï –ù–û–í–û–ì–û –î–û–ö–£–ú–ï–ù–¢–ê === –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: –¢–µ—Å—Ç –∑–∞–º–µ–Ω—ã —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞ === –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3 === 1 - task (–ó–∞–¥–∞—á–∞) 2 - feature (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å) 3 - bug (–û—à–∏–±–∫–∞/–±–∞–≥) 4 - snapshot (–°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã) –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-4) \[1\]: 1 –í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: üìã –°–í–û–î–ö–ê –ó–ê–ú–ï–ù–´: –ó–ê–ú–ï–ù–Ø–ï–ú–´–ô (–±—É–¥–µ—Ç –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω): ID: 00-04-08 –ù–∞–∑–≤–∞–Ω–∏–µ: –¢–µ—Å—Ç –ó–∞–º–µ–Ω—ã –ù–û–í–´–ô (–∑–∞–π–º–µ—Ç –µ–≥–æ –º–µ—Å—Ç–æ): ID: 00-04-08 (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è) –ù–∞–∑–≤–∞–Ω–∏–µ: –¢–µ—Å—Ç –∑–∞–º–µ–Ω—ã —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¢–∏–ø: task –£—Ä–æ–≤–µ–Ω—å: 3 –í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–º–µ–Ω—É? (y/n): y üîÑ –í—ã–ø–æ–ª–Ω—è—é –∑–∞–º–µ–Ω—É... üìÅ –ê—Ä—Ö–∏–≤–∏—Ä—É—é –∑–∞–º–µ–Ω—è–µ–º—ã–π –¥–æ–∫—É–º–µ–Ω—Ç... ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω –≤: changed-backup/20251228-135910-00-04-08-–¢–µ—Å—Ç –ó–∞–º–µ–Ω—ã.md üìù –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç... –°–æ–∑–¥–∞—é –¥–æ–∫—É–º–µ–Ω—Ç: 00-04-06 - –¢–µ—Å—Ç –∑–∞–º–µ–Ω—ã —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞.md –û–±–Ω–æ–≤–ª—è—é —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: 00-04 - –õ–∏–Ω–∏—è –ì. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.md ‚úÖ –°—Å—ã–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 00-04-06 - –¢–µ—Å—Ç –∑–∞–º–µ–Ω—ã —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞.md –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—é: 00-04 - –õ–∏–Ω–∏—è –ì. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.md ‚Üí 00-04-08 - –õ–∏–Ω–∏—è –ì. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.md ‚úÖ –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏... –û–±–Ω–æ–≤–ª—è—é: 00-04-08 - –õ–∏–Ω–∏—è –ì. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: 1 üóëÔ∏è –£–¥–∞–ª–µ–Ω —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª: 00-04-08 - –¢–µ—Å—Ç –ó–∞–º–µ–Ω—ã.md ‚úÖ –ó–ê–ú–ï–ù–ê –í–´–ü–û–õ–ù–ï–ù–ê! üìÅ –ê—Ä—Ö–∏–≤: changed-backup/20251228-135910-00-04-08-–¢–µ—Å—Ç –ó–∞–º–µ–Ω—ã.md üìÑ –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: 00-04-08 - –¢–µ—Å—Ç –∑–∞–º–µ–Ω—ã —Å —Å–æ–∑–¥–∞–Ω–∏–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞ –ü–æ —Å–º–µ—â–µ–Ω–∏—é - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ: –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–º–µ—â–µ–Ω–∏—è —Å–æ–∑–¥–∞–ª—Å—è –¥–æ–∫—É–º–µ–Ω—Ç —Å 2-–º—è id 00-04-06 00-04-05.md —Å–æ–∑–¥–∞–ª–∏—Å—å –∫–∞–∫–∏–µ-—Ç–æ –ª–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã —Å-—Å, —Ç–µ—Å—Ç-—Ç–µ—Å—Ç. –°–º–µ—â–µ–Ω–∏—è –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ üìê –°–ú–ï–©–ï–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê === –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ === –í–≤–µ–¥–∏—Ç–µ ID –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: 00-04-05 ‚ö†Ô∏è –î–æ–∫—É–º–µ–Ω—Ç —Å ID 00-04-05 —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: –¢–µ—Å—Ç —Å —Ç–µ–≥–∞–º–∏ === –ü–ê–†–ê–ú–ï–¢–†–´ –ù–û–í–û–ì–û –î–û–ö–£–ú–ï–ù–¢–ê === –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: –¢–µ—Å—Ç —Å–º–µ—â–µ–Ω–∏—è === –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3 === 1 - task (–ó–∞–¥–∞—á–∞) 2 - feature (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å) 3 - bug (–û—à–∏–±–∫–∞/–±–∞–≥) 4 - snapshot (–°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã) –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-4) \[1\]: 1 –í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ë—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–º–µ—â–µ–Ω–∏–µ! –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: 00-04-05 - –¢–µ—Å—Ç —Å–º–µ—â–µ–Ω–∏—è –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –±—É–¥–µ—Ç —Å–º–µ—â–µ–Ω –Ω–∞ +1 –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–º–µ—â–µ–Ω–∏–µ? (y/n): y üîÑ –í—ã–ø–æ–ª–Ω—è—é —Å–º–µ—â–µ–Ω–∏–µ... –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π: 00-04-05 ‚Üí 00-04-06 –ù–∞–π–¥–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: 5 00-04-05 ‚Üí 00-04-06 sed:./00-04-05: No such file or directory - ‚Üí - sed: -: No such file or directory –¢–µ—Å—Ç ‚Üí –¢–µ—Å—Ç sed: –¢–µ—Å—Ç: No such file or directory —Å ‚Üí —Å sed: —Å: No such file or directory —Ç–µ–≥–∞–º–∏.md ‚Üí —Ç–µ–≥–∞–º–∏.md sed: —Ç–µ–≥–∞–º–∏.md: No such file or directory üìù –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: 00-04-05 - –¢–µ—Å—Ç —Å–º–µ—â–µ–Ω–∏—è ‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID '00-04' –Ω–µ –Ω–∞–π–¥–µ–Ω! üìù –ü—Ä–∏–º–µ–Ω—è—é —Å–º–µ—â–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞... rm:./00-04-05: No such file or directory rm: -: No such file or directory rm: –¢–µ—Å—Ç: No such file or directory rm: —Å: No such file or directory rm: —Ç–µ–≥–∞–º–∏.md: No such file or directory ‚úÖ ---.md ‚úÖ –¢–µ—Å—Ç-–¢–µ—Å—Ç.md ‚úÖ —Å-—Å.md ‚úÖ —Ç–µ–≥–∞–º–∏.md-—Ç–µ–≥–∞–º–∏.md ‚úÖ 00-04-06-00-04-05.md üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏... grep: unrecognized option \`---.md' usage: grep \[-abcdDEFGHhIiJLlMmnOopqRSsUVvwXxZz\] \[-A num\] \[-B num\] \[-C\[num\]\] \[-e pattern\] \[-f file\] \[--binary-files=value\] \[--color=when\] \[--context\[=num\]\] \[--directories=action\] \[--label\] \[--line-buffered\] \[--null\] \[pattern\] \[file...\] üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: 1 ‚úÖ –°–ú–ï–©–ï–ù–ò–ï –í–´–ü–û–õ–ù–ï–ù–û! üìù –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: 00-04-05 - –¢–µ—Å—Ç —Å–º–µ—â–µ–Ω–∏—è üîÑ –°–º–µ—â–µ–Ω–Ω—ã–π: 00-04-06 - –¢–µ—Å—Ç —Å —Ç–µ–≥–∞–º–∏

–ü–æ–Ω—è–ª –ø—Ä–æ–±–ª–µ–º—ã! –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∏–∫–µ:

1. **–ó–∞–º–µ–Ω–∞**: —Ñ—É–Ω–∫—Ü–∏—è `create_real_document` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–≤–æ–π ID –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ
2. **–°–º–µ—â–µ–Ω–∏–µ**: –ø—Ä–æ–±–ª–µ–º—ã —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –∏–º–µ–Ω–∞—Ö —Ñ–∞–π–ª–æ–≤
3. **–û–±–µ —Ñ—É–Ω–∫—Ü–∏–∏**: –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é ID

–î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º **–ø—Ä–æ—Å—Ç–æ–π —Ñ–∏–∫—Å** –¥–ª—è –æ–±–µ–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π:

bash

```
# –°–æ–∑–¥–∞–µ–º —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
cat > uch-scripts/replace-shift-simple.sh << 'EOF'
#!/bin/bash
# –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–º–µ–Ω—ã –∏ —Å–º–µ—â–µ–Ω–∏—è

# –ü–†–û–°–¢–ê–Ø –ó–ê–ú–ï–ù–ê: —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID
simple_replace() {
    echo ""
    echo "üîÑ –ü–†–û–°–¢–ê–Ø –ó–ê–ú–ï–ù–ê"
    echo ""
    
    # 1. ID –∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo "=== –ó–ê–ú–ï–ù–Ø–ï–ú–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–º–µ–Ω–µ–Ω: " target_id
    
    if [ -z "$target_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ò—â–µ–º —Ñ–∞–π–ª
    local target_file=$(ls -1 "${target_id} - "*.md 2>/dev/null | head -1)
    if [ -z "$target_file" ]; then
        echo "‚ùå –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$target_id' –Ω–µ –Ω–∞–π–¥–µ–Ω"
        return 1
    fi
    
    local target_name=$(basename "$target_file" .md | sed "s/^${target_id} - //")
    echo "–ù–∞–π–¥–µ–Ω: $target_name"
    
    # 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo ""
    echo "=== –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " new_name
    
    if [ -z "$new_name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –£—Ä–æ–≤–µ–Ω—å
    local level=$(echo "$target_id" | tr -cd '-' | wc -c)
    level=$((level + 1))
    
    # –¢–∏–ø
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type="task"
    fi
    
    # –¢–µ–≥–∏
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: " tags
    
    # 3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    echo ""
    echo "üìã –°–í–û–î–ö–ê:"
    echo "  –ó–∞–º–µ–Ω—è–µ–º: $target_id - $target_name"
    echo "  –ù–æ–≤—ã–π:    $target_id - $new_name"
    echo "  –¢–∏–ø: $type, –£—Ä–æ–≤–µ–Ω—å: $level"
    echo ""
    
    read -p "–í—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–º–µ–Ω—É? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 4. –í—ã–ø–æ–ª–Ω—è–µ–º –∑–∞–º–µ–Ω—É
    echo ""
    echo "üîÑ –í—ã–ø–æ–ª–Ω—è—é –∑–∞–º–µ–Ω—É..."
    
    # 4.1 –°–æ–∑–¥–∞–µ–º –±—ç–∫–∞–ø
    local backup_dir="changed-backup"
    mkdir -p "$backup_dir"
    local timestamp=$(date +%Y%m%d-%H%M%S)
    local backup_file="${backup_dir}/${timestamp}-$(basename "$target_file")"
    
    cp "$target_file" "$backup_file"
    echo "üìÅ –ê—Ä—Ö–∏–≤: $backup_file"
    
    # 4.2 –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è
    local parent_id=""
    local parent_name=""
    if [ $level -gt 1 ]; then
        parent_id=$(echo "$target_id" | sed 's/-[^-]*$//')
        local parent_file=$(ls -1 "${parent_id} - "*.md 2>/dev/null | head -1)
        if [ -n "$parent_file" ]; then
            parent_name=$(basename "$parent_file" .md | sed "s/^${parent_id} - //")
        fi
    fi
    
    # 4.3 –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –í–†–£–ß–ù–£–Æ
    local new_filename="${target_id} - ${new_name}.md"
    local current_date=$(date +%Y-%m-%d)
    
    echo "üìù –°–æ–∑–¥–∞—é: $new_filename"
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏
    local tags_yaml="tags:"
    tags_yaml="$tags_yaml"$'\n'"  - \"$type\""
    if [ -n "$tags" ]; then
        IFS=',' read -r -a tag_array <<< "$tags"
        for tag in "${tag_array[@]}"; do
            tag_clean=$(echo "$tag" | xargs)
            if [ -n "$tag_clean" ]; then
                tags_yaml="$tags_yaml"$'\n'"  - \"$tag_clean\""
            fi
        done
    fi
    
    # –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª
    cat > "$new_filename" << DOC_EOF
---
id: "$target_id"
name: "$new_name"
type: "$type"
level: $level
status: "planning"
$(echo "$tags_yaml")
created: "$current_date"
updated: "$current_date"
author: "$USER"
---

### $new_name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$target_id\\`
- **–£—Ä–æ–≤–µ–Ω—å**: $level
DOC_EOF
    
    if [ -n "$parent_id" ] && [ -n "$parent_name" ]; then
        cat >> "$new_filename" << DOC_EOF
- **–†–æ–¥–∏—Ç–µ–ª—å**: [[$parent_id - $parent_name]]
DOC_EOF
    fi
    
    cat >> "$new_filename" << DOC_EOF
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$current_date\\`

#### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

#### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---
–°–æ–∑–¥–∞–Ω–æ: $current_date
–£—Ä–æ–≤–µ–Ω—å: $level
DOC_EOF
    
    if [ -n "$parent_id" ]; then
        echo "–†–æ–¥–∏—Ç–µ–ª—å: $parent_id" >> "$new_filename"
    fi
    
    # 4.4 –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
    rm "$target_file"
    echo "üóëÔ∏è  –£–¥–∞–ª–µ–Ω: $(basename "$target_file")"
    
    # 4.5 –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ (–ø—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞)
    echo "üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏..."
    local updated=0
    
    for file in *.md; do
        if [ ! -f "$file" ] || [[ "$file" == "$new_filename" ]] || [[ "$file" == *"changed-backup"* ]]; then
            continue
        fi
        
        if grep -q "\\[\\[${target_id} - ${target_name}\\]\\]" "$file"; then
            sed -i '' "s/\[\[${target_id} - ${target_name}\]\]/\[\[${target_id} - ${new_name}\]\]/g" "$file"
            updated=$((updated + 1))
            echo "  ‚úÖ $(basename "$file")"
        fi
    done
    
    echo "  üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: $updated"
    
    echo ""
    echo "‚úÖ –ó–ê–ú–ï–ù–ê –í–´–ü–û–õ–ù–ï–ù–ê!"
    echo "   üìÅ –ê—Ä—Ö–∏–≤: $backup_file"
    echo "   üìÑ –ù–æ–≤—ã–π: $new_filename"
}

# –ü–†–û–°–¢–û–ï –°–ú–ï–©–ï–ù–ò–ï
simple_shift() {
    echo ""
    echo "üìê –ü–†–û–°–¢–û–ï –°–ú–ï–©–ï–ù–ò–ï"
    echo ""
    
    # 1. –ñ–µ–ª–∞–µ–º—ã–π ID
    echo "=== –ñ–ï–õ–ê–ï–ú–´–ô ID ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ ID –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " desired_id
    
    if [ -z "$desired_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ
    local existing_file=$(ls -1 "${desired_id} - "*.md 2>/dev/null | head -1)
    
    if [ -z "$existing_file" ]; then
        echo "‚úÖ ID $desired_id —Å–≤–æ–±–æ–¥–µ–Ω"
        echo "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—ã—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ"
        return 0
    fi
    
    local existing_name=$(basename "$existing_file" .md | sed "s/^${desired_id} - //")
    echo "‚ö†Ô∏è  –°—É—â–µ—Å—Ç–≤—É–µ—Ç: $existing_name"
    
    # 2. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–æ–≤–æ–≥–æ
    echo ""
    echo "=== –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    read -p "–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " new_name
    
    if [ -z "$new_name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –£—Ä–æ–≤–µ–Ω—å
    local level=$(echo "$desired_id" | tr -cd '-' | wc -c)
    level=$((level + 1))
    
    # –¢–∏–ø
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type="task"
    fi
    
    # –¢–µ–≥–∏
    echo ""
    read -p "–¢–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: " tags
    
    # 3. –í—ã—á–∏—Å–ª—è–µ–º —Å–º–µ—â–µ–Ω–Ω—ã–π ID
    local last_part=$(echo "$desired_id" | grep -o '[^-]*$')
    local base_part=$(echo "$desired_id" | sed "s/-${last_part}$//")
    
    # HEX ‚Üí decimal ‚Üí +1 ‚Üí HEX
    local last_decimal=$((16#${last_part}))
    local new_last_decimal=$((last_decimal + 1))
    local new_last_hex=$(printf "%02X" $new_last_decimal)
    local shifted_id="${base_part}-${new_last_hex}"
    
    echo ""
    echo "üìã –ü–õ–ê–ù –°–ú–ï–©–ï–ù–ò–Ø:"
    echo "  –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $desired_id - $new_name"
    echo "  –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π:   $desired_id ‚Üí $shifted_id"
    echo "  –ù–∞–∑–≤–∞–Ω–∏–µ:       $existing_name"
    echo ""
    
    read -p "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 4. –í—ã–ø–æ–ª–Ω—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ
    echo ""
    echo "üîÑ –í—ã–ø–æ–ª–Ω—è—é —Å–º–µ—â–µ–Ω–∏–µ..."
    
    # 4.1 –°–º–µ—â–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
    echo "  üìù –°–º–µ—â–∞–µ–º: $existing_file ‚Üí $shifted_id - $existing_name.md"
    
    # –û–±–Ω–æ–≤–ª—è–µ–º ID –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞
    sed "s/^id: \"${desired_id}\"/id: \"${shifted_id}\"/" "$existing_file" > "${shifted_id} - ${existing_name}.md"
    rm "$existing_file"
    
    # 4.2 –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å desired_id
    echo "  üìù –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π: $desired_id - $new_name.md"
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è
    local parent_id=""
    local parent_name=""
    if [ $level -gt 1 ]; then
        parent_id="$base_part"
        local parent_file=$(ls -1 "${parent_id} - "*.md 2>/dev/null | head -1)
        if [ -n "$parent_file" ]; then
            parent_name=$(basename "$parent_file" .md | sed "s/^${parent_id} - //")
        fi
    fi
    
    # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª
    local new_filename="${desired_id} - ${new_name}.md"
    local current_date=$(date +%Y-%m-%d)
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏
    local tags_yaml="tags:"
    tags_yaml="$tags_yaml"$'\n'"  - \"$type\""
    if [ -n "$tags" ]; then
        IFS=',' read -r -a tag_array <<< "$tags"
        for tag in "${tag_array[@]}"; do
            tag_clean=$(echo "$tag" | xargs)
            if [ -n "$tag_clean" ]; then
                tags_yaml="$tags_yaml"$'\n'"  - \"$tag_clean\""
            fi
        done
    fi
    
    cat > "$new_filename" << DOC_EOF
---
id: "$desired_id"
name: "$new_name"
type: "$type"
level: $level
status: "planning"
$(echo "$tags_yaml")
created: "$current_date"
updated: "$current_date"
author: "$USER"
---

### $new_name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$desired_id\\`
- **–£—Ä–æ–≤–µ–Ω—å**: $level
DOC_EOF
    
    if [ -n "$parent_id" ] && [ -n "$parent_name" ]; then
        cat >> "$new_filename" << DOC_EOF
- **–†–æ–¥–∏—Ç–µ–ª—å**: [[$parent_id - $parent_name]]
DOC_EOF
    fi
    
    cat >> "$new_filename" << DOC_EOF
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$current_date\\`

#### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

#### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---
–°–æ–∑–¥–∞–Ω–æ: $current_date
–£—Ä–æ–≤–µ–Ω—å: $level
DOC_EOF
    
    if [ -n "$parent_id" ]; then
        echo "–†–æ–¥–∏—Ç–µ–ª—å: $parent_id" >> "$new_filename"
    fi
    
    # 4.3 –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏
    echo "  üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏..."
    local updated=0
    
    for file in *.md; do
        if [ ! -f "$file" ] || [[ "$file" == *"changed-backup"* ]]; then
            continue
        fi
        
        local file_updated=0
        
        # –°—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
        if grep -q "\\[\\[${desired_id} - ${existing_name}\\]\\]" "$file"; then
            sed -i '' "s/\[\[${desired_id} - ${existing_name}\]\]/\[\[${shifted_id} - ${existing_name}\]\]/g" "$file"
            file_updated=1
        fi
        
        if [ $file_updated -eq 1 ]; then
            updated=$((updated + 1))
            echo "    ‚úÖ $(basename "$file")"
        fi
    done
    
    echo "  üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: $updated"
    
    echo ""
    echo "‚úÖ –°–ú–ï–©–ï–ù–ò–ï –í–´–ü–û–õ–ù–ï–ù–û!"
    echo "   üìù –ù–æ–≤—ã–π: $desired_id - $new_name"
    echo "   üîÑ –°–º–µ—â–µ–Ω–Ω—ã–π: $shifted_id - $existing_name"
}

# –ú–µ–Ω—é
show_simple_operations_menu() {
    echo ""
    echo "=== –ü–†–û–°–¢–´–ï –û–ü–ï–†–ê–¶–ò–ò ==="
    echo "1 - –ó–∞–º–µ–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (—Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å —Ç–µ–º –∂–µ ID)"
    echo "2 - –°–º–µ—Å—Ç–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–≤—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π, —Å–¥–≤–∏–Ω—É—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)"
    echo "3 - –ù–∞–∑–∞–¥"
    echo ""
    read -p "–í—ã–±–æ—Ä (1-3): " choice
    
    case $choice in
        1) simple_replace ;;
        2) simple_shift ;;
        3) return 0 ;;
        *) echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" ;;
    esac
}
EOF

# –ó–∞–º–µ–Ω—è–µ–º —Å–ª–æ–∂–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ—Å—Ç—ã–º
mv uch-scripts/replace-shift-simple.sh uch-scripts/replace-shift.sh

echo "‚úÖ –°–æ–∑–¥–∞–Ω—ã –ø—Ä–æ—Å—Ç—ã–µ –∏ –Ω–∞–¥–µ–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏"
echo "üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º:"
echo "1. –ó–∞–º–µ–Ω–∞ - —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID"
echo "2. –°–º–µ—â–µ–Ω–∏–µ - —Å–¥–≤–∏–≥–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π, —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π"
./uch-create-modular.sh
```

–¢–µ–ø–µ—Ä—å —Ñ—É–Ω–∫—Ü–∏–∏:

1. **–ó–∞–º–µ–Ω–∞** \- —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –¢–û–ß–ù–û —É–∫–∞–∑–∞–Ω–Ω—ã–º ID (–Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π)
2. **–°–º–µ—â–µ–Ω–∏–µ** \- –ø—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º
3. **–ù–µ—Ç —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏** —Å –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø—Ä–æ–±–µ–ª–æ–≤

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –æ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏!

–ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ main.sh:

–ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –æ—à–∏–±–∫–∞, –¥–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ replace-shift.sh:

–ò–ª–∏ –∏—Å–ø—Ä–∞–≤–∏–º main.sh –Ω–∞–ø—Ä—è–º—É—é:

bash

```
cat > uch-scripts/main-fixed.sh << 'EOF'
#!/bin/bash
# –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç UCH Document System - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

echo "=== UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê ==="
echo "–í–µ—Ä—Å–∏—è: 1.1.0"
echo ""

# –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏
MODULES_LOADED=0
if [ -f "$SCRIPT_DIR/utils.sh" ]; then
    source "$SCRIPT_DIR/utils.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/types.sh" ]; then
    source "$SCRIPT_DIR/types.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/create.sh" ]; then
    source "$SCRIPT_DIR/create.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/document-creator.sh" ]; then
    source "$SCRIPT_DIR/document-creator.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/manual-mode.sh" ]; then
    source "$SCRIPT_DIR/manual-mode.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/batch-mode.sh" ]; then
    source "$SCRIPT_DIR/batch-mode.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

if [ -f "$SCRIPT_DIR/replace-shift.sh" ]; then
    source "$SCRIPT_DIR/replace-shift.sh"
    MODULES_LOADED=$((MODULES_LOADED + 1))
fi

echo "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: $MODULES_LOADED"
echo ""

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
show_main_menu() {
    echo "=== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ ==="
    echo "1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–∞–≤—Ç–æ-ID)"
    echo "2 - –°–æ–∑–¥–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏ (—Ä—É—á–Ω–æ–π ID)"
    echo "3 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ"
    echo "4 - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ (–∑–∞–º–µ–Ω–∞/—Å–º–µ—â–µ–Ω–∏–µ)"
    echo "5 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É"
    echo "6 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã"
    echo "q - –í—ã—Ö–æ–¥"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-6/q): " choice
    
    case $choice in
        1) 
            create_document_improved
            echo ""
            show_main_menu 
            ;;
        2)
            create_document_manual
            echo ""
            show_main_menu
            ;;
        3)
            create_batch_documents
            echo ""
            show_main_menu
            ;;
        4)
            if command -v show_simple_operations_menu &> /dev/null; then
                show_simple_operations_menu
            elif command -v show_document_operations_menu &> /dev/null; then
                show_document_operations_menu
            else
                echo "‚ùå –§—É–Ω–∫—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
            fi
            echo ""
            show_main_menu
            ;;
        5)
            echo "‚úÖ –°–ò–°–¢–ï–ú–ê:"
            echo "üìÅ –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: $SCRIPT_DIR"
            echo "üìÖ –î–∞—Ç–∞: $(get_current_date 2>/dev/null || echo 'N/A')"
            echo "üì¶ –ú–æ–¥—É–ª–µ–π: $MODULES_LOADED"
            echo ""
            show_main_menu
            ;;
        6)
            echo "üß™ –¢–ï–°–¢ –£–¢–ò–õ–ò–¢:"
            echo "- –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: $(get_current_date 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –°–≤–æ–±–æ–¥–Ω—ã–π master ID: $(find_free_master_id 2>/dev/null || echo '–û—à–∏–±–∫–∞')"
            echo "- –¢–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É—Ä–æ–≤–Ω—è 3: $(get_default_type_for_level 3 2>/dev/null || echo 'N/A')"
            echo ""
            show_main_menu
            ;;
        q|Q) 
            echo "–í—ã—Ö–æ–¥" 
            exit 0 
            ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" 
            show_main_menu 
            ;;
    esac
}

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
if [ $# -eq 0 ]; then
    show_main_menu
else
    echo "‚ö†Ô∏è  –ö–æ–º–∞–Ω–¥–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ–∫–∞ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è"
    show_main_menu
fi
EOF

# –ó–∞–º–µ–Ω—è–µ–º main.sh
mv uch-scripts/main-fixed.sh uch-scripts/main.sh
chmod +x uch-scripts/main.sh

echo "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω main.sh —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–∏"
echo "üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º:"
./uch-create-modular.sh
```

–¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å. –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—Ä–æ–±–ª–µ–º–∞, –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º —á—Ç–æ –≤ replace-shift.sh:

bash

```
head -50 uch-scripts/replace-shift.sh
```

–ó–∞–º–µ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! –°–º–µ—â–µ–Ω–∏–µ - –µ—Å—Ç—å –Ω–µ–¥–æ—á–µ—Ç: –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–º–µ—Å—Ç–∏–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π, –Ω–æ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ—Å—Ç–∞–ª–∏—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—É—á–∏–ª–æ—Å—å —Ç–∞–∫: 00-04-05 –Ω–æ–≤—ã–π (—Ç–∞–∫–æ–π id –µ—Å—Ç—å) —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π 00-04-05 –∏ —Å—Ç–∞—Ä—ã–π –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç –Ω–∞ 00-04-06, –Ω–æ 00-04-06 —Ç–æ–∂–µ –µ—Å—Ç—å –∏ –æ–Ω –æ—Å—Ç–∞–ª—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—É—á–∏–ª–∞—Å—å –∫–æ–ª–ª–∏–∑–∏—è 00-04-05 –Ω–æ–≤—ã–π 00-04-06 —Å—Ç–∞—Ä—ã–π 00-04-06 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ù—É–∂–Ω–∞ **—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ —Å–º–µ—â–µ–Ω–∏—è**. –ï—Å–ª–∏ `00-04-06` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –µ–≥–æ —Ç–æ–∂–µ –Ω—É–∂–Ω–æ —Å–¥–≤–∏–Ω—É—Ç—å, –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ, –ø–æ–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–º —Å–≤–æ–±–æ–¥–Ω—ã–π ID.

–ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–º–µ—â–µ–Ω–∏—è:

bash

```
cat > uch-scripts/replace-shift-fixed.sh << 'EOF'
#!/bin/bash
# –£–ª—É—á—à–µ–Ω–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ —Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–π —Ü–µ–ø–æ—á–∫–æ–π

# –ù–∞–π—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–π —Å–≤–æ–±–æ–¥–Ω—ã–π ID –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è
find_next_free_id() {
    local base_id="$1"
    local last_part=$(echo "$base_id" | grep -o '[^-]*$')
    local base_part=$(echo "$base_id" | sed "s/-${last_part}$//")
    
    local current_decimal=$((16#${last_part}))
    local try_decimal=$((current_decimal + 1))
    
    # –ò—â–µ–º —Å–≤–æ–±–æ–¥–Ω—ã–π ID, —É–≤–µ–ª–∏—á–∏–≤–∞—è –Ω–∞ 1 –ø–æ–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–º —Å–≤–æ–±–æ–¥–Ω—ã–π
    while true; do
        local try_hex=$(printf "%02X" $try_decimal)
        local try_id="${base_part}-${try_hex}"
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —Å —Ç–∞–∫–∏–º ID
        if ! ls -1 "${try_id} - "*.md 2>/dev/null | grep -q .; then
            echo "$try_id"
            return 0
        fi
        
        # –ï—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–±—É–µ–º —Å–ª–µ–¥—É—é—â–∏–π
        try_decimal=$((try_decimal + 1))
        
        # –ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ (–º–∞–∫—Å–∏–º—É–º 255 –ø–æ–ø—ã—Ç–æ–∫)
        if [ $try_decimal -gt 255 ]; then
            echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ —Å–≤–æ–±–æ–¥–Ω—ã–π ID"
            return 1
        fi
    done
}

# –°–æ–∑–¥–∞—Ç—å —Ü–µ–ø–æ—á–∫—É —Å–º–µ—â–µ–Ω–∏—è
create_shift_chain() {
    local start_id="$1"
    
    echo "  üîÑ –°–æ–∑–¥–∞—é —Ü–µ–ø–æ—á–∫—É —Å–º–µ—â–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—è —Å: $start_id"
    
    local current_id="$start_id"
    local shift_map=""
    
    # –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ ID –Ω–∞ —ç—Ç–æ–º —É—Ä–æ–≤–Ω–µ
    local base_part=$(echo "$start_id" | sed 's/-[^-]*$//')
    local existing_ids=$(ls -1 "${base_part}-"*.md 2>/dev/null | \
        grep -E "^${base_part}-[0-9A-Fa-f]{2} " | \
        cut -d' ' -f1 | \
        sort)
    
    # –ù–∞—Ö–æ–¥–∏–º –ø–æ—Å–ª–µ–¥–Ω—é—é —á–∞—Å—Ç—å start_id –≤ decimal
    local start_last=$(echo "$start_id" | grep -o '[^-]*$')
    local start_decimal=$((16#${start_last}))
    
    # –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º ID –Ω–∞—á–∏–Ω–∞—è —Å start_id
    for id in $existing_ids; do
        local last_part=$(echo "$id" | grep -o '[^-]*$')
        local current_decimal=$((16#${last_part}))
        
        # –ï—Å–ª–∏ ID >= start_id, –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Ü–µ–ø–æ—á–∫—É —Å–º–µ—â–µ–Ω–∏—è
        if [ $current_decimal -ge $start_decimal ]; then
            local new_decimal=$((current_decimal + 1))
            local new_hex=$(printf "%02X" $new_decimal)
            local new_id="${base_part}-${new_hex}"
            
            shift_map="$shift_map $id:$new_id"
            echo "    $id ‚Üí $new_id"
        fi
    done
    
    echo "$shift_map"
}

# –£–ª—É—á—à–µ–Ω–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ —Å —Ü–µ–ø–æ—á–∫–æ–π
improved_shift() {
    echo ""
    echo "üìê –£–õ–£–ß–®–ï–ù–ù–û–ï –°–ú–ï–©–ï–ù–ò–ï"
    echo "–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç —Å–¥–≤–∏–Ω—É—Ç—ã –ø–æ —Ü–µ–ø–æ—á–∫–µ"
    echo ""
    
    # 1. –ñ–µ–ª–∞–µ–º—ã–π ID
    echo "=== –ñ–ï–õ–ê–ï–ú–´–ô ID ==="
    read -p "–í–≤–µ–¥–∏—Ç–µ ID –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " desired_id
    
    if [ -z "$desired_id" ]; then
        echo "‚ùå ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ ID –Ω–µ –∑–∞–Ω—è—Ç (–Ω–æ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Å–º–µ—â–µ–Ω–∏—è)
    local existing_file=$(ls -1 "${desired_id} - "*.md 2>/dev/null | head -1)
    local existing_name=""
    
    if [ -n "$existing_file" ]; then
        existing_name=$(basename "$existing_file" .md | sed "s/^${desired_id} - //")
        echo "‚ö†Ô∏è  –î–æ–∫—É–º–µ–Ω—Ç —Å ID $desired_id —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: $existing_name"
    else
        echo "‚úÖ ID $desired_id —Å–≤–æ–±–æ–¥–µ–Ω (–ø—Ä–æ—Å—Ç–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ)"
        # –ú–æ–∂–Ω–æ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç
    fi
    
    # 3. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    echo ""
    echo "=== –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ ==="
    read -p "–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " new_name
    
    if [ -z "$new_name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    # –£—Ä–æ–≤–µ–Ω—å
    local level=$(echo "$desired_id" | tr -cd '-' | wc -c)
    level=$((level + 1))
    
    # –¢–∏–ø
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        show_type_menu_for_level "$level"
        type=$(select_type_by_number "$level")
    else
        type="task"
    fi
    
    # –¢–µ–≥–∏
    echo ""
    read -p "–¢–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: " tags
    
    # 4. –°–æ–∑–¥–∞–µ–º —Ü–µ–ø–æ—á–∫—É —Å–º–µ—â–µ–Ω–∏—è
    echo ""
    echo "=== –¶–ï–ü–û–ß–ö–ê –°–ú–ï–©–ï–ù–ò–Ø ==="
    
    local shift_chain=$(create_shift_chain "$desired_id")
    if [ -z "$shift_chain" ]; then
        echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Ü–µ–ø–æ—á–∫—É —Å–º–µ—â–µ–Ω–∏—è"
        return 1
    fi
    
    # –°—á–∏—Ç–∞–µ–º —Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –±—É–¥–µ—Ç —Å–º–µ—â–µ–Ω–æ
    local shift_count=$(echo "$shift_chain" | tr ' ' '\n' | grep -c ':')
    echo "  üìä –ë—É–¥–µ—Ç —Å–º–µ—â–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: $shift_count"
    
    # 5. –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
    echo ""
    echo "‚ö†Ô∏è  –í–ù–ò–ú–ê–ù–ò–ï: –ë—É–¥—É—Ç —Å–º–µ—â–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:"
    for pair in $shift_chain; do
        local old_id=$(echo "$pair" | cut -d: -f1)
        local new_id=$(echo "$pair" | cut -d: -f2)
        local old_name=""
        
        # –ù–∞—Ö–æ–¥–∏–º –∏–º—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
        local old_file=$(ls -1 "${old_id} - "*.md 2>/dev/null | head -1)
        if [ -n "$old_file" ]; then
            old_name=$(basename "$old_file" .md | sed "s/^${old_id} - //")
            echo "    $old_id - $old_name ‚Üí $new_id"
        else
            echo "    $old_id ‚Üí $new_id"
        fi
    done
    
    echo ""
    read -p "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–º–µ—â–µ–Ω–∏–µ –í–°–ï–• –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    # 6. –í—ã–ø–æ–ª–Ω—è–µ–º —Å–º–µ—â–µ–Ω–∏–µ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (—Å –∫–æ–Ω—Ü–∞)
    echo ""
    echo "üîÑ –í—ã–ø–æ–ª–Ω—è—é —Å–º–µ—â–µ–Ω–∏–µ..."
    
    # –°–Ω–∞—á–∞–ª–∞ —Å–º–µ—â–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (—Å –∫–æ–Ω—Ü–∞ —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å)
    echo "  üìù –°–º–µ—â–∞—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã..."
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–∞—Ä—ã –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (–ø–æ ID)
    local reverse_pairs=$(echo "$shift_chain" | tr ' ' '\n' | sort -r)
    
    for pair in $reverse_pairs; do
        local old_id=$(echo "$pair" | cut -d: -f1)
        local new_id=$(echo "$pair" | cut -d: -f2)
        
        local old_file=$(ls -1 "${old_id} - "*.md 2>/dev/null | head -1)
        if [ -n "$old_file" ]; then
            local old_name=$(basename "$old_file" .md | sed "s/^${old_id} - //")
            local new_filename="${new_id} - ${old_name}.md"
            
            echo "    $old_id ‚Üí $new_id"
            
            # –ö–æ–ø–∏—Ä—É–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º ID
            sed "s/^id: \"${old_id}\"/id: \"${new_id}\"/" "$old_file" > "$new_filename"
            
            # –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
            rm "$old_file"
        fi
    done
    
    # 7. –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å desired_id
    echo ""
    echo "  üìù –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $desired_id - $new_name"
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è
    local parent_id=""
    local parent_name=""
    if [ $level -gt 1 ]; then
        parent_id=$(echo "$desired_id" | sed 's/-[^-]*$//')
        local parent_file=$(ls -1 "${parent_id} - "*.md 2>/dev/null | head -1)
        if [ -n "$parent_file" ]; then
            parent_name=$(basename "$parent_file" .md | sed "s/^${parent_id} - //")
        fi
    fi
    
    # –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª
    local new_filename="${desired_id} - ${new_name}.md"
    local current_date=$(date +%Y-%m-%d)
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏
    local tags_yaml="tags:"
    tags_yaml="$tags_yaml"$'\n'"  - \"$type\""
    if [ -n "$tags" ]; then
        IFS=',' read -r -a tag_array <<< "$tags"
        for tag in "${tag_array[@]}"; do
            tag_clean=$(echo "$tag" | xargs)
            if [ -n "$tag_clean" ]; then
                tags_yaml="$tags_yaml"$'\n'"  - \"$tag_clean\""
            fi
        done
    fi
    
    cat > "$new_filename" << DOC_EOF
---
id: "$desired_id"
name: "$new_name"
type: "$type"
level: $level
status: "planning"
$(echo "$tags_yaml")
created: "$current_date"
updated: "$current_date"
author: "$USER"
---

### $new_name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$desired_id\\`
- **–£—Ä–æ–≤–µ–Ω—å**: $level
DOC_EOF
    
    if [ -n "$parent_id" ] && [ -n "$parent_name" ]; then
        cat >> "$new_filename" << DOC_EOF
- **–†–æ–¥–∏—Ç–µ–ª—å**: [[$parent_id - $parent_name]]
DOC_EOF
    fi
    
    cat >> "$new_filename" << DOC_EOF
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$current_date\\`

#### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

#### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---
–°–æ–∑–¥–∞–Ω–æ: $current_date
–£—Ä–æ–≤–µ–Ω—å: $level
DOC_EOF
    
    if [ -n "$parent_id" ]; then
        echo "–†–æ–¥–∏—Ç–µ–ª—å: $parent_id" >> "$new_filename"
    fi
    
    # 8. –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏
    echo ""
    echo "  üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏..."
    local updated=0
    
    for pair in $shift_chain; do
        local old_id=$(echo "$pair" | cut -d: -f1)
        local new_id=$(echo "$pair" | cut -d: -f2)
        
        # –ù–∞—Ö–æ–¥–∏–º –∏–º—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
        local new_file=$(ls -1 "${new_id} - "*.md 2>/dev/null | head -1)
        if [ -n "$new_file" ]; then
            local doc_name=$(basename "$new_file" .md | sed "s/^${new_id} - //")
            
            # –û–±–Ω–æ–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ –≤–æ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö
            for file in *.md; do
                if [ ! -f "$file" ] || [[ "$file" == *"changed-backup"* ]]; then
                    continue
                fi
                
                if grep -q "\\[\\[${old_id} - ${doc_name}\\]\\]" "$file"; then
                    sed -i '' "s/\[\[${old_id} - ${doc_name}\]\]/\[\[${new_id} - ${doc_name}\]\]/g" "$file"
                    updated=$((updated + 1))
                fi
            done
        fi
    done
    
    echo "    üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: $updated"
    
    echo ""
    echo "‚úÖ –°–ú–ï–©–ï–ù–ò–ï –í–´–ü–û–õ–ù–ï–ù–û!"
    echo "   üìù –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: $desired_id - $new_name"
    echo "   üîÑ –°–º–µ—â–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: $shift_count"
    echo "   üîó –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: $updated"
}

# –û–±—ä–µ–¥–∏–Ω—è–µ–º –æ–±–µ —Ñ—É–Ω–∫—Ü–∏–∏
show_simple_operations_menu() {
    echo ""
    echo "=== –û–ü–ï–†–ê–¶–ò–ò –° –î–û–ö–£–ú–ï–ù–¢–ê–ú–ò ==="
    echo "1 - –ó–∞–º–µ–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–ø—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞)"
    echo "2 - –°–º–µ—Å—Ç–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (—Ü–µ–ø–æ—á–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ)"
    echo "3 - –ù–∞–∑–∞–¥"
    echo ""
    read -p "–í—ã–±–æ—Ä (1-3): " choice
    
    case $choice in
        1) 
            # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é simple_replace –∏–∑ replace-shift.sh
            if command -v simple_replace &> /dev/null; then
                simple_replace
            else
                echo "‚ùå –§—É–Ω–∫—Ü–∏—è –∑–∞–º–µ–Ω—ã –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
            fi
            ;;
        2) 
            improved_shift 
            ;;
        3) 
            return 0 
            ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä" 
            ;;
    esac
}
EOF

# –û–±—ä–µ–¥–∏–Ω—è–µ–º –æ–±–∞ —Ñ–∞–π–ª–∞
cat uch-scripts/replace-shift.sh uch-scripts/replace-shift-fixed.sh > uch-scripts/replace-shift-combined.sh
mv uch-scripts/replace-shift-combined.sh uch-scripts/replace-shift.sh

echo "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Ü–µ–ø–æ—á–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ"
echo "üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º —É–ª—É—á—à–µ–Ω–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ:"
echo "–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Å–¥–≤–∏–≥–∞—Ç—å –í–°–ï –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ —Ü–µ–ø–æ—á–∫–µ"
./uch-create-modular.sh
```

–¢–µ–ø–µ—Ä—å —Å–º–µ—â–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ:

1. –ù–∞–π—Ç–∏ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞—á–∏–Ω–∞—è —Å –∂–µ–ª–∞–µ–º–æ–≥–æ ID
2. –°–æ–∑–¥–∞—Ç—å —Ü–µ–ø–æ—á–∫—É —Å–º–µ—â–µ–Ω–∏—è –¥–ª—è –í–°–ï–• –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. –°–¥–≤–∏–≥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ (—á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∫–æ–ª–ª–∏–∑–∏–π)
4. –û–±–Ω–æ–≤–ª—è—Ç—å –≤—Å–µ —Å—Å—ã–ª–∫–∏

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –≥–¥–µ –µ—Å—Ç—å `00-04-05`, `00-04-06`, `00-04-07` \- –ø—Ä–∏ —Å–º–µ—â–µ–Ω–∏–∏ `00-04-05` –≤—Å–µ —Ç—Ä–∏ –¥–æ–ª–∂–Ω—ã —Å–¥–≤–∏–Ω—É—Ç—å—Å—è.

–û—Ç–ª–∏—á–Ω–æ! kirillkravcov@MacBook-Pro-Kirill uch-docs % >.... } EOF # –û–±—ä–µ–¥–∏–Ω—è–µ–º –æ–±–∞ —Ñ–∞–π–ª–∞ cat uch-scripts/replace-shift.sh uch-scripts/replace-shift-fixed.sh > uch-scripts/replace-shift-combined.sh mv uch-scripts/replace-shift-combined.sh uch-scripts/replace-shift.sh echo "‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Ü–µ–ø–æ—á–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ" echo "üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º —É–ª—É—á—à–µ–Ω–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ:" echo "–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Å–¥–≤–∏–≥–∞—Ç—å –í–°–ï –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ —Ü–µ–ø–æ—á–∫–µ"./uch-create-modular.sh zsh: command not found: # ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Ü–µ–ø–æ—á–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º —É–ª—É—á—à–µ–Ω–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ: –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Å–¥–≤–∏–≥–∞—Ç—å –í–°–ï –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ —Ü–µ–ø–æ—á–∫–µ === –ó–∞–ø—É—Å–∫ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã UCH === === UCH CREATE: –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê === –í–µ—Ä—Å–∏—è: 1.1.0 ‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: 7 === –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ === 1 - –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–∞–≤—Ç–æ-ID) 2 - –°–æ–∑–¥–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏ (—Ä—É—á–Ω–æ–π ID) 3 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ 4 - –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ (–∑–∞–º–µ–Ω–∞/—Å–º–µ—â–µ–Ω–∏–µ) 5 - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É 6 - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã q - –í—ã—Ö–æ–¥ –í–∞—à –≤—ã–±–æ—Ä (1-6/q): 4 === –û–ü–ï–†–ê–¶–ò–ò –° –î–û–ö–£–ú–ï–ù–¢–ê–ú–ò === 1 - –ó–∞–º–µ–Ω–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–ø—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞) 2 - –°–º–µ—Å—Ç–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (—Ü–µ–ø–æ—á–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ) 3 - –ù–∞–∑–∞–¥ –í—ã–±–æ—Ä (1-3): 2 üìê –£–õ–£–ß–®–ï–ù–ù–û–ï –°–ú–ï–©–ï–ù–ò–ï –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç —Å–¥–≤–∏–Ω—É—Ç—ã –ø–æ —Ü–µ–ø–æ—á–∫–µ === –ñ–ï–õ–ê–ï–ú–´–ô ID === –í–≤–µ–¥–∏—Ç–µ ID –¥–ª—è –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: 01-01-02 ‚ö†Ô∏è –î–æ–∫—É–º–µ–Ω—Ç —Å ID 01-01-02 —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: –¢–µ—Å—Ç 3 —É—Ä–æ–≤–Ω—è === –ù–û–í–´–ô –î–û–ö–£–ú–ï–ù–¢ === –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞: –¢–µ—Å—Ç —Å–º–µ—â–µ–Ω–∏—è 4 === –¢–ò–ü–´ –î–û–ö–£–ú–ï–ù–¢–û–í –£–†–û–í–ù–Ø 3 === 1 - task (–ó–∞–¥–∞—á–∞) 2 - feature (–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å) 3 - bug (–û—à–∏–±–∫–∞/–±–∞–≥) 4 - snapshot (–°–Ω–∏–º–æ–∫ —Å–∏—Å—Ç–µ–º—ã) –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø (1-4) \[1\]: 1 –¢–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: === –¶–ï–ü–û–ß–ö–ê –°–ú–ï–©–ï–ù–ò–Ø === üìä –ë—É–¥–µ—Ç —Å–º–µ—â–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: 3 ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ë—É–¥—É—Ç —Å–º–µ—â–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã: ÔøΩÔøΩ ‚Üí ÔøΩÔøΩ –°–æ–∑–¥–∞—é ‚Üí –°–æ–∑–¥–∞—é —Ü–µ–ø–æ—á–∫—É ‚Üí —Ü–µ–ø–æ—á–∫—É —Å–º–µ—â–µ–Ω–∏—è ‚Üí —Å–º–µ—â–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞—è ‚Üí –Ω–∞—á–∏–Ω–∞—è —Å ‚Üí 01-01-02 - –¢–µ—Å—Ç 3 —É—Ä–æ–≤–Ω—è ‚Üí 01-01-02 01-01-02 - –¢–µ—Å—Ç 3 —É—Ä–æ–≤–Ω—è ‚Üí 01-01-02 ‚Üí ‚Üí ‚Üí 01-01-03 - –¢–µ—Å—Ç —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ ‚Üí 01-01-03 01-01-03 - –¢–µ—Å—Ç —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ ‚Üí 01-01-03 ‚Üí ‚Üí ‚Üí 01-01-04 ‚Üí 01-01-04 01-01-02 - –¢–µ—Å—Ç 3 —É—Ä–æ–≤–Ω—è ‚Üí 01-01-03 01-01-03 - –¢–µ—Å—Ç —Ä—É—á–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ ‚Üí 01-01-04 –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–º–µ—â–µ–Ω–∏–µ –í–°–ï–• –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤? (y/n): y üîÑ –í—ã–ø–æ–ª–Ω—è—é —Å–º–µ—â–µ–Ω–∏–µ... üìù –°–º–µ—â–∞—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã... 01-01-03 ‚Üí 01-01-04 01-01-02 ‚Üí 01-01-03 üìù –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: 01-01-02 - –¢–µ—Å—Ç —Å–º–µ—â–µ–Ω–∏—è 4 üîó –û–±–Ω–æ–≤–ª—è—é —Å—Å—ã–ª–∫–∏... grep: unrecognized option \`---.md' usage: grep \[-abcdDEFGHhIiJLlMmnOopqRSsUVvwXxZz\] \[-A num\] \[-B num\] \[-C\[num\]\] \[-e pattern\] \[-f file\] \[--binary-files=value\] \[--color=when\] \[--context\[=num\]\] \[--directories=action\] \[--label\] \[--line-buffered\] \[--null\] \[pattern\] \[file...\] grep: unrecognized option \`---.md' usage: grep \[-abcdDEFGHhIiJLlMmnOopqRSsUVvwXxZz\] \[-A num\] \[-B num\] \[-C\[num\]\] \[-e pattern\] \[-f file\] \[--binary-files=value\] \[--color=when\] \[--context\[=num\]\] \[--directories=action\] \[--label\] \[--line-buffered\] \[--null\] \[pattern\] \[file...\] grep: unrecognized option \`---.md' usage: grep \[-abcdDEFGHhIiJLlMmnOopqRSsUVvwXxZz\] \[-A num\] \[-B num\] \[-C\[num\]\] \[-e pattern\] \[-f file\] \[--binary-files=value\] \[--color=when\] \[--context\[=num\]\] \[--directories=action\] \[--label\] \[--line-buffered\] \[--null\] \[pattern\] \[file...\] grep: unrecognized option \`---.md' usage: grep \[-abcdDEFGHhIiJLlMmnOopqRSsUVvwXxZz\] \[-A num\] \[-B num\] \[-C\[num\]\] \[-e pattern\] \[-f file\] \[--binary-files=value\] \[--color=when\] \[--context\[=num\]\] \[--directories=action\] \[--label\] \[--line-buffered\] \[--null\] \[pattern\] \[file...\] grep: unrecognized option \`---.md' usage: grep \[-abcdDEFGHhIiJLlMmnOopqRSsUVvwXxZz\] \[-A num\] \[-B num\] \[-C\[num\]\] \[-e pattern\] \[-f file\] \[--binary-files=value\] \[--color=when\] \[--context\[=num\]\] \[--directories=action\] \[--label\] \[--line-buffered\] \[--null\] \[pattern\] \[file...\] grep: unrecognized option \`---.md' usage: grep \[-abcdDEFGHhIiJLlMmnOopqRSsUVvwXxZz\] \[-A num\] \[-B num\] \[-C\[num\]\] \[-e pattern\] \[-f file\] \[--binary-files=value\] \[--color=when\] \[--context\[=num\]\] \[--directories=action\] \[--label\] \[--line-buffered\] \[--null\] \[pattern\] \[file...\] grep: unrecognized option \`---.md' usage: grep \[-abcdDEFGHhIiJLlMmnOopqRSsUVvwXxZz\] \[-A num\] \[-B num\] \[-C\[num\]\] \[-e pattern\] \[-f file\] \[--binary-files=value\] \[--color=when\] \[--context\[=num\]\] \[--directories=action\] \[--label\] \[--line-buffered\] \[--null\] \[pattern\] \[file...\] üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: 2 ‚úÖ –°–ú–ï–©–ï–ù–ò–ï –í–´–ü–û–õ–ù–ï–ù–û! üìù –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç: 01-01-02 - –¢–µ—Å—Ç —Å–º–µ—â–µ–Ω–∏—è 4 üîÑ –°–º–µ—â–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: 3 üîó –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—Å—ã–ª–æ–∫: 2 –í–∏–¥–∏—Ç—Å—è, —á—Ç–æ –º—ã —Å–¥–µ–ª–∞–ª–∏ –º–æ—â–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª. –ù—É–∂–Ω–æ –≤—Å–µ —á–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å

–û—Ç–ª–∏—á–Ω–æ! –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ —É–∂–µ –¥–æ–≤–æ–ª—å–Ω–æ –º–æ—â–Ω–∞—è. –î–∞–≤–∞–π—Ç–µ —Å–¥–µ–ª–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–µ:

## üìã –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã:

‚úÖ **–°–û–ó–î–ê–ù–ê –ü–û–õ–ù–ê–Ø –ú–û–î–£–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê:**

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:

1. `utils.sh` \- —É—Ç–∏–ª–∏—Ç—ã (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–≥–æ–≤ –∏ —Ç.–¥.)
2. `types.sh` \- —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º
3. `create.sh` \- –±–∞–∑–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
4. `document-creator.sh` \- —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
5. `manual-mode.sh` \- —Å–æ–∑–¥–∞–Ω–∏–µ —Å —Ä—É—á–Ω—ã–º ID
6. `batch-mode.sh` \- –ø–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
7. `replace-shift.sh` \- –æ–ø–µ—Ä–∞—Ü–∏–∏ –∑–∞–º–µ–Ω—ã –∏ —Å–º–µ—â–µ–Ω–∏—è

### –î–û–°–¢–£–ü–ù–´–ï –û–ü–ï–†–ê–¶–ò–ò:

1. **–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–∞–≤—Ç–æ-ID)** \- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è HEX ID
2. **–°–æ–∑–¥–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏ (—Ä—É—á–Ω–æ–π ID)** \- —É–∫–∞–∑–∞–Ω–∏–µ —Ç–æ—á–Ω–æ–≥–æ ID
3. **–ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ** \- —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–æ–¥—Ä—è–¥
4. **–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏**:
	- **–ó–∞–º–µ–Ω–∞** \- —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º ID (—Å—Ç–∞—Ä—ã–π –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è)
	- **–°–º–µ—â–µ–Ω–∏–µ** \- –≤—Å—Ç–∞–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–æ —Å–¥–≤–∏–≥–æ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö (—Ü–µ–ø–æ—á–Ω–æ–µ)

### –£–ù–ò–ö–ê–õ–¨–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò:

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4 —É—Ä–æ–≤–Ω–µ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏ + –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –º–µ–∂–¥—É –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ–Ω—è–µ–º—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –¶–µ–ø–æ—á–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–π ID
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π YAML frontmatter –¥–ª—è Obsidian

## üß™ –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

bash

```
# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
./uch-create-modular.sh
# 1 ‚Üí –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç (–∞–≤—Ç–æ-ID)
#    –£—Ä–æ–≤–µ–Ω—å 1: "–¢–µ—Å—Ç –ø—Ä–æ–µ–∫—Ç"
# 2 ‚Üí –°–æ–∑–¥–∞—Ç—å –ø–æ –∏–º–µ–Ω–∏: ID: "00-0A", –ù–∞–∑–≤–∞–Ω–∏–µ: "–¢–µ—Å—Ç —Ä—É—á–Ω–æ–π"
# 3 ‚Üí –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ: –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
```

### –¢–µ—Å—Ç 2: –ó–∞–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

bash

```
# 1. –°–æ–∑–¥–∞–π—Ç–µ –¥–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
# 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ó–∞–º–µ–Ω—É: –∑–∞–º–µ–Ω–∏—Ç–µ –æ–¥–∏–Ω –¥—Ä—É–≥–∏–º
# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
#   - –°—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ changed-backup/
#   - –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º ID
#   - –°—Å—ã–ª–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
```

### –¢–µ—Å—Ç 3: –¶–µ–ø–æ—á–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ

bash

```
# 1. –°–æ–∑–¥–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã: 00-0B, 00-0C, 00-0D
# 2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è 00-0C
# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ:
#   - 00-0C ‚Üí –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
#   - 00-0C ‚Üí 00-0D (—Å–º–µ—â–µ–Ω)
#   - 00-0D ‚Üí 00-0E (—Å–º–µ—â–µ–Ω –ø–æ —Ü–µ–ø–æ—á–∫–µ)
#   - –í—Å–µ —Å—Å—ã–ª–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
```

### –¢–µ—Å—Ç 4: –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏

bash

```
# 1. –°–º–µ—â–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (00-FF)
# 2. –ó–∞–º–µ–Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
# 3. –°–æ–∑–¥–∞–Ω–∏–µ —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º ID
# 4. –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ–º
```

## üìù –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:

bash

```
# –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã
cat > "00-04-02-0B - –°–Ω–∞–ø—à–æ—Ç –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã 20251228.md" << 'EOF'
---
id: "00-04-02-0B"
name: "–°–Ω–∞–ø—à–æ—Ç –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã 20251228"
type: "snapshot"
level: 4
status: "active"
tags:
  - "snapshot"
  - "documentation"
  - "system"
parent: "00-04-02"
parent_name: "–°–Ω–∞–ø—à–æ—Ç —Å–∏—Å—Ç–µ–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –∏ –Ω—É–º–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"
created: "2025-12-28"
updated: "2025-12-28"
author: "kirillkravcov"
---

### –°–Ω–∞–ø—à–æ—Ç –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã 20251228

#### üìä –û–ë–©–ò–ô –°–¢–ê–¢–£–°

**–°–∏—Å—Ç–µ–º–∞**: UCH Modular Document System  
**–í–µ—Ä—Å–∏—è**: 1.1.0  
**–°–æ—Å—Ç–æ—è–Ω–∏–µ**: –†–∞–±–æ—á–∏–π –ø—Ä–æ—Ç–æ—Ç–∏–ø  
**–î–∞—Ç–∞**: 2025-12-28  

#### ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–ù–´–ï –§–£–ù–ö–¶–ò–ò

##### 1. –ë–∞–∑–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è HEX ID
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 4 —É—Ä–æ–≤–Ω–µ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏
- –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã (–∏–¥–µ–∏, —Å—Å—ã–ª–∫–∏, –≤—Å—Ç—Ä–µ—á–∏)
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π YAML frontmatter

##### 2. –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- **–†—É—á–Ω–æ–π ID**: –°–æ–∑–¥–∞–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–æ—á–Ω–æ–≥–æ ID
- **–ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ**: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **–ó–∞–º–µ–Ω–∞**: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º ID —Å—Ç–∞—Ä–æ–≥–æ
- **–°–º–µ—â–µ–Ω–∏–µ**: –í—Å—Ç–∞–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å–æ —Å–¥–≤–∏–≥–æ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö

##### 3. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–º–µ–Ω—è–µ–º—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- –¶–µ–ø–æ—á–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–π

#### üèóÔ∏è –ú–û–î–£–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê
```

uch-scripts/  
‚îú‚îÄ‚îÄ main.sh # –ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç  
‚îú‚îÄ‚îÄ utils.sh # –£—Ç–∏–ª–∏—Ç—ã (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID, —Ç–µ–≥–∏)  
‚îú‚îÄ‚îÄ types.sh # –°–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤  
‚îú‚îÄ‚îÄ create.sh # –ë–∞–∑–æ–≤–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ  
‚îú‚îÄ‚îÄ document-creator.sh # –†–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤  
‚îú‚îÄ‚îÄ manual-mode.sh # –†—É—á–Ω–æ–π ID  
‚îú‚îÄ‚îÄ batch-mode.sh # –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ  
‚îî‚îÄ‚îÄ replace-shift.sh # –ó–∞–º–µ–Ω–∞ –∏ —Å–º–µ—â–µ–Ω–∏–µ

text

```
#### üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

##### –¢–µ—Å—Ç 1: –ó–∞–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ ‚úÖ
- –°—Ç–∞—Ä—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è
- –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º ID
- –°—Å—ã–ª–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

##### –¢–µ—Å—Ç 2: –¶–µ–ø–æ—á–Ω–æ–µ —Å–º–µ—â–µ–Ω–∏–µ ‚úÖ
- –ù–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–Ω–∏–º–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—ã–π ID
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å–¥–≤–∏–≥–∞—é—Ç—Å—è –ø–æ —Ü–µ–ø–æ—á–∫–µ
- –ö–æ–ª–ª–∏–∑–∏–∏ ID –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç—Å—è
- –í—Å–µ —Å—Å—ã–ª–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

##### –¢–µ—Å—Ç 3: –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ ‚úÖ
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- –û–±—â–∏–µ —Ç–µ–≥–∏ –¥–ª—è –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –ø–∞–∫–µ—Ç–∞
- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

#### üîß –ò–ó–í–ï–°–¢–ù–´–ï –û–°–û–ë–ï–ù–ù–û–°–¢–ò

1. **macOS bash**: –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ (\`declare -A\`)
2. **HEX –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è**: –í–µ–¥—É—â–∏–µ –Ω—É–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ
3. **–ü—Ä–æ–±–µ–ª—ã –≤ –∏–º–µ–Ω–∞—Ö**: –¢—Ä–µ–±—É—é—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
4. **Obsidian —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: YAML frontmatter –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å–∏—Ç—Å—è

#### üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

##### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è
- [ ] –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
- [ ] –£–ª—É—á—à–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

##### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Obsidian
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–≥–∏–Ω–∞ Obsidian
- [ ] SQLite –∫—ç—à –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- [ ] –ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∞ –¥–ª—è –∑–∞–¥–∞—á

##### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- [ ] –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

#### üìà –ú–ï–¢–†–ò–ö–ò

- **–ú–æ–¥—É–ª–µ–π**: 7
- **–§—É–Ω–∫—Ü–∏–π**: 6 –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **–¢–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: 14
- **–£—Ä–æ–≤–Ω–µ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏**: 4 + –Ω–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ
- **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã**: 15+ —Å–æ–∑–¥–∞–Ω–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

---
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã**: 1.1.0  
**–î–∞—Ç–∞ —Å–Ω–∞–ø—à–æ—Ç–∞**: 2025-12-28  
**–°—Ç–∞—Ç—É—Å**: –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω —Å–Ω–∞–ø—à–æ—Ç —Å–∏—Å—Ç–µ–º—ã: 00-04-02-0B - –°–Ω–∞–ø—à–æ—Ç –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã 20251228.md"
```

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏** –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã
3. **–ù–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É Obsidian –ø–ª–∞–≥–∏–Ω–∞** –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã
4. **–î–æ–±–∞–≤–∏—Ç—å SQLite –∫—ç—à** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–•–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å —Å –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –ø–ª–∞–≥–∏–Ω–∞?

–ì–ª—É–±–æ–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ

–ü–æ–∏—Å–∫

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –ò–ò, —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏