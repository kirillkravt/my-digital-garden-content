---
title: "DeepSeek"
source: "https://chat.deepseek.com/a/chat/s/d849b714-1f43-4b70-aed4-78255b014675"
author:
published:
created: 2025-12-10
description: "Chat with DeepSeek AI ‚Äì your intelligent assistant for coding, content creation, file reading, and more. Upload documents, engage in long-context conversations, and get expert help in AI, natural language processing, and beyond. | Ê∑±Â∫¶Ê±ÇÁ¥¢ÔºàDeepSeekÔºâÂä©ÂäõÁºñÁ®ã‰ª£Á†ÅÂºÄÂèë„ÄÅÂàõÊÑèÂÜô‰Ωú„ÄÅÊñá‰ª∂Â§ÑÁêÜÁ≠â‰ªªÂä°ÔºåÊîØÊåÅÊñá‰ª∂‰∏ä‰º†ÂèäÈïøÊñáÊú¨ÂØπËØùÔºåÈöèÊó∂‰∏∫ÊÇ®Êèê‰æõÈ´òÊïàÁöÑAIÊîØÊåÅ„ÄÇ"
tags:
  - "clippings"
---
–£–ª—É—á—à–µ–Ω–∏–µ –¥–∏–∑–∞–π–Ω–∞ –±–ª–æ–≥–∞: —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å—Ç–∞—Ç–µ–π

–î–≤–∏–∂–µ–º—Å—è –¥–∞–ª—å—à–µ. –î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏–º–µ–Ω—è–π –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞. –ü–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ñ–∞–∑–µ –¥–æ–Ω–∞—Å—Ç—Ä–æ–∏–º –±–ª–æ–≥. –∫–∞–∫–∏–µ –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∫ —É–ª—É—á—à–µ–Ω–∏—é? –£ –º–µ–Ω—è –∏–∑ –∑–∞–º–µ—á–∞–Ω–∏–π - —Å–µ–π—á–∞—Å —Å—Ç–∞—Ç—å–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –±–æ–ª—å—à–∏–º–∏ –ø–æ–ª—è–º–∏ –≤ –±–ª–æ–∫–µ. —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —Å–¥–µ–ª–∞—Ç—å –∏–ª–∏ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏

–û—Ç–ª–∏—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å! –§–∞–∑–∞ 1 –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ. –ü–µ—Ä–µ–¥ –ø–µ—Ä–µ—Ö–æ–¥–æ–º –∫ –§–∞–∑–µ 2 –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –¥–æ–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã –±–ª–æ–≥–∞, –æ—Å–æ–±–µ–Ω–Ω–æ –æ—Ç—Å—Ç—É–ø—ã, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–Ω—Ç –≤—ã–≥–ª—è–¥–µ–ª —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ —á–∏—Ç–∞–±–µ–ª—å–Ω–æ.

## üìù –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –ø–æ–ª—è —É —Å—Ç–∞—Ç–µ–π

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è**: –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç—å–∏ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω –ø–æ —à–∏—Ä–∏–Ω–µ –≤ —à–∞–±–ª–æ–Ω–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º Bootstrap —Å –∫–ª–∞—Å—Å–∞–º–∏ `container` –∏–ª–∏ `container-md`), —á—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –±–æ–ª—å—à–∏–µ –ø—É—Å—Ç—ã–µ –ø–æ–ª—è –ø–æ –±–æ–∫–∞–º.

## üé® –†–µ—à–µ–Ω–∏–µ 1: –£–≤–µ–ª–∏—á–∏—Ç—å —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å—Ç–∞—Ç–µ–π

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± ‚Äî –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å CSS –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

**–®–∞–≥–∏:**

1. **–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª —Å–æ —Å—Ç–∏–ª—è–º–∏** –±–ª–æ–≥–∞. –ò—Å—Ö–æ–¥—è –∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞, —ç—Ç–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ:  
	`uch-backend/uch/apps/blog/templates/blog/` (—Ç—É—Ç –∏—â–µ–º —à–∞–±–ª–æ–Ω –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å—Ç–∞—Ç—å–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä `article_detail.html`) –∏/–∏–ª–∏  
	`uch-backend/static/css/style.css`
2. **–ü—Ä–æ–≤–µ—Ä—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —à–∞–±–ª–æ–Ω–∞.** –í `article_detail.html` (–∏–ª–∏ –ø–æ–¥–æ–±–Ω–æ–º) –Ω–∞–π–¥–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —Å—Ç–∞—Ç—å–∏. –û–±—ã—á–Ω–æ –æ–Ω –æ–±–µ—Ä–Ω—É—Ç –≤ `<div class="container">` –∏–ª–∏ `<div class="container-md">`.
3. **–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** (–≤—ã–±–µ—Ä–∏ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç):
	**–í–∞—Ä–∏–∞–Ω—Ç –ê (–õ—É—á—à–∏–π): –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞ —Å –º–∞–∫—Å–∏–º—É–º–æ–º**  
	–î–æ–±–∞–≤—å –≤ `static/css/style.css` –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏:
	css
	```
	/* –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è —Å—Ç–∞—Ç–µ–π */
	.article-content-container {
	    max-width: 900px; /* –ò–ª–∏ 1000px, 1200px - –ø–æ–¥–±–µ—Ä–∏ –ø–æ –≤–∫—É—Å—É */
	    margin-left: auto;
	    margin-right: auto;
	    padding-left: 1rem;
	    padding-right: 1rem;
	}
	```
	–ó–∞—Ç–µ–º –≤ —à–∞–±–ª–æ–Ω–µ —Å—Ç–∞—Ç—å–∏ –æ–±–µ—Ä–Ω–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ —ç—Ç–æ—Ç –∫–ª–∞—Å—Å:
	html
	```
	<!-- –ë—ã–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä: <div class="container"> -->
	<div class="article-content-container">
	    {{ article.content | markdownify | safe }}
	</div>
	```
	**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ü–æ—á—Ç–∏ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É (—Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏)**
	css
	```
	.article-full-width {
	    max-width: 100%;
	    padding-left: 2vw; /* –û—Ç—Å—Ç—É–ø –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö –æ—Ç —à–∏—Ä–∏–Ω—ã —ç–∫—Ä–∞–Ω–∞ */
	    padding-right: 2vw;
	}
	```
	**–í–∞—Ä–∏–∞–Ω—Ç –í: –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ Bootstrap (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `container`)**
	css
	```
	/* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π .container –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü —Å—Ç–∞—Ç–µ–π */
	body.article-page .container {
	    max-width: 96%; /* –ò–ª–∏ 1200px, –∏–ª–∏ 100% */
	}
	```
	–ù–µ –∑–∞–±—É–¥—å –¥–æ–±–∞–≤–∏—Ç—å –∫–ª–∞—Å—Å `article-page` –∫ —Ç–µ–≥—É `<body>` –≤ —à–∞–±–ª–æ–Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç–∞—Ç—å–∏.

## üß™ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –ø—Ä–∞–≤–æ–∫:

- **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É** —Å—Ç–∞—Ç—å–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+F5 / Cmd+R).
- **–ü—Ä–æ–≤–µ—Ä—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö**: —à–∏—Ä–∏–Ω—É —ç–∫—Ä–∞–Ω–∞ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å –≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12).
- **–£–±–µ–¥–∏—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** –≤–Ω—É—Ç—Ä–∏ Markdown –Ω–µ "–≤—ã–ø–∞–¥–∞—é—Ç" –∑–∞ –Ω–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã (—É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å `max-width: 100%`, —ç—Ç–æ –æ—Ç–ª–∏—á–Ω–æ!).
- **–ü—Ä–æ–≤–µ—Ä—å –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã** (—Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π, –≥–ª–∞–≤–Ω–∞—è), —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Å–ª–æ–º–∞–ª–æ –∏—Ö –≤–µ—Ä—Å—Ç–∫—É. –õ—É—á—à–µ –≤—Å–µ–≥–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∫–ª–∞—Å—Å—ã (–∫–∞–∫ `.article-content-container`), –∞ –Ω–µ –≥–ª–æ–±–∞–ª—å–Ω–æ –º–µ–Ω—è—Ç—å `.container`.

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –±–ª–æ–≥–∞ –ø–µ—Ä–µ–¥ –§–∞–∑–æ–π 2

–ï—Å–ª–∏ –µ—Å—Ç—å –≤—Ä–µ–º—è, –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –¥–æ–±–∞–≤–∏—Ç—å:

1. **–ü–∞–≥–∏–Ω–∞—Ü–∏—é —Å–ø–∏—Å–∫–∞ —Å—Ç–∞—Ç–µ–π** (Django –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π `Paginator`).
2. **–ü–æ–¥—Å–≤–µ—Ç–∫—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞** –¥–ª—è –∫–æ–¥-–±–ª–æ–∫–æ–≤ –≤ Markdown (–º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä, `prism.js`).
3. **–û–≥–ª–∞–≤–ª–µ–Ω–∏–µ (Table of Contents)** –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–µ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (`h2`, `h3`). –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ Markdown –∏–ª–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –Ω–∞ JS.
4. **–ö–Ω–æ–ø–∫–∏ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"** –≤ —Å–æ—Ü—Å–µ—Ç–∏.

## ‚úÖ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ –±—É–¥—É—Ç –∑–∞–≤–µ—Ä—à–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã, –º–æ–∂–Ω–æ –±—É–¥–µ—Ç **–ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ –§–∞–∑–µ 2**.

**–ü–µ—Ä–≤—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ –§–∞–∑—ã 2 (–ø–æ—Å–ª–µ —Ç–≤–æ–µ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è):**

1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–∞—Ç–∞–ª–æ–≥ `uch-frontend/` –¥–ª—è React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å—Ç—É–¥–∏–∏.
2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ Vite + React + TypeScript.
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å Tailwind CSS.
4. –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –ø—Ä–æ—Ç–æ—Ç–∏–ø `CoreOrchestrator.ts` —Å –∫–ª–∞—Å—Å–æ–º `MasterClock`.

**–ì–æ—Ç–æ–≤ –≤–Ω–µ—Å—Ç–∏ –ø—Ä–∞–≤–∫–∏ –≤ CSS? –£–∫–∞–∂–∏, –∫–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç (–ê, –ë, –í) –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å, –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—É—â–µ–≥–æ —à–∞–±–ª–æ–Ω–∞ —Å—Ç–∞—Ç—å–∏ –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.**

article\_detail.html

HTML 2.49KB

–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å –≤–∏–¥–Ω–∞ —Ç–æ—á–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –±–æ–ª—å—à–∏—Ö –ø–æ–ª–µ–π. –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç—å–∏ –æ–±–µ—Ä–Ω—É—Ç –≤ Bootstrap-–≥—Ä–∏–¥: `col-12 col-lg-10 col-xl-8`, —á—Ç–æ –Ω–∞ –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö —Å–æ–∑–¥–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —à–∏—Ä–∏–Ω–µ.

## üé® –†–µ—à–µ–Ω–∏–µ: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

–ú—ã –º–æ–∂–µ–º –ø—Ä–æ—Å—Ç–æ —É–≤–µ–ª–∏—á–∏—Ç—å —à–∏—Ä–∏–Ω—É –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤. –≠—Ç–æ —Å–∞–º—ã–π —á–∏—Å—Ç—ã–π —Å–ø–æ—Å–æ–±, –Ω–µ –ª–æ–º–∞—é—â–∏–π –≤–µ—Ä—Å—Ç–∫—É.

### –®–∞–≥ 1: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π CSS

–î–æ–±–∞–≤—å –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ `static/css/style.css` —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç–∏–ª–∏:

css

```
/* –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å—Ç–∞—Ç–µ–π –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–æ–≤ */
@media (min-width: 1200px) { /* xl –∏ –±–æ–ª—å—à–µ */
    .markdown-content .col-xl-8 {
        max-width: 95% !important;
        flex: 0 0 95% !important;
    }
}

@media (min-width: 992px) and (max-width: 1199.98px) { /* lg */
    .markdown-content .col-lg-10 {
        max-width: 100% !important;
        flex: 0 0 100% !important;
    }
}

/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: —É–º–µ–Ω—å—à–∞–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
.markdown-content .row.justify-content-center {
    margin-left: 0;
    margin-right: 0;
}

.markdown-content .col-12 {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
}
```

**–ß—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç:**

- **–ù–∞ –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö (xl+):** —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∫–æ–ª–æ–Ω–∫—É —Å `8/12` –¥–æ `~95%` —à–∏—Ä–∏–Ω—ã.
- **–ù–∞ –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö (lg):** —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∫–æ–ª–æ–Ω–∫—É —Å `10/12` –¥–æ `100%` —à–∏—Ä–∏–Ω—ã.
- –£–±–∏—Ä–∞–µ—Ç –ª–∏—à–Ω–∏–µ –≤–Ω–µ—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã —É —Å—Ç—Ä–æ–∫–∏ –∏ —É–º–µ–Ω—å—à–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã —É –∫–æ–ª–æ–Ω–∫–∏.

### –®–∞–≥ 2: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –±–æ–ª–µ–µ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ ‚Äî –ø–æ—á—Ç–∏ –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏, –∑–∞–º–µ–Ω–∏ –≤–µ—Å—å –±–ª–æ–∫ `.markdown-content` –≤ —à–∞–±–ª–æ–Ω–µ:

html

```
<!-- –ó–ê–ú–ï–ù–ò –≠–¢–û–¢ –ë–õ–û–ö -->
<div class="markdown-content container-fluid">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-8">
            {{ article.content|markdownify }}
        </div>
    </div>
</div>

<!-- –ù–ê –≠–¢–û–¢ -->
<div class="markdown-content">
    <div class="container-max">
        {{ article.content|markdownify }}
    </div>
</div>
```

–ò –¥–æ–±–∞–≤—å –≤ CSS:

css

```
.container-max {
    max-width: 98%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
}
```

## üß™ –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π:

- **–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (Ctrl+F5)
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞** (F12 ‚Üí Responsive Design Mode)
- **–£–±–µ–¥–∏—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** –≤—Å—ë –µ—â–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É—é—Ç—Å—è
- **–ü—Ä–æ–≤–µ—Ä—å, –Ω–µ —Å—ä–µ—Ö–∞–ª–∞ –ª–∏** –Ω–∞–≤–∏–≥–∞—Ü–∏—è (–ø—Ä–µ–¥—ã–¥—É—â–∞—è/—Å–ª–µ–¥—É—é—â–∞—è —Å—Ç–∞—Ç—å—è)

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ **—É–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã —É –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤** –≤–Ω—É—Ç—Ä–∏ Markdown-–∫–æ–Ω—Ç–µ–Ω—Ç–∞, –µ—Å–ª–∏ –æ–Ω–∏ –∫–∞–∂—É—Ç—Å—è —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º–∏:

css

```
/* –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: —É–º–µ–Ω—å—à–∞–µ–º –æ—Ç—Å—Ç—É–ø—ã –≤–Ω—É—Ç—Ä–∏ markdown –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
.markdown-content h1,
.markdown-content h2,
.markdown-content h3 {
    margin-top: 1.5rem !important;
    margin-bottom: 1rem !important;
}

.markdown-content p {
    margin-bottom: 1rem !important;
}
```

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–ù–∞—á–Ω–∏ —Å **–®–∞–≥–∞ 1** (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CSS) ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –¥–∞—Å—Ç –∑–∞–º–µ—Ç–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç. –ï—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ —É—Å—Ç—Ä–æ–∏—Ç, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É.

**–ì–æ—Ç–æ–≤ –≤–Ω–µ—Å—Ç–∏ –ø—Ä–∞–≤–∫–∏ –≤ CSS?** –ï—Å–ª–∏ –¥–∞, —è –º–æ–≥—É –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ—á–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ `style.css`.

–≤—ã–ø–æ–ª–Ω–∏–ª —à–∞–≥ 1. –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–ø–æ–ª–Ω–µ —É—Å—Ç—Ä–æ–∏–ª. –í–µ—Ä–Ω–µ–º—Å—è –∫ –≤–æ–∑–º–æ–∂–Ω—ã–º —É–ª—É—á—à–µ–Ω–∏—è–º. –î—É–º–∞—é –≤–æ—Ç –æ —á–µ–º: –µ—Å–ª–∏ —è –Ω–∞–π–¥—É –ø—Ä–∏–º–µ—Ä –≥–æ—Ç–æ–≤–æ–≥–æ –±–ª–æ–≥–∞, —Ç–æ —Å–º–æ–∂–µ–º –ª–∏ –º—ã –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –≤—Ä–µ—Å—Ç–∫—É —Å—Ç–∏–ª–∏ –∏ —Ç.–¥. –≤ —ç—Ç–æ–º –±–ª–æ–≥–µ?

**–î–∞, –∞–±—Å–æ–ª—é—Ç–Ω–æ!** –≠—Ç–æ –æ—Ç–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è. –ú—ã –º–æ–∂–µ–º –≤–∑—è—Ç—å –≥–æ—Ç–æ–≤—ã–π –¥–∏–∑–∞–π–Ω –±–ª–æ–≥–∞ (—Å Dribbble, Behance, –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–∞–π—Ç–∞) –∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø–æ–¥ –Ω–∞—à—É Django-–ø–ª–∞—Ç—Ñ–æ—Ä–º—É. –≠—Ç–æ –±—É–¥–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–µ–µ, —á–µ–º –¥–µ–ª–∞—Ç—å –¥–∏–∑–∞–π–Ω —Å –Ω—É–ª—è.

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ —á—É–∂–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞

### 1\. –í—ã–±–æ—Ä –¥–∏–∑–∞–π–Ω–∞

- **–ì–¥–µ –∏—Å–∫–∞—Ç—å:** Dribbble, Behance, Awwwards, —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–¥–±–æ—Ä–∫–∏
- **–ö—Ä–∏—Ç–µ—Ä–∏–∏:** –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π, —Å —Ö–æ—Ä–æ—à–µ–π —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–æ–π, –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø–æ–¥ —Ç–≤–æ—Ä—á–µ—Å–∫—É—é —Ç–µ–º–∞—Ç–∏–∫—É

### 2\. –ê–Ω–∞–ª–∏–∑ –∏ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è

–†–∞–∑–æ–±—å–µ–º –¥–∏–∑–∞–π–Ω –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

### 3\. –≠—Ç–∞–ø—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

#### –≠—Ç–∞–ø A: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

1. **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω** `blog/modern_base.html`
2. **–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML** –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
3. **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å Django-–±–ª–æ–∫–∏** (`{% block content %}`, `{% static %}`)

#### –≠—Ç–∞–ø B: –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è

1. **–ò–∑–≤–ª–µ—á—å CSS** –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π
2. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å —à—Ä–∏—Ñ—Ç—ã** (Google Fonts, FontAwesome)
3. **–ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É** –ø–æ–¥ –Ω–∞—à –ø—Ä–æ–µ–∫—Ç

#### –≠—Ç–∞–ø C: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

1. **–ó–∞–≥–æ–ª–æ–≤–∫–∏ –∏ —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞** ‚Üí Django-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
2. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** ‚Üí `{{ article.featured_image.url }}`
3. **–¢–µ–≥–∏/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏** ‚Üí —Ü–∏–∫–ª `{% for tag in article.tags.all %}`
4. **–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏** ‚Üí `{{ article.created_at|date:"d.m.Y H:i" }}`

#### –≠—Ç–∞–ø D: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö**
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö**

## üìã –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –®–∞–≥ 1: –ù–∞–π–¥–∏ –¥–∏–∑–∞–π–Ω

- **–ß—Ç–æ –∏—Å–∫–∞—Ç—å:** "blog design inspiration", "article layout", "portfolio blog"
- **–°–æ—Ö—Ä–∞–Ω–∏:** –°–∫—Ä–∏–Ω—à–æ—Ç—ã –ø–æ–ª–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏, –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

bash

```
# –°–æ–∑–¥–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–µ—Ç–∫—É –¥–ª—è —Ä–µ–¥–∏–∑–∞–π–Ω–∞
git checkout -b blog-redesign

# –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –¥–ª—è –Ω–æ–≤—ã—Ö —Å—Ç–∏–ª–µ–π
mkdir -p uch-backend/static/css/modern/
```

### –®–∞–≥ 3: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

text

```
uch-backend/
‚îú‚îÄ‚îÄ templates/blog/
‚îÇ   ‚îú‚îÄ‚îÄ base.html           # —Ç–µ–∫—É—â–∏–π –±–∞–∑–æ–≤—ã–π
‚îÇ   ‚îú‚îÄ‚îÄ modern_base.html    # –Ω–æ–≤—ã–π –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
‚îÇ   ‚îî‚îÄ‚îÄ modern_article_detail.html  # –Ω–æ–≤–∞—è —Å—Ç–∞—Ç—å—è
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ style.css      # —Ç–µ–∫—É—â–∏–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ modern/        # –Ω–æ–≤—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ blog.css
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ typography.css
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ components.css
‚îÇ   ‚îî‚îÄ‚îÄ fonts/             # –∫–∞—Å—Ç–æ–º–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏

–ú—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

python

```
# settings.py
BLOG_THEME = 'modern'  # –∏–ª–∏ 'classic'
```

html

```
<!-- –í —à–∞–±–ª–æ–Ω–µ -->
{% if BLOG_THEME == 'modern' %}
    {% include "blog/modern_article_detail.html" %}
{% else %}
    {% include "blog/article_detail.html" %}
{% endif %}
```

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ß—Ç–æ –º—ã —É–∂–µ —É–º–µ–µ–º:

1. ‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞** (Bootstrap 5)
2. ‚úÖ **–ö–∞—Å—Ç–æ–º–Ω—ã–µ CSS-—Å—Ç–∏–ª–∏**
3. ‚úÖ **–†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏**
4. ‚úÖ **–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ –∏ —à—Ä–∏—Ñ—Ç—ã**
5. ‚úÖ **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Django –≤ —à–∞–±–ª–æ–Ω–∞—Ö**

### –ß—Ç–æ –º–æ–∂–µ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–∑ –ª—é–±–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞:

- **–ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã** (CSS transitions)
- **–¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞**
- **–°–ª–æ–∂–Ω—ã–µ —Å–µ—Ç–∫–∏** (CSS Grid, Flexbox)
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã** (JavaScript –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
- **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** (–∫–∞—Ä—Ç–æ—á–∫–∏, —Ü–∏—Ç–∞—Ç—ã, –≥–∞–ª–µ—Ä–µ–∏)

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –≤—ã–±–æ—Ä—É –¥–∏–∑–∞–π–Ω–∞

### –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç:

1. **–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω** —Å –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç
2. **–•–æ—Ä–æ—à–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å** (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –º–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã, –∫–æ–Ω—Ç—Ä–∞—Å—Ç)
3. **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —Å–µ—Ç–∫–∞** (–æ—Ç –º–æ–±–∏–ª—å–Ω–æ–≥–æ –¥–æ 4K)
4. **–¢–≤–æ—Ä—á–µ—Å–∫–∏–µ –∞–∫—Ü–µ–Ω—Ç—ã** –ø–æ–¥—Ö–æ–¥–∏—Ç –Ω–∞—à–µ–π —Ç–µ–º–∞—Ç–∏–∫–µ

### –ü—Ä–∏–º–µ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞:

- –ö—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ —à–∞–ø–∫–∏ —Å—Ç–∞—Ç–µ–π
- –°—Ç–∏–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ —Å –∫–æ–¥–æ–º (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∞—Å–ø–µ–∫—Ç–æ–≤)
- –≠–ª–µ–≥–∞–Ω—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö
- –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ (scroll-triggered animations)

## üìù –°–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

1. **–ù–∞–π–¥–∏ 2-3 –ø—Ä–∏–º–µ—Ä–∞ –¥–∏–∑–∞–π–Ω–∞**, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–±–µ –Ω—Ä–∞–≤—è—Ç—Å—è
2. **–°–æ–∑–¥–∞–π –∫–æ–ª–ª–µ–∫—Ü–∏—é –≤ Figma/Photoshop** –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–∞–ø–∫—É —Å–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏
3. **–í—ã–¥–µ–ª–∏ –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—á–µ—à—å –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏

**–Ø –ø–æ–º–æ–≥—É:**

- –†–∞–∑–æ–±—Ä–∞—Ç—å –¥–∏–∑–∞–π–Ω –Ω–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π HTML/CSS
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Django-—à–∞–±–ª–æ–Ω–∞–º–∏
- –°–¥–µ–ª–∞—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—É—é –≤–µ—Ä—Å—Ç–∫—É

**–ï—Å—Ç—å –ª–∏ —É–∂–µ –ø—Ä–∏–º–µ—Ä –¥–∏–∑–∞–π–Ω–∞, –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è? –ò–ª–∏ —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã —è –ø—Ä–µ–¥–ª–æ–∂–∏–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤?**

–ö–∞–∫ –ª—É—á—à–µ —Ä–∞—Å—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã: —Å–Ω–∞—á–∞–ª–∞ –≤–∏–∑—É–∞–ª—å–Ω—É—é —á–∞—Å—Ç—å –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª? –ù—É–∂–µ–Ω –µ—â–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–∑ obsidian, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–∏—Å–∫ –∏ —Ç.–¥. –ß—Ç–æ –µ—â–µ –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å?

–û—Ç–ª–∏—á–Ω—ã–π —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–∞—Å—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞.

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª ‚Üí –í–∏–∑—É–∞–ª

**–ü—Ä–∏—á–∏–Ω–∞:** –£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å *—Ä–∞–±–æ—á–∏–π* –±–ª–æ–≥. –°–µ–π—á–∞—Å –≤–∞–∂–Ω–µ–µ —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ *–ø–æ–ª–µ–∑–Ω—ã–º* –∏ *–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º*, –∞ –ø–æ—Ç–æ–º —É–∂–µ *–∫—Ä–∞—Å–∏–≤—ã–º*.

**–ê—Ä–≥—É–º–µ–Ω—Ç—ã:**

1. **–í–∏–∑—É–∞–ª –º–µ–Ω—è–µ—Ç—Å—è –ª–µ–≥–∫–æ** ‚Äî —ç—Ç–æ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º CSS
2. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** ‚Äî –Ω—É–∂–Ω—ã –º–æ–¥–µ–ª–∏, API, –ª–æ–≥–∏–∫–∞
3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ü–µ–Ω—É—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –±–æ–ª—å—à–µ**, —á–µ–º –¥–∏–∑–∞–π–Ω (–≤ —Ä–∞–∑—É–º–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö)
4. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥** –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–∏ —Å–ª–æ–∂–Ω–µ–µ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ

## üìä –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á (–ø–æ —É–±—ã–≤–∞–Ω–∏—é –≤–∞–∂–Ω–æ—Å—Ç–∏)

### ü•á –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û (–§–∞–∑–∞ 1.1)

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è —Ñ–∏—á–∞ –ø—Ä–æ–µ–∫—Ç–∞!
	- ‚úÖ –£ –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å –∫–æ–º–∞–Ω–¥–∞ –∏–º–ø–æ—Ä—Ç–∞
	- ‚è≥ –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (watchdog)
	- ‚è≥ **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É** —Å—Å—ã–ª–æ–∫ –º–µ–∂–¥—É –∑–∞–º–µ—Ç–∫–∞–º–∏
2. **–ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É** ‚Äî –±–∞–∑–æ–≤–∞—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å
	- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è: `django.contrib.postgres.search` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º PostgreSQL)
	- –ò–ª–∏ `django-watson` –¥–ª—è SQLite/—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è
3. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å—Ç–∞—Ç–µ–π** ‚Äî –¥–ª—è —Ä–æ—Å—Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
	- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Django `Paginator` ‚Äî 30 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã

### ü•à –í–ê–ñ–ù–û (–§–∞–∑–∞ 1.2)

1. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** –∏–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
	- `django-comments-xtd` –∏–ª–∏ –ø—Ä–æ—Å—Ç–∞—è –º–æ–¥–µ–ª—å Comment
2. **RSS/Atom —Ñ–∏–¥—ã** ‚Äî –¥–ª—è –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤
	- `django.contrib.syndication`
3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
	- –ü—Ä–æ—Å—Ç–∞—è –º–æ–¥–µ–ª—å `ArticleView`
4. **–°–∏—Å—Ç–µ–º–∞ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤/–ø—Ä–µ–≤—å—é** ‚Äî –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤

### ü•â –£–õ–£–ß–®–ï–ù–ò–Ø (–§–∞–∑–∞ 1.3)

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
	- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (`@cache_page`, Redis)
	- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (`django-imagekit`)
2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –º–µ–¥–∏–∞**
	- –ì–∞–ª–µ—Ä–µ–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
	- –ê—É–¥–∏–æ/–≤–∏–¥–µ–æ –ø–ª–µ–µ—Ä—ã
3. **SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
	- –ú–µ—Ç–∞-—Ç–µ–≥–∏, `sitemap.xml`, `robots.txt`

### üé® –í–ò–ó–£–ê–õ–¨–ù–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø (–ø–æ—Å–ª–µ –±–∞–∑–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞)

1. **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω** (–ø–æ —à–∞–±–ª–æ–Ω—É)
2. **–¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞**
3. **–ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –º–∏–∫—Ä–æ–∏–Ω—Ç–µ—Ä–∞–∫—Ü–∏–∏**

## üõ† –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π

### 1\. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ1)

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ï—Å—Ç—å –∫–æ–º–∞–Ω–¥–∞ —Ä—É—á–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.

**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å:**

python

```
# uch/apps/blog/management/commands/watch_obsidian.py
import time
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

class ObsidianHandler(FileSystemEventHandler):
    def on_modified(self, event):
        if event.src_path.endswith('.md'):
            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
            self.import_article(event.src_path)
```

**–§—É–Ω–∫—Ü–∏–∏:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö/–∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –£–º–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç–∞—Ç–µ–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–∞—Ä—Ö–∏–≤–∞—Ü–∏—è/—É–¥–∞–ª–µ–Ω–∏–µ)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2\. –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ2)

**–í–∞—Ä–∏–∞–Ω—Ç –ê (–ø—Ä–æ—Å—Ç–æ–π):** –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É/—Ç–µ–≥–∞–º

python

```
# views.py
def article_search(request):
    query = request.GET.get('q', '')
    articles = Article.objects.filter(
        Q(title__icontains=query) | 
        Q(content__icontains=query) |
        Q(tags__name__icontains=query)
    ).distinct()
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë (–ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π, PostgreSQL):**

python

```
# models.py
from django.contrib.postgres.search import SearchVectorField

class Article(models.Model):
    search_vector = SearchVectorField(null=True)
    
    def update_search_vector(self):
        self.search_vector = SearchVector('title', 'content')
        self.save(update_fields=['search_vector'])
```

### 3\. –ü–∞–≥–∏–Ω–∞—Ü–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ3) - –ë–´–°–¢–†–ê–Ø –ü–û–ë–ï–î–ê

**–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 20-30 –º–∏–Ω—É—Ç

python

```
# views.py
from django.core.paginator import Paginator

def article_list(request):
    articles = Article.objects.filter(status='published')
    paginator = Paginator(articles, 10)  # 10 —Å—Ç–∞—Ç–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    page_number = request.GET.get('page')
    page_obj = paginator.get_page(page_number)
    return render(request, 'blog/article_list.html', {'page_obj': page_obj})
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –§–∞–∑—ã 1

**MVP –ë–ª–æ–≥–∞ –≥–æ—Ç–æ–≤–æ –∫–æ–≥–¥–∞:**

1. ‚úÖ **–ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è** (—Ä—É—á–Ω–æ–π –∏–º–ø–æ—Ä—Ç)
2. ‚è≥ **–ö–æ–Ω—Ç–µ–Ω—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** (–∏–∑ Obsidian)
3. ‚è≥ **–ö–æ–Ω—Ç–µ–Ω—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è** (–ø–æ–∏—Å–∫)
4. ‚è≥ **–ö–æ–Ω—Ç–µ–Ω—Ç –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç—Å—è** (–ø–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã)
5. ‚è≥ **–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –µ—Å—Ç—å** (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏/–∫–æ–Ω—Ç–∞–∫—Ç—ã)

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

| –ó–∞–¥–∞—á–∞ | –í—Ä–µ–º—è | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
| --- | --- | --- |
| –ê–≤—Ç–æ–∏–º–ø–æ—Ä—Ç Obsidian | 1-2 –¥–Ω—è | ü•á |
| –ü–æ–∏—Å–∫ (–±–∞–∑–æ–≤—ã–π) | 0.5 –¥–Ω—è | ü•á |
| –ü–∞–≥–∏–Ω–∞—Ü–∏—è | 0.1 –¥–Ω—è | ü•á |
| –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ | 1 –¥–µ–Ω—å | ü•à |
| RSS —Ñ–∏–¥—ã | 0.3 –¥–Ω—è | ü•à |
| –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∏–∑–∞–π–Ω | 2-3 –¥–Ω—è | ü•â |

## üéØ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–ª–∞–Ω –Ω–∞ –±–ª–∏–∂–∞–π—à–∏–µ –¥–Ω–∏

**–î–µ–Ω—å 1-2:**

1. –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian (watchdog + –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–æ–∫)
2. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É/—Ç–µ–≥–∞–º
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é —Å–ø–∏—Å–∫–∞ —Å—Ç–∞—Ç–µ–π

**–î–µ–Ω—å 3:**  
4\. –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤  
5\. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å RSS —Ñ–∏–¥—ã

**–î–µ–Ω—å 4-5 (–µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤—Ä–µ–º—è):**  
6\. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
7\. –ù–∞—á–∞–ª–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∏–∑–∞–π–Ω–∞

## ‚ùì –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è

1. **–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≥–æ—Ç–æ–≤ –≤—ã–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É –±–ª–æ–≥–∞?**
2. **–ö–∞–∫–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è —Ç–≤–æ–µ–≥–æ —Ä–∞–±–æ—á–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞?**
	- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Obsidian?
	- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –ø–æ –∞—Ä—Ö–∏–≤—É?
	- –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç —á–∏—Ç–∞—Ç–µ–ª–µ–π?
3. **–ü–ª–∞–Ω–∏—Ä—É–µ—à—å –ª–∏ –∞–∫—Ç–∏–≤–Ω–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è?**

**–ú–æ—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ó–∞–∫–æ–Ω—á–∏ 3 –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ (ü•á), –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏ –∫ –§–∞–∑–µ 2, –∞ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–µ–ª–∞–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∏–ª–∏ –ø–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ —Å—Ç—É–¥–∏–∏.

**–ß—Ç–æ –≤—ã–±–∏—Ä–∞–µ—à—å?**

–î–∞–≤–∞–π –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ1)

–û—Ç–ª–∏—á–Ω–æ! –°–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏–º—Å—è –Ω–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –∏–º–ø–æ—Ä—Ç–µ –∏–∑ Obsidian** ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–∞—è —Ñ–∏—á–∞ –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ–≥–æ workflow.

## üéØ –¶–µ–ª—å: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Obsidian-—Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å –±–ª–æ–≥–æ–º

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ï—Å—Ç—å –∫–æ–º–∞–Ω–¥–∞ `import_obsidian` –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.

**–ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å**:

1. ‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã** (watchdog) –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. ‚úÖ **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç** —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
3. ‚ö†Ô∏è **–û–±—Ä–∞–±–æ—Ç–∫—É —Å—Å—ã–ª–æ–∫ –º–µ–∂–¥—É –∑–∞–º–µ—Ç–∫–∞–º–∏** (`[[note]]` ‚Üí HTML —Å—Å—ã–ª–∫–∏)
4. ‚ö†Ô∏è **–ö–æ–Ω—Ñ–ª–∏–∫—Ç–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏** (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –¥—É–±–ª–∏)
5. ‚ö†Ô∏è **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–ª—É—á—à–µ–Ω–∏–π

### 1\. –û–±–Ω–æ–≤–∏–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –∏–º–ø–æ—Ä—Ç–∞

bash

```
# –¢–µ–∫—É—â–∞—è –∫–æ–º–∞–Ω–¥–∞
python manage.py import_obsidian /path/to/vault --author admin

# –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
--watch           # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
--interval 5      # –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–µ–∫—É–Ω–¥—ã)
--daemon          # –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–∞–∫ –¥–µ–º–æ–Ω (—Ñ–æ–Ω–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å)
--log-file path   # –§–∞–π–ª –¥–ª—è –ª–æ–≥–æ–≤
```

### 2\. –°–æ–∑–¥–∞–¥–∏–º —Å–ª—É–∂–±—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–§–∞–π–ª**: `uch/apps/blog/management/commands/watch_obsidian.py`

python

```
import os
import time
import logging
from pathlib import Path
from django.core.management.base import BaseCommand
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler
from blog.models import Article
from .import_obsidian import import_markdown_file

logger = logging.getLogger(__name__)

class ObsidianEventHandler(FileSystemEventHandler):
    def __init__(self, vault_path, author):
        self.vault_path = Path(vault_path)
        self.author = author
        self.processed_files = set()
        
    def on_modified(self, event):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤"""
        if not event.is_directory and event.src_path.endswith('.md'):
            self.handle_file_change(event.src_path, 'modified')
    
    def on_created(self, event):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤"""
        if not event.is_directory and event.src_path.endswith('.md'):
            self.handle_file_change(event.src_path, 'created')
    
    def on_deleted(self, event):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤"""
        if not event.is_directory and event.src_path.endswith('.md'):
            self.handle_file_change(event.src_path, 'deleted')
    
    def handle_file_change(self, filepath, change_type):
        """–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π"""
        try:
            rel_path = Path(filepath).relative_to(self.vault_path)
            
            if change_type == 'deleted':
                # –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å—é
                self.archive_article(rel_path)
            else:
                # –ò–º–ø–æ—Ä—Ç –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
                self.import_or_update(filepath, rel_path)
                
            logger.info(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {rel_path} ({change_type})")
            
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ {filepath}: {e}")

class Command(BaseCommand):
    help = '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞'
    
    def add_arguments(self, parser):
        parser.add_argument('vault_path', type=str, help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É')
        parser.add_argument('--author', required=True, help='–ò–º—è –∞–≤—Ç–æ—Ä–∞ –¥–ª—è —Å—Ç–∞—Ç–µ–π')
        parser.add_argument('--interval', type=int, default=5, help='–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–µ–∫—É–Ω–¥—ã)')
        parser.add_argument('--log-file', type=str, help='–§–∞–π–ª –¥–ª—è –ª–æ–≥–æ–≤')
    
    def handle(self, *args, **options):
        # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        if options['log_file']:
            logging.basicConfig(
                level=logging.INFO,
                format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
                filename=options['log_file']
            )
        
        self.stdout.write(self.style.SUCCESS(
            f"–ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: {options['vault_path']}"
        ))
        
        event_handler = ObsidianEventHandler(
            vault_path=options['vault_path'],
            author=options['author']
        )
        
        observer = Observer()
        observer.schedule(
            event_handler, 
            options['vault_path'], 
            recursive=True
        )
        observer.start()
        
        try:
            while True:
                time.sleep(options['interval'])
        except KeyboardInterrupt:
            observer.stop()
            self.stdout.write(self.style.WARNING("–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"))
        
        observer.join()
```

### 3\. –£–ª—É—á—à–∏–º –æ–±—Ä–∞–±–æ—Ç–∫—É Obsidian-—Å–ø–µ—Ü–∏—Ñ–∏–∫

**–§–∞–π–ª**: `uch/apps/blog/obsidian_parser.py`

python

```
import re
from pathlib import Path

class ObsidianParser:
    """–ü–∞—Ä—Å–µ—Ä Obsidian-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ–≥–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞"""
    
    @staticmethod
    def convert_wikilinks(text, vault_path):
        """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç [[wiki links]] –≤ HTML —Å—Å—ã–ª–∫–∏"""
        def replace_wikilink(match):
            link_text = match.group(1)
            # –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å—Å—ã–ª–∫–∏ –∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º
            if '|' in link_text:
                link_path, display_text = link_text.split('|', 1)
            else:
                link_path = display_text = link_text
            
            # –ò—â–µ–º —Ñ–∞–π–ª –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
            md_file = Path(vault_path) / f"{link_path}.md"
            if md_file.exists():
                # –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å—Ç–∞—Ç—å—é –≤ –±–∞–∑–µ
                slug = md_file.stem.lower().replace(' ', '-')
                return f'<a href="/blog/{slug}/">{display_text}</a>'
            
            return f'<span class="broken-link">{display_text}</span>'
        
        # –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è [[wiki links]]
        pattern = r'\[\[([^\]]+)\]\]'
        return re.sub(pattern, replace_wikilink, text)
    
    @staticmethod
    def convert_tags(text):
        """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç #—Ç–µ–≥–∏ –≤ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ç–µ–≥–æ–≤"""
        def replace_tag(match):
            tag = match.group(1)
            return f'<a href="/blog/tag/{tag}/" class="tag-link">#{tag}</a>'
        
        pattern = r'(?<!\w)#([a-zA-Z–∞-—è–ê-–Ø0-9_-]+)'
        return re.sub(pattern, replace_tag, text)
    
    @staticmethod
    def convert_embeds(text, vault_path, media_root):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ ![[embeds]] - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, PDF –∏ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤"""
        def replace_embed(match):
            file_path = match.group(1)
            full_path = Path(vault_path) / file_path
            
            if not full_path.exists():
                return f'<!-- –ù–µ –Ω–∞–π–¥–µ–Ω —Ñ–∞–π–ª: {file_path} -->'
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —Ñ–∞–π–ª–∞
            if full_path.suffix.lower() in ['.png', '.jpg', '.jpeg', '.gif', '.webp']:
                # –ö–æ–ø–∏—Ä—É–µ–º –≤ –º–µ–¥–∏–∞-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ
                media_path = copy_to_media(full_path, media_root)
                return f'<img src="{media_path}" alt="{full_path.stem}">'
            
            return f'<!-- –ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π embed: {file_path} -->'
        
        pattern = r'!\[\[([^\]]+)\]\]'
        return re.sub(pattern, replace_embed, text)
```

### 4\. –°–æ–∑–¥–∞–¥–∏–º —Å–∏—Å—Ç–µ–º–Ω—É—é —Å–ª—É–∂–±—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–§–∞–π–ª**: `systemd/uch-obsidian-watcher.service`

ini

```
[Unit]
Description=Universal Creative Hub Obsidian Watcher
After=network.target

[Service]
Type=simple
User=www-data
WorkingDirectory=/opt/uch-backend
ExecStart=/usr/bin/python3 manage.py watch_obsidian /home/user/obsidian-vault --author admin --daemon
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

## üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

bash

```
# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º watchdog
pip install watchdog
pip freeze > requirements.txt
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–µ–º —É–ª—É—á—à–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É

bash

```
cd uch-backend/uch/apps/blog/management/commands/

# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª
touch watch_obsidian.py

# –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–¥ –≤—ã—à–µ –≤ —Ñ–∞–π–ª
```

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤—Ä—É—á–Ω—É—é

bash

```
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
python manage.py watch_obsidian /path/to/obsidian/vault --author admin

# –í –æ—Ç–¥–µ–ª—å–Ω–æ–π –≤–∫–ª–∞–¥–∫–µ —Å–æ–∑–¥–∞–π/–∏–∑–º–µ–Ω–∏ .md —Ñ–∞–π–ª –≤ Obsidian
# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```

### –®–∞–≥ 4: –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É wiki-—Å—Å—ã–ª–æ–∫

bash

```
# –°–æ–∑–¥–∞–µ–º –ø–∞—Ä—Å–µ—Ä
touch uch/apps/blog/obsidian_parser.py
```

### –®–∞–≥ 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∏–º–ø–æ—Ä—Ç–æ–º

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º `import_obsidian.py`:

python

```
# –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞
from .obsidian_parser import ObsidianParser

# –í —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞
def process_markdown_file(filepath, vault_path, author):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º Obsidian-—Å–∏–Ω—Ç–∞–∫—Å–∏—Å
    parser = ObsidianParser()
    content = parser.convert_wikilinks(content, vault_path)
    content = parser.convert_tags(content)
    
    # ... —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É ...
```

## üß™ –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

- **–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π.md —Ñ–∞–π–ª** –≤ Obsidian ‚Üí —Å—Ç–∞—Ç—å—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –±–ª–æ–≥–µ
- **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª** ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Ä–∞–∂–∞—é—Ç—Å—è –≤ –±–ª–æ–≥–µ
- **–î–æ–±–∞–≤—å wiki-—Å—Å—ã–ª–∫—É** `[[Another Note]]` ‚Üí –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ HTML —Å—Å—ã–ª–∫—É
- **–î–æ–±–∞–≤—å —Ç–µ–≥–∏** `#–º—É–∑—ã–∫–∞ #–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ` ‚Üí —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏
- **–£–¥–∞–ª–∏ —Ñ–∞–π–ª** –≤ Obsidian ‚Üí —Å—Ç–∞—Ç—å—è –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è/–¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è
- **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏** –Ω–∞ –æ—à–∏–±–∫–∏ –∏ —É—Å–ø–µ—à–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: Watchdog –¥–æ–ª–∂–µ–Ω –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `.md` —Ñ–∞–π–ª—ã
2. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã**: –ü—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ Obsidian –∏ –∞–¥–º–∏–Ω–∫–µ
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Ç–µ–π, –∑–∞—â–∏—Ç–∞ –æ—Ç path traversal
4. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –≤—Å–µ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –Ω–∞—á–∞—Ç—å —Å –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:

python

```
# –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ
import time
from pathlib import Path
import subprocess

VAULT_PATH = "/path/to/obsidian"
LAST_CHECK = {}

while True:
    for md_file in Path(VAULT_PATH).rglob("*.md"):
        mtime = md_file.stat().st_mtime
        
        if md_file not in LAST_CHECK or LAST_CHECK[md_file] != mtime:
            # –§–∞–π–ª –∏–∑–º–µ–Ω–∏–ª—Å—è
            subprocess.run([
                "python", "manage.py", "import_obsidian",
                str(md_file), "--author", "admin", "--update-existing"
            ])
            LAST_CHECK[md_file] = mtime
    
    time.sleep(30)  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
```

## ‚úÖ –°–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

1. **–ö–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å?**
	- –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Watchdog
	- –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç —Å polling
	- –ß—Ç–æ-—Ç–æ —Å—Ä–µ–¥–Ω–µ–µ?
2. **–ù—É–∂–Ω–∞ –ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞:**
	- –í–ª–æ–∂–µ–Ω–Ω—ã—Ö –ø–∞–ø–æ–∫ –∫–∞–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π?
	- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤)?
	- –†–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º?
3. **–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é?**
	- –°–Ω–∞—á–∞–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
	- –ü–æ—Ç–æ–º —Å–æ–∑–¥–∞–¥–∏–º –±–∞–∑–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä
	- –ó–∞—Ç–µ–º –¥–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç–∫—É wiki-—Å—Å—ã–ª–æ–∫

**–ù–∞—á–∏–Ω–∞–µ–º —Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `watchdog` –∏ —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑–æ–≤–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∞?**

3 —Ç–µ—Å—Ç–∏—Ä—É–µ–º –≤—Ä—É—á–Ω—É—é: (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py watch\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" % (app\_name, name)) File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/importlib/\_\_init\_\_.py", line 127, in import\_module return \_bootstrap.\_gcd\_import(name\[level:\], package, level) File "<frozen importlib.\_bootstrap>", line 1014, in \_gcd\_import File "<frozen importlib.\_bootstrap>", line 991, in \_find\_and\_load File "<frozen importlib.\_bootstrap>", line 975, in \_find\_and\_load\_unlocked File "<frozen importlib.\_bootstrap>", line 671, in \_load\_unlocked File "<frozen importlib.\_bootstrap\_external>", line 783, in exec\_module File "<frozen importlib.\_bootstrap>", line 219, in \_call\_with\_frames\_removed File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/watch\_obsidian.py", line 8, in <module> from blog.models import Article ModuleNotFoundError: No module named 'blog' –†–∞–∑–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ –¥–∞–ª—å—à–µ –Ω–µ –∏–¥–µ–º

–û—à–∏–±–∫–∞ –≤ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª–µ–π Django. –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∏–º–ø–æ—Ä—Ç—ã –≤ watch\_obsidian.py

**–ü—Ä–∏—á–∏–Ω–∞**: –í–Ω—É—Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã Django –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏–ª–∏ –ø–æ–ª–Ω—ã–µ –ø—É—Ç–∏.

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞**:

python

```
from blog.models import Article  # ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ management commands
```

### –†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç

python

```
# watch_obsidian.py - –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø
import os
import sys
import time
import logging
from pathlib import Path
from django.core.management.base import BaseCommand

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
sys.path.append(os.path.join(os.path.dirname(__file__), '../../../..'))

# –¢–µ–ø–µ—Ä—å –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥–µ–ª–∏
from uch.apps.blog.models import Article

# –ò–ª–∏ —á–µ—Ä–µ–∑ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
# from ...models import Article

from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler
```

### –†–µ—à–µ–Ω–∏–µ 2: –ü–æ–ª–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏

–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏:

python

```
# uch/apps/blog/management/commands/watch_obsidian.py
import os
import sys
import time
import logging
from pathlib import Path
from django.core.management.base import BaseCommand

# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç –º–æ–¥–µ–ª–µ–π Django
try:
    # –°–ø–æ—Å–æ–± 1: –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –∏–º–ø–æ—Ä—Ç
    from uch.apps.blog.models import Article
    from uch.apps.blog.management.commands.import_obsidian import import_markdown_file
except ImportError:
    # –°–ø–æ—Å–æ–± 2: –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
    sys.path.append(os.path.dirname(os.path.dirname(os.path.dirname(os.path.dirname(__file__)))))
    from uch.apps.blog.models import Article
    from uch.apps.blog.management.commands.import_obsidian import import_markdown_file

from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

logger = logging.getLogger(__name__)

class ObsidianEventHandler(FileSystemEventHandler):
    def __init__(self, vault_path, author):
        self.vault_path = Path(vault_path)
        self.author = author
        
    def on_modified(self, event):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤"""
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"–§–∞–π–ª –∏–∑–º–µ–Ω–µ–Ω: {event.src_path}")
            # –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏

class Command(BaseCommand):
    help = '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞'
    
    def add_arguments(self, parser):
        parser.add_argument('vault_path', type=str, help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É')
        parser.add_argument('--author', required=True, help='–ò–º—è –∞–≤—Ç–æ—Ä–∞ –¥–ª—è —Å—Ç–∞—Ç–µ–π')
        parser.add_argument('--interval', type=int, default=5, help='–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–µ–∫—É–Ω–¥—ã)')
    
    def handle(self, *args, **options):
        self.stdout.write(self.style.SUCCESS(
            f"–ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: {options['vault_path']}"
        ))
        self.stdout.write("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
        
        event_handler = ObsidianEventHandler(
            vault_path=options['vault_path'],
            author=options['author']
        )
        
        observer = Observer()
        observer.schedule(
            event_handler, 
            options['vault_path'], 
            recursive=True
        )
        observer.start()
        
        try:
            while True:
                time.sleep(options['interval'])
        except KeyboardInterrupt:
            observer.stop()
            self.stdout.write(self.style.WARNING("–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"))
        
        observer.join()
```

## üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –®–∞–≥ 1: –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –∏–º–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

bash

```
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –ü—Ä–æ–≤–µ—Ä—è–µ–º Python path
python -c "import sys; print(sys.path)"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –º–æ–∂–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å
python -c "
import os
import sys
sys.path.append('/Users/kirillkravcov/UniversalCreativeHub/uch-backend')
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'uch.settings')
import django
django.setup()
from uch.apps.blog.models import Article
print('–ò–º–ø–æ—Ä—Ç —É—Å–ø–µ—à–µ–Ω!')
"
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–µ–º —É–ø—Ä–æ—â–µ–Ω–Ω—É—é —Ç–µ—Å—Ç–æ–≤—É—é –≤–µ—Ä—Å–∏—é

–ï—Å–ª–∏ –∏–º–ø–æ—Ä—Ç –≤—Å—ë –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–æ–∑–¥–∞–π —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –¥–ª—è —Ç–µ—Å—Ç–∞:

python

```
# uch/apps/blog/management/commands/watch_test.py
import time
import logging
from pathlib import Path
from django.core.management.base import BaseCommand
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

logger = logging.getLogger(__name__)

class TestEventHandler(FileSystemEventHandler):
    def on_modified(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"üìù –§–∞–π–ª –∏–∑–º–µ–Ω–µ–Ω: {event.src_path}")
    
    def on_created(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"üÜï –§–∞–π–ª —Å–æ–∑–¥–∞–Ω: {event.src_path}")
    
    def on_deleted(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"üóëÔ∏è –§–∞–π–ª —É–¥–∞–ª–µ–Ω: {event.src_path}")

class Command(BaseCommand):
    help = '–¢–µ—Å—Ç–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤'
    
    def add_arguments(self, parser):
        parser.add_argument('path', type=str, help='–ü—É—Ç—å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞')
    
    def handle(self, *args, **options):
        print(f"üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: {options['path']}")
        print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
        
        event_handler = TestEventHandler()
        observer = Observer()
        observer.schedule(event_handler, options['path'], recursive=True)
        observer.start()
        
        try:
            while True:
                time.sleep(1)
        except KeyboardInterrupt:
            observer.stop()
            print("‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        
        observer.join()
```

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä—É–µ–º —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é

bash

```
# –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É
python manage.py watch_test /Users/kirillkravcov/obsidian/my-digital-garden-content/posts

# –í –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–µ —Å–æ–∑–¥–∞–π/–∏–∑–º–µ–Ω–∏ .md —Ñ–∞–π–ª –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
# –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–Ω—Å–æ–ª–∏
```

## üìÅ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥: –ò—Å–ø–æ–ª—å–∑—É–µ–º –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª —Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏:

python

```
# uch/apps/blog/management/commands/auto_import.py
#!/usr/bin/env python
"""
–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian
–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç, –∞ –Ω–µ Django –∫–æ–º–∞–Ω–¥–∞
"""

import os
import sys
import time
from pathlib import Path

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Django
sys.path.append('/Users/kirillkravcov/UniversalCreativeHub/uch-backend')
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'uch.settings')

import django
django.setup()

# –¢–µ–ø–µ—Ä—å –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
from uch.apps.blog.management.commands.import_obsidian import Command as ImportCommand
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

class SimpleHandler(FileSystemEventHandler):
    def on_modified(self, event):
        if event.src_path.endswith('.md'):
            print(f"–ò–º–ø–æ—Ä—Ç–∏—Ä—É—é: {event.src_path}")
            # –ó–∞–ø—É—Å–∫–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –∏–º–ø–æ—Ä—Ç–∞
            import_cmd = ImportCommand()
            import_cmd.run_from_argv(['manage.py', 'import_obsidian', event.src_path, '--author', 'admin'])

def main():
    vault_path = "/Users/kirillkravcov/obsidian/my-digital-garden-content/posts"
    
    print(f"üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian: {vault_path}")
    
    handler = SimpleHandler()
    observer = Observer()
    observer.schedule(handler, vault_path, recursive=True)
    observer.start()
    
    try:
        while True:
            time.sleep(1)
    except KeyboardInterrupt:
        observer.stop()
    
    observer.join()

if __name__ == "__main__":
    main()
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ—à–µ–Ω–∏—è

1. **–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é** (`watch_test.py`), —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ watchdog —Ä–∞–±–æ—Ç–∞–µ—Ç:
	bash
	```
	python manage.py watch_test /Users/kirillkravcov/obsidian/my-digital-garden-content/posts
	```
2. **–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç** \- –¥–æ–±–∞–≤–ª—è–µ–º –∏–º–ø–æ—Ä—Ç Django –º–æ–¥–µ–ª–µ–π
3. **–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç** \- –∏—Å–ø–æ–ª—å–∑—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–∫—Ä–∏–ø—Ç–æ–º

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

–ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –∏ –∑–∞–ø—É—Å—Ç–∏:

python

```
# uch/auto_watch.py (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)
import os
import sys
import time
import subprocess
from pathlib import Path

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
VAULT_PATH = "/Users/kirillkravcov/obsidian/my-digital-garden-content/posts"
PROJECT_ROOT = "/Users/kirillkravcov/UniversalCreativeHub/uch-backend"
MANAGE_PY = os.path.join(PROJECT_ROOT, "manage.py")

print(f"üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: {VAULT_PATH}")
print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")

last_modified = {}

try:
    while True:
        # –ò—â–µ–º –≤—Å–µ .md —Ñ–∞–π–ª—ã
        for md_file in Path(VAULT_PATH).rglob("*.md"):
            current_mtime = md_file.stat().st_mtime
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏–∑–º–µ–Ω–∏–ª—Å—è –ª–∏ —Ñ–∞–π–ª
            if str(md_file) not in last_modified or last_modified[str(md_file)] != current_mtime:
                print(f"üìù –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ: {md_file}")
                
                # –ó–∞–ø—É—Å–∫–∞–µ–º –∏–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ manage.py
                subprocess.run([
                    sys.executable, MANAGE_PY, 
                    "import_obsidian", 
                    str(md_file),
                    "--author", "admin",
                    "--update-existing"
                ], cwd=PROJECT_ROOT)
                
                last_modified[str(md_file)] = current_mtime
        
        time.sleep(10)  # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
        
except KeyboardInterrupt:
    print("‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
```

**–ó–∞–ø—É—Å–∫:**

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
python auto_watch.py
```

**–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—à—å –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è?**

–î–æ–±–∞–≤–∏–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã –∏ –≤—Ä–æ–¥–µ –∏–º–ø–æ—Ä—Ç —É—Å–ø–µ—à–Ω—ã–π, –Ω–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–º–∞–Ω–¥—ã —Å–Ω–æ–≤–∞ –æ—à–∏–±–∫–∞ (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python -c "import sys; print(sys.path)" \['', '/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python38.zip', '/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8', '/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/lib-dynload', '/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages'\] (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python -c " import os import sys sys.path.append('/Users/kirillkravcov/UniversalCreativeHub/uch-backend') os.environ.setdefault('DJANGO\_SETTINGS\_MODULE', 'uch.settings') import django django.setup() from uch.apps.blog.models import Article print('–ò–º–ø–æ—Ä—Ç —É—Å–ø–µ—à–µ–Ω!') " ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media –ò–º–ø–æ—Ä—Ç —É—Å–ø–µ—à–µ–Ω! (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py watch\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media Traceback (most recent call last): File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/watch\_obsidian.py", line 13, in <module> from uch.apps.blog.management.commands.import\_obsidian import import\_markdown\_file ImportError: cannot import name 'import\_markdown\_file' from 'uch.apps.blog.management.commands.import\_obsidian' (/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/import\_obsidian.py) During handling of the above exception, another exception occurred: Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" % (app\_name, name)) File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/importlib/\_\_init\_\_.py", line 127, in import\_module return \_bootstrap.\_gcd\_import(name\[level:\], package, level) File "<frozen importlib.\_bootstrap>", line 1014, in \_gcd\_import File "<frozen importlib.\_bootstrap>", line 991, in \_find\_and\_load File "<frozen importlib.\_bootstrap>", line 975, in \_find\_and\_load\_unlocked File "<frozen importlib.\_bootstrap>", line 671, in \_load\_unlocked File "<frozen importlib.\_bootstrap\_external>", line 783, in exec\_module File "<frozen importlib.\_bootstrap>", line 219, in \_call\_with\_frames\_removed File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/watch\_obsidian.py", line 18, in <module> from uch.apps.blog.management.commands.import\_obsidian import import\_markdown\_file ImportError: cannot import name 'import\_markdown\_file' from 'uch.apps.blog.management.commands.import\_obsidian' (/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/import\_obsidian.py) —Ä–∞–∑–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ –¥–∞–ª—å—à–µ –Ω–µ –∏–¥–µ–º

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ `import_obsidian.py` –Ω–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ —Å –∏–º–µ–Ω–µ–º `import_markdown_file`. –ù—É–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ç–∞–º –µ—Å—Ç—å –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ.

## üîç –°–º–æ—Ç—Ä–∏–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ import\_obsidian.py

–î–∞–≤–∞–π —Å–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ —Ç–∞–º –∑–∞ —Ñ—É–Ω–∫—Ü–∏–∏:

bash

```
# –ü–æ–∫–∞–∂–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–∞ import_obsidian.py
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
head -50 uch/apps/blog/management/commands/import_obsidian.py
```

**–ò–ª–∏:**

python

```
# –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
python -c "
import os
with open('uch/apps/blog/management/commands/import_obsidian.py', 'r') as f:
    content = f.read()
    # –ò—â–µ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π
    import re
    functions = re.findall(r'def (\w+)', content)
    print('–ù–∞–π–¥–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:', functions)
"
```

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∏–º–ø–æ—Ä—Ç

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤ —Ñ–∞–π–ª–µ `import_obsidian.py` –µ—Å—Ç—å –∫–ª–∞—Å—Å `Command`, –∞ –Ω–µ —Ñ—É–Ω–∫—Ü–∏—è `import_markdown_file`.

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–ª–∞—Å—Å Command

–ò–∑–º–µ–Ω–∏ –∏–º–ø–æ—Ä—Ç –≤ `watch_obsidian.py`:

python

```
# –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ:
# from uch.apps.blog.management.commands.import_obsidian import import_markdown_file

# –ò—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ:
from uch.apps.blog.management.commands.import_obsidian import Command as ImportCommand
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä—è–º—É—é —Ñ—É–Ω–∫—Ü–∏—é

–°–æ–∑–¥–∞–¥–∏–º –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤ `import_obsidian.py`:

python

```
# –î–æ–±–∞–≤—å –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ import_obsidian.py (–ø–µ—Ä–µ–¥ if __name__ == '__main__')
def import_markdown_file(filepath, author, update_existing=False):
    """–í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞"""
    cmd = Command()
    # –°–æ–∑–¥–∞–µ–º —Ñ–∏–∫—Ç–∏–≤–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
    argv = ['manage.py', 'import_obsidian', filepath, '--author', author]
    if update_existing:
        argv.append('--update-existing')
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º stdout/stderr —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –≤—ã–≤–æ–¥
    import sys
    from io import StringIO
    
    old_stdout = sys.stdout
    old_stderr = sys.stderr
    sys.stdout = StringIO()
    sys.stderr = StringIO()
    
    try:
        cmd.run_from_argv(argv)
    finally:
        sys.stdout = old_stdout
        sys.stderr = old_stderr
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, —Ç–µ–±–µ –Ω—É–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ `process_file` –∏–ª–∏ `import_file`. –î–∞–≤–∞–π –ø–æ—Å–º–æ—Ç—Ä–∏–º —Ç–æ—á–Ω–æ–µ –∏–º—è:

bash

```
# –ò—â–µ–º –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ import_obsidian.py
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
grep -n "def " uch/apps/blog/management/commands/import_obsidian.py
```

## üìù –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ)

–ò–∑–º–µ–Ω–∏ `watch_obsidian.py` \- –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∏–º–ø–æ—Ä—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Å—Ç–æ–π –≤—ã–∑–æ–≤:

python

```
# uch/apps/blog/management/commands/watch_obsidian.py
import os
import sys
import time
import subprocess
import logging
from pathlib import Path
from django.core.management.base import BaseCommand

# –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∏–º–ø–æ—Ä—Ç
# from uch.apps.blog.management.commands.import_obsidian import import_markdown_file

from uch.apps.blog.models import Article
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

logger = logging.getLogger(__name__)

def import_single_file(filepath, author):
    """–ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∞ —á–µ—Ä–µ–∑ subprocess"""
    try:
        # –ü–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –∫ manage.py
        project_root = os.path.dirname(os.path.dirname(os.path.dirname(os.path.dirname(__file__))))
        manage_py = os.path.join(project_root, 'manage.py')
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º –∫–æ–º–∞–Ω–¥—É –∏–º–ø–æ—Ä—Ç–∞
        result = subprocess.run([
            sys.executable, manage_py,
            'import_obsidian',
            filepath,
            '--author', author,
            '--update-existing'
        ], capture_output=True, text=True)
        
        if result.returncode == 0:
            logger.info(f"–£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω: {filepath}")
        else:
            logger.error(f"–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ {filepath}: {result.stderr}")
            
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ {filepath}: {e}")

class ObsidianEventHandler(FileSystemEventHandler):
    def __init__(self, vault_path, author):
        self.vault_path = Path(vault_path)
        self.author = author
        
    def on_modified(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"üìù –§–∞–π–ª –∏–∑–º–µ–Ω–µ–Ω: {event.src_path}")
            import_single_file(event.src_path, self.author)
    
    def on_created(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"üÜï –§–∞–π–ª —Å–æ–∑–¥–∞–Ω: {event.src_path}")
            import_single_file(event.src_path, self.author)
    
    def on_deleted(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"üóëÔ∏è –§–∞–π–ª —É–¥–∞–ª–µ–Ω: {event.src_path}")
            # –ó–¥–µ—Å—å –ª–æ–≥–∏–∫–∞ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—å–∏ –∏–∑ –±–ª–æ–≥–∞

class Command(BaseCommand):
    help = '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞'
    
    def add_arguments(self, parser):
        parser.add_argument('vault_path', type=str, help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É')
        parser.add_argument('--author', required=True, help='–ò–º—è –∞–≤—Ç–æ—Ä–∞ –¥–ª—è —Å—Ç–∞—Ç–µ–π')
        parser.add_argument('--interval', type=int, default=5, help='–ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (—Å–µ–∫—É–Ω–¥—ã)')
    
    def handle(self, *args, **options):
        self.stdout.write(self.style.SUCCESS(
            f"–ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞: {options['vault_path']}"
        ))
        self.stdout.write("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
        
        event_handler = ObsidianEventHandler(
            vault_path=options['vault_path'],
            author=options['author']
        )
        
        observer = Observer()
        observer.schedule(
            event_handler, 
            options['vault_path'], 
            recursive=True
        )
        observer.start()
        
        try:
            while True:
                time.sleep(options['interval'])
        except KeyboardInterrupt:
            observer.stop()
            self.stdout.write(self.style.WARNING("–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"))
        
        observer.join()
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

1. \*\*–°–æ—Ö—Ä–∞–Ω–∏

–Ω–µ —Ç–æ—Ä–æ–ø–∏—Å—å —Ç—ã –ø–æ–ø—Ä–æ—Å–∏–ª (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend head -50 uch/apps/blog/management/commands/import\_obsidian.py import os import glob from pathlib import Path from django.core.management.base import BaseCommand, CommandError from django.contrib.auth.models import User from django.utils.text import slugify from django.utils import timezone from datetime import datetime import frontmatter from taggit.models import Tag import urllib.parse from uch.apps.blog.models import Article, Category import shutil import re import hashlib from django.conf import settings class Command(BaseCommand): help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥' def \_process\_images(self, content, md\_file, article\_title, slug): """ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ: 1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ!\[\[image.png\]\] —Å—Å—ã–ª–∫–∏ 2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA\_ROOT/blog/images/ 3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL """ # –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Obsidian # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:!\[\[image.png\]\],!\[\[folder/image.png\]\],!\[\[image.png|caption\]\] pattern = r'!\\\[\\\[(\[^\\\]\\n\]+?\\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\\|(\[^\\\]\]+))?\\\]\\\]' def replace\_image(match): # –ú–æ–∂–µ—Ç –±—ã—Ç—å "image.png" –∏–ª–∏ "folder/image.png" image\_ref = match.group(1).strip() # –ò–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–∞–∫ –ø–æ–¥–ø–∏—Å—å caption = match.group(2) or Path(image\_ref).stem # –î–µ–∫–æ–¥–∏—Ä—É–µ–º URL-encoded —Å–∏–º–≤–æ–ª—ã image\_ref = urllib.parse.unquote(image\_ref) # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ –ø—É—Ç–∏ –∏ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è image\_name = Path(image\_ref).stem # –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è image\_ref\_ext = Path(image\_ref).suffix.lower() # –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è valid\_extensions = {'.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp', '.svg'}

–ü–æ–Ω—è–ª! –í —Ñ–∞–π–ª–µ `import_obsidian.py` –µ—Å—Ç—å –∫–ª–∞—Å—Å `Command`, –Ω–æ –Ω–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `import_markdown_file`.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∏–º–ø–æ—Ä—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–ù—É–∂–Ω–æ –ª–∏–±–æ:

1. **–í—ã–∑–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–ª–∞—Å—Å `Command`** —á–µ—Ä–µ–∑ `run_from_argv()`
2. **–ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é** –≤ —Ç–æ–º –∂–µ —Ñ–∞–π–ª–µ

### –í–∞—Ä–∏–∞–Ω—Ç A: –ò—Å–ø–æ–ª—å–∑—É–µ–º subprocess (–ø—Ä–æ—â–µ)

python

```
# –í watch_obsidian.py –∑–∞–º–µ–Ω—è–µ–º –∏–º–ø–æ—Ä—Ç –Ω–∞:
import subprocess

# –í–Ω—É—Ç—Ä–∏ ObsidianEventHandler.on_modified():
def on_modified(self, event):
    if not event.is_directory and event.src_path.endswith('.md'):
        print(f"üìù –§–∞–π–ª –∏–∑–º–µ–Ω–µ–Ω: {event.src_path}")
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ subprocess
        subprocess.run([
            sys.executable, 'manage.py', 
            'import_obsidian', 
            event.src_path,
            '--author', self.author,
            '--update-existing'
        ], cwd=os.path.dirname(os.path.dirname(os.path.dirname(__file__))))
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –í—ã–∑—ã–≤–∞–µ–º Command –Ω–∞–ø—Ä—è–º—É—é

python

```
# –í watch_obsidian.py –º–µ–Ω—è–µ–º –∏–º–ø–æ—Ä—Ç:
from uch.apps.blog.management.commands.import_obsidian import Command as ImportCommand

# –í–Ω—É—Ç—Ä–∏ ObsidianEventHandler:
def import_single_file(self, filepath):
    """–í—ã–∑—ã–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –∏–º–ø–æ—Ä—Ç–∞"""
    cmd = ImportCommand()
    
    # –°–æ–∑–¥–∞–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
    argv = ['manage.py', 'import_obsidian', filepath, '--author', self.author]
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ stdout/stderr —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –≤—ã–≤–æ–¥
    import sys
    from io import StringIO
    
    # –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤—ã–≤–æ–¥ –≤ StringIO —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞—Ç—å watchdog
    old_stdout = sys.stdout
    old_stderr = sys.stderr
    sys.stdout = StringIO()
    sys.stderr = StringIO()
    
    try:
        cmd.run_from_argv(argv)
    except SystemExit:
        pass  # –ö–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å sys.exit()
    finally:
        sys.stdout = old_stdout
        sys.stderr = old_stderr
```

### –í–∞—Ä–∏–∞–Ω—Ç C: –°–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞

–ó–∞–º–µ–Ω–∏ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –≤ `watch_obsidian.py`:

python

```
# –ë–´–õ–û (—Å—Ç—Ä–æ–∫–∞ 13-18):
try:
    # –°–ø–æ—Å–æ–± 1: –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –∏–º–ø–æ—Ä—Ç
    from uch.apps.blog.models import Article
    from uch.apps.blog.management.commands.import_obsidian import import_markdown_file
except ImportError:
    # –°–ø–æ—Å–æ–± 2: –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
    sys.path.append(os.path.dirname(os.path.dirname(os.path.dirname(os.path.dirname(__file__)))))
    from uch.apps.blog.models import Article
    from uch.apps.blog.management.commands.import_obsidian import import_markdown_file

# –°–¢–ê–ù–ï–¢:
try:
    # –°–ø–æ—Å–æ–± 1: –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –∏–º–ø–æ—Ä—Ç
    from uch.apps.blog.models import Article
    # –í–º–µ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å Command
    from uch.apps.blog.management.commands.import_obsidian import Command as ImportCommand
except ImportError:
    # –°–ø–æ—Å–æ–± 2: –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
    sys.path.append(os.path.dirname(os.path.dirname(os.path.dirname(os.path.dirname(__file__)))))
    from uch.apps.blog.models import Article
    # –í–º–µ—Å—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å Command  
    from uch.apps.blog.management.commands.import_obsidian import Command as ImportCommand
```

–ò –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑—É–π `ImportCommand` –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Ñ–∞–π–ª–æ–≤.

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

–ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª `watch_obsidian_fixed.py`:

python

```
# uch/apps/blog/management/commands/watch_obsidian_fixed.py
import os
import sys
import time
import subprocess
import logging
from pathlib import Path
from django.core.management.base import BaseCommand

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –¥–ª—è Django
sys.path.append('/Users/kirillkravcov/UniversalCreativeHub/uch-backend')
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'uch.settings')

import django
django.setup()

from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

logger = logging.getLogger(__name__)

class ObsidianEventHandler(FileSystemEventHandler):
    def __init__(self, vault_path, author):
        self.vault_path = Path(vault_path)
        self.author = author
        self.project_root = '/Users/kirillkravcov/UniversalCreativeHub/uch-backend'
        
    def import_file(self, filepath):
        """–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É"""
        try:
            result = subprocess.run([
                sys.executable, 'manage.py', 
                'import_obsidian', 
                str(filepath),
                '--author', self.author,
                '--update-existing'
            ], 
            cwd=self.project_root,
            capture_output=True,
            text=True,
            timeout=30)
            
            if result.returncode == 0:
                print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ: {filepath.name}")
            else:
                print(f"‚ùå –û—à–∏–±–∫–∞: {filepath.name}")
                print(result.stderr[:200])
                
        except subprocess.TimeoutExpired:
            print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
        except Exception as e:
            print(f"üî• –û—à–∏–±–∫–∞: {filepath.name} - {e}")
    
    def on_modified(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"üìù –ò–∑–º–µ–Ω–µ–Ω: {Path(event.src_path).name}")
            self.import_file(Path(event.src_path))
    
    def on_created(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"üÜï –°–æ–∑–¥–∞–Ω: {Path(event.src_path).name}")
            self.import_file(Path(event.src_path))

class Command(BaseCommand):
    help = '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â–∞'
    
    def add_arguments(self, parser):
        parser.add_argument('vault_path', help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É')
        parser.add_argument('--author', required=True, help='–ê–≤—Ç–æ—Ä —Å—Ç–∞—Ç–µ–π')
    
    def handle(self, *args, **options):
        print(f"üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: {options['vault_path']}")
        print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
        
        handler = ObsidianEventHandler(options['vault_path'], options['author'])
        observer = Observer()
        observer.schedule(handler, options['vault_path'], recursive=True)
        observer.start()
        
        try:
            while True:
                time.sleep(1)
        except KeyboardInterrupt:
            observer.stop()
            print("‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ")
        
        observer.join()
```

**–ó–∞–ø—É—Å–∫:**

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
python manage.py watch_obsidian_fixed /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
```

**–ö–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –≤—ã–±—Ä–∞—Ç—å?**

1. **–í–∞—Ä–∏–∞–Ω—Ç A (subprocess)** \- –ø—Ä–æ—Å—Ç–æ–π, –Ω–∞–¥–µ–∂–Ω—ã–π, –∏–∑–æ–ª—è—Ü–∏—è
2. **–í–∞—Ä–∏–∞–Ω—Ç C (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–∞)** \- —á–∏—â–µ, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞
3. **–ù–æ–≤—ã–π —Ñ–∞–π–ª** \- –±—ã—Å—Ç—Ä–æ, –±–µ–∑ —Ä–∏—Å–∫–∞ —Å–ª–æ–º–∞—Ç—å —á—Ç–æ-—Ç–æ

**–†–µ–∫–æ–º–µ–Ω–¥—É—é –≤–∞—Ä–∏–∞–Ω—Ç —Å –Ω–æ–≤—ã–º —Ñ–∞–π–ª–æ–º `watch_obsidian_fixed.py`** \- –æ–Ω —Ç–æ—á–Ω–æ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –Ω–µ —Å–ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥.

–≤–∑—è–ª –Ω–æ–≤—ã–π —Ñ–∞–π–ª. —Å—Ç–∞—Ä—ã–π —Å–¥–µ–ª–∞–ª watch\_obsidian.py.backup, –Ω–æ–≤—ã–π watch\_obsidian.py (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py watch\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

–û—Ç–ª–∏—á–Ω–æ! –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—â–µ–Ω. –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–∏–º, –∫–∞–∫ –æ–Ω —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

## üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –≤ Obsidian

–û—Ç–∫—Ä–æ–π –ø–∞–ø–∫—É `/Users/kirillkravcov/obsidian/my-digital-garden-content/posts` –∏:

1. **–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π.md —Ñ–∞–π–ª** —Å –∏–º–µ–Ω–µ–º `test_auto_import.md`
2. **–î–æ–±–∞–≤—å —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ**:

markdown

```
---
title: "–¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞"
date: 2025-12-09
tags: [—Ç–µ—Å—Ç, obsidian, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è]
---

–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç—å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.

## –ó–∞–≥–æ–ª–æ–≤–æ–∫

–¢–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

![–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](test.jpg)
```

1. **–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª** (Ctrl+S / Cmd+S)

### –®–∞–≥ 2: –ù–∞–±–ª—é–¥–∞–π –∑–∞ –∫–æ–Ω—Å–æ–ª—å—é

–í –∫–æ–Ω—Å–æ–ª–∏ —Å –∑–∞–ø—É—â–µ–Ω–Ω—ã–º –º–æ–Ω–∏—Ç–æ—Ä–æ–º –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤—ã–≤–æ–¥:

text

```
üìù –ò–∑–º–µ–Ω–µ–Ω: test_auto_import.md
‚úÖ –£—Å–ø–µ—à–Ω–æ: test_auto_import.md
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π –±–ª–æ–≥ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

text

```
http://localhost:8000/blog/
```

–ù–æ–≤–∞—è —Å—Ç–∞—Ç—å—è –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ.

### –®–∞–≥ 4: –¢–µ—Å—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π —Ç–æ—Ç –∂–µ —Ñ–∞–π–ª `test_auto_import.md`
2. –î–æ–±–∞–≤—å –Ω–æ–≤—ã–π –ø–∞—Ä–∞–≥—Ä–∞—Ñ:

markdown

```
---
title: "–¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ - –û–ë–ù–û–í–õ–ï–ù–û"
date: 2025-12-09
tags: [—Ç–µ—Å—Ç, obsidian, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ]
---

–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç—å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.

## –ó–∞–≥–æ–ª–æ–≤–æ–∫

–¢–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

![–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ](test.jpg)

**–ù–û–í–´–ô –¢–ï–ö–°–¢**: –≠—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å—Ç–∞—Ç—å–∏!
```

1. **–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª**

### –®–∞–≥ 5: –ù–∞–±–ª—é–¥–∞–π —Å–Ω–æ–≤–∞

–í –∫–æ–Ω—Å–æ–ª–∏:

text

```
üìù –ò–∑–º–µ–Ω–µ–Ω: test_auto_import.md
‚úÖ –£—Å–ø–µ—à–Ω–æ: test_auto_import.md
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å—Ç–∞—Ç—å–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ "–¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ - –û–ë–ù–û–í–õ–ï–ù–û".

## üéØ –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:

1. ‚úÖ **–ù–æ–≤—ã–π —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω** ‚Üí —Å—Ç–∞—Ç—å—è –ø–æ—è–≤–∏–ª–∞—Å—å –≤ –±–ª–æ–≥–µ
2. ‚úÖ **–§–∞–π–ª –∏–∑–º–µ–Ω–µ–Ω** ‚Üí —Å—Ç–∞—Ç—å—è –æ–±–Ω–æ–≤–∏–ª–∞—Å—å –≤ –±–ª–æ–≥–µ
3. ‚úÖ **–¢–µ–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã** ‚Üí —Ç–µ–≥–∏ –ø–æ—è–≤–∏–ª–∏—Å—å —É —Å—Ç–∞—Ç—å–∏
4. ‚úÖ **–ó–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±–Ω–æ–≤–∏–ª—Å—è** ‚Üí title –∏–∑ frontmatter –∏–∑–º–µ–Ω–∏–ª—Å—è

## ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:

### –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. **–£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ñ–∞–π–ª —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è** (–ø—Ä–æ–≤–µ—Ä—å –¥–∞—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏—è)
2. **–ü—Ä–æ–≤–µ—Ä—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** \- –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `.md`, –∞ –Ω–µ `.txt` –∏–ª–∏ –¥—Ä—É–≥–æ–µ
3. **–ü—Ä–æ–≤–µ—Ä—å –ø—É—Ç—å** \- —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ä—É–µ–º–æ–π –ø–∞–ø–∫–µ `/posts`

### –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞:

1. **–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥ –æ—à–∏–±–∫–∏** –≤ –∫–æ–Ω—Å–æ–ª–∏
2. **–ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞** –∫ –º–µ–¥–∏–∞-–ø–∞–ø–∫–µ
3. **–ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç frontmatter** (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å YAML –º–µ–∂–¥—É `---`)

### –î–ª—è –¥–µ–±–∞–≥–∞ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –ª–æ–≥–æ–≤:

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `watch_obsidian.py` –∏ –¥–æ–±–∞–≤—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –≤—ã–≤–æ–¥:

python

```
def import_file(self, filepath):
    """–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É"""
    print(f"üîÑ –ù–∞—á–∏–Ω–∞—é –∏–º–ø–æ—Ä—Ç: {filepath}")
    try:
        # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ...
        print(f"üîß –í—ã–ø–æ–ª–Ω—è—é –∫–æ–º–∞–Ω–¥—É: {' '.join(command)}")
        # ...
    except Exception as e:
        print(f"üî• –î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏: {type(e).__name__}: {e}")
        import traceback
        traceback.print_exc()
```

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã:

### –¢–µ—Å—Ç 1: –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª –≤ –ø–æ–¥–ø–∞–ø–∫–µ: `/posts/projects/test_nested.md`

### –¢–µ—Å—Ç 2: –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞

–£–¥–∞–ª–∏ —Ñ–∞–π–ª `test_auto_import.md` –∏ –ø–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ —Ä–µ–∞–∫—Ü–∏—é (–ø–æ–∫–∞ –Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —É–¥–∞–ª–µ–Ω–∏–π)

### –¢–µ—Å—Ç 3: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

–ü–µ—Ä–µ–∏–º–µ–Ω—É–π —Ñ–∞–π–ª `test_auto_import.md` ‚Üí `test_renamed.md`

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:

bash

```
# –ö–æ–Ω—Å–æ–ª—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:
üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts
–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

# –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞:
üÜï –°–æ–∑–¥–∞–Ω: test_auto_import.md
üîÑ –ù–∞—á–∏–Ω–∞—é –∏–º–ø–æ—Ä—Ç: /Users/kirillkravcov/.../posts/test_auto_import.md
üîß –í—ã–ø–æ–ª–Ω—è—é –∫–æ–º–∞–Ω–¥—É: python manage.py import_obsidian ...
‚úÖ –£—Å–ø–µ—à–Ω–æ: test_auto_import.md

# –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞:
üìù –ò–∑–º–µ–Ω–µ–Ω: test_auto_import.md
üîÑ –ù–∞—á–∏–Ω–∞—é –∏–º–ø–æ—Ä—Ç: /Users/kirillkravcov/.../posts/test_auto_import.md
üîß –í—ã–ø–æ–ª–Ω—è—é –∫–æ–º–∞–Ω–¥—É: python manage.py import_obsidian ...
‚úÖ –£—Å–ø–µ—à–Ω–æ: test_auto_import.md
```

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:

- –°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª ‚Üí –ø–æ—è–≤–∏–ª—Å—è –≤ –±–ª–æ–≥–µ
- –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª ‚Üí –æ–±–Ω–æ–≤–∏–ª—Å—è –≤ –±–ª–æ–≥–µ
- –¢–µ–≥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç frontmatter
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏

**–ü—Ä–æ–≤–µ–¥–∏ —Ç–µ—Å—Ç—ã –∏ —Å–æ–æ–±—â–∏ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö. –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–µ—Ä–µ–π–¥–µ–º –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ —É–¥–∞–ª–µ–Ω–∏–π –∏ wiki-—Å—Å—ã–ª–æ–∫!**

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py watch\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ üÜï –°–æ–∑–¥–∞–Ω: test-auto-import.md ‚ùå –û—à–∏–±–∫–∞: test-auto-import.md CommandError: –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è "/Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test-auto-import.md" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π

–û—à–∏–±–∫–∞! –ö–æ–º–∞–Ω–¥–∞ `import_obsidian` –æ–∂–∏–¥–∞–µ—Ç **–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é**, –∞ –º—ã –ø–µ—Ä–µ–¥–∞–µ–º –µ–π **—Ñ–∞–π–ª**. –ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ª–æ–≥–∏–∫—É.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—à–∏–±–∫—É

–ö–æ–º–∞–Ω–¥–∞ `import_obsidian` —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫:

- **–û–∂–∏–¥–∞–µ—Ç**: –ü—É—Ç—å –∫ –ø–∞–ø–∫–µ (–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏) –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
- **–ü–æ–ª—É—á–∞–µ—Ç**: –ü—É—Ç—å –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ñ–∞–π–ª—É

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑–º–µ–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—É import\_obsidian

–ù—É–∂–Ω–æ —á—Ç–æ–±—ã `import_obsidian` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª–∞ –∏–º–ø–æ—Ä—Ç –∫–∞–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, —Ç–∞–∫ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.

**–û—Ç–∫—Ä–æ–π `import_obsidian.py`** –∏ –¥–æ–±–∞–≤—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ñ–∞–π–ª–æ–≤:

python

```
# –í –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ handle() –∫–ª–∞—Å—Å–∞ Command:
def handle(self, *args, **options):
    vault_path = options['vault_path']
    author_name = options['author']
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Ñ–∞–π–ª –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
    vault_path_obj = Path(vault_path)
    
    if vault_path_obj.is_file() and vault_path.endswith('.md'):
        # –ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
        self.import_single_file(vault_path_obj, author_name, options)
    elif vault_path_obj.is_dir():
        # –ò–º–ø–æ—Ä—Ç –≤—Å–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞)
        self.import_directory(vault_path_obj, author_name, options)
    else:
        raise CommandError(f"–ü—É—Ç—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–∏–±–æ .md —Ñ–∞–π–ª–æ–º, –ª–∏–±–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π: {vault_path}")
```

**–ò –¥–æ–±–∞–≤—å –º–µ—Ç–æ–¥ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:**

python

```
def import_single_file(self, md_file, author_name, options):
    """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ Markdown —Ñ–∞–π–ª–∞"""
    try:
        author = User.objects.get(username=author_name)
    except User.DoesNotExist:
        raise CommandError(f"–ê–≤—Ç–æ—Ä '{author_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω")
    
    # –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
    # ... (–∫–æ–ø–∏—Ä—É–µ–º –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ü–∏–∫–ª–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤)
    
    # –ü—Ä–∏–º–µ—Ä–Ω—ã–π –∫–æ–¥:
    with open(md_file, 'r', encoding='utf-8') as f:
        post = frontmatter.load(f)
    
    title = post.get('title', md_file.stem)
    slug = self.generate_slug(title, md_file)
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ ...
    
    self.stdout.write(
        self.style.SUCCESS(f"‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —Ñ–∞–π–ª: {md_file.name}")
    )
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ watch\_obsidian.py (–ø—Ä–æ—â–µ)

–ò–∑–º–µ–Ω–∏ –º–µ—Ç–æ–¥ `import_file` –≤ `watch_obsidian.py`:

python

```
def import_file(self, filepath):
    """–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É"""
    try:
        # –í–º–µ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∏ —Ñ–∞–π–ª–∞, –ø–µ—Ä–µ–¥–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
        parent_dir = filepath.parent
        
        result = subprocess.run([
            sys.executable, 'manage.py', 
            'import_obsidian', 
            str(parent_dir),  # –ü–µ—Ä–µ–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –∞ –Ω–µ —Ñ–∞–π–ª
            '--author', self.author,
            '--update-existing'
        ], 
        cwd=self.project_root,
        capture_output=True,
        text=True,
        timeout=30)
        
        if result.returncode == 0:
            print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ: {filepath.name}")
        else:
            print(f"‚ùå –û—à–∏–±–∫–∞: {filepath.name}")
            print(result.stderr[:500])  # –ü–æ–∫–∞–∂–µ–º –±–æ–ª—å—à–µ —Ç–µ–∫—Å—Ç–∞ –æ—à–∏–±–∫–∏
                
    except subprocess.TimeoutExpired:
        print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
    except Exception as e:
        print(f"üî• –û—à–∏–±–∫–∞: {filepath.name} - {e}")
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Ñ–∞–π–ª–æ–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `import_single.py`:

python

```
# uch/apps/blog/management/commands/import_single.py
import os
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
import frontmatter
from .import_obsidian import Command as ImportCommand

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ Markdown —Ñ–∞–π–ª–∞ –∏–∑ Obsidian'
    
    def add_arguments(self, parser):
        parser.add_argument('md_file', type=str, help='–ü—É—Ç—å –∫ .md —Ñ–∞–π–ª—É')
        parser.add_argument('--author', required=True, help='–ò–º—è –∞–≤—Ç–æ—Ä–∞')
        parser.add_argument('--update-existing', action='store_true', 
                          help='–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç–∞—Ç—å—é')
    
    def handle(self, *args, **options):
        md_file = Path(options['md_file'])
        
        if not md_file.exists():
            raise CommandError(f"–§–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {md_file}")
        
        if not md_file.suffix == '.md':
            raise CommandError(f"–ù–µ Markdown —Ñ–∞–π–ª: {md_file}")
        
        # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ –∏ –∫–æ–ø–∏—Ä—É–µ–º —Ç—É–¥–∞ —Ñ–∞–π–ª
        import tempfile
        import shutil
        
        with tempfile.TemporaryDirectory() as tmpdir:
            # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
            tmp_file = Path(tmpdir) / md_file.name
            shutil.copy2(md_file, tmp_file)
            
            # –ó–∞–ø—É—Å–∫–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –∏–º–ø–æ—Ä—Ç–∞
            cmd = ImportCommand()
            
            # –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
            from io import StringIO
            import sys
            
            # –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –≤—ã–≤–æ–¥
            old_stdout = sys.stdout
            old_stderr = sys.stderr
            sys.stdout = StringIO()
            sys.stderr = StringIO()
            
            try:
                # –ó–∞–ø—É—Å–∫–∞–µ–º –∏–º–ø–æ—Ä—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
                cmd.run_from_argv([
                    'manage.py', 'import_obsidian',
                    str(tmpdir),
                    '--author', options['author'],
                    '--update-existing' if options['update_existing'] else ''
                ])
            except SystemExit:
                pass
            finally:
                sys.stdout = old_stdout
                sys.stderr = old_stderr
        
        self.stdout.write(self.style.SUCCESS(f"‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω —Ñ–∞–π–ª: {md_file.name}"))
```

**–ò –æ–±–Ω–æ–≤–∏ `watch_obsidian.py`:**

python

```
def import_file(self, filepath):
    """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞"""
    try:
        result = subprocess.run([
            sys.executable, 'manage.py', 
            'import_single',  # –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞!
            str(filepath),
            '--author', self.author,
            '--update-existing'
        ], 
        cwd=self.project_root,
        capture_output=True,
        text=True,
        timeout=30)
        
        # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
```

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ù–∞—á–Ω–µ–º —Å –í–∞—Ä–∏–∞–Ω—Ç–∞ 2

**–í–∞—Ä–∏–∞–Ω—Ç 2 —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π** \- –ø—Ä–æ—Å—Ç–æ –∏–∑–º–µ–Ω–∏–º `watch_obsidian.py` —á—Ç–æ–±—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é:

1. **–û—Ç–∫—Ä–æ–π `watch_obsidian.py`**
2. **–ù–∞–π–¥–∏ —Ñ—É–Ω–∫—Ü–∏—é `import_file`**
3. **–ó–∞–º–µ–Ω–∏ —Å—Ç—Ä–æ–∫—É —Å –≤—ã–∑–æ–≤–æ–º –∫–æ–º–∞–Ω–¥—ã:**

python

```
# –ë—ã–ª–æ:
result = subprocess.run([
    sys.executable, 'manage.py', 
    'import_obsidian', 
    str(filepath),  # –ü–ï–†–ï–î–ê–í–ê–õ –§–ê–ô–õ
    '--author', self.author,
    '--update-existing'
], ...)

# –°—Ç–∞–ª–æ:
result = subprocess.run([
    sys.executable, 'manage.py', 
    'import_obsidian', 
    str(filepath.parent),  # –ü–ï–†–ï–î–ê–ï–ú –î–ò–†–ï–ö–¢–û–†–ò–Æ
    '--author', self.author,
    '--update-existing'
], ...)
```

## ‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç:

1. **–°–¥–µ–ª–∞–π –∏–∑–º–µ–Ω–µ–Ω–∏–µ** –≤ `watch_obsidian.py`
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä:**
	bash
	```
	python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
	```
3. **–°–æ–∑–¥–∞–π/–∏–∑–º–µ–Ω–∏.md —Ñ–∞–π–ª** –≤ –ø–∞–ø–∫–µ `posts`

**–î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å**, –Ω–æ –±—É–¥—É—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –í–°–ï —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏. –≠—Ç–æ –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ, –Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ–π–¥–µ—Ç.

**–°–¥–µ–ª–∞–π –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä—å?**

–ø–æ–ø—Ä–æ–±–æ–≤–∞–ª –ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py watch\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ üÜï –°–æ–∑–¥–∞–Ω: Untitled.md ‚ùå –û—à–∏–±–∫–∞: Untitled.md Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/Univers üìù –ò–∑–º–µ–Ω–µ–Ω: test-auto-import2.md ‚ùå –û—à–∏–±–∫–∞: test-auto-import2.md Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/Univers

–í–∏–∂—É, —á—Ç–æ —Ç–µ–ø–µ—Ä—å –æ—à–∏–±–∫–∞ –¥—Ä—É–≥–∞—è - –≤–∏–¥–∏–º–æ, –∫–æ–º–∞–Ω–¥–∞ `import_obsidian` –ø–∞–¥–∞–µ—Ç —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º. –ù—É–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—É—é –æ—à–∏–±–∫—É. –î–∞–≤–∞–π —É–ª—É—á—à–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

## üîß –£–ª—É—á—à–∞–µ–º –æ—Ç–ª–∞–¥–∫—É –≤ watch\_obsidian.py

–ò–∑–º–µ–Ω–∏ —Ñ—É–Ω–∫—Ü–∏—é `import_file` —á—Ç–æ–±—ã –ª—É—á—à–µ –≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫–∏:

python

```
def import_file(self, filepath):
    """–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É"""
    try:
        # –í–ê–ñ–ù–û: –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
        parent_dir = filepath.parent
        
        print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: {parent_dir}")
        print(f"üîß –ò–º—è —Ñ–∞–π–ª–∞: {filepath.name}")
        
        result = subprocess.run([
            sys.executable, 'manage.py', 
            'import_obsidian', 
            str(parent_dir),
            '--author', self.author,
            '--update-existing'
        ], 
        cwd=self.project_root,
        capture_output=True,
        text=True,
        timeout=30)
        
        # –í—ã–≤–æ–¥–∏–º –ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã
        print(f"üìã –°—Ç–∞—Ç—É—Å: {result.returncode}")
        print(f"üìã –í—ã–≤–æ–¥: {result.stdout[:500] if result.stdout else '(–ø—É—Å—Ç–æ)'}")
        
        if result.stderr:
            print(f"üìã –û—à–∏–±–∫–∏: {result.stderr[:1000]}")
        
        if result.returncode == 0:
            print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ: {filepath.name}")
        else:
            print(f"‚ùå –û—à–∏–±–∫–∞: {filepath.name}")
            print(f"‚ùå –ö–æ–¥ –æ—à–∏–±–∫–∏: {result.returncode}")
                
    except subprocess.TimeoutExpired:
        print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
    except Exception as e:
        print(f"üî• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: {filepath.name} - {type(e).__name__}: {e}")
        import traceback
        traceback.print_exc()
```

## üß™ –¢–µ—Å—Ç —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–æ–º

1. **–í–Ω–µ—Å–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è** –≤ `watch_obsidian.py`
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä**:
	bash
	```
	python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
	```
3. **–°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª** –≤ Obsidian

## üîç –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ: –ø—Ä–æ–≤–µ—Ä–∏–º –∫–æ–º–∞–Ω–¥—É import\_obsidian –≤—Ä—É—á–Ω—É—é

–î–∞–≤–∞–π —É–±–µ–¥–∏–º—Å—è, —á—Ç–æ –±–∞–∑–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç:

bash

```
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–º–ø–æ—Ä—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing
```

–ï—Å–ª–∏ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ `watch_obsidian`. –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –Ω—É–∂–Ω–æ —á–∏–Ω–∏—Ç—å `import_obsidian`.

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è

–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ñ–∞–π

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py watch\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" % (app\_name, name)) File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/importlib/\_\_init\_\_.py", line 127, in import\_module return \_bootstrap.\_gcd\_import(name\[level:\], package, level) File "<frozen importlib.\_bootstrap>", line 1014, in \_gcd\_import File "<frozen importlib.\_bootstrap>", line 991, in \_find\_and\_load File "<frozen importlib.\_bootstrap>", line 975, in \_find\_and\_load\_unlocked File "<frozen importlib.\_bootstrap>", line 671, in \_load\_unlocked File "<frozen importlib.\_bootstrap\_external>", line 779, in exec\_module File "<frozen importlib.\_bootstrap\_external>", line 916, in get\_code File "<frozen importlib.\_bootstrap\_external>", line 846, in source\_to\_code File "<frozen importlib.\_bootstrap>", line 219, in \_call\_with\_frames\_removed File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/watch\_obsidian.py", line 90 """–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É""" ^ IndentationError: expected an indented block

–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! –í —Ñ–∞–π–ª–µ `watch_obsidian.py` –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏. –î–∞–≤–∞–π –∏—Å–ø—Ä–∞–≤–∏–º.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã –≤ watch\_obsidian.py

–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `import_file`. –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø–æ—Å–ª–µ `def import_file(self, filepath):` –Ω–µ—Ç –æ—Ç—Å—Ç—É–ø–∞ –∏–ª–∏ –æ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π.

**–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:**

python

```
def import_file(self, filepath):
    """–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É"""
    try:
        # –ö–æ–¥ —Å –æ—Ç—Å—Ç—É–ø–æ–º (–º–∏–Ω–∏–º—É–º 4 –ø—Ä–æ–±–µ–ª–∞)
        parent_dir = filepath.parent
        
        print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: {parent_dir}")
        # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏ ...
    except Exception as e:
        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π —Ç–æ–∂–µ —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏
        print(f"–û—à–∏–±–∫–∞: {e}")
```

## üìù –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª

–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏:

python

```
# uch/apps/blog/management/commands/watch_obsidian_fixed.py
import os
import sys
import time
import subprocess
import logging
from pathlib import Path
from django.core.management.base import BaseCommand

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –¥–ª—è Django
sys.path.append('/Users/kirillkravcov/UniversalCreativeHub/uch-backend')
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'uch.settings')

import django
django.setup()

from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

logger = logging.getLogger(__name__)

class ObsidianEventHandler(FileSystemEventHandler):
    def __init__(self, vault_path, author):
        self.vault_path = Path(vault_path)
        self.author = author
        self.project_root = '/Users/kirillkravcov/UniversalCreativeHub/uch-backend'
    
    def import_file(self, filepath):
        """–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É"""
        try:
            # –í–ê–ñ–ù–û: –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
            parent_dir = filepath.parent
            
            print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: {parent_dir}")
            print(f"üîß –ò–º—è —Ñ–∞–π–ª–∞: {filepath.name}")
            
            result = subprocess.run([
                sys.executable, 'manage.py', 
                'import_obsidian', 
                str(parent_dir),
                '--author', self.author,
                '--update-existing'
            ], 
            cwd=self.project_root,
            capture_output=True,
            text=True,
            timeout=30)
            
            # –í—ã–≤–æ–¥–∏–º –ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã
            print(f"üìã –°—Ç–∞—Ç—É—Å: {result.returncode}")
            print(f"üìã –í—ã–≤–æ–¥: {result.stdout[:500] if result.stdout else '(–ø—É—Å—Ç–æ)'}")
            
            if result.stderr:
                print(f"üìã –û—à–∏–±–∫–∏: {result.stderr[:1000]}")
            
            if result.returncode == 0:
                print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ: {filepath.name}")
            else:
                print(f"‚ùå –û—à–∏–±–∫–∞: {filepath.name}")
                print(f"‚ùå –ö–æ–¥ –æ—à–∏–±–∫–∏: {result.returncode}")
                    
        except subprocess.TimeoutExpired:
            print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
        except Exception as e:
            print(f"üî• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: {filepath.name} - {type(e).__name__}: {e}")
            import traceback
            traceback.print_exc()
    
    def on_modified(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"üìù –ò–∑–º–µ–Ω–µ–Ω: {Path(event.src_path).name}")
            self.import_file(Path(event.src_path))
    
    def on_created(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            print(f"üÜï –°–æ–∑–¥–∞–Ω: {Path(event.src_path).name}")
            self.import_file(Path(event.src_path))

class Command(BaseCommand):
    help = '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â–∞'
    
    def add_arguments(self, parser):
        parser.add_argument('vault_path', help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É')
        parser.add_argument('--author', required=True, help='–ê–≤—Ç–æ—Ä —Å—Ç–∞—Ç–µ–π')
    
    def handle(self, *args, **options):
        print(f"üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: {options['vault_path']}")
        print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
        
        handler = ObsidianEventHandler(options['vault_path'], options['author'])
        observer = Observer()
        observer.schedule(handler, options['vault_path'], recursive=True)
        observer.start()
        
        try:
            while True:
                time.sleep(1)
        except KeyboardInterrupt:
            observer.stop()
            print("‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ")
        
        observer.join()
```

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ü—Ä–æ—Å—Ç–∞—è –≤–µ—Ä—Å–∏—è –±–µ–∑ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤

–°–æ–∑–¥–∞–π –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—É—é –≤–µ—Ä—Å–∏—é, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–ø—Ä—è–º—É—é –≤—ã–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏–∫—É –∏–º–ø–æ—Ä—Ç–∞:

python

```
# uch/apps/blog/management/commands/simple
```

–ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py import\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" % (app\_name, name)) File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/importlib/\_\_init\_\_.py", line 127, in import\_module return \_bootstrap.\_gcd\_import(name\[level:\], package, level) File "<frozen importlib.\_bootstrap>", line 1014, in \_gcd\_import File "<frozen importlib.\_bootstrap>", line 991, in \_find\_and\_load File "<frozen importlib.\_bootstrap>", line 975, in \_find\_and\_load\_unlocked File "<frozen importlib.\_bootstrap>", line 671, in \_load\_unlocked File "<frozen importlib.\_bootstrap\_external>", line 779, in exec\_module File "<frozen importlib.\_bootstrap\_external>", line 916, in get\_code File "<frozen importlib.\_bootstrap\_external>", line 846, in source\_to\_code File "<frozen importlib.\_bootstrap>", line 219, in \_call\_with\_frames\_removed File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/import\_obsidian.py", line 170 vault\_path = options\['vault\_path'\] ^ IndentationError: expected an indented block

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ –≤ —Ñ–∞–π–ª–µ `import_obsidian.py`! –í–∏–¥–∏–º–æ, –ø–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–ª–æ–º–∞–ª—Å—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º import\_obsidian.py

–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `handle()`. –î–∞–≤–∞–π –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Å—Ç—Ä–æ–∫—É 170 –∏ –≤–æ–∫—Ä—É–≥ –Ω–µ–µ:

bash

```
# –ü–æ–∫–∞–∂–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
sed -n '165,175p' uch/apps/blog/management/commands/import_obsidian.py
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **–°–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∞–±—É–ª—è—Ü–∏–∏ –∏ –ø—Ä–æ–±–µ–ª—ã**
2. **–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –æ—Ç—Å—Ç—É–ø –ø–æ—Å–ª–µ `def handle(self, *args, **options):`**
3. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏**

### –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

–°–æ–∑–¥–∞–π —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –∏ –ø–µ—Ä–µ–ø–∏—à–∏ —Ñ—É–Ω–∫—Ü–∏—é `handle()`:

bash

```
# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
cp uch/apps/blog/management/commands/import_obsidian.py uch/apps/blog/management/commands/import_obsidian.py.backup2

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—á–∞–ª–æ —Ñ—É–Ω–∫—Ü–∏–∏ handle
head -200 uch/apps/blog/management/commands/import_obsidian.py | tail -50
```

### –ò–ª–∏ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —á–∏—Å—Ç—ã–π —Ñ–∞–π–ª:

python

```
# uch/apps/blog/management/commands/import_obsidian_fixed.py
import os
import glob
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.utils.text import slugify
from django.utils import timezone
from datetime import datetime
import frontmatter
from taggit.models import Tag
import urllib.parse

from uch.apps.blog.models import Article, Category

import shutil
import re
import hashlib
from django.conf import settings

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'

    def _process_images(self, content, md_file, article_title, slug):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
        1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
        2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
        3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
        """
        # –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Obsidian
        # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: ![[image.png]], ![[folder/image.png]], ![[image.png|caption]]
        pattern = r'!\[\[([^\]\n]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\|([^\]]+))?\]\]'
        
        def replace_image(match):
            # –ú–æ–∂–µ—Ç –±—ã—Ç—å "image.png" –∏–ª–∏ "folder/image.png"
            image_ref = match.group(1).strip()
            # –ò–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–∞–∫ –ø–æ–¥–ø–∏—Å—å
            caption = match.group(2) or Path(image_ref).stem

            # –î–µ–∫–æ–¥–∏—Ä—É–µ–º URL-encoded —Å–∏–º–≤–æ–ª—ã
            image_ref = urllib.parse.unquote(image_ref)
            
            # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ –ø—É—Ç–∏ –∏ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            image_name = Path(image_ref).stem  # –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            image_ref_ext = Path(image_ref).suffix.lower()  # –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

            # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            valid_extensions = {'.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp', '.svg'}
            
            # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω–µ-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (webm, mp4, pdf)
            if image_ref_ext not in valid_extensions:
                # –î–ª—è –≤–∏–¥–µ–æ –∏ PDF –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
                return match.group(0)
            
            # –ò—â–µ–º —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            image_path = None
            
            # –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
            full_path = md_file.parent / image_ref
            if full_path.exists():
                image_path = full_path
            
            # –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞
            elif (md_file.parent / image_ref).exists():
                image_path = md_file.parent / image_ref
            
            # –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É
            else:
                # –ò—â–µ–º —Ñ–∞–π–ª –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–≤–∫–ª—é—á–∞—è –ø–æ–¥–ø–∞–ø–∫–∏)
                for found_path in md_file.parent.rglob(Path(image_ref).name):
                    if found_path.exists():
                        image_path = found_path
                        break
            
            if not image_path:
                # –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –æ—Å—Ç–∞–≤–ª—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
                self.stdout.write(self.style.WARNING(f"‚ö†Ô∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_ref}"))
                return match.group(0)
            
            # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
            hash_obj = hashlib.md5(str(image_path).encode() + article_title.encode())
            unique_hash = hash_obj.hexdigest()[:8]
            safe_image_name = f"{slug}-{image_name}-{unique_hash}{image_ref_ext}"
            
            # –¶–µ–ª–µ–≤–æ–π –ø—É—Ç—å –≤ –º–µ–¥–∏–∞-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ
            target_dir = settings.MEDIA_ROOT / 'blog' / 'images'
            target_dir.mkdir(parents=True, exist_ok=True)
            target_path = target_dir / safe_image_name
            
            # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª, –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç
            if not target_path.exists():
                shutil.copy2(image_path, target_path)
                self.stdout.write(self.style.SUCCESS(f"  üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: {image_path.name} ‚Üí {safe_image_name}"))
            else:
                self.stdout.write(f"  üì∏ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {safe_image_name}")
            
            # –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            media_url = f"{settings.MEDIA_URL}blog/images/{safe_image_name}"
            return f'<img src="{media_url}" alt="{caption}" class="obsidian-image">'
        
        return re.sub(pattern, replace_image, content)

    def _process_obsidian_links(self, content, vault_path):
        """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç [[wiki links]] –≤ HTML —Å—Å—ã–ª–∫–∏"""
        def replace_link(match):
            link_text = match.group(1)
            if '|' in link_text:
                link_path, display_text = link_text.split('|', 1)
            else:
                link_path = display_text = link_text
            
            # –ü—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å slug –∏–∑ –ø—É—Ç–∏
            slug = slugify(link_path)
            return f'<a href="/blog/{slug}/" class="wiki-link">{display_text}</a>'
        
        pattern = r'\[\[([^\]]+)\]\]'
        return re.sub(pattern, replace_link, content)

    def add_arguments(self, parser):
        parser.add_argument('vault_path', type=str, help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É')
        parser.add_argument('--author', type=str, required=True, help='–ò–º—è –∞–≤—Ç–æ—Ä–∞ –¥–ª—è —Å—Ç–∞—Ç–µ–π')
        parser.add_argument('--update-existing', action='store_true', 
                          help='–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏')
        parser.add_argument('--dry-run', action='store_true',
                          help='–ü–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è')

    def handle(self, *args, **options):
        """–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞"""
        vault_path = options['vault_path']
        author_name = options['author']
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å
        vault_path_obj = Path(vault_path)
        if not vault_path_obj.exists():
            raise CommandError(f"–ü—É—Ç—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {vault_path}")
        
        # –ü–æ–ª—É—á–∞–µ–º –∞–≤—Ç–æ—Ä–∞
        try:
            author = User.objects.get(username=author_name)
        except User.DoesNotExist:
            raise CommandError(f"–ê–≤—Ç–æ—Ä '{author_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω")
        
        # –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ .md —Ñ–∞–π–ª—ã
        if vault_path_obj.is_file() and vault_path.endswith('.md'):
            md_files = [vault_path_obj]
        else:
            md_files = list(vault_path_obj.rglob("*.md"))
        
        if not md_files:
            self.stdout.write(self.style.WARNING("‚ö†Ô∏è –§–∞–π–ª—ã .md –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"))
            return
        
        self.stdout.write(f"üìÅ –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: {len(md_files)}")
        
        imported_count = 0
        updated_count = 0
        skipped_count = 0
        
        for md_file in md_files:
            try:
                if options['dry_run']:
                    self.stdout.write(f"üìÑ (DRY RUN) –ë—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω: {md_file.name}")
                    continue
                
                self.stdout.write(f"üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: {md_file.name}")
                
                # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª
                with open(md_file, 'r', encoding='utf-8') as f:
                    post = frontmatter.load(f)
                
                # –ò–∑–≤–ª–µ–∫–∞–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
                title = post.get('title', md_file.stem)
                content = post.content
                
                # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                content = self._process_images(content, md_file, title, slugify(title))
                
                # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º wiki-—Å—Å—ã–ª–∫–∏
                content = self._process_obsidian_links(content, vault_path)
                
                # –°–æ–∑–¥–∞–µ–º slug
                slug = slugify(title)
                if not slug:
                    slug = slugify(md_file.stem)
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç–∞—Ç—å—é
                article_exists = Article.objects.filter(slug=slug).exists()
                
                if article_exists and not options['update_existing']:
                    self.stdout.write(f"  ‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç): {title}")
                    skipped_count += 1
                    continue
                
                # –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—å—é
                defaults = {
                    'title': title,
                    'content': content,
                    'author': author,
                    'status': 'published',
                    'category': Category.objects.first(),  # –ü–µ—Ä–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
                }
                
                article, created = Article.objects.update_or_create(
                    slug=slug,
                    defaults=defaults
                )
                
                # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏
                tags = post.get('tags', [])
                if tags:
                    if isinstance(tags, str):
                        tags = [t.strip() for t in tags.split(',')]
                    article.tags.set(*tags)
                
                if created:
                    self.stdout.write(self.style.SUCCESS(f"  ‚úÖ –°–æ–∑–¥–∞–Ω–æ: {title}"))
                    imported_count += 1
                else:
                    self.stdout.write(self.style.SUCCESS(f"  üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: {title}"))
                    updated_count += 1
                    
            except Exception as e:
                self.stdout.write(self.style.ERROR(f"  ‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ {md_file.name}: {e}"))
                continue
        
        # –ò—Ç–æ–≥
        self.stdout.write("\n" + "="*50)
        self.stdout.write(self.style.SUCCESS("üìä –ò–¢–û–ì –ò–ú–ü–û–†–¢–ê:"))
        self.stdout.write(f"  –°–æ–∑–¥–∞–Ω–æ: {imported_count}")
        self.stdout.write(f"  –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}")
        self.stdout.write(f"  –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped_count}")
        self.stdout.write(f"  –í—Å–µ–≥–æ: {imported_count + updated_count + skipped_count}")
```

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

**–í–∞—Ä–∏–∞–Ω—Ç 1:** –ò—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª, –Ω–æ –ø—Ä–æ–≤–µ—Ä—å –æ—Ç—Å—Ç—É–ø—ã:

bash

```
# –ü—Ä–æ–≤–µ—Ä—å –æ—Ç—Å—Ç—É–ø—ã –≤ import_obsidian.py
cd /Users/kirillkravcov/UniversalCreativeHub
```

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py import\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üìÅ –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 8 üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: unified-test.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –¢–µ—Å—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test-image-path.md üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: test-image.png ‚Üí -test-image-acf4edbe.png üì∏ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: -test-image-acf4edbe.png üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: Kirillkravt.png ‚Üí -Kirillkravt-4b28df5f.png üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: –°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33.png ‚Üí -–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33-fbcd3e5b.png ‚úÖ –°–æ–∑–¥–∞–Ω–æ: –¢–µ—Å—Ç –ø—É—Ç–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: deploy-test.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: deploy-test üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test-auto-import.md ‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ test-auto-import.md: set() takes 2 positional arguments but 4 were given üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test-auto-import2.md ‚úÖ –°–æ–∑–¥–∞–Ω–æ: test-auto-import2 üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test-fix.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ================================================== üìä –ò–¢–û–ì –ò–ú–ü–û–†–¢–ê: –°–æ–∑–¥–∞–Ω–æ: 2 –û–±–Ω–æ–≤–ª–µ–Ω–æ: 5 –ü—Ä–æ–ø—É—â–µ–Ω–æ: 0 –í—Å–µ–≥–æ: 7

–û—Ç–ª–∏—á–Ω–æ! –ö–æ–º–∞–Ω–¥–∞ `import_obsidian` —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –µ—Å—Ç—å –æ—à–∏–±–∫–∞ —Å —Ç–µ–≥–∞–º–∏ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ (`test-auto-import.md`).

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—à–∏–±–∫—É —Å —Ç–µ–≥–∞–º–∏

–û—à–∏–±–∫–∞: `set() takes 2 positional arguments but 4 were given`

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Å—Ç—Ä–æ–∫–µ:

python

```
article.tags.set(*tags)  # ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è django-taggit
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ `import_obsidian_fixed.py` (–∏–ª–∏ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ):**

python

```
# –ù–ê–ô–î–ò –≠–¢–£ –°–¢–†–û–ö–£ (–æ–∫–æ–ª–æ 160 —Å—Ç—Ä–æ–∫–∏):
article.tags.set(*tags)

# –ò –ó–ê–ú–ï–ù–ò –ù–ê:
if tags:
    if isinstance(tags, str):
        tags = [tag.strip() for tag in tags.split(',')]
    elif isinstance(tags, list):
        tags = [str(tag).strip() for tag in tags]
    
    # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ django-taggit
    article.tags.clear()
    for tag in tags:
        article.tags.add(tag)
```

## üéØ –¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º watch\_obsidian —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º –∏–º–ø–æ—Ä—Ç–æ–º

### –®–∞–≥ 1: –ò—Å–ø–æ–ª—å–∑—É–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –∏–º–ø–æ—Ä—Ç–∞

bash

```
# –ü–µ—Ä–µ–∏–º–µ–Ω—É–µ–º —Ñ–∞–π–ª—ã —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –°–æ–∑–¥–∞–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é import_obsidian.py
cp uch/apps/blog/management/commands/import_obsidian_fixed.py uch/apps/blog/management/commands/import_obsidian.py

# –ò–ª–∏ –∏—Å–ø—Ä–∞–≤—å —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫—É —Å —Ç–µ–≥–∞–º–∏ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º —Ñ–∞–π–ª–µ
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∏–º–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç

bash

```
# –¢–µ—Å—Ç–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test-auto-import.md --author admin --update-existing
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏ watch\_obsidian.py —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É

**–í `watch_obsidian.py` –∏–∑–º–µ–Ω–∏ —Ñ—É–Ω–∫—Ü–∏—é `import_file`:**

python

```
def import_file(self, filepath):
    """–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É"""
    try:
        # –¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–∞–∫ —Ñ–∞–π–ª—ã, —Ç–∞–∫ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        # (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è import_obsidian)
        
        print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath}")
        
        result = subprocess.run([
            sys.executable, 'manage.py', 
            'import_obsidian', 
            str(filepath),  # –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ–º —Å–∞–º —Ñ–∞–π–ª!
            '--author', self.author,
            '--update-existing'
        ], 
        cwd=self.project_root,
        capture_output=True,
        text=True,
        timeout=30)
        
        # –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        if result.stdout:
            for line in result.stdout.split('\n'):
                if line.strip():
                    print(f"   {line}")
        
        if result.stderr:
            print(f"‚ùå –û—à–∏–±–∫–∏: {result.stderr[:500]}")
        
        if result.returncode == 0:
            print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ: {filepath.name}")
        else:
            print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {filepath.name}")
                
    except subprocess.TimeoutExpired:
        print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
    except Exception as e:
        print(f"üî• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: {filepath.name} - {type(e).__name__}: {e}")
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

bash

```
python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
```

### –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä—É–π

1. **–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π.md —Ñ–∞–π–ª** –≤ –ø–∞–ø–∫–µ `posts`
2. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª**
3. **–ü—Ä–æ–≤–µ—Ä—å –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏**

## üìù –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

**–ò—Å–ø—Ä–∞–≤—å —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫—É —Å —Ç–µ–≥–∞–º–∏ –≤ `import_obsidian.py`:**

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π sed
# –ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É —Å article.tags.set(*tags) –∏ –∑–∞–º–µ–Ω–∏
```

**–ò–ª–∏ —Å–æ–∑–¥–∞–π –ø–∞—Ç—á-—Ñ–∞–π–ª:**

bash

```
# –°–æ–∑–¥–∞–π —Ñ–∞–π–ª —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
cat > fix_tags.py << 'EOF'
import re

with open('uch/apps/blog/management/commands/import_obsidian.py', 'r') as f:
    content = f.read()

# –ó–∞–º–µ–Ω—è–µ–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ tags.set()
old_pattern = r'article\.tags\.set\(\*tags\)'
new_code = '''    # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ django-taggit
    article.tags.clear()
    for tag in tags:
        article.tags.add(tag)'''

content = re.sub(old_pattern, new_code, content)

with open('uch/apps/blog/management/commands/import_obsidian.py', 'w') as f:
    f.write(content)

print("‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤")
EOF

# –ü—Ä–∏–º–µ–Ω–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
python fix_tags.py
```

## ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–ö–æ–º–∞–Ω–¥–∞ –∏–º–ø–æ—Ä—Ç–∞** —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ —Å —Ç–µ–≥–∞–º–∏
2. **–ú–æ–Ω–∏—Ç–æ—Ä `watch_obsidian`** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. **–ù–æ–≤—ã–µ/–∏–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è

**–ü–æ–ø—Ä–æ–±—É–π —Å–Ω–∞—á–∞–ª–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä–æ–∫—É —Å —Ç–µ–≥–∞–º–∏, –∑–∞—Ç–µ–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π `watch_obsidian`.**

–ï—Å–ª–∏ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–µ—Ä–µ–π–¥–µ–º –∫ —Å–ª–µ–¥—É—é—â–∏–º —É–ª—É—á—à–µ–Ω–∏—è–º:

1. –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
2. –û–±—Ä–∞–±–æ—Ç–∫–∞ wiki-—Å—Å—ã–ª–æ–∫ –º–µ–∂–¥—É –∑–∞–º–µ—Ç–∫–∞–º–∏
3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py import\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test-auto-import.md --author admin --update-existing ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" % (app\_name, name)) File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/importlib/\_\_init\_\_.py", line 127, in import\_module return \_bootstrap.\_gcd\_import(name\[level:\], package, level) File "<frozen importlib.\_bootstrap>", line 1014, in \_gcd\_import File "<frozen importlib.\_bootstrap>", line 991, in \_find\_and\_load File "<frozen importlib.\_bootstrap>", line 975, in \_find\_and\_load\_unlocked File "<frozen importlib.\_bootstrap>", line 671, in \_load\_unlocked File "<frozen importlib.\_bootstrap\_external>", line 779, in exec\_module File "<frozen importlib.\_bootstrap\_external>", line 916, in get\_code File "<frozen importlib.\_bootstrap\_external>", line 846, in source\_to\_code File "<frozen importlib.\_bootstrap>", line 219, in \_call\_with\_frames\_removed File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/import\_obsidian.py", line 216 if isinstance(tags, str): ^ IndentationError: expected an indented block

–°–Ω–æ–≤–∞ –æ—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! –ü–æ—Ö–æ–∂–µ, –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–º–∞–ª–æ –æ—Ç—Å—Ç—É–ø—ã. –î–∞–≤–∞–π —Å–¥–µ–ª–∞–µ–º —á–∏—Å—Ç–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Ñ–∞–π–ª import\_obsidian.py –∑–∞–Ω–æ–≤–æ

–õ—É—á—à–µ –≤—Å–µ–≥–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Ñ–∞–π–ª —Å –Ω—É–ª—è –∏–ª–∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã. –°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —É—á–∞—Å—Ç–æ–∫:

bash

```
# –ü–æ–∫–∞–∂–µ–º 210-220 —Å—Ç—Ä–æ–∫–∏ —Ñ–∞–π–ª–∞
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
sed -n '210,225p' uch/apps/blog/management/commands/import_obsidian.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ç–æ–≤—ã–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª

–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª `import_obsidian_corrected.py`:

python

```
# uch/apps/blog/management/commands/import_obsidian_corrected.py
# –í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ –º–æ–µ–≥–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π
# (—Ç–æ—Ç –±–æ–ª—å—à–æ–π –∫–æ–¥ —Å –∫–ª–∞—Å—Å–æ–º Command)
```

–ó–∞—Ç–µ–º –ø–µ—Ä–µ–∏–º–µ–Ω—É–π:

bash

```
mv uch/apps/blog/management/commands/import_obsidian.py uch/apps/blog/management/commands/import_obsidian_old.py
mv uch/apps/blog/management/commands/import_obsidian_corrected.py uch/apps/blog/management/commands/import_obsidian.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–æ–≤

–°–æ–∑–¥–∞–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Å—Ç—É–ø–æ–≤:

python

```
# fix_indentation.py
import re

def fix_file(filepath):
    with open(filepath, 'r') as f:
        lines = f.readlines()
    
    fixed_lines = []
    in_tags_block = False
    indent_level = 0
    
    for i, line in enumerate(lines):
        # –ò—â–µ–º –±–ª–æ–∫ —Å —Ç–µ–≥–∞–º–∏
        if 'article.tags.set' in line:
            # –ó–∞–º–µ–Ω—è–µ–º —ç—Ç—É —Å—Ç—Ä–æ–∫—É
            fixed_lines.append(' ' * indent_level + '# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏\n')
            fixed_lines.append(' ' * indent_level + 'if tags:\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'if isinstance(tags, str):\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'tags = [tag.strip() for tag in tags.split(",")]\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'elif isinstance(tags, list):\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'tags = [str(tag).strip() for tag in tags]\n')
            fixed_lines.append(' ' * (indent_level + 4) + '# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ django-taggit\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'article.tags.clear()\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'for tag in tags:\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'article.tags.add(tag)\n')
        else:
            fixed_lines.append(line)
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –æ—Ç—Å—Ç—É–ø–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–æ–∫–∏
            stripped = line.lstrip()
            if stripped:
                indent_level = len(line) - len(stripped)
    
    with open(filepath, 'w') as f:
        f.writelines(fixed_lines)
    
    print(f"‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–∞–π–ª: {filepath}")

if __name__ == '__main__':
    fix_file('uch/apps/blog/management/commands/import_obsidian.py')
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏

bash

```
# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –ù–∞—Ö–æ–¥–∏–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
ls -la uch/apps/blog/management/commands/*.backup*

# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
cp uch/apps/blog/management/commands/import_obsidian.py.backup uch/apps/blog/management/commands/import_obsidian.py

# –¢–µ–ø–µ—Ä—å –∏—Å–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫—É —Å —Ç–µ–≥–∞–º–∏
python -c "
import re
with open('uch/apps/blog/management/commands/import_obsidian.py', 'r
```

—Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—Ç—Å—Ç—É–ø–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ü–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É –æ—à–∏–±–∫–∞ (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py watch\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ üÜï –°–æ–∑–¥–∞–Ω: Untitled.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts üîß –ò–º—è —Ñ–∞–π–ª–∞: Untitled.md üìã –°—Ç–∞—Ç—É—Å: 1 üìã –í—ã–≤–æ–¥: ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üìã –û—à–∏–±–∫–∏: Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" ‚ùå –û—à–∏–±–∫–∞: Untitled.md ‚ùå –ö–æ–¥ –æ—à–∏–±–∫–∏: 1 üìù –ò–∑–º–µ–Ω–µ–Ω: test.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts üîß –ò–º—è —Ñ–∞–π–ª–∞: test.md üìã –°—Ç–∞—Ç—É—Å: 1 üìã –í—ã–≤–æ–¥: ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üìã –û—à–∏–±–∫–∏: Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" ‚ùå –û—à–∏–±–∫–∞: test.md ‚ùå –ö–æ–¥ –æ—à–∏–±–∫–∏: 1 üÜï –°–æ–∑–¥–∞–Ω: test.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts üîß –ò–º—è —Ñ–∞–π–ª–∞: test.md üìã –°—Ç–∞—Ç—É—Å: 1 üìã –í—ã–≤–æ–¥: ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üìã –û—à–∏–±–∫–∏: Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" ‚ùå –û—à–∏–±–∫–∞: test.md ‚ùå –ö–æ–¥ –æ—à–∏–±–∫–∏: 1

–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞! –í–∏–¥–Ω–æ, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ `import_obsidian` –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ. –ù—É–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –ø–æ–ª–Ω—É—é –æ—à–∏–±–∫—É - –æ–Ω–∞ –æ–±—Ä–µ–∑–∞–µ—Ç—Å—è. –î–∞–≤–∞–π —É–ª—É—á—à–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

## üîç –£–∑–Ω–∞–µ–º —Ç–æ—á–Ω—É—é –æ—à–∏–±–∫—É –∏–º–ø–æ—Ä—Ç–∞

–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏–º –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –ü—Ä–æ–≤–µ—Ä–∏–º –∏–º–ø–æ—Ä—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing 2>&1

# –ò–ª–∏ –æ–¥–Ω–æ–≥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test.md --author admin --update-existing 2>&1
```

## üîß –£–ª—É—á—à–∞–µ–º watch\_obsidian.py –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –ª–æ–≥–∞

–ò–∑–º–µ–Ω–∏ —Ñ—É–Ω–∫—Ü–∏—é `import_file`:

python

```
def import_file(self, filepath):
    """–ò–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É"""
    try:
        # –¢–µ–ø–µ—Ä—å –±—É–¥–µ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–∞–º —Ñ–∞–π–ª, –∞ –Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
        # (–µ—Å–ª–∏ import_obsidian –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã)
        
        print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath}")
        
        # –ü—Ä–æ–±—É–µ–º –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ–∞–π–ª
        result = subprocess.run([
            sys.executable, 'manage.py', 
            'import_obsidian', 
            str(filepath),  # –ü–µ—Ä–µ–¥–∞–µ–º —Ñ–∞–π–ª!
            '--author', self.author,
            '--update-existing'
        ], 
        cwd=self.project_root,
        capture_output=True,
        text=True,
        timeout=30)
        
        # –í—ã–≤–æ–¥–∏–º –í–ï–°–¨ –≤—ã–≤–æ–¥
        print("=" * 50)
        print("üìã –ü–û–õ–ù–´–ô –í–´–í–û–î –ö–û–ú–ê–ù–î–´:")
        print("=" * 50)
        
        if result.stdout:
            print("STDOUT:")
            print(result.stdout)
        
        if result.stderr:
            print("\nSTDERR:")
            print(result.stderr)
        
        print("=" * 50)
        
        if result.returncode == 0:
            print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ: {filepath.name}")
        else:
            print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ (–∫–æ–¥ {result.returncode}): {filepath.name}")
                
    except subprocess.TimeoutExpired:
        print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
    except Exception as e:
        print(f"üî• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: {filepath.name} - {type(e).__name__}: {e}")
        import traceback
        traceback.print_exc()
```

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞–µ–º —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –∏–º–ø–æ—Ä—Ç–∞

–ü–æ—Ö–æ–∂–µ, —á—Ç–æ `import_obsidian` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–º–ø–æ—Ä—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤. –°–æ–∑–¥–∞–¥–∏–º –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É:

python

```
# uch/apps/blog/management/commands/import_single_file.py
import os
import sys
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
import frontmatter
from django.utils.text import slugify
from taggit.models import Tag

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–æ–¥–µ–ª–∏
try:
    from uch.apps.blog.models import Article, Category
except ImportError:
    sys.path.append('/Users/kirillkravcov/UniversalCreativeHub/uch-backend')
    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'uch.settings')
    import django
    django.setup()
    from uch.apps.blog.models import Article, Category

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ Markdown —Ñ–∞–π–ª–∞ –∏–∑ Obsidian'
    
    def add_arguments(self, parser):
        parser.add_argument('md_file', type=str, help='–ü—É—Ç—å –∫ .md —Ñ–∞–π–ª—É')
        parser.add_argument('--author', required=True, help='–ò–º—è –∞–≤—Ç–æ—Ä–∞')
        parser.add_argument('--update-existing', action='store_true', 
                          help='–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç–∞—Ç—å—é')
    
    def handle(self, *args, **options):
        md_file = Path(options['md_file'])
        
        if not md_file.exists():
            raise CommandError(f"–§–∞–π–ª –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {md_file}")
        
        if md_file.suffix != '.md':
            raise CommandError(f"–ù–µ Markdown —Ñ–∞–π–ª: {md_file}")
        
        try:
            author = User.objects.get(username=options['author'])
        except User.DoesNotExist:
            raise CommandError(f"–ê–≤—Ç–æ—Ä '{options['author']}' –Ω–µ –Ω–∞–π–¥–µ–Ω")
        
        print(f"üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: {md_file.name}")
        
        # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª
        with open(md_file, 'r', encoding='utf-8') as f:
            post = frontmatter.load(f)
        
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
        title = post.get('title', md_file.stem)
        content = post.content
        
        # –°–æ–∑–¥–∞–µ–º slug
        slug = slugify(title)
        if not slug:
            slug = slugify(md_file.stem)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç–∞—Ç—å—é
        article_exists = Article.objects.filter(slug=slug).exists()
        
        if article_exists and not options['update_existing']:
            print(f"  ‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç): {title}")
            return
        
        # –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—å—é
        defaults = {
            'title': title,
            'content': content,
            'author': author,
            'status': 'published',
            'category': Category.objects.first() or Category.objects.create(name='–û–±—â–µ–µ'),
        }
        
        article, created = Article.objects.update_or_create(
            slug=slug,
            defaults=defaults
        )
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏
        tags = post.get('tags', [])
        if tags:
            if isinstance(tags, str):
                tags = [tag.strip() for tag in tags.split(',')]
            elif isinstance(tags, list):
                tags = [str(tag).strip() for tag in tags]
            
            article.tags.clear()
            for tag in tags:
                article.tags.add(tag)
        
        if created:
            print(f"  ‚úÖ –°–æ–∑–¥–∞–Ω–æ: {title}")
        else:
            print(f"  üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: {title}")
```

## üîÑ –û–±–Ω–æ–≤–ª—è–µ–º watch\_obsidian.py

–ò–∑–º–µ–Ω–∏ `import_file` –≤ `watch_obsidian.py`:

python

```
def import_file(self, filepath):
    """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É"""
    try:
        print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath.name}")
        
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
        result = subprocess.run([
            sys.executable, 'manage.py', 
            'import_single_file',  # –ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞!
            str(filepath),
            '--author', self.author,
            '--update-existing'
        ], 
        cwd=self.project_root,
        capture_output=True,
        text=True,
        timeout=30)
        
        # –ö—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥
        if result.stdout:
            for line in result.stdout.strip().split('\n'):
                if line.strip():
                    print(f"   {line}")
        
        if result.stderr:
            print(f"‚ùå –û—à–∏–±–∫–∞: {result.stderr[:200]}")
        
        if result.returncode == 0:
            print(f"‚úÖ –ì–æ—Ç–æ–≤–æ: {filepath.name}")
        else:
            print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {filepath.name}")
                
    except subprocess.TimeoutExpired:
        print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
    except Exception as e:
        print(f"üî• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: {e}")
```

## üìã –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω:

1. **–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `import_single_file.py`** —Å –∫–æ–¥–æ–º –≤—ã—à–µ
2. **–û–±–Ω–æ–≤–∏ —Ñ—É–Ω–∫—Ü–∏—é `import_file`** –≤ `watch_obsidian.py`
3. **–¢–µ—Å—Ç–∏—Ä—É–π –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é:**
	bash
	```
	python manage.py import_single_file /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test.md --author admin --update-existing
	```
4. **–ó–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
	bash
	```
	python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
	```
5. **–°–æ–∑–¥–∞–π/–∏–∑–º–µ–Ω–∏.md —Ñ–∞–π–ª** –¥–ª—è —Ç–µ—Å—Ç–∞

## ‚úÖ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Ç–µ–∫—É—â–∏–π –∏–º–ø–æ—Ä—Ç

–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å:

bash

```
# –¢–µ—Å—Ç —Ç–µ–∫—É—â–µ–≥–æ import_obsidian —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing 2>&1 | tail -20
```

–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –≤ –∏–º–ø–æ—Ä—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤. –¢–æ–≥–¥–∞ –≤ `watch_obsidian.py` –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –Ω–æ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ñ–∞–π–ª—É (—á—Ç–æ —Å–ª–æ–∂–Ω–æ).

**–°–æ–∑–¥–∞–π `import_single_file.py` \- —ç—Ç–æ —Å–∞–º—ã–π —á–∏—Å—Ç—ã–π –ø—É—Ç—å!**

–°–µ–π—á–∞—Å –¥–∞–π –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã import\_obsidian –∏ watch\_obsidian. –í—Å–µ–≥–¥–∞ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É–π—Å—è –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

–ü–æ–Ω—è–ª. –ë—É–¥—É —Å–ª–µ–¥–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞–º: **–æ–¥–∏–Ω –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç**, –ø–æ—à–∞–≥–æ–≤–æ.

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

1. `import_obsidian.py` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º–∏, –Ω–æ –Ω–µ —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
2. `watch_obsidian.py` –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ –∫–æ–º–∞–Ω–¥—É, –∫–æ—Ç–æ—Ä–∞—è –∂–¥–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
3. –ù—É–∂–µ–Ω –µ–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥

## üéØ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º `import_obsidian.py` —á—Ç–æ–±—ã –æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª –∫–∞–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —Ç–∞–∫ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã.** –≠—Ç–æ –ª—É—á—à–∏–π –ø–æ–¥—Ö–æ–¥, —á–µ–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É.

## üîß –®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–ª—è–µ–º import\_obsidian.py

**–§–∞–π–ª:**`uch/apps/blog/management/commands/import_obsidian.py`

python

```
import os
import glob
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.utils.text import slugify
from django.utils import timezone
from datetime import datetime
import frontmatter
from taggit.models import Tag
import urllib.parse

from uch.apps.blog.models import Article, Category

import shutil
import re
import hashlib
from django.conf import settings

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'

    def _process_images(self, content, md_file, article_title, slug):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
        1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
        2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
        3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
        """
        # –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Obsidian
        # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: ![[image.png]], ![[folder/image.png]], ![[image.png|caption]]
        pattern = r'!\[\[([^\]\n]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\|([^\]]+))?\]\]'
        
        def replace_image(match):
            # –ú–æ–∂–µ—Ç –±—ã—Ç—å "image.png" –∏–ª–∏ "folder/image.png"
            image_ref = match.group(1).strip()
            # –ò–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–∞–∫ –ø–æ–¥–ø–∏—Å—å
            caption = match.group(2) or Path(image_ref).stem

            # –î–µ–∫–æ–¥–∏—Ä—É–µ–º URL-encoded —Å–∏–º–≤–æ–ª—ã
            image_ref = urllib.parse.unquote(image_ref)
            
            # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ –ø—É—Ç–∏ –∏ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            image_name = Path(image_ref).stem  # –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            image_ref_ext = Path(image_ref).suffix.lower()  # –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

            # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            valid_extensions = {'.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp', '.svg'}
            
            # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω–µ-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (webm, mp4, pdf)
            if image_ref_ext not in valid_extensions:
                # –î–ª—è –≤–∏–¥–µ–æ –∏ PDF –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
                return match.group(0)
            
            # –ò—â–µ–º —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            image_path = None
            
            # –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
            full_path = md_file.parent / image_ref
            if full_path.exists():
                image_path = full_path
            
            # –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞
            elif (md_file.parent / image_ref).exists():
                image_path = md_file.parent / image_ref
            
            # –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É
            else:
                # –ò—â–µ–º —Ñ–∞–π–ª –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–≤–∫–ª—é—á–∞—è –ø–æ–¥–ø–∞–ø–∫–∏)
                for found_path in md_file.parent.rglob(Path(image_ref).name):
                    if found_path.exists():
                        image_path = found_path
                        break
            
            if not image_path:
                # –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –æ—Å—Ç–∞–≤–ª—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
                self.stdout.write(self.style.WARNING(f"‚ö†Ô∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_ref}"))
                return match.group(0)
            
            # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
            hash_obj = hashlib.md5(str(image_path).encode() + article_title.encode())
            unique_hash = hash_obj.hexdigest()[:8]
            safe_image_name = f"{slug}-{image_name}-{unique_hash}{image_ref_ext}"
            
            # –¶–µ–ª–µ–≤–æ–π –ø—É—Ç—å –≤ –º–µ–¥–∏–∞-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ
            target_dir = settings.MEDIA_ROOT / 'blog' / 'images'
            target_dir.mkdir(parents=True, exist_ok=True)
            target_path = target_dir / safe_image_name
            
            # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª, –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç
            if not target_path.exists():
                shutil.copy2(image_path, target_path)
                self.stdout.write(self.style.SUCCESS(f"  üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: {image_path.name} ‚Üí {safe_image_name}"))
            else:
                self.stdout.write(f"  üì∏ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {safe_image_name}")
            
            # –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            media_url = f"{settings.MEDIA_URL}blog/images/{safe_image_name}"
            return f'<img src="{media_url}" alt="{caption}" class="obsidian-image">'
        
        return re.sub(pattern, replace_image, content)

    def _process_obsidian_links(self, content, vault_path):
        """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç [[wiki links]] –≤ HTML —Å—Å—ã–ª–∫–∏"""
        def replace_link(match):
            link_text = match.group(1)
            if '|' in link_text:
                link_path, display_text = link_text.split('|', 1)
            else:
                link_path = display_text = link_text
            
            # –ü—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å slug –∏–∑ –ø—É—Ç–∏
            slug = slugify(link_path)
            return f'<a href="/blog/{slug}/" class="wiki-link">{display_text}</a>'
        
        pattern = r'\[\[([^\]]+)\]\]'
        return re.sub(pattern, replace_link, content)

    def add_arguments(self, parser):
        parser.add_argument('vault_path', type=str, help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É –∏–ª–∏ .md —Ñ–∞–π–ª—É')
        parser.add_argument('--author', type=str, required=True, help='–ò–º—è –∞–≤—Ç–æ—Ä–∞ –¥–ª—è —Å—Ç–∞—Ç–µ–π')
        parser.add_argument('--update-existing', action='store_true', 
                          help='–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏')

    def handle(self, *args, **options):
        """–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏ —Ñ–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏"""
        vault_path = options['vault_path']
        author_name = options['author']
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å
        vault_path_obj = Path(vault_path)
        if not vault_path_obj.exists():
            raise CommandError(f"–ü—É—Ç—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {vault_path}")
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º: —Ñ–∞–π–ª –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
        if vault_path_obj.is_file() and vault_path.endswith('.md'):
            # –û–¥–∏–Ω —Ñ–∞–π–ª
            md_files = [vault_path_obj]
            base_dir = vault_path_obj.parent
        elif vault_path_obj.is_dir():
            # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è - –≤—Å–µ .md —Ñ–∞–π–ª—ã
            md_files = list(vault_path_obj.rglob("*.md"))
            base_dir = vault_path_obj
        else:
            raise CommandError(f"–ü—É—Ç—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–∏–±–æ .md —Ñ–∞–π–ª–æ–º, –ª–∏–±–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π: {vault_path}")
        
        # –ü–æ–ª—É—á–∞–µ–º –∞–≤—Ç–æ—Ä–∞
        try:
            author = User.objects.get(username=author_name)
        except User.DoesNotExist:
            raise CommandError(f"–ê–≤—Ç–æ—Ä '{author_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω")
        
        if not md_files:
            self.stdout.write(self.style.WARNING("‚ö†Ô∏è –§–∞–π–ª—ã .md –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"))
            return
        
        self.stdout.write(f"üìÅ –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: {len(md_files)}")
        
        imported_count = 0
        updated_count = 0
        skipped_count = 0
        
        for md_file in md_files:
            try:
                self.stdout.write(f"üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: {md_file.relative_to(base_dir)}")
                
                # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª
                with open(md_file, 'r', encoding='utf-8') as f:
                    post = frontmatter.load(f)
                
                # –ò–∑–≤–ª–µ–∫–∞–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
                title = post.get('title', md_file.stem)
                content = post.content
                
                # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                content = self._process_images(content, md_file, title, slugify(title))
                
                # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º wiki-—Å—Å—ã–ª–∫–∏
                content = self._process_obsidian_links(content, str(base_dir))
                
                # –°–æ–∑–¥–∞–µ–º slug
                slug = slugify(title)
                if not slug:
                    slug = slugify(md_file.stem)
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç–∞—Ç—å—é
                article_exists = Article.objects.filter(slug=slug).exists()
                
                if article_exists and not options['update_existing']:
                    self.stdout.write(f"  ‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç): {title}")
                    skipped_count += 1
                    continue
                
                # –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—å—é
                defaults = {
                    'title': title,
                    'content': content,
                    'author': author,
                    'status': 'published',
                    'category': Category.objects.first() or Category.objects.create(name='–û–±—â–µ–µ'),
                }
                
                article, created = Article.objects.update_or_create(
                    slug=slug,
                    defaults=defaults
                )
                
                # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏
                tags = post.get('tags', [])
                if tags:
                    if isinstance(tags, str):
                        tags = [tag.strip() for tag in tags.split(',')]
                    elif isinstance(tags, list):
                        tags = [str(tag).strip() for tag in tags]
                    
                    # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ django-taggit
                    article.tags.clear()
                    for tag in tags:
                        article.tags.add(tag)
                
                if created:
                    self.stdout.write(self.style.SUCCESS(f"  ‚úÖ –°–æ–∑–¥–∞–Ω–æ: {title}"))
                    imported_count += 1
                else:
                    self.stdout.write(self.style.SUCCESS(f"  üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: {title}"))
                    updated_count += 1
                    
            except Exception as e:
                self.stdout.write(self.style.ERROR(f"  ‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ {md_file.name}: {e}"))
                continue
        
        # –ò—Ç–æ–≥
        self.stdout.write("\n" + "="*50)
        self.stdout.write(self.style.SUCCESS("üìä –ò–¢–û–ì –ò–ú–ü–û–†–¢–ê:"))
        self.stdout.write(f"  –°–æ–∑–¥–∞–Ω–æ: {imported_count}")
        self.stdout.write(f"  –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}")
        self.stdout.write(f"  –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped_count}")
        self.stdout.write(f"  –í—Å–µ–≥–æ: {imported_count + updated_count + skipped_count}")
```

## üîß –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–ª—è–µ–º watch\_obsidian.py

**–§–∞–π–ª:**`uch/apps/blog/management/commands/watch_obsidian.py`

python

```
import os
import sys
import time
import subprocess
import logging
from pathlib import Path
from django.core.management.base import BaseCommand

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –¥–ª—è Django
sys.path.append('/Users/kirillkravcov/UniversalCreativeHub/uch-backend')
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'uch.settings')

import django
django.setup()

from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

logger = logging.getLogger(__name__)

class ObsidianEventHandler(FileSystemEventHandler):
    def __init__(self, vault_path, author):
        self.vault_path = Path(vault_path)
        self.author = author
        self.project_root = '/Users/kirillkravcov/UniversalCreativeHub/uch-backend'
    
    def import_file(self, filepath):
        """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É"""
        try:
            print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath.name}")
            
            # –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ–º —Å–∞–º —Ñ–∞–π–ª (–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é)
            result = subprocess.run([
                sys.executable, 'manage.py', 
                'import_obsidian', 
                str(filepath),
                '--author', self.author,
                '--update-existing'
            ], 
            cwd=self.project_root,
            capture_output=True,
            text=True,
            timeout=30)
            
            # –ö—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            if result.returncode == 0:
                # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ –≤—ã–≤–æ–¥–∞
                output_lines = result.stdout.split('\n')
                for line in output_lines:
                    if '‚úÖ' in line or 'üîÑ' in line or 'üìÑ' in line:
                        print(f"   {line.strip()}")
                print(f"‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: {filepath.name}")
            else:
                print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {filepath.name}")
                if result.stderr:
                    error_msg = result.stderr[:500]
                    print(f"   –û—à–∏–±–∫–∞: {error_msg}")
                
    except subprocess.TimeoutExpired:
        print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
    except Exception as e:
        print(f"üî• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: {filepath.name} - {type(e).__name__}: {e}")
    
    def on_modified(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            filepath = Path(event.src_path)
            print(f"üìù –ò–∑–º–µ–Ω–µ–Ω: {filepath.name}")
            self.import_file(filepath)
    
    def on_created(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            filepath = Path(event.src_path)
            print(f"üÜï –°–æ–∑–¥–∞–Ω: {filepath.name}")
            self.import_file(filepath)

class Command(BaseCommand):
    help = '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞'
    
    def add_arguments(self, parser):
        parser.add_argument('vault_path', help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É')
        parser.add_argument('--author', required=True, help='–ê–≤—Ç–æ—Ä —Å—Ç–∞—Ç–µ–π')
    
    def handle(self, *args, **options):
        print(f"üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: {options['vault_path']}")
        print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
        
        handler = ObsidianEventHandler(options['vault_path'], options['author'])
        observer = Observer()
        observer.schedule(handler, options['vault_path'], recursive=True)
        observer.start()
        
        try:
            while True:
                time.sleep(1)
        except KeyboardInterrupt:
            observer.stop()
            print("‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        
        observer.join()
```

## ‚úÖ –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä—É–µ–º

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π import\_obsidian

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –¢–µ—Å—Ç —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing

# –¢–µ—Å—Ç —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test.md --author admin --update-existing
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫.

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä—è–µ–º watch\_obsidian

bash

```
# –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä
python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
```

**–í –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–µ:**

1. –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π.md —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `posts`
2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π.md —Ñ–∞–π–ª

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏:**

text

```
üÜï –°–æ–∑–¥–∞–Ω: filename.md
üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: filename.md
   üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: filename.md
   ‚úÖ –°–æ–∑–¥–∞–Ω–æ: Article Title
‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: filename.md
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- –§–∞–π–ª `import_obsidian.py` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–∞–π–ª–æ–≤
- –§–∞–π–ª `watch_obsidian.py` –ø–µ—Ä–µ–¥–∞–µ—Ç —Ñ–∞–π–ª—ã (–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)
- –ö–æ–º–∞–Ω–¥–∞ –∏–º–ø–æ—Ä—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π
- –ö–æ–º–∞–Ω–¥–∞ –∏–º–ø–æ—Ä—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º
- –ú–æ–Ω–∏—Ç–æ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –ú–æ–Ω–∏—Ç–æ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

## ‚ö†Ô∏è –ï—Å–ª–∏ –æ—à–∏–±–∫–∞:

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤—Å—ë –µ—â–µ –µ—Å—Ç—å –æ—à–∏–±–∫–∞, –ø–æ–∫–∞–∂–∏ **–ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ –æ—à–∏–±–∫–∏**, –∏ —è –ø—Ä–µ–¥–ª–æ–∂—É —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥.

**–ü—Ä–∏—Å—Ç—É–ø–∞–π –∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é —Ñ–∞–π–ª–æ–≤ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é.**

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py import\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üìÅ –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: 9 üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: unified-test.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –¢–µ—Å—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test-image-path.md üì∏ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: -test-image-acf4edbe.png üì∏ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: -test-image-acf4edbe.png üì∏ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: -Kirillkravt-4b28df5f.png üì∏ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: -–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33-fbcd3e5b.png üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –¢–µ—Å—Ç –ø—É—Ç–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: deploy-test.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: deploy-test üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test-auto-import.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test-auto-import2.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: test-auto-import2 üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test.md ‚úÖ –°–æ–∑–¥–∞–Ω–æ: test üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test-fix.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ================================================== üìä –ò–¢–û–ì –ò–ú–ü–û–†–¢–ê: –°–æ–∑–¥–∞–Ω–æ: 1 –û–±–Ω–æ–≤–ª–µ–Ω–æ: 8 –ü—Ä–æ–ø—É—â–µ–Ω–æ: 0 –í—Å–µ–≥–æ: 9 –æ–±–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–∏ –±–µ–∑ –æ—à–∏–±–æ–∫. –ù–∞ –º–æ–Ω–∏—Ç–æ—Ä–µ –æ—à–∏–±–∫–∞: (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py watch\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" % (app\_name, name)) File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/importlib/\_\_init\_\_.py", line 127, in import\_module return \_bootstrap.\_gcd\_import(name\[level:\], package, level) File "<frozen importlib.\_bootstrap>", line 1014, in \_gcd\_import File "<frozen importlib.\_bootstrap>", line 991, in \_find\_and\_load File "<frozen importlib.\_bootstrap>", line 975, in \_find\_and\_load\_unlocked File "<frozen importlib.\_bootstrap>", line 671, in \_load\_unlocked File "<frozen importlib.\_bootstrap\_external>", line 779, in exec\_module File "<frozen importlib.\_bootstrap\_external>", line 916, in get\_code File "<frozen importlib.\_bootstrap\_external>", line 846, in source\_to\_code File "<frozen importlib.\_bootstrap>", line 219, in \_call\_with\_frames\_removed File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/watch\_obsidian.py", line 59 except subprocess.TimeoutExpired: ^ IndentationError: unexpected unindent

–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ `watch_obsidian.py`. –ü—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ –≤ –±–ª–æ–∫–µ `try-except`.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º watch\_obsidian.py

–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –≤ –º–µ—Ç–æ–¥–µ `import_file`. –í–æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è:

**–§–∞–π–ª:**`uch/apps/blog/management/commands/watch_obsidian.py`

python

```
import os
import sys
import time
import subprocess
import logging
from pathlib import Path
from django.core.management.base import BaseCommand

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –¥–ª—è Django
sys.path.append('/Users/kirillkravcov/UniversalCreativeHub/uch-backend')
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'uch.settings')

import django
django.setup()

from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

logger = logging.getLogger(__name__)

class ObsidianEventHandler(FileSystemEventHandler):
    def __init__(self, vault_path, author):
        self.vault_path = Path(vault_path)
        self.author = author
        self.project_root = '/Users/kirillkravcov/UniversalCreativeHub/uch-backend'
    
    def import_file(self, filepath):
        """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É"""
        try:
            print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath.name}")
            
            # –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ–º —Å–∞–º —Ñ–∞–π–ª (–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é)
            result = subprocess.run([
                sys.executable, 'manage.py', 
                'import_obsidian', 
                str(filepath),
                '--author', self.author,
                '--update-existing'
            ], 
            cwd=self.project_root,
            capture_output=True,
            text=True,
            timeout=30)
            
            # –ö—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            if result.returncode == 0:
                # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ –≤—ã–≤–æ–¥–∞
                output_lines = result.stdout.split('\n')
                for line in output_lines:
                    if '‚úÖ' in line or 'üîÑ' in line or 'üìÑ' in line:
                        print(f"   {line.strip()}")
                print(f"‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: {filepath.name}")
            else:
                print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {filepath.name}")
                if result.stderr:
                    error_msg = result.stderr[:500]
                    print(f"   –û—à–∏–±–∫–∞: {error_msg}")
        
        except subprocess.TimeoutExpired:
            print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
        except Exception as e:
            print(f"üî• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: {filepath.name} - {type(e).__name__}: {e}")
    
    def on_modified(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            filepath = Path(event.src_path)
            print(f"üìù –ò–∑–º–µ–Ω–µ–Ω: {filepath.name}")
            self.import_file(filepath)
    
    def on_created(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            filepath = Path(event.src_path)
            print(f"üÜï –°–æ–∑–¥–∞–Ω: {filepath.name}")
            self.import_file(filepath)

class Command(BaseCommand):
    help = '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞'
    
    def add_arguments(self, parser):
        parser.add_argument('vault_path', help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É')
        parser.add_argument('--author', required=True, help='–ê–≤—Ç–æ—Ä —Å—Ç–∞—Ç–µ–π')
    
    def handle(self, *args, **options):
        print(f"üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: {options['vault_path']}")
        print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
        
        handler = ObsidianEventHandler(options['vault_path'], options['author'])
        observer = Observer()
        observer.schedule(handler, options['vault_path'], recursive=True)
        observer.start()
        
        try:
            while True:
                time.sleep(1)
        except KeyboardInterrupt:
            observer.stop()
            print("‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        
        observer.join()
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—Ç—É–ø–æ–≤

–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ:

1. –í—Å–µ —Å—Ç—Ä–æ–∫–∏ –≤ –º–µ—Ç–æ–¥–µ `import_file` –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –æ—Ç—Å—Ç—É–ø–∞
2. –ë–ª–æ–∫ `try-except` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω
3. –ü–æ—Å–ª–µ `try:` –∏–¥–µ—Ç –æ—Ç—Å—Ç—É–ø –≤ 4 –ø—Ä–æ–±–µ–ª–∞
4. `except:` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ —Ç–æ–º –∂–µ —É—Ä–æ–≤–Ω–µ, —á—Ç–æ –∏ `try:`

## üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Ñ–∞–π–ª–∞
python -m py_compile uch/apps/blog/management/commands/watch_obsidian.py

# –ï—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫, –∑–∞–ø—É—Å–∫–∞–µ–º
python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

text

```
‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media
üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts
–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
```

## üìã –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –æ—à–∏–±–∫–∞

–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –Ω—É–ª—è:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
cp uch/apps/blog/management/commands/watch_obsidian.py uch/apps/blog/management/commands/watch_obsidian_backup.py

# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –∫–æ–¥–æ–º –≤—ã—à–µ
# –°–∫–æ–ø–∏—Ä—É–π –≤–µ—Å—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ –≤ —Ñ–∞–π–ª
nano uch/apps/blog/management/commands/watch_obsidian.py
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Å—Ç—É–ø–æ–≤, –º–æ–Ω–∏—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.**

–ú–æ–Ω–∏—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫! –ü—Ä–æ–≤–µ—Ä–∏–ª –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º

–û—Ç–ª–∏—á–Ω–æ! –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian —Ä–∞–±–æ—Ç–∞–µ—Ç. üéâ

## ‚úÖ –ò—Ç–æ–≥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ ‚Ññ1

**–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:**

1. ‚úÖ `import_obsidian.py` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, —Ç–∞–∫ –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
2. ‚úÖ `watch_obsidian.py` –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. ‚úÖ –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–∏–∑–º–µ–Ω–µ–Ω–∏–∏.md —Ñ–∞–π–ª–æ–≤ –≤ Obsidian ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –≤ –±–ª–æ–≥
4. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ç–µ–≥–æ–≤ –∏ wiki-—Å—Å—ã–ª–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üéØ –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É ‚Ññ2: –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:** –í –±–ª–æ–≥–µ —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –Ω–µ—Ç –ø–æ–∏—Å–∫–∞ –ø–æ —Å—Ç–∞—Ç—å—è–º.

**–ó–∞–¥–∞—á–∞:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É —Å—Ç–∞—Ç–µ–π.

## üîß –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–µ–º Django's built-in search

–î–ª—è MVP –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫, –∞ –Ω–µ —Å–ª–æ–∂–Ω—ã–µ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ä–µ—à–µ–Ω–∏—è.

### –®–∞–≥ 1: –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞

**–§–∞–π–ª:**`uch/apps/blog/views.py` (–¥–æ–±–∞–≤–∏—Ç—å)

python

```
from django.shortcuts import render
from django.db.models import Q
from .models import Article

def article_search(request):
    """–ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—å—è–º"""
    query = request.GET.get('q', '').strip()
    articles = []
    
    if query:
        # –ò—â–µ–º –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É, —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é –∏ —Ç–µ–≥–∞–º
        articles = Article.objects.filter(
            Q(title__icontains=query) |
            Q(content__icontains=query) |
            Q(tags__name__icontains=query)
        ).distinct().order_by('-created_at')
    
    context = {
        'query': query,
        'articles': articles,
        'search_count': len(articles),
    }
    
    return render(request, 'blog/article_search.html', context)
```

### –®–∞–≥ 2: –î–æ–±–∞–≤–ª—è–µ–º URL –¥–ª—è –ø–æ–∏—Å–∫–∞

**–§–∞–π–ª:**`uch/apps/blog/urls.py` (–¥–æ–±–∞–≤–∏—Ç—å)

python

```
from django.urls import path
from . import views

urlpatterns = [
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã ...
    path('search/', views.article_search, name='article_search'),
]
```

### –®–∞–≥ 3: –°–æ–∑–¥–∞–µ–º —à–∞–±–ª–æ–Ω –ø–æ–∏—Å–∫–∞

**–§–∞–π–ª:**`uch/apps/blog/templates/blog/article_search.html`

html

```
{% extends "base.html" %}

{% block title %}–ü–æ–∏—Å–∫ –ø–æ –±–ª–æ–≥—É | Universal Creative Hub{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mb-4">üîç –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—å—è–º</h1>
    
    <!-- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ -->
    <div class="card mb-4">
        <div class="card-body">
            <form method="get" action="{% url 'blog:article_search' %}" class="row g-2">
                <div class="col-md-10">
                    <input type="text" 
                           name="q" 
                           value="{{ query }}"
                           class="form-control form-control-lg" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å..." 
                           autofocus>
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary btn-lg w-100">
                        –ù–∞–π—Ç–∏
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ -->
    {% if query %}
        <div class="mb-4">
            <h4>
                {% if articles %}
                    –ù–∞–π–¥–µ–Ω–æ —Å—Ç–∞—Ç–µ–π: {{ search_count }}
                {% else %}
                    –ü–æ –∑–∞–ø—Ä–æ—Å—É "{{ query }}" –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
                {% endif %}
            </h4>
        </div>
        
        {% if articles %}
            <div class="row">
                {% for article in articles %}
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100">
                        {% if article.featured_image %}
                        <img src="{{ article.featured_image.url }}" 
                             class="card-img-top" 
                             alt="{{ article.title }}"
                             style="height: 200px; object-fit: cover;">
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title">{{ article.title }}</h5>
                            <p class="card-text text-muted small">
                                {{ article.created_at|date:"d.m.Y" }}
                                {% if article.tags.all %}
                                <br>
                                –¢–µ–≥–∏: 
                                {% for tag in article.tags.all|slice:":3" %}
                                <span class="badge bg-secondary">{{ tag.name }}</span>
                                {% endfor %}
                                {% endif %}
                            </p>
                            <a href="{% url 'blog:article_detail' article.slug %}" 
                               class="btn btn-outline-primary">
                                –ß–∏—Ç–∞—Ç—å
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="alert alert-info">
                <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ:</p>
                <ul>
                    <li>–ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å</li>
                    <li>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—é</li>
                    <li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞</li>
                </ul>
            </div>
        {% endif %}
    {% endif %}
</div>
{% endblock %}
```

### –®–∞–≥ 4: –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–∏—Å–∫ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é

**–§–∞–π–ª:**`uch/apps/blog/templates/base.html` (–¥–æ–±–∞–≤–∏—Ç—å –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é)

–ù–∞–π–¥–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é –∏ –¥–æ–±–∞–≤—å:

html

```
<!-- –ì–¥–µ-—Ç–æ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
<form class="d-flex" method="get" action="{% url 'blog:article_search' %}">
    <input class="form-control me-2" 
           type="search" 
           name="q"
           placeholder="–ü–æ–∏—Å–∫..." 
           aria-label="Search">
    <button class="btn btn-outline-success" type="submit">–ù–∞–π—Ç–∏</button>
</form>
```

### –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–æ–∏—Å–∫

bash

```
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
python manage.py check

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
python manage.py runserver
```

**–¢–µ—Å—Ç—ã –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**

1. –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ `http://localhost:8000/blog/search/`
2. –í–≤–µ–¥–∏ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—Ç–µ—Å—Ç")
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
4. –ü—Ä–æ–≤–µ—Ä—å –ø–æ–∏—Å–∫ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ `article_search` –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ `views.py`
- URL `/blog/search/` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `urls.py`
- –®–∞–±–ª–æ–Ω `article_search.html` —Å–æ–∑–¥–∞–Ω
- –§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é `base.html`
- –ü–æ–∏—Å–∫ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–≥–∞–º —Ä–∞–±–æ—Ç–∞–µ—Ç
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ü—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

## ‚è±Ô∏è –í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: ~30 –º–∏–Ω—É—Ç

**–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫:**

1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç ‚Ññ3: –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Å—Ç–∞—Ç–µ–π
2. –ò–ª–∏ –∫ –§–∞–∑–µ 2: –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–π —Å—Ç—É–¥–∏–µ–π

**–ü—Ä–∏—Å—Ç—É–ø–∞–π –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã - –ø–æ–∫–∞–∂–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ—à–∏–±–∫—É.**

–ü–æ–¥–æ–∂–¥–∏. –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç –∏ –Ω–∞ —Å–∞–π—Ç–µ —Ä–∞–±–æ—Ç–∞–µ—Ç. –£ –º–µ–Ω—è –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤ vscode –∑–∞–ø—É—â–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –∞ –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å? —ç—Ç–æ –≤—Å–µ–≥–¥–∞ 2 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏–ª–∏ –∫–∞–∫?

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞, –Ω—É–∂–Ω–æ **2 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞** (–∏–ª–∏ –≤–∫–ª–∞–¥–∫–∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞) –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

## üñ•Ô∏è –°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã

text

```
–¢–ï–†–ú–ò–ù–ê–õ 1: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian
python manage.py watch_obsidian /path/to/obsidian --author admin

–¢–ï–†–ú–ò–ù–ê–õ 2: Django —Å–µ—Ä–≤–µ—Ä
python manage.py runserver

–ë–†–ê–£–ó–ï–†: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
http://localhost:8000/blog/
```

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç –ê: 2 –≤–∫–ª–∞–¥–∫–∏ –≤ VS Code

1. **–û—Ç–∫—Ä–æ–π –ø–µ—Ä–≤—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞** –≤ VS Code
	bash
	```
	cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
	source venv/bin/activate
	python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
	```
2. **–û—Ç–∫—Ä–æ–π –≤—Ç–æ—Ä—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞** (Ctrl+Shift+ ` –∏–ª–∏ Cmd+Shift+`)
	bash
	```
	cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
	source venv/bin/activate
	python manage.py runserver
	```
3. **–û—Ç–∫—Ä–æ–π –±—Ä–∞—É–∑–µ—Ä** –Ω–∞ `http://localhost:8000/blog/`

### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ò—Å–ø–æ–ª—å–∑—É–π screen/tmux (–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ)

bash

```
# –£—Å—Ç–∞–Ω–æ–≤–∏ screen –µ—Å–ª–∏ –Ω–µ—Ç
# brew install screen  # macOS

# –°–æ–∑–¥–∞–µ–º —Å–µ—Å—Å–∏—é
screen -S uch

# –í–∫–ª–∞–¥–∫–∞ 1: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate
python manage.py watch_obsidian /path/to/obsidian --author admin

# Ctrl+A C - —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É
# –í–∫–ª–∞–¥–∫–∞ 2: –°–µ—Ä–≤–µ—Ä
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate
python manage.py runserver

# Ctrl+A N - –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏
# Ctrl+A D - –æ—Ç–∫–ª—é—á–∏—Ç—å—Å—è –æ—Ç —Å–µ—Å—Å–∏–∏
# screen -r uch - –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ —Å–µ—Å—Å–∏—é
```

### –í–∞—Ä–∏–∞–Ω—Ç –í: –§–æ–Ω–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π)

bash

```
# –í –æ–¥–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å–∫–∞–µ–º –æ–±–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤ —Ñ–æ–Ω–µ

# 1. –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ñ–æ–Ω–µ
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate
python manage.py watch_obsidian /path/to/obsidian --author admin > watch.log 2>&1 &

# 2. –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä –≤ —Ñ–æ–Ω–µ
python manage.py runserver > server.log 2>&1 &

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –æ–±–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
jobs
# [1]  + running    python manage.py watch_obsidian ...
# [2]  + running    python manage.py runserver

# 4. –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
tail -f watch.log

# 5. –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
tail -f server.log

# 6. –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å—ã
# fg 1  # –≤–µ—Ä–Ω—É—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ –ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω, –∑–∞—Ç–µ–º Ctrl+C
# fg 2  # –≤–µ—Ä–Ω—É—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–µ—Ä–µ–¥–Ω–∏–π –ø–ª–∞–Ω, –∑–∞—Ç–µ–º Ctrl+C
```

## üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. **–ó–∞–ø—É—Å—Ç–∏ –æ–±–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞** (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å–µ—Ä–≤–µ—Ä)
2. **–û—Ç–∫—Ä–æ–π –±–ª–æ–≥** –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8000/blog/`
3. **–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª** –≤ Obsidian (–ø–∞–ø–∫–∞ `posts`):
	markdown
	```
	---
	title: "–¢–µ—Å—Ç –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç–∞"
	date: 2025-12-09
	tags: [—Ç–µ—Å—Ç, –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç]
	---
	–≠—Ç–æ —Ç–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.
	```
4. **–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª** (Ctrl+S)
5. **–ù–∞–±–ª—é–¥–∞–π –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
	text
	```
	üÜï –°–æ–∑–¥–∞–Ω: –¢–µ—Å—Ç –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç–∞.md
	üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: –¢–µ—Å—Ç –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç–∞.md
	   üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –¢–µ—Å—Ç –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç–∞.md
	   ‚úÖ –°–æ–∑–¥–∞–Ω–æ: –¢–µ—Å—Ç –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç–∞
	‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: –¢–µ—Å—Ç –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç–∞.md
	```
6. **–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–ª–æ–≥–∞** (F5) - –Ω–æ–≤–∞—è —Å—Ç–∞—Ç—å—è –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:**

1. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–ø—É—â–µ–Ω –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. ‚úÖ –°–µ—Ä–≤–µ—Ä Django –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã
3. ‚úÖ –°—Ç–∞—Ç—å–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
4. ‚úÖ –ù–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ
5. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç–∞—Ç—å—è—Ö –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ

## üõ†Ô∏è –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

bash

```
# –û—Ç–∫—Ä–æ–π –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ –∏ –∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate
python manage.py runserver

# –í –±—Ä–∞—É–∑–µ—Ä–µ –ø–µ—Ä–µ–π–¥–∏ –Ω–∞ http://localhost:8000/blog/
# –í Obsidian —Å–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –ø–æ—è–≤–∏–ª–æ—Å—å —Å–æ–æ–±—â–µ–Ω–∏–µ
# –û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –±–ª–æ–≥–∞
```

## üìä –ß—Ç–æ –¥–∞–ª—å—à–µ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ï—Å–ª–∏ –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –º–æ–∂–Ω–æ:

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–æ–∏—Å–∫** (—Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. **–î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é** –¥–ª—è —Å–ø–∏—Å–∫–∞ —Å—Ç–∞—Ç–µ–π
3. **–ü–µ—Ä–µ–π—Ç–∏ –∫ –§–∞–∑–µ 2** \- —Ç–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ç—É–¥–∏—è

**–ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä –≤–æ –≤—Ç–æ—Ä–æ–π –≤–∫–ª–∞–¥–∫–µ –∏ –ø—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç–∞. –°–æ–æ–±—â–∏ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.**

–ê –≤–∞—Ä–∏–∞–Ω—Ç –≤–æ –≤—Ç–æ—Ä–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ: kirillkravcov@MacBook-Pro-Kirill UniversalCreativeHub % cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend source venv/bin/activate python manage.py runserver Traceback (most recent call last): File "manage.py", line 11, in main from django.core.management import execute\_from\_command\_line ModuleNotFoundError: No module named 'django' The above exception was the direct cause of the following exception: Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 13, in main raise ImportError( ImportError: Couldn't import Django. Are you sure it's installed and available on your PYTHONPATH environment variable? Did you forget to activate a virtual environment?

–û—à–∏–±–∫–∞: –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–±–ª–µ–º—É

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç–∏–≤–∞—Ü–∏—é –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

bash

```
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–µ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
which python
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/python

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ Django
pip list | grep Django
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: Django 4.2.7
```

### –®–∞–≥ 2: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è

bash

```
# –ï—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ, –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
echo $VIRTUAL_ENV
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Ç—å –∫ venv

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º Django –µ—Å–ª–∏ –Ω–µ—Ç
pip install django==4.2.7
```

### –®–∞–≥ 3: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫

–ï—Å–ª–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–ø—É—Å–∫–∞–µ–º –Ω–∞–ø—Ä—è–º—É—é:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ python –∏–∑ venv
./venv/bin/python manage.py runserver

# –í–∞—Ä–∏–∞–Ω—Ç 2: –£–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–Ω—ã–π –ø—É—Ç—å
/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/python manage.py runserver
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

bash

```
# –ü—Ä–æ–≤–µ—Ä—è–µ–º requirements.txt
cat requirements.txt

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
./venv/bin/pip install -r requirements.txt
```

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

bash

```
# –û—Ç–∫—Ä–æ–π –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏:
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source venv/bin/activate

# –£–±–µ–¥–∏–º—Å—è —á—Ç–æ Django —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
pip show django || pip install django==4.2.7

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
python manage.py runserver
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

- –ù–∞—Ö–æ–¥–∏–º—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `uch-backend`
- –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ (`(venv)` –≤ –ø—Ä–æ–º–ø—Ç–µ)
- Django —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (`pip list | grep Django`)
- Python –∏–∑ venv (`which python` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Ç—å –∫ venv)

## üí° –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `run_server.sh`:

bash

```
#!/bin/bash
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate
python manage.py runserver
```

–ò –∑–∞–ø—É—Å–∫–∞–π:

bash

```
chmod +x run_server.sh
./run_server.sh
```

**–ü–æ–ø—Ä–æ–±—É–π –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∑–∞–Ω–æ–≤–æ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä.**

–û–ø—è—Ç—å alias –ª–µ–∑–µ—Ç (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % which python python: aliased to /usr/bin/python3

–ü—Ä–æ–±–ª–µ–º–∞! –ü—Å–µ–≤–¥–æ–Ω–∏–º (alias) –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç python –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–π, –∞ –Ω–µ –Ω–∞ –≤–µ—Ä—Å–∏—é –∏–∑ venv. –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ, –Ω–æ alias –º–µ—à–∞–µ—Ç.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–±–ª–µ–º—É —Å alias

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å

bash

```
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è python –∏–∑ venv
ls -la venv/bin/python*

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª–Ω—ã–π –ø—É—Ç—å
/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/python --version

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –≤ venv –µ—Å—Ç—å Django
/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/python -c "import django; print(django.__version__)"
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞–ø—Ä—è–º—É—é

bash

```
# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–π –ø—É—Ç—å –∫ python –∏–∑ venv
/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/python manage.py runserver
```

### –®–∞–≥ 3: –£–±–∏—Ä–∞–µ–º alias –≤—Ä–µ–º–µ–Ω–Ω–æ

bash

```
# –û—Ç–∫–ª—é—á–∞–µ–º alias –¥–ª—è —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
unalias python

# –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ–º
which python
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/python

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
python manage.py runserver
```

### –®–∞–≥ 4: –ò—â–µ–º –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º alias

bash

```
# –ò—â–µ–º –≥–¥–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω alias
grep -r "alias python" ~/.zshrc ~/.bashrc ~/.bash_profile ~/.zprofile ~/.config/ 2>/dev/null

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã
cat ~/.zshrc | grep -i "alias python"
cat ~/.bash_profile | grep -i "alias python"
```

## üöÄ –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `run.sh`:

bash

```
#!/bin/bash
# run.sh - –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ Django

cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä—è–º–æ–π –ø—É—Ç—å –∫ python –∏–∑ venv
./venv/bin/python manage.py runserver
```

–î–µ–ª–∞–µ–º –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º:

bash

```
chmod +x run.sh
./run.sh
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ venv —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:**
	bash
	```
	ls -la /Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/python*
	```
2. **–ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞–ø—Ä—è–º—É—é:**
	bash
	```
	cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
	./venv/bin/python manage.py runserver
	```
3. **–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Å–æ–∑–¥–∞–π alias –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏:**
	bash
	```
	alias python="/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/python"
	```

## üí° –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤—å –≤ `~/.zshrc` (–∏–ª–∏ `~/.bash_profile`):

bash

```
# –í –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ –¥–æ–±–∞–≤—å:
alias python="/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/python"
alias pip="/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/pip"
```

–ò–ª–∏ –ª—É—á—à–µ: —É–¥–∞–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π alias –∏ –ø–æ–∑–≤–æ–ª—å venv —É–ø—Ä–∞–≤–ª—è—Ç—å python:

bash

```
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π ~/.zshrc
nano ~/.zshrc

# –ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É —Å "alias python=" –∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π –µ—ë:
# alias python="/usr/bin/python3"
```

## ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

bash

```
# –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞–ø—Ä—è–º—É—é
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
./venv/bin/python manage.py runserver

# –í –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
./venv/bin/python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
```

**–ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ –ø—Ä—è–º–æ–π –ø—É—Ç—å –∫ python –∏–∑ venv –∏ —Å–æ–æ–±—â–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.**

–£–±—Ä–∞–ª –∞–ª–∏–∞—Å —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è. –ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å–∞–π—Ç–µ - –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –º–µ–Ω—è—é –∑–∞–º–µ—Ç–∫—É –≤ obsidian, –≤–∏–∂—É —á—Ç–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ watchdog –∏–º–ø–æ—Ä—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤–∫–ª—é—á–∞—è –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∞ –Ω–∞ —Å–∞–π—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω–æ–≤—å —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ untitled

–û—Ç–ª–∏—á–Ω–æ! –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω. –¢–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä–µ–º –ø—Ä–æ–±–ª–µ–º—É —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π.

## üîç –ü—Ä–æ–±–ª–µ–º–∞: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Obsidian –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–∞ —Å–∞–π—Ç–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞** \- –±—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
2. **Django –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** \- —à–∞–±–ª–æ–Ω—ã –∏–ª–∏ –∑–∞–ø—Ä–æ—Å—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è
3. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è** \- CSS/JS –∫—ç—à
4. **–ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∑–∞–ø–∏—Å–∏ –≤ –ë–î** \- –∏–º–ø–æ—Ä—Ç –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—è

## üß™ –ü–æ—à–∞–≥–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º –ë–î –Ω–∞–ø—Ä—è–º—É—é

bash

```
# –û—Ç–∫—Ä–æ–π –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–ø–∏—Å–∏ –≤ –ë–î
python manage.py shell
```

–í –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –æ–±–æ–ª–æ—á–∫–µ:

python

```
from uch.apps.blog.models import Article
import datetime

# –°–º–æ—Ç—Ä–∏–º –≤—Å–µ —Å—Ç–∞—Ç—å–∏
articles = Article.objects.all()
for a in articles:
    print(f"{a.id}: {a.title} (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: {a.updated_at})")

# –ò—â–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç–∞—Ç—å—é
article = Article.objects.filter(title__icontains="untitled").first()
if article:
    print(f"\n–°—Ç–∞—Ç—å—è '{article.title}':")
    print(f"–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: {article.content[:200]}...")
    print(f"–û–±–Ω–æ–≤–ª–µ–Ω–∞: {article.updated_at}")
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ –∏–º–ø–æ—Ä—Ç–∞

–í –∫–æ–Ω—Å–æ–ª–∏ —Å `watch_obsidian` –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤–∏–¥–Ω–æ:

text

```
üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
```

–ï—Å–ª–∏ –≤–∏–¥–∏—à—å `‚úÖ –°–æ–∑–¥–∞–Ω–æ`, –∑–Ω–∞—á–∏—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –∑–∞–ø–∏—Å—å, –∞ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä --update-existing

–í `watch_obsidian.py` —É–±–µ–¥–∏—Å—å, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –∏–º–ø–æ—Ä—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å `--update-existing`:

python

```
# –í —Ñ—É–Ω–∫—Ü–∏–∏ import_file, —Å—Ç—Ä–æ–∫–∞ —Å subprocess.run –¥–æ–ª–∂–Ω–∞ –≤–∫–ª—é—á–∞—Ç—å:
'--update-existing'
```

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–±–ª–µ–º—É

### –†–µ—à–µ–Ω–∏–µ 1: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞

1. **–û—Ç–∫—Ä–æ–π DevTools** (F12)
2. **–ü–µ—Ä–µ–π–¥–∏ –≤ Network –≤–∫–ª–∞–¥–∫—É**
3. **–ü–æ—Å—Ç–∞–≤—å –≥–∞–ª–æ—á–∫—É "Disable cache"**
4. **–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (Ctrl+F5 –∏–ª–∏ Cmd+Shift+R)

### –†–µ—à–µ–Ω–∏–µ 2: –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ import\_obsidian.py

–£–±–µ–¥–∏—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `update_or_create`:

python

```
# –í import_obsidian.py, –≤ —Ñ—É–Ω–∫—Ü–∏–∏ handle, –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
article, created = Article.objects.update_or_create(
    slug=slug,
    defaults=defaults
)
```

### –†–µ—à–µ–Ω–∏–µ 3: –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –≤—ã–≤–æ–¥

–î–æ–±–∞–≤—å –≤ `watch_obsidian.py` –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥:

python

```
def import_file(self, filepath):
    """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É"""
    try:
        print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath.name}")
        print(f"üîß –ü–æ–ª–Ω—ã–π –ø—É—Ç—å: {filepath}")
        
        # –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ–º —Å–∞–º —Ñ–∞–π–ª (–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é)
        result = subprocess.run([
            sys.executable, 'manage.py', 
            'import_obsidian', 
            str(filepath),
            '--author', self.author,
            '--update-existing'
        ], 
        cwd=self.project_root,
        capture_output=True,
        text=True,
        timeout=30)
        
        # –í—ã–≤–æ–¥–∏–º –í–ï–°–¨ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        print("=" * 60)
        print("–°–¢–ê–ù–î–ê–†–¢–ù–´–ô –í–´–í–û–î:")
        print(result.stdout)
        print("\n–û–®–ò–ë–ö–ò:")
        print(result.stderr)
        print("=" * 60)
        
        # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥
```

### –†–µ—à–µ–Ω–∏–µ 4: –ü—Ä–æ–≤–µ—Ä—è–µ–º slug (–∫–ª—é—á–µ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞!)

–°–∞–º–∞—è –≤–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞: **—Ä–∞–∑–Ω—ã–µ slug –¥–ª—è –æ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–∏**.

python

```
# –í python manage.py shell –ø—Ä–æ–≤–µ—Ä—å:
from django.utils.text import slugify

title = "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞"
print(f"Slug –æ—Ç '{title}': {slugify(title)}")

# –°—Ä–∞–≤–Ω–∏ —Å —Ç–µ–º, —á—Ç–æ –≤ –ë–î
```

## üìã –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

1. **–°–æ–∑–¥–∞–π –∑–∞–º–µ—Ç–∫—É –≤ Obsidian** —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º "–¢–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è 123"
2. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π –µ—ë**, –¥–æ–±–∞–≤—å –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç
3. **–ü–æ—Å–º–æ—Ç—Ä–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ `watch_obsidian`** \- –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ`
4. **–ü—Ä–æ–≤–µ—Ä—å –≤ –ë–î:**
	bash
	```
	python manage.py shell
	```
	python
	```
	from uch.apps.blog.models import Article
	article = Article.objects.get(title="–¢–µ—Å—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è 123")
	print(article.content)
	print(f"–û–±–Ω–æ–≤–ª–µ–Ω–∞: {article.updated_at}")
	```
5. **–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Å Ctrl+F5**

## üöÄ –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —à–∞–±–ª–æ–Ω:

html

```
<!-- –í base.html –≤ —Å–µ–∫—Ü–∏–∏ head –¥–æ–±–∞–≤—å: -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">
```

**–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ `slug` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–º–ø–æ—Ä—Ç–µ.

**–ü—Ä–æ–≤–µ–¥–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∏ –ø–æ–∫–∞–∂–∏:**

1. –í—ã–≤–æ–¥ `watch_obsidian` –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞
2. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î
3. –ß—Ç–æ –≤–∏–¥–∏—à—å –Ω–∞ —Å–∞–π—Ç–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

—à–∞–≥ 1 venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py shell ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media Python 3.8.9 (default, May 17 2022, 12:55:41) \[Clang 13.1.6 (clang-1316.0.21.2.5)\] on darwin Type "help", "copyright", "credits" or "license" for more information. (InteractiveConsole) >>> from uch.apps.blog.models import Article >>> import datetime >>> >>> # –°–º–æ—Ç—Ä–∏–º –≤—Å–µ —Å—Ç–∞—Ç—å–∏ >>> articles = Article.objects.all() >>> for a in articles:... print(f"{a.id}: {a.title} (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: {a.updated\_at})")... # –ò—â–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç–∞—Ç—å—é article = Article.objects.filter(title\_\_icontains="untitled").first() if article: 31: Untitled (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10 07:13:37.653699+00:00) 30: test (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10 07:04:34.572653+00:00) 29: test-auto-import2 (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10 06:48:51.120738+00:00) 28: –¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10 06:48:51.075029+00:00) 27: –¢–µ—Å—Ç –ø—É—Ç–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10 06:48:51.050196+00:00) 26: –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-09 11:35:52.488898+00:00) 16: deploy-test (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10 06:48:51.058412+00:00) 23: –¢–µ—Å—Ç –ø—É—Ç–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-09 11:35:52.461649+00:00) 25: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-09 11:35:52.366686+00:00) 24: –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-09 11:10:58.064547+00:00) 22: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-09 11:10:57.933436+00:00) 21: –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-09 08:35:35.547283+00:00) 20: –¢–µ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-09 08:35:35.537287+00:00) 18: –¢–µ—Å—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-09 08:35:35.511241+00:00) 19: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-09 08:35:35.425571+00:00) 14: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10 07:14:17.644007+00:00) 13: first-note (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10 07:03:58.151043+00:00) 12: second-note (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-08 16:31:49.366074+00:00) 10: strapi\_tkn (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-08 16:28:15.375016+00:00) 8: –¢–µ—Å—Ç markdown (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-08 15:46:03.419130+00:00) 7: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-08 15:00:33.606940+00:00) 6: –û—Å–Ω–æ–≤—ã —Ä–∞–±–æ—Ç—ã —Å Django (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-08 15:00:33.573662+00:00) 5: –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Universal Creative Hub (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-08 15:00:33.532166+00:00) print(f"\\n–°—Ç–∞—Ç—å—è '{article.title}':") print9: –ú–æ–π –ø–µ—Ä–≤—ã–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-08 16:28:15.322149+00:00) 3: –ü—Ä–∏–Ω—Ü–∏–ø—ã –¥–∏–∑–∞–π–Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-07 13:30:15.270813+00:00) 2: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —è–¥—Ä–∞-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-07 13:29:18.457588+00:00) 1: –ú–æ–π –ø–µ—Ä–≤—ã–π –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-07 13:27:19.455111+00:00) 17: –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10 06:48:51.148397+00:00) 15: –¢–µ—Å—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-10 06:48:51.039493+00:00) 11: –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç –∏–∑ GitHub Actions (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-08 16:28:15.390891+00:00) 4: –ü—Ä–∏–≤–µ—Ç, Universal Creative Hub! (–æ–±–Ω–æ–≤–ª–µ–Ω–æ: 2025-12-08 14:52:18.095251+00:00) >>> # –ò—â–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç–∞—Ç—å—é >>> article = Article.objects.filter(title\_\_icontains="untitled").first() >>> if article:... print(f"\\n–°—Ç–∞—Ç—å—è '{article.title}':")... print(f"–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: {article.content\[:200\]} –®–∞–≥ 2 (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py watch\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ üÜï –°–æ–∑–¥–∞–Ω: first-note.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: first-note.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: first-note.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: first-note ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: first-note.md üìù –ò–∑–º–µ–Ω–µ–Ω: test.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: test.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: test ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: test.md üìù –ò–∑–º–µ–Ω–µ–Ω: test.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: test.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: test ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: test.md üìù –ò–∑–º–µ–Ω–µ–Ω: test.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: test.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: test ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: test.md üìù –ò–∑–º–µ–Ω–µ–Ω: test.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: test.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: test ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: test.md üÜï –°–æ–∑–¥–∞–Ω: Untitled.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: Untitled.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: Untitled.md ‚úÖ –°–æ–∑–¥–∞–Ω–æ: Untitled ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: Untitled.md üìù –ò–∑–º–µ–Ω–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üÜï –°–æ–∑–¥–∞–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìù –ò–∑–º–µ–Ω–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üÜï –°–æ–∑–¥–∞–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìù –ò–∑–º–µ–Ω–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üÜï –°–æ–∑–¥–∞–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìù –ò–∑–º–µ–Ω–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìù –ò–∑–º–µ–Ω–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ ‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: –ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞.md –®–∞–≥ 3 def import\_file(self, filepath): """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É""" try: print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath.name}") # –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ–º —Å–∞–º —Ñ–∞–π–ª (–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é) result = subprocess.run(\[ sys.executable, 'manage.py', 'import\_obsidian', str(filepath), '--author', self.author, '--update-existing' \], —Ä–µ—à–µ–Ω–∏–µ 4 # –í python manage.py shell –ø—Ä–æ–≤–µ—Ä—å:... from django.utils.text import slugify File "<console>", line 6 from django.utils.text import slugify ^ SyntaxError: invalid syntax >>> >>> title = "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞" >>> print(f"Slug –æ—Ç '{title}': {slugify(title)}") # –°—Ä–∞–≤–Ω–∏ —Å —Ç–µ–º, —á—Ç–æ –≤ –ë–îTraceback (most recent call last): File "<console>", line 1, in <module> NameError: name 'slugify' is not defined >>> >>> # –°—Ä–∞–≤–Ω–∏ —Å —Ç–µ–º, —á—Ç–æ –≤ –ë–î >>> # –í python manage.py shell –ø—Ä–æ–≤–µ—Ä—å: >>> from django.utils.text import slugify >>> >>> title = "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞" >>> print(f"Slug –æ—Ç '{title}': {slugify(title)}") Slug –æ—Ç '–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞': >>> >>> # –°—Ä–∞–≤–Ω–∏ —Å —Ç–µ–º, —á—Ç–æ –≤ –ë–î

–ü—Ä–æ–±–ª–µ–º–∞ —è—Å–Ω–∞! **Slug –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø—É—Å—Ç—ã–º** –¥–ª—è —Ä—É—Å—Å–∫–∏—Ö –Ω–∞–∑–≤–∞–Ω–∏–π, –ø–æ—ç—Ç–æ–º—É –∫–∞–∂–¥–∞—è —Å—Ç–∞—Ç—å—è —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞–∫ –Ω–æ–≤–∞—è (–∏–ª–∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è).

## üîç –ü—Ä–æ–±–ª–µ–º–∞:

`slugify("–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞")` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –¥–ª—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã.

## üîß –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–µ–º slugify —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

python

```
# –í python manage.py shell
from django.utils.text import slugify

# –¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
test_titles = [
    "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞",
    "Test English",
    "–¢–µ—Å—Ç123",
    "–ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞"
]

for title in test_titles:
    slug = slugify(title)
    print(f"'{title}' -> '{slug}'")
```

### –®–∞–≥ 2: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–∏—Ä–∏–ª–ª–∏—Ü—ã

Django's `slugify` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–¥–∞–ª—è–µ—Ç –Ω–µ-ASCII —Å–∏–º–≤–æ–ª—ã. –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `allow_unicode` –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `python-slugify`.

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ò—Å–ø–æ–ª—å–∑—É–µ–º `allow_unicode=True` (Django 3.0+)**

python

```
# –í import_obsidian.py –∑–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ slugify(title) –Ω–∞:
slug = slugify(title, allow_unicode=True)
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º `python-slugify` (–ª—É—á—à–µ)**

bash

```
pip install python-slugify[unidecode]
```

### –®–∞–≥ 3: –ò—Å–ø—Ä–∞–≤–ª—è–µ–º import\_obsidian.py

–ù–∞–π–¥–∏ –≤—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `slugify` –≤ —Ñ–∞–π–ª–µ –∏ –∑–∞–º–µ–Ω–∏:

python

```
# –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ –¥–æ–±–∞–≤—å –∏–º–ø–æ—Ä—Ç
from slugify import slugify  # python-slugify
# –ò–õ–ò –∏—Å–ø–æ–ª—å–∑—É–π django —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º
from django.utils.text import slugify as django_slugify

# –ó–∞—Ç–µ–º –≤ –∫–æ–¥–µ –∑–∞–º–µ–Ω–∏ –≤—Å–µ slugify() –Ω–∞:
def create_slug(text):
    """–°–æ–∑–¥–∞–µ—Ç slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã"""
    # –í–∞—Ä–∏–∞–Ω—Ç —Å python-slugify
    return slugify(text, allow_unicode=True)
    
    # –ò–ª–∏ —Å Django
    # return django_slugify(text, allow_unicode=True)
```

### –®–∞–≥ 4: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å

–û—Ç–∫—Ä–æ–π `import_obsidian.py` –∏ –Ω–∞–π–¥–∏ —Å—Ç—Ä–æ–∫–∏ —Å `slugify`. –ó–∞–º–µ–Ω–∏:

python

```
# –ù–ê–ô–î–ò –≠–¢–£ –°–¢–†–û–ö–£ (–æ–∫–æ–ª–æ 140-150 —Å—Ç—Ä–æ–∫–∏):
slug = slugify(title)

# –ò –ó–ê–ú–ï–ù–ò –ù–ê:
try:
    # –ü—Ä–æ–±—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    from slugify import slugify as better_slugify
    slug = better_slugify(title, allow_unicode=True)
except ImportError:
    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
    slug = slugify(title, allow_unicode=True)

if not slug:
    # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
    slug = slugify(md_file.stem, allow_unicode=True)
```

### –®–∞–≥ 5: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º python-slugify

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate
pip install python-slugify[unidecode]
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

python

```
# –í python manage.py shell
from slugify import slugify

titles = [
    "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞",
    "–ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞", 
    "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è"
]

for title in titles:
    print(f"'{title}' -> '{slugify(title, allow_unicode=True)}'")
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

text

```
'–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞' -> 'testovaya-zametka'
'–ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞' -> 'pervyj-test-rabotayushchego-importa'
'–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è' -> 'funkcionalnye-trebovaniya'
```

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏ `python-slugify`:**
	bash
	```
	pip install python-slugify[unidecode]
	```
2. **–ò—Å–ø—Ä–∞–≤—å `import_obsidian.py`** \- –∑–∞–º–µ–Ω–∏ `slugify(title)` –Ω–∞ –≤–µ—Ä—Å–∏—é —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
3. **–ü—Ä–æ–≤–µ—Ä—å —Ä–∞–±–æ—Ç—É:**
	bash
	```
	python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test.md --author admin --update-existing
	```
4. **–¢–µ—Å—Ç–∏—Ä—É–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** \- —Ç–µ–ø–µ—Ä—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è

## ‚ö†Ô∏è –í–∞–∂–Ω–æ:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è slug, **—Å—Ç–∞—Ä—ã–µ —Å—Ç–∞—Ç—å–∏ —Å –ø—É—Å—Ç—ã–º–∏ slug –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã**. –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ—á–∏—Å—Ç–∏—Ç—å –ë–î –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏.

**–£—Å—Ç–∞–Ω–æ–≤–∏ `python-slugify` –∏ –∏—Å–ø—Ä–∞–≤—å –∫–æ–¥, –∑–∞—Ç–µ–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π.**

—Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ shell... # –í python manage.py shell –ø—Ä–æ–≤–µ—Ä—å:... from django.utils.text import slugify File "<console>", line 6 from django.utils.text import slugify ^ SyntaxError: invalid syntax >>> >>> title = "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞" >>> print(f"Slug –æ—Ç '{title}': {slugify(title)}") # –°—Ä–∞–≤–Ω–∏ —Å —Ç–µ–º, —á—Ç–æ –≤ –ë–îTraceback (most recent call last): File "<console>", line 1, in <module> NameError: name 'slugify' is not defined >>> >>> # –°—Ä–∞–≤–Ω–∏ —Å —Ç–µ–º, —á—Ç–æ –≤ –ë–î >>> # –í python manage.py shell –ø—Ä–æ–≤–µ—Ä—å: >>> from django.utils.text import slugify >>> >>> title = "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞" >>> print(f"Slug –æ—Ç '{title}': {slugify(title)}") Slug –æ—Ç '–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞': >>> >>> # –í python manage.py shell >>> from django.utils.text import slugify >>> >>> # –¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ >>> test\_titles = \[... "–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞",... "Test English",... "–¢–µ—Å—Ç123",... "–ü–µ—Ä–≤—ã–π —Ç–µ—Å—Ç —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∞"... \] >>> >>> for title in test\_titles:... slug = slugify(title)... print(f"'{title}' -> '{slug}'")

–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞! `slugify()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É –¥–ª—è –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –∫–∞–∂–¥–∞—è —Å—Ç–∞—Ç—å—è –∏–º–µ–µ—Ç –ø—É—Å—Ç–æ–π slug, –∏ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –¥—É–±–ª–∏–∫–∞—Ç—ã –≤–º–µ—Å—Ç–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

## üîß –†–µ—à–µ–Ω–∏–µ: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º python-slugify –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–¥

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º python-slugify

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate
pip install python-slugify[unidecode]
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É

bash

```
python -c "from slugify import slugify; print(slugify('–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞', allow_unicode=True))"
# –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: testovaya-zametka
```

### –®–∞–≥ 3: –ò—Å–ø—Ä–∞–≤–ª—è–µ–º import\_obsidian.py

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª –∏ –Ω–∞–π–¥–∏ —Ñ—É–Ω–∫—Ü–∏—é `handle` (–∏–ª–∏ –º–µ—Å—Ç–æ –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è slug). –ü—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 140-160.

**–ó–∞–º–µ–Ω–∏ –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è slug:**

python

```
# –ù–ê–ô–î–ò –≠–¢–û–¢ –ö–û–î (–ø—Ä–∏–º–µ—Ä–Ω–æ):
slug = slugify(title)
if not slug:
    slug = slugify(md_file.stem)

# –ó–ê–ú–ï–ù–ò –ù–ê:
try:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
    from slugify import slugify as better_slugify
    slug = better_slugify(title, allow_unicode=True)
except ImportError:
    # Fallback –Ω–∞ Django slugify —Å allow_unicode
    slug = slugify(title, allow_unicode=True)

# –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ), –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
if not slug or slug == '':
    try:
        slug = better_slugify(md_file.stem, allow_unicode=True)
    except:
        slug = slugify(md_file.stem, allow_unicode=True)
```

### –®–∞–≥ 4: –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–≤–µ—Å—å –±–ª–æ–∫)

–ù–∞–π–¥–∏ –≤ `import_obsidian.py` –≤–µ—Å—å –±–ª–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ slug (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 140-180). –î–æ–ª–∂–Ω–æ –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

python

```
# –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
                try:
                    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                    from slugify import slugify as better_slugify
                    slug = better_slugify(title, allow_unicode=True)
                except ImportError:
                    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
                    slug = slugify(title, allow_unicode=True)
                
                # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                if not slug or slug == '':
                    try:
                        slug = better_slugify(md_file.stem, allow_unicode=True)
                    except:
                        slug = slugify(md_file.stem, allow_unicode=True)
```

### –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

bash

```
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test.md --author admin --update-existing

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ" –∞ –Ω–µ "‚úÖ –°–æ–∑–¥–∞–Ω–æ"
```

### –®–∞–≥ 6: –û—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è slug –º–æ–≥—É—Ç –ø–æ—è–≤–∏—Ç—å—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã. –ü—Ä–æ–≤–µ—Ä–∏–º –¥—É–±–ª–∏–∫–∞—Ç—ã:

python

```
# –í python manage.py shell
from uch.apps.blog.models import Article

# –ù–∞—Ö–æ–¥–∏–º —Å—Ç–∞—Ç—å–∏ —Å –ø—É—Å—Ç—ã–º slug
empty_slug_articles = Article.objects.filter(slug='')
print(f"–°—Ç–∞—Ç–µ–π —Å –ø—É—Å—Ç—ã–º slug: {empty_slug_articles.count()}")

# –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ slug –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç–∞—Ç–µ–π
for article in empty_slug_articles:
    try:
        from slugify import slugify as better_slugify
        article.slug = better_slugify(article.title, allow_unicode=True)
    except:
        article.slug = slugify(article.title, allow_unicode=True)
    
    # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º ID
    if not article.slug:
        article.slug = f'article-{article.id}'
    
    article.save()
    print(f"–û–±–Ω–æ–≤–ª–µ–Ω slug –¥–ª—è '{article.title}': {article.slug}")
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `python-slugify[unidecode]`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–¥ –≤ `import_obsidian.py`
- –ò–º–ø–æ—Ä—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ` –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç–∞—Ç–µ–π
- –ù–æ–≤—ã–µ slug —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (testovaya-zametka –≤–º–µ—Å—Ç–æ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏)
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Obsidian –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ

## ‚ö†Ô∏è –í–∞–∂–Ω–æ!

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è **–≤—Å–µ –Ω–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏ –±—É–¥—É—Ç –∏–º–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ slug**, –Ω–æ —Å—Ç–∞—Ä—ã–µ —Å—Ç–∞—Ç—å–∏ —Å –ø—É—Å—Ç—ã–º–∏ slug –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ä—É—á–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.

**–£—Å—Ç–∞–Ω–æ–≤–∏ python-slugify –∏ –≤–Ω–µ—Å–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥, –∑–∞—Ç–µ–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π.**

–®–∞–≥ 2 (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python -c "from slugify import slugify; print(slugify('–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞', allow\_unicode=True))" —Ç–µ—Å—Ç–æ–≤–∞—è-–∑–∞–º–µ—Ç–∫–∞

–û—Ç–ª–∏—á–Ω–æ! `python-slugify` —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –∫–∏—Ä–∏–ª–ª–∏—Ü—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ: `—Ç–µ—Å—Ç–æ–≤–∞—è-–∑–∞–º–µ—Ç–∫–∞`.

## üîß –®–∞–≥ 3-4: –ò—Å–ø—Ä–∞–≤–ª—è–µ–º import\_obsidian.py

–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥. –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª –∏ –Ω–∞–π–¥–∏ –º–µ—Å—Ç–æ –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è slug. –≠—Ç–æ –ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 140-160.

**–ù–∞–π–¥–∏ —ç—Ç–æ—Ç –∫–æ–¥:**

python

```
# –°–æ–∑–¥–∞–µ–º slug
slug = slugify(title)
if not slug:
    slug = slugify(md_file.stem)
```

**–ò –∑–∞–º–µ–Ω–∏ –Ω–∞:**

python

```
# –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
try:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    from slugify import slugify as better_slugify
    slug = better_slugify(title, allow_unicode=True)
except ImportError:
    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
    slug = slugify(title, allow_unicode=True)

# –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
if not slug or slug == '':
    try:
        slug = better_slugify(md_file.stem, allow_unicode=True)
    except:
        slug = slugify(md_file.stem, allow_unicode=True)
```

## üß™ –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

bash

```
# –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º —Ñ–∞–π–ª–µ
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test.md --author admin --update-existing
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

text

```
üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test.md
üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: test
```

## üìã –ï—Å–ª–∏ –≤–∏–¥–∏—à—å "‚úÖ –°–æ–∑–¥–∞–Ω–æ" –≤–º–µ—Å—Ç–æ "üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ"

–ó–Ω–∞—á–∏—Ç slug –≤—Å—ë –µ—â–µ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç. –ü—Ä–æ–≤–µ—Ä–∏–º:

python

```
# –í python manage.py shell
from slugify import slugify as better_slugify

# –ü—Ä–æ–≤–µ—Ä—è–µ–º slug –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç–∞—Ç–µ–π
from uch.apps.blog.models import Article

article = Article.objects.get(title="test")
print(f"–¢–µ–∫—É—â–∏–π slug: '{article.slug}'")
print(f"–ù–æ–≤—ã–π slug: '{better_slugify('test', allow_unicode=True)}'")
```

## üîÑ –®–∞–≥ 6: –û—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

–ü–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ–º –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏ —Å –ø—É—Å—Ç—ã–º–∏ slug:

python

```
# –í python manage.py shell –≤—ã–ø–æ–ª–Ω–∏:
from uch.apps.blog.models import Article
from slugify import slugify as better_slugify

# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ —Å—Ç–∞—Ç—å–∏ —Å –ø—É—Å—Ç—ã–º –∏–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º slug
for article in Article.objects.all():
    old_slug = article.slug
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—ã–π slug
    if not old_slug or old_slug == '':
        new_slug = better_slugify(article.title, allow_unicode=True)
        
        # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ (–º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ)
        if not new_slug or new_slug == '':
            new_slug = f'article-{article.id}'
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
        counter = 1
        original_slug = new_slug
        while Article.objects.filter(slug=new_slug).exclude(id=article.id).exists():
            new_slug = f'{original_slug}-{counter}'
            counter += 1
        
        # –û–±–Ω–æ–≤–ª—è–µ–º
        article.slug = new_slug
        article.save()
        print(f"–û–±–Ω–æ–≤–ª–µ–Ω slug –¥–ª—è '{article.title}': {old_slug} -> {new_slug}")
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –≤—Å–µ–≥–æ –ø–∞–π–ø–ª–∞–π–Ω–∞

1. **–ò—Å–ø—Ä–∞–≤—å –∫–æ–¥** –≤ `import_obsidian.py`
2. **–ó–∞–ø—É—Å—Ç–∏ –æ—á–∏—Å—Ç–∫—É slug** (–∫–æ–¥ –≤—ã—à–µ)
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
	bash
	```
	python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
	```
4. **–í –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–µ –∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä:**
	bash
	```
	python manage.py runserver
	```
5. **–í Obsidian –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∑–∞–º–µ—Ç–∫—É**
6. **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤ –∫–æ–Ω—Å–æ–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
	- –í–∏–¥–∏—à—å `üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: –ù–∞–∑–≤–∞–Ω–∏–µ`
	- –ù–µ –≤–∏–¥–∏—à—å `‚úÖ –°–æ–∑–¥–∞–Ω–æ: –ù–∞–∑–≤–∞–Ω–∏–µ` (–¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ç–∞—Ç—å–∏)
7. **–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ** \- –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- `python-slugify` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ö–æ–¥ –≤ `import_obsidian.py` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ slug (–Ω–µ –ø—É—Å—Ç—ã–µ)
- –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞ –≤ Obsidian –≤–∏–¥–Ω–æ `üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ`
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–í–Ω–µ—Å–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π.**

–Ω–µ —Ç–æ—Ä–æ–ø–∏—Å—å: —É –º–µ–Ω—è —à–∞–≥ 3-4 # –ü—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å slug –∏–∑ –ø—É—Ç–∏ slug = slugify(link\_path) return f'<a href="/blog/{slug}/" class="wiki-link">{display\_text}</a>' pattern = r'\\\[\\\[(\[^\\\]\]+)\\\]\\\]' return re.sub(pattern, replace\_link, content)

–ü–æ–Ω—è–ª! –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ **–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ** –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è slug –¥–ª—è —Å—Ç–∞—Ç—å–∏, –∞ –Ω–µ –¥–ª—è wiki-—Å—Å—ã–ª–æ–∫.

## üîç –ò—â–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è slug —Å—Ç–∞—Ç—å–∏

–í —Ñ–∞–π–ª–µ `import_obsidian.py` –∏—â–µ–º:

1. **–°–æ–∑–¥–∞–Ω–∏–µ slug –¥–ª—è —Å—Ç–∞—Ç—å–∏** (–≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ü–∏–∫–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤)
2. **–≠—Ç–æ –î–û–õ–ñ–ù–û –±—ã—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `handle`**, –ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –ø–µ—Ä–µ–¥ `Article.objects.update_or_create`

**–ò—â–∏ —Ç–∞–∫–æ–π –∫–æ–¥:**

python

```
# –°–æ–∑–¥–∞–µ–º slug
slug = slugify(title)
if not slug:
    slug = slugify(md_file.stem)
```

–ò–ª–∏:

python

```
# –ü—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å slug
slug = slugify(title) or slugify(md_file.stem)
```

**–û–Ω –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–¥ —ç—Ç–∏–º:**

python

```
# –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—å—é
defaults = {
    'title': title,
    'content': content,
    # ...
}

article, created = Article.objects.update_or_create(
    slug=slug,  # ‚Üê –í–û–¢ –ó–î–ï–°–¨ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø SLUG!
    defaults=defaults
)
```

## üìç –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —ç—Ç–æ –≤ —Ä–∞–π–æ–Ω–µ —Å—Ç—Ä–æ–∫ 140-160

–î–∞–≤–∞–π –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —É—á–∞—Å—Ç–æ–∫:

bash

```
# –ü–æ–∫–∞–∂–∏ —Å—Ç—Ä–æ–∫–∏ 130-170
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
sed -n '130,170p' uch/apps/blog/management/commands/import_obsidian.py
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–∫–æ–≥–¥–∞ –Ω–∞–π–¥–µ—à—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ)

**–ö–æ–≥–¥–∞ –Ω–∞–π–¥–µ—à—å —Å—Ç—Ä–æ–∫—É —Å `slug = slugify(title)`**, –∑–∞–º–µ–Ω–∏ –µ–µ –Ω–∞:

python

```
# –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
try:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    from slugify import slugify as better_slugify
    slug = better_slugify(title, allow_unicode=True)
except ImportError:
    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
    slug = slugify(title, allow_unicode=True)

# –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
if not slug or slug == '':
    try:
        slug = better_slugify(md_file.stem, allow_unicode=True)
    except:
        slug = slugify(md_file.stem, allow_unicode=True)
```

## üéØ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ: –ü–æ–∫–∞–∂–∏ –º–Ω–µ —Ç–æ—á–Ω—ã–π –∫–æ–¥

–í—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—É —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ —Ç–æ—á–Ω–æ–µ –º–µ—Å—Ç–æ:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
grep -n "slug = slugify" uch/apps/blog/management/commands/import_obsidian.py
```

–ò–ª–∏ –ø–æ–∫–∞–∂–∏ –º–Ω–µ —Å—Ç—Ä–æ–∫–∏ 130-180 —Ñ–∞–π–ª–∞, —á—Ç–æ–±—ã —è —Ç–æ—á–Ω–æ —É–∫–∞–∑–∞–ª —á—Ç–æ –º–µ–Ω—è—Ç—å.

**–ü–æ–∫–∞–∂–∏ –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã `grep` –∏–ª–∏ —É—á–∞—Å—Ç–æ–∫ –∫–æ–¥–∞ 130-180 —Å—Ç—Ä–æ–∫, –∏ —è —É–∫–∞–∂—É —Ç–æ—á–Ω–æ —á—Ç–æ –º–µ–Ω—è—Ç—å.**

–∏–∑–º–µ–Ω–∏–ª —Å—Ç—Ä–æ–∫—É slug —É–±—Ä–∞–ª –¥—É–±–ª–∏ –Ω–∞ —Ç–µ—Å—Ç–µ (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python -c "from slugify import slugify; print(slugify('–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞', allow\_unicode=True))" —Ç–µ—Å—Ç–æ–≤–∞—è-–∑–∞–º–µ—Ç–∫–∞ (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py watch\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ üìù –ò–∑–º–µ–Ω–µ–Ω: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.md üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.md ‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.md –û—à–∏–±–∫–∞: Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, i

–û—à–∏–±–∫–∞! –ù—É–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å **–ø–æ–ª–Ω—É—é –æ—à–∏–±–∫—É**, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å —á—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å. –î–∞–≤–∞–π —É–ª—É—á—à–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `watch_obsidian.py`.

## üîß –®–∞–≥ 1: –£–ª—É—á—à–∞–µ–º –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫

–û—Ç–∫—Ä–æ–π `watch_obsidian.py` –∏ –∏–∑–º–µ–Ω–∏ —Ñ—É–Ω–∫—Ü–∏—é `import_file`:

python

```
def import_file(self, filepath):
    """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É"""
    try:
        print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath.name}")
        
        # –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ–º —Å–∞–º —Ñ–∞–π–ª (–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é)
        result = subprocess.run([
            sys.executable, 'manage.py', 
            'import_obsidian', 
            str(filepath),
            '--author', self.author,
            '--update-existing'
        ], 
        cwd=self.project_root,
        capture_output=True,
        text=True,
        timeout=30)
        
        # –í—ã–≤–æ–¥–∏–º –í–ï–°–¨ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        print("=" * 60)
        print("–°–¢–ê–ù–î–ê–†–¢–ù–´–ô –í–´–í–û–î:")
        print(result.stdout[:1000])  # –ü–µ—Ä–≤—ã–µ 1000 —Å–∏–º–≤–æ–ª–æ–≤
        print("\n" + "=" * 60)
        print("–û–®–ò–ë–ö–ò:")
        print(result.stderr[:1000])   # –ü–µ—Ä–≤—ã–µ 1000 —Å–∏–º–≤–æ–ª–æ–≤
        print("=" * 60)
        
        if result.returncode == 0:
            print(f"‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: {filepath.name}")
        else:
            print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ (–∫–æ–¥ {result.returncode}): {filepath.name}")
                
    except subprocess.TimeoutExpired:
        print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
    except Exception as e:
        print(f"üî• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: {filepath.name} - {type(e).__name__}: {e}")
```

## üß™ –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä—É–µ–º –≤—Ä—É—á–Ω—É—é

–°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∏–º –∫–æ–º–∞–Ω–¥—É –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ\ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.md --author admin --update-existing 2>&1
```

## üîç –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏–º–ø–æ—Ä—Ç–∞

–ú–æ–≥–ª–∏ –æ—Å—Ç–∞—Ç—å—Å—è —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

bash

```
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Ñ–∞–π–ª–∞
python -m py_compile uch/apps/blog/management/commands/import_obsidian.py

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–æ–±—É–µ–º –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
python -c "import uch.apps.blog.management.commands.import_obsidian"
```

## ‚ö†Ô∏è –°–∞–º—ã–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–∫–∏:

1. **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞** –≤ `import_obsidian.py` –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
2. **–ù–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `better_slugify`** –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ try-except
3. **–û—à–∏–±–∫–∞ –≤ –ª–æ–≥–∏–∫–µ slug** (–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `better_slugify` –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ except –±–ª–æ–∫–µ)

## üîß –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–°–æ–∑–¥–∞–π –ø–∞—Ç—á –¥–ª—è `import_obsidian.py`:

python

```
# –í –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞ (–ø–æ—Å–ª–µ –¥—Ä—É–≥–∏—Ö –∏–º–ø–æ—Ä—Ç–æ–≤) –¥–æ–±–∞–≤—å:
try:
    from slugify import slugify as better_slugify
    HAS_BETTER_SLUGIFY = True
except ImportError:
    HAS_BETTER_SLUGIFY = False

# –ó–∞—Ç–µ–º –≤ –∫–æ–¥–µ –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è slug, –∑–∞–º–µ–Ω–∏ –Ω–∞:
if HAS_BETTER_SLUGIFY:
    slug = better_slugify(title, allow_unicode=True)
else:
    slug = slugify(title, allow_unicode=True)

if not slug or slug == '':
    if HAS_BETTER_SLUGIFY:
        slug = better_slugify(md_file.stem, allow_unicode=True)
    else:
        slug = slugify(md_file.stem, allow_unicode=True)
```

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:

1. **–°–Ω–∞—á–∞–ª–∞ –æ–±–Ω–æ–≤–∏ `watch_obsidian.py`** –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥–∞
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –∏ –ø–æ–ø—Ä–æ–±—É–π –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª
3. **–°–∫–æ–ø–∏—Ä—É–π –ø–æ–ª–Ω—É—é –æ—à–∏–±–∫—É** (–ø–µ—Ä–≤—ã–µ 1000 —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ stderr)
4. **–ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—å –∫–æ–º–∞–Ω–¥—É –≤—Ä—É—á–Ω—É—é** –∏ –ø–æ–∫–∞–∂–∏ –ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥

**–°–¥–µ–ª–∞–π –ø–µ—Ä–≤—ã–µ –¥–≤–∞ —à–∞–≥–∞ –∏ –ø–æ–∫–∞–∂–∏ –ø–æ–ª–Ω—É—é –æ—à–∏–±–∫—É.**

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python -m py\_compile uch/apps/blog/management/commands/import\_obsidian.py Sorry: IndentationError: unexpected unindent (import\_obsidian.py, line 183)

–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! –í —Å—Ç—Ä–æ–∫–µ 183 —Ñ–∞–π–ª–∞ `import_obsidian.py` –ø—Ä–æ–±–ª–µ–º–∞ —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã

### –®–∞–≥ 1: –°–º–æ—Ç—Ä–∏–º –ø—Ä–æ–±–ª–µ–º–Ω—É—é —Å—Ç—Ä–æ–∫—É –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫–∏ 175-190
sed -n '175,190p' uch/apps/blog/management/commands/import_obsidian.py

# –ò–ª–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç—Ä–æ–∫—É —Å –æ—à–∏–±–∫–æ–π
sed -n '183p' uch/apps/blog/management/commands/import_obsidian.py
```

### –®–∞–≥ 2: –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `fix_indent.py`:

python

```
#!/usr/bin/env python
import re

def fix_import_obsidian():
    with open('uch/apps/blog/management/commands/import_obsidian.py', 'r') as f:
        lines = f.readlines()
    
    # –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã –≤–æ–∫—Ä—É–≥ —Å—Ç—Ä–æ–∫–∏ 183
    fixed_lines = []
    
    for i, line in enumerate(lines, 1):
        # –ï—Å–ª–∏ —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ 183 –∏–ª–∏ –æ–∫–æ–ª–æ, –∏—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã
        if i >= 180 and i <= 190:
            # –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞—á–∞–ª–µ
            stripped = line.lstrip()
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø (–∫—Ä–∞—Ç–Ω–æ 4)
            if 'except' in stripped or 'else' in stripped or 'elif' in stripped:
                # except/else/elif –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ try
                line = ' ' * (len(line) - len(stripped) - 4) + stripped
            elif 'try:' in stripped or 'def ' in stripped or 'class ' in stripped:
                # try/def/class –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å
                pass
            else:
                # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –æ—Ç—Å—Ç—É–ø +4
                pass
        
        fixed_lines.append(line)
    
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
    with open('uch/apps/blog/management/commands/import_obsidian.py', 'w') as f:
        f.writelines(fixed_lines)
    
    print("‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã")

if __name__ == '__main__':
    fix_import_obsidian()
```

### –®–∞–≥ 3: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –∏ –∏—Å–ø—Ä–∞–≤—å –∑–∞–Ω–æ–≤–æ

bash

```
# –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª
cp uch/apps/blog/management/commands/import_obsidian.py.backup uch/apps/blog/management/commands/import_obsidian.py

# –¢–µ–ø–µ—Ä—å –∞–∫–∫—É—Ä–∞—Ç–Ω–æ –≤—Å—Ç–∞–≤–ª—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–ª—è slug
```

### –®–∞–≥ 4: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ slug

–ù–∞–π–¥–∏ –≤ —Ñ–∞–π–ª–µ —ç—Ç–æ—Ç —É—á–∞—Å—Ç–æ–∫ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 140-160):

python

```
# –°–æ–∑–¥–∞–µ–º slug
                slug = slugify(title)
                if not slug:
                    slug = slugify(md_file.stem)
```

–ò –∑–∞–º–µ–Ω–∏ –í–ï–°–¨ –≠–¢–û–¢ –ë–õ–û–ö (—Å–æ—Ö—Ä–∞–Ω—è—è –æ—Ç—Å—Ç—É–ø—ã!) –Ω–∞:

python

```
# –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
                try:
                    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                    from slugify import slugify as better_slugify
                    slug = better_slugify(title, allow_unicode=True)
                except ImportError:
                    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
                    slug = slugify(title, allow_unicode=True)
                
                # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                if not slug or slug == '':
                    try:
                        slug = better_slugify(md_file.stem, allow_unicode=True)
                    except:
                        slug = slugify(md_file.stem, allow_unicode=True)
```

**–í–ê–ñ–ù–û:** –°–æ—Ö—Ä–∞–Ω–∏ —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–µ –∂–µ –æ—Ç—Å—Ç—É–ø—ã –∫–∞–∫ —É –æ–∫—Ä—É–∂–∞—é—â–µ–≥–æ –∫–æ–¥–∞!

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

bash

```
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
python -m py_compile uch/apps/blog/management/commands/import_obsidian.py

# –ï—Å–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ—Ç, –ø—Ä–æ–≤–µ—Ä—è–µ–º –∏–º–ø–æ—Ä—Ç
python -c "import uch.apps.blog.management.commands.import_obsidian; print('‚úÖ –§–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫')"
```

## üìã –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è

–ü–æ–∫–∞–∂–∏ –º–Ω–µ —Å—Ç—Ä–æ–∫–∏ 170-200 —Ñ–∞–π–ª–∞, –∏ —è —Ç–æ—á–Ω–æ —É–∫–∞–∂—É –∫–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
sed -n '170,200p' uch/apps/blog/management/commands/import_obsidian.py
```

**–ü–æ–∫–∞–∂–∏ —ç—Ç–æ—Ç —É—á–∞—Å—Ç–æ–∫ –∫–æ–¥–∞, –∏ —è –¥–∞–º —Ç–æ—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é.**

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % sed -n '170,200p' uch/apps/blog/management/commands/import\_obsidian.py post = frontmatter.load(f) # –ò–∑–≤–ª–µ–∫–∞–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ title = post.get('title', md\_file.stem) content = post.content # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è content = self.\_process\_images(content, md\_file, title, slugify(title)) # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º wiki-—Å—Å—ã–ª–∫–∏ content = self.\_process\_obsidian\_links(content, str(base\_dir)) # –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã try: # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω from slugify import slugify as better\_slugify slug = better\_slugify(title, allow\_unicode=True) except ImportError: # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow\_unicode slug = slugify(title, allow\_unicode=True) # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç–∞—Ç—å—é article\_exists = Article.objects.filter(slug=slug).exists() if article\_exists and not options\['update\_existing'\]: self.stdout.write(f" ‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç): {title}") skipped\_count += 1 continue # –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—å—é defaults = {

–ü–æ–Ω—è–ª –ø—Ä–æ–±–ª–µ–º—É! **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã** –≤ –±–ª–æ–∫–µ try-except. –≠—Ç–æ—Ç –±–ª–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ —Ç–æ–º –∂–µ —É—Ä–æ–≤–Ω–µ –æ—Ç—Å—Ç—É–ø–∞, —á—Ç–æ –∏ –æ–∫—Ä—É–∂–∞—é—â–∏–π –∫–æ–¥.

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã

**–ë–ª–æ–∫ try-except –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ç–∞–∫–∏–µ –∂–µ –æ—Ç—Å—Ç—É–ø—ã, –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ –≤—ã—à–µ (`# –°–æ–∑–¥–∞–µ–º slug...`).**

–ò—Å–ø—Ä–∞–≤—å —Å—Ç—Ä–æ–∫–∏ 177-186:

python

```
# –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
                try:
                    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                    from slugify import slugify as better_slugify
                    slug = better_slugify(title, allow_unicode=True)
                except ImportError:
                    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
                    slug = slugify(title, allow_unicode=True)
                
                # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                if not slug or slug == '':
                    try:
                        slug = better_slugify(md_file.stem, allow_unicode=True)
                    except:
                        slug = slugify(md_file.stem, allow_unicode=True)
```

**–í–°–ï —Å—Ç—Ä–æ–∫–∏ –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ try-except –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø (4 –ø—Ä–æ–±–µ–ª–∞) –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ `try:`**

## üìù –í–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

text

```
# –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
                try:
                    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                    from slugify import slugify as better_slugify
                    slug = better_slugify(title, allow_unicode=True)
                except ImportError:
                    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
                    slug = slugify(title, allow_unicode=True)
                
                # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                if not slug or slug == '':
                    try:
                        slug = better_slugify(md_file.stem, allow_unicode=True)
                    except:
                        slug = slugify(md_file.stem, allow_unicode=True)
```

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –°–æ–∑–¥–∞–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —É—á–∞—Å—Ç–æ–∫
cat > fix_slug.py << 'EOF'
import re

with open('uch/apps/blog/management/commands/import_obsidian.py', 'r') as f:
    content = f.read()

# –ò—â–µ–º –∏ –∑–∞–º–µ–Ω—è–µ–º –±–ª–æ–∫ —Å slug
old_slug_block = r'''                # –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
try:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    from slugify import slugify as better_slugify
    slug = better_slugify(title, allow_unicode=True)
except ImportError:
    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
    slug = slugify(title, allow_unicode=True)'''

new_slug_block = '''                # –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
                try:
                    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                    from slugify import slugify as better_slugify
                    slug = better_slugify(title, allow_unicode=True)
                except ImportError:
                    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
                    slug = slugify(title, allow_unicode=True)'''

content = content.replace(old_slug_block, new_slug_block)

with open('uch/apps/blog/management/commands/import_obsidian.py', 'w') as f:
    f.write(content)

print("‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã –≤ –±–ª–æ–∫–µ try-except")
EOF

python fix_slug.py
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

bash

```
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python -m py_compile uch/apps/blog/management/commands/import_obsidian.py

# –ï—Å–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ—Ç, —Ç–µ—Å—Ç–∏—Ä—É–µ–º
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ\ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.md --author admin --update-existing
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç—Å—Ç—É–ø–æ–≤

- –°—Ç—Ä–æ–∫–∞ `try:` –∏–º–µ–µ—Ç —Ç–æ—Ç –∂–µ –æ—Ç—Å—Ç—É–ø, —á—Ç–æ –∏ `# –°–æ–∑–¥–∞–µ–º slug...`
- –°—Ç—Ä–æ–∫–∏ –≤–Ω—É—Ç—Ä–∏ `try:` –∏–º–µ—é—Ç –æ—Ç—Å—Ç—É–ø +4 –ø—Ä–æ–±–µ–ª–∞
- –°—Ç—Ä–æ–∫–∞ `except ImportError:` –∏–º–µ–µ—Ç —Ç–æ—Ç –∂–µ –æ—Ç—Å—Ç—É–ø, —á—Ç–æ –∏ `try:`
- –°—Ç—Ä–æ–∫–∏ –≤–Ω—É—Ç—Ä–∏ `except:` –∏–º–µ—é—Ç –æ—Ç—Å—Ç—É–ø +4 –ø—Ä–æ–±–µ–ª–∞
- –°–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –ø–æ—Å–ª–µ –±–ª–æ–∫–∞ –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø

**–ò—Å–ø—Ä–∞–≤—å –æ—Ç—Å—Ç—É–ø—ã –∏ –ø—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.**

–¥–∞–π —Ä–∞–±–æ—Ç–∞—é—â–∏–π import os import glob from pathlib import Path from django.core.management.base import BaseCommand, CommandError from django.contrib.auth.models import User from django.utils.text import slugify from django.utils import timezone from datetime import datetime import frontmatter from taggit.models import Tag import urllib.parse from uch.apps.blog.models import Article, Category import shutil import re import hashlib from django.conf import settings class Command(BaseCommand): help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥' def \_process\_images(self, content, md\_file, article\_title, slug): """ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ: 1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ!\[\[image.png\]\] —Å—Å—ã–ª–∫–∏ 2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA\_ROOT/blog/images/ 3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL """ # –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Obsidian # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:!\[\[image.png\]\],!\[\[folder/image.png\]\],!\[\[image.png|caption\]\] pattern = r'!\\\[\\\[(\[^\\\]\\n\]+?\\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\\|(\[^\\\]\]+))?\\\]\\\]' def replace\_image(match): # –ú–æ–∂–µ—Ç –±—ã—Ç—å "image.png" –∏–ª–∏ "folder/image.png" image\_ref = match.group(1).strip() # –ò–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–∞–∫ –ø–æ–¥–ø–∏—Å—å caption = match.group(2) or Path(image\_ref).stem # –î–µ–∫–æ–¥–∏—Ä—É–µ–º URL-encoded —Å–∏–º–≤–æ–ª—ã image\_ref = urllib.parse.unquote(image\_ref) # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ –ø—É—Ç–∏ –∏ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è image\_name = Path(image\_ref).stem # –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è image\_ref\_ext = Path(image\_ref).suffix.lower() # –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è valid\_extensions = {'.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp', '.svg'} # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω–µ-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (webm, mp4, pdf) if image\_ref\_ext not in valid\_extensions: # –î–ª—è –≤–∏–¥–µ–æ –∏ PDF –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É return match.group(0) # –ò—â–µ–º —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è image\_path = None # –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ full\_path = md\_file.parent / image\_ref if full\_path.exists(): image\_path = full\_path # –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞ elif (md\_file.parent / image\_ref).exists(): image\_path = md\_file.parent / image\_ref # –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É else: # –ò—â–µ–º —Ñ–∞–π–ª –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–≤–∫–ª—é—á–∞—è –ø–æ–¥–ø–∞–ø–∫–∏) for found\_path in md\_file.parent.rglob(Path(image\_ref).name): if found\_path.exists(): image\_path = found\_path break if not image\_path: # –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –æ—Å—Ç–∞–≤–ª—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É self.stdout.write(self.style.WARNING(f"‚ö†Ô∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image\_ref}")) return match.group(0) # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ hash\_obj = hashlib.md5(str(image\_path).encode() + article\_title.encode()) unique\_hash = hash\_obj.hexdigest()\[:8\] safe\_image\_name = f"{slug}-{image\_name}-{unique\_hash}{image\_ref\_ext}" # –¶–µ–ª–µ–≤–æ–π –ø—É—Ç—å –≤ –º–µ–¥–∏–∞-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ target\_dir = settings.MEDIA\_ROOT / 'blog' / 'images' target\_dir.mkdir(parents=True, exist\_ok=True) target\_path = target\_dir / safe\_image\_name # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª, –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç if not target\_path.exists(): shutil.copy2(image\_path, target\_path) self.stdout.write(self.style.SUCCESS(f" üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: {image\_path.name} ‚Üí {safe\_image\_name}")) else: self.stdout.write(f" üì∏ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {safe\_image\_name}") # –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è media\_url = f"{settings.MEDIA\_URL}blog/images/{safe\_image\_name}" return f'<img src="{media\_url}" alt="{caption}" class="obsidian-image">' return re.sub(pattern, replace\_image, content) def \_process\_obsidian\_links(self, content, vault\_path): """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç \[\[wiki links\]\] –≤ HTML —Å—Å—ã–ª–∫–∏""" def replace\_link(match): link\_text = match.group(1) if '|' in link\_text: link\_path, display\_text = link\_text.split('|', 1) else: link\_path = display\_text = link\_text # –ü—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å slug –∏–∑ –ø—É—Ç–∏ slug = slugify(link\_path) return f'<a href="/blog/{slug}/" class="wiki-link">{display\_text}</a>' pattern = r'\\\[\\\[(\[^\\\]\]+)\\\]\\\]' return re.sub(pattern, replace\_link, content) def add\_arguments(self, parser): parser.add\_argument('vault\_path', type=str, help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É –∏–ª–∏.md —Ñ–∞–π–ª—É') parser.add\_argument('--author', type=str, required=True, help='–ò–º—è –∞–≤—Ç–æ—Ä–∞ –¥–ª—è —Å—Ç–∞—Ç–µ–π') parser.add\_argument('--update-existing', action='store\_true', help='–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏') def handle(self, \*args, \*\*options): """–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏ —Ñ–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏""" vault\_path = options\['vault\_path'\] author\_name = options\['author'\] # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å vault\_path\_obj = Path(vault\_path) if not vault\_path\_obj.exists(): raise CommandError(f"–ü—É—Ç—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {vault\_path}") # –û–ø—Ä–µ–¥–µ–ª—è–µ–º: —Ñ–∞–π–ª –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è if vault\_path\_obj.is\_file() and vault\_path.endswith('.md'): # –û–¥–∏–Ω —Ñ–∞–π–ª md\_files = \[vault\_path\_obj\] base\_dir = vault\_path\_obj.parent elif vault\_path\_obj.is\_dir(): # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è - –≤—Å–µ.md —Ñ–∞–π–ª—ã md\_files = list(vault\_path\_obj.rglob("\*.md")) base\_dir = vault\_path\_obj else: raise CommandError(f"–ü—É—Ç—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–∏–±–æ.md —Ñ–∞–π–ª–æ–º, –ª–∏–±–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π: {vault\_path}") # –ü–æ–ª—É—á–∞–µ–º –∞–≤—Ç–æ—Ä–∞ try: author = User.objects.get(username=author\_name) except User.DoesNotExist: raise CommandError(f"–ê–≤—Ç–æ—Ä '{author\_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω") if not md\_files: self.stdout.write(self.style.WARNING("‚ö†Ô∏è –§–∞–π–ª—ã.md –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")) return self.stdout.write(f"üìÅ –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: {len(md\_files)}") imported\_count = 0 updated\_count = 0 skipped\_count = 0 for md\_file in md\_files: try: self.stdout.write(f"üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: {md\_file.relative\_to(base\_dir)}") # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª with open(md\_file, 'r', encoding='utf-8') as f: post = frontmatter.load(f) # –ò–∑–≤–ª–µ–∫–∞–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ title = post.get('title', md\_file.stem) content = post.content # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è content = self.\_process\_images(content, md\_file, title, slugify(title)) # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º wiki-—Å—Å—ã–ª–∫–∏ content = self.\_process\_obsidian\_links(content, str(base\_dir)) # –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã try: # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω from slugify import slugify as better\_slugify slug = better\_slugify(title, allow\_unicode=True) except ImportError: # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow\_unicode slug = slugify(title, allow\_unicode=True) # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞ if not slug or slug == '': try: slug = better\_slugify(md\_file.stem, allow\_unicode=True) except: slug = slugify(md\_file.stem, allow\_unicode=True # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç–∞—Ç—å—é article\_exists = Article.objects.filter(slug=slug).exists() if article\_exists and not options\['update\_existing'\]: self.stdout.write(f" ‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç): {title}") skipped\_count += 1 continue # –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—å—é defaults = { 'title': title, 'content': content, 'author': author, 'status': 'published', 'category': Category.objects.first() or Category.objects.create(name='–û–±—â–µ–µ'), } article, created = Article.objects.update\_or\_create( slug=slug, defaults=defaults ) # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏ tags = post.get('tags', \[\]) if tags: if isinstance(tags, str): tags = \[tag.strip() for tag in tags.split(',')\] elif isinstance(tags, list): tags = \[str(tag).strip() for tag in tags\] # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ django-taggit article.tags.clear() for tag in tags: article.tags.add(tag) if created: self.stdout.write(self.style.SUCCESS(f" ‚úÖ –°–æ–∑–¥–∞–Ω–æ: {title}")) imported\_count += 1 else: self.stdout.write(self.style.SUCCESS(f" üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: {title}")) updated\_count += 1 except Exception as e: self.stdout.write(self.style.ERROR(f" ‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ {md\_file.name}: {e}")) continue # –ò—Ç–æ–≥ self.stdout.write("\\n" + "="\*50) self.stdout.write(self.style.SUCCESS("üìä –ò–¢–û–ì –ò–ú–ü–û–†–¢–ê:")) self.stdout.write(f" –°–æ–∑–¥–∞–Ω–æ: {imported\_count}") self.stdout.write(f" –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated\_count}") self.stdout.write(f" –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped\_count}") self.stdout.write(f" –í—Å–µ–≥–æ: {imported\_count + updated\_count + skipped\_count}")

–í–∏–∂—É –ø—Ä–æ–±–ª–µ–º—É! –í –∫–æ–¥–µ –µ—Å—Ç—å **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –∏ –Ω–µ–∑–∞–∫—Ä—ã—Ç–∞—è —Å–∫–æ–±–∫–∞**. –í–æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –±–ª–æ–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è slug:

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –±–ª–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è slug

–ù–∞–π–¥–∏ —ç—Ç–æ—Ç —É—á–∞—Å—Ç–æ–∫ –≤ —Ñ–∞–π–ª–µ:

python

```
# –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
                                try:
                                        # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                                        from slugify import slugify as better_slugify
                                        slug = better_slugify(title, allow_unicode=True)
                                except ImportError:
                                        # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
                                        slug = slugify(title, allow_unicode=True)

                                        # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                if not slug or slug == '':
                    try:
                        slug = better_slugify(md_file.stem, allow_unicode=True)
                    except:
                        slug = slugify(md_file.stem, allow_unicode=True
```

**–ò –∑–∞–º–µ–Ω–∏ –µ–≥–æ –Ω–∞:**

python

```
# –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
                try:
                    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                    from slugify import slugify as better_slugify
                    slug = better_slugify(title, allow_unicode=True)
                except ImportError:
                    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
                    slug = slugify(title, allow_unicode=True)
                
                # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                if not slug or slug == '':
                    try:
                        slug = better_slugify(md_file.stem, allow_unicode=True)
                    except:
                        slug = slugify(md_file.stem, allow_unicode=True)
```

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `fix_slug_final.py`:

python

```
#!/usr/bin/env python
import re

with open('uch/apps/blog/management/commands/import_obsidian.py', 'r') as f:
    content = f.read()

# –ò—â–µ–º –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –±–ª–æ–∫ (–æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–º–µ—à–∞–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã)
old_block = r'''                # –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
                                try:
                                        # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                                        from slugify import slugify as better_slugify
                                        slug = better_slugify\(title, allow_unicode=True\)
                                except ImportError:
                                        # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
                                        slug = slugify\(title, allow_unicode=True\)

                                        # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                if not slug or slug == '':
                    try:
                        slug = better_slugify\(md_file.stem, allow_unicode=True\)
                    except:
                        slug = slugify\(md_file.stem, allow_unicode=True'''

new_block = '''                # –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
                try:
                    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                    from slugify import slugify as better_slugify
                    slug = better_slugify(title, allow_unicode=True)
                except ImportError:
                    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
                    slug = slugify(title, allow_unicode=True)
                
                # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                if not slug or slug == '':
                    try:
                        slug = better_slugify(md_file.stem, allow_unicode=True)
                    except:
                        slug = slugify(md_file.stem, allow_unicode=True)'''

content = re.sub(re.escape(old_block), new_block, content, flags=re.DOTALL)

with open('uch/apps/blog/management/commands/import_obsidian.py', 'w') as f:
    f.write(content)

print("‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–ª–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è slug")
```

–ó–∞–ø—É—Å—Ç–∏ –µ–≥–æ:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
python fix_slug_final.py
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

bash

```
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python -m py_compile uch/apps/blog/management/commands/import_obsidian.py

# –ï—Å–ª–∏ –æ—à–∏–±–æ–∫ –Ω–µ—Ç, —Ç–µ—Å—Ç–∏—Ä—É–µ–º
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test.md --author admin --update-existing
```

## üìã –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—Å—Ç—É–ø–æ–≤

–í–µ—Å—å –±–ª–æ–∫ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –æ—Ç—Å—Ç—É–ø—ã:

- **16 –ø—Ä–æ–±–µ–ª–æ–≤** (–∏–ª–∏ 4 —É—Ä–æ–≤–Ω—è –æ—Ç—Å—Ç—É–ø–∞) –¥–ª—è —Å—Ç—Ä–æ–∫ —Å –∫–æ–¥–æ–º
- **20 –ø—Ä–æ–±–µ—Ä–æ–≤** –¥–ª—è —Å—Ç—Ä–æ–∫ –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–æ–≤ `try:`/ `except:`/ `if:`

**–ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª, –ø–æ–∫–∞–∂–∏ —Å—Ç—Ä–æ–∫–∏ 170-195 —Ñ–∞–π–ª–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∏ —è –¥–∞–º —Ç–æ—á–Ω—É—é –ø—Ä–∞–≤–∫—É.**

–∞ —Ñ–∞–π–ª —Å–∫—Ä–∏–ø—Ç–∞ –ø–æ –∫–∞–∫–æ–º—É –ø—É—Ç–∏ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å? –ö–æ—Ä–æ—Ç–∫–æ

–ö–æ—Ä–Ω–µ–≤–∞—è –ø–∞–ø–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞, —Ä—è–¥–æ–º —Å `manage.py`:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
# –ó–¥–µ—Å—å —Å–æ–∑–¥–∞–π fix_slug_final.py
```

**–ö–æ—Ä–æ—Ç–∫–∏–π –ø—É—Ç—å:**

text

```
/Users/kirillkravcov/UniversalCreativeHub/uch-backend/fix_slug_final.py
```

–°–æ–∑–¥–∞–π, –∑–∞–ø—É—Å—Ç–∏, —É–¥–∞–ª–∏.

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python fix\_slug\_final.py ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–ª–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è slug (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python -m py\_compile uch/apps/blog/management/commands/import\_obsidian.py Sorry: TabError: inconsistent use of tabs and spaces in indentation (import\_obsidian.py, line 183) (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % –î–∞–π –ø–æ–ª–Ω—ã–π —Ñ–∞–π–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π import\_obsidian

–ü—Ä–æ–±–ª–µ–º–∞ —Å —Ç–∞–±—É–ª—è—Ü–∏—è–º–∏! –ù—É–∂–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç–∞–±—ã –≤ –ø—Ä–æ–±–µ–ª—ã. –í–æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª:

python

```
import os
import glob
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.utils.text import slugify
from django.utils import timezone
from datetime import datetime
import frontmatter
from taggit.models import Tag
import urllib.parse

from uch.apps.blog.models import Article, Category

import shutil
import re
import hashlib
from django.conf import settings

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'

    def _process_images(self, content, md_file, article_title, slug):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
        1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
        2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
        3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
        """
        # –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Obsidian
        # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: ![[image.png]], ![[folder/image.png]], ![[image.png|caption]]
        pattern = r'!\[\[([^\]\n]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\|([^\]]+))?\]\]'
        
        def replace_image(match):
            # –ú–æ–∂–µ—Ç –±—ã—Ç—å "image.png" –∏–ª–∏ "folder/image.png"
            image_ref = match.group(1).strip()
            # –ò–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–∞–∫ –ø–æ–¥–ø–∏—Å—å
            caption = match.group(2) or Path(image_ref).stem

            # –î–µ–∫–æ–¥–∏—Ä—É–µ–º URL-encoded —Å–∏–º–≤–æ–ª—ã
            image_ref = urllib.parse.unquote(image_ref)
            
            # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ –ø—É—Ç–∏ –∏ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            image_name = Path(image_ref).stem  # –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            image_ref_ext = Path(image_ref).suffix.lower()  # –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

            # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            valid_extensions = {'.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp', '.svg'}
            
            # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –Ω–µ-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (webm, mp4, pdf)
            if image_ref_ext not in valid_extensions:
                # –î–ª—è –≤–∏–¥–µ–æ –∏ PDF –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
                return match.group(0)
            
            # –ò—â–µ–º —Ñ–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            image_path = None
            
            # –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
            full_path = md_file.parent / image_ref
            if full_path.exists():
                image_path = full_path
            
            # –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∞–π–ª–∞
            elif (md_file.parent / image_ref).exists():
                image_path = md_file.parent / image_ref
            
            # –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É
            else:
                # –ò—â–µ–º —Ñ–∞–π–ª –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–≤–∫–ª—é—á–∞—è –ø–æ–¥–ø–∞–ø–∫–∏)
                for found_path in md_file.parent.rglob(Path(image_ref).name):
                    if found_path.exists():
                        image_path = found_path
                        break
            
            if not image_path:
                # –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –æ—Å—Ç–∞–≤–ª—è–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
                self.stdout.write(self.style.WARNING(f"‚ö†Ô∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_ref}"))
                return match.group(0)
            
            # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
            hash_obj = hashlib.md5(str(image_path).encode() + article_title.encode())
            unique_hash = hash_obj.hexdigest()[:8]
            safe_image_name = f"{slug}-{image_name}-{unique_hash}{image_ref_ext}"
            
            # –¶–µ–ª–µ–≤–æ–π –ø—É—Ç—å –≤ –º–µ–¥–∏–∞-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ
            target_dir = settings.MEDIA_ROOT / 'blog' / 'images'
            target_dir.mkdir(parents=True, exist_ok=True)
            target_path = target_dir / safe_image_name
            
            # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª, –µ—Å–ª–∏ –µ–≥–æ –µ—â–µ –Ω–µ—Ç
            if not target_path.exists():
                shutil.copy2(image_path, target_path)
                self.stdout.write(self.style.SUCCESS(f"  üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: {image_path.name} ‚Üí {safe_image_name}"))
            else:
                self.stdout.write(f"  üì∏ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {safe_image_name}")
            
            # –§–æ—Ä–º–∏—Ä—É–µ–º HTML –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            media_url = f"{settings.MEDIA_URL}blog/images/{safe_image_name}"
            return f'<img src="{media_url}" alt="{caption}" class="obsidian-image">'
        
        return re.sub(pattern, replace_image, content)

    def _process_obsidian_links(self, content, vault_path):
        """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç [[wiki links]] –≤ HTML —Å—Å—ã–ª–∫–∏"""
        def replace_link(match):
            link_text = match.group(1)
            if '|' in link_text:
                link_path, display_text = link_text.split('|', 1)
            else:
                link_path = display_text = link_text
            
            # –ü—ã—Ç–∞–µ–º—Å—è —Å–æ–∑–¥–∞—Ç—å slug –∏–∑ –ø—É—Ç–∏
            slug = slugify(link_path)
            return f'<a href="/blog/{slug}/" class="wiki-link">{display_text}</a>'
        
        pattern = r'\[\[([^\]]+)\]\]'
        return re.sub(pattern, replace_link, content)

    def add_arguments(self, parser):
        parser.add_argument('vault_path', type=str, help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É –∏–ª–∏ .md —Ñ–∞–π–ª—É')
        parser.add_argument('--author', type=str, required=True, help='–ò–º—è –∞–≤—Ç–æ—Ä–∞ –¥–ª—è —Å—Ç–∞—Ç–µ–π')
        parser.add_argument('--update-existing', action='store_true', 
                          help='–û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏')

    def handle(self, *args, **options):
        """–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏ —Ñ–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏"""
        vault_path = options['vault_path']
        author_name = options['author']
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å
        vault_path_obj = Path(vault_path)
        if not vault_path_obj.exists():
            raise CommandError(f"–ü—É—Ç—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {vault_path}")
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º: —Ñ–∞–π–ª –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
        if vault_path_obj.is_file() and vault_path.endswith('.md'):
            # –û–¥–∏–Ω —Ñ–∞–π–ª
            md_files = [vault_path_obj]
            base_dir = vault_path_obj.parent
        elif vault_path_obj.is_dir():
            # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è - –≤—Å–µ .md —Ñ–∞–π–ª—ã
            md_files = list(vault_path_obj.rglob("*.md"))
            base_dir = vault_path_obj
        else:
            raise CommandError(f"–ü—É—Ç—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–∏–±–æ .md —Ñ–∞–π–ª–æ–º, –ª–∏–±–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π: {vault_path}")
        
        # –ü–æ–ª—É—á–∞–µ–º –∞–≤—Ç–æ—Ä–∞
        try:
            author = User.objects.get(username=author_name)
        except User.DoesNotExist:
            raise CommandError(f"–ê–≤—Ç–æ—Ä '{author_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω")
        
        if not md_files:
            self.stdout.write(self.style.WARNING("‚ö†Ô∏è –§–∞–π–ª—ã .md –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"))
            return
        
        self.stdout.write(f"üìÅ –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: {len(md_files)}")
        
        imported_count = 0
        updated_count = 0
        skipped_count = 0
        
        for md_file in md_files:
            try:
                self.stdout.write(f"üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: {md_file.relative_to(base_dir)}")
                
                # –ß–∏—Ç–∞–µ–º —Ñ–∞–π–ª
                with open(md_file, 'r', encoding='utf-8') as f:
                    post = frontmatter.load(f)
                
                # –ò–∑–≤–ª–µ–∫–∞–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
                title = post.get('title', md_file.stem)
                content = post.content
                
                # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                content = self._process_images(content, md_file, title, slugify(title))
                
                # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º wiki-—Å—Å—ã–ª–∫–∏
                content = self._process_obsidian_links(content, str(base_dir))
                
                # –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
                try:
                    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
                    from slugify import slugify as better_slugify
                    slug = better_slugify(title, allow_unicode=True)
                except ImportError:
                    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode
                    slug = slugify(title, allow_unicode=True)
                
                # –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –ø—É—Å—Ç–æ, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è —Ñ–∞–π–ª–∞
                if not slug or slug == '':
                    try:
                        slug = better_slugify(md_file.stem, allow_unicode=True)
                    except:
                        slug = slugify(md_file.stem, allow_unicode=True)
                
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç–∞—Ç—å—é
                article_exists = Article.objects.filter(slug=slug).exists()
                
                if article_exists and not options['update_existing']:
                    self.stdout.write(f"  ‚è≠Ô∏è –ü—Ä–æ–ø—É—â–µ–Ω–æ (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç): {title}")
                    skipped_count += 1
                    continue
                
                # –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—å—é
                defaults = {
                    'title': title,
                    'content': content,
                    'author': author,
                    'status': 'published',
                    'category': Category.objects.first() or Category.objects.create(name='–û–±—â–µ–µ'),
                }
                
                article, created = Article.objects.update_or_create(
                    slug=slug,
                    defaults=defaults
                )
                
                # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏
                tags = post.get('tags', [])
                if tags:
                    if isinstance(tags, str):
                        tags = [tag.strip() for tag in tags.split(',')]
                    elif isinstance(tags, list):
                        tags = [str(tag).strip() for tag in tags]
                    
                    # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ django-taggit
                    article.tags.clear()
                    for tag in tags:
                        article.tags.add(tag)
                
                if created:
                    self.stdout.write(self.style.SUCCESS(f"  ‚úÖ –°–æ–∑–¥–∞–Ω–æ: {title}"))
                    imported_count += 1
                else:
                    self.stdout.write(self.style.SUCCESS(f"  üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: {title}"))
                    updated_count += 1
                    
            except Exception as e:
                self.stdout.write(self.style.ERROR(f"  ‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ {md_file.name}: {e}"))
                continue
        
        # –ò—Ç–æ–≥
        self.stdout.write("\n" + "="*50)
        self.stdout.write(self.style.SUCCESS("üìä –ò–¢–û–ì –ò–ú–ü–û–†–¢–ê:"))
        self.stdout.write(f"  –°–æ–∑–¥–∞–Ω–æ: {imported_count}")
        self.stdout.write(f"  –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}")
        self.stdout.write(f"  –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped_count}")
        self.stdout.write(f"  –í—Å–µ–≥–æ: {imported_count + updated_count + skipped_count}")
```

## üîß –ï—Å–ª–∏ –≤—Å—ë –µ—â–µ –æ—à–∏–±–∫–∞ —Å —Ç–∞–±—É–ª—è—Ü–∏—è–º–∏:

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `convert_tabs.py`:

python

```
#!/usr/bin/env python
import sys

with open('uch/apps/blog/management/commands/import_obsidian.py', 'r') as f:
    content = f.read()

# –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ —Ç–∞–±—ã –Ω–∞ 4 –ø—Ä–æ–±–µ–ª–∞
content = content.replace('\t', '    ')

with open('uch/apps/blog/management/commands/import_obsidian.py', 'w') as f:
    f.write(content)

print("‚úÖ –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã —Ç–∞–±—ã –≤ –ø—Ä–æ–±–µ–ª—ã")
```

–ó–∞–ø—É—Å—Ç–∏:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
python convert_tabs.py
python -m py_compile uch/apps/blog/management/commands/import_obsidian.py
```

## üöÄ –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª:

bash

```
# –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –∫–æ–¥–æ–º –≤—ã—à–µ
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
nano uch/apps/blog/management/commands/import_obsidian_fixed.py
# –í—Å—Ç–∞–≤—å –∫–æ–¥, —Å–æ—Ö—Ä–∞–Ω–∏

# –ó–∞–º–µ–Ω–∏ —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
mv uch/apps/blog/management/commands/import_obsidian.py uch/apps/blog/management/commands/import_obsidian_old.py
mv uch/apps/blog/management/commands/import_obsidian_fixed.py uch/apps/blog/management/commands/import_obsidian.py
```

–Ω–∞–ø–∏—à–∏ –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate
python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
```

**–ö–æ—Ä–æ—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è:**

bash

```
python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
```

**–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ —Ñ–æ–Ω–µ (—á—Ç–æ–±—ã —Ç–µ—Ä–º–∏–Ω–∞–ª –±—ã–ª —Å–≤–æ–±–æ–¥–µ–Ω):**

bash

```
python
```

–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç. –Ω–∞ —Å–∞–π—Ç–µ NoReverseMatch at / Reverse for 'article\_detail' with arguments '('—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è',)' not found. 1 pattern(s) tried: \['articles/(?P<slug>\[-a-zA-Z0-9\_\]+)/\\\\Z'\] Request Method: GET Request URL: http://localhost:8000/ Django Version: 4.2.7 Exception Type: NoReverseMatch Exception Value: Reverse for 'article\_detail' with arguments '('—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è',)' not found. 1 pattern(s) tried: \['articles/(?P<slug>\[-a-zA-Z0-9\_\]+)/\\\\Z'\] Exception Location: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/urls/resolvers.py, line 828, in \_reverse\_with\_prefix Raised during: uch.apps.blog.views.HomeView Python Executable: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/bin/python Python Version: 3.8.9 Python Path: \['/Users/kirillkravcov/UniversalCreativeHub/uch-backend', '/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python38.zip', '/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8', '/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/lib-dynload', '/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages'\] Server time: Wed, 10 Dec 2025 11:17:19 +0300

–ü—Ä–æ–±–ª–µ–º–∞! –í URL –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **–∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–µ —Å–∏–º–≤–æ–ª—ã –≤ slug** (`—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è`), –∞ Django URL pattern –æ–∂–∏–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ `[-a-zA-Z0-9_]+`.

## üîß –†–µ—à–µ–Ω–∏–µ 1: –ò–∑–º–µ–Ω—è–µ–º URL pattern

–û—Ç–∫—Ä–æ–π `uch/apps/blog/urls.py` –∏ –∏–∑–º–µ–Ω–∏ –ø–∞—Ç—Ç–µ—Ä–Ω:

python

```
# –ë–´–õ–û:
path('articles/<slug:slug>/', views.article_detail, name='article_detail'),

# –°–¢–ê–õ–û:
path('articles/<str:slug>/', views.article_detail, name='article_detail'),
```

–ò–ª–∏ –¥–æ–±–∞–≤—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–∏—Ä–∏–ª–ª–∏—Ü—ã:

python

```
# –õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å path converter —Å regex:
re_path(r'^articles/(?P<slug>[\w\-]+)/$', views.article_detail, name='article_detail'),
```

## üîß –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø—Ä–∞–≤–ª—è–µ–º slug –≤ import\_obsidian.py

Slug –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, –¥–µ—Ñ–∏—Å—ã –∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è.

–ò–∑–º–µ–Ω–∏ –≤ `import_obsidian.py`:

python

```
# –°–æ–∑–¥–∞–µ–º slug —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
try:
    # –ò—Å–ø–æ–ª—å–∑—É–µ–º python-slugify –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
    from slugify import slugify as better_slugify
    slug = better_slugify(title, allow_unicode=False)  # allow_unicode=False!
except ImportError:
    # –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Django —Å allow_unicode=False
    slug = slugify(title, allow_unicode=False)  # allow_unicode=False!
```

**–ö–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ:**`allow_unicode=False` –≤–º–µ—Å—Ç–æ `True`

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

1. **–ò—Å–ø—Ä–∞–≤—å URL pattern** (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ):

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –û—Ç–∫—Ä–æ–π uch/apps/blog/urls.py
# –ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É —Å 'article_detail' –∏ –∑–∞–º–µ–Ω–∏ –Ω–∞:
path('articles/<str:slug>/', views.article_detail, name='article_detail'),
```

1. **–ò–ª–∏ –∏—Å–ø—Ä–∞–≤—å import\_obsidian.py:**

bash

```
# –°–æ–∑–¥–∞–π —Ñ–∞–π–ª fix_slug_encoding.py
cat > fix_slug_encoding.py << 'EOF'
import re

with open('uch/apps/blog/management/commands/import_obsidian.py', 'r') as f:
    content = f.read()

# –ó–∞–º–µ–Ω—è–µ–º allow_unicode=True –Ω–∞ allow_unicode=False
content = content.replace('allow_unicode=True', 'allow_unicode=False')

with open('uch/apps/blog/management/commands/import_obsidian.py', 'w') as f:
    f.write(content)

print("‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: allow_unicode=True ‚Üí allow_unicode=False")
EOF

python fix_slug_encoding.py
```

## üìã –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä Django**
2. **–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É** –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å—Ç–∞—Ç—å–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è** –ø–æ —Å—Å—ã–ª–∫–∞–º

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–∏—Ö slug:

python

```
# –í python manage.py shell
from uch.apps.blog.models import Article

# –ü—Ä–æ–≤–µ—Ä—è–µ–º slug —Å—Ç–∞—Ç–µ–π
for article in Article.objects.all()[:5]:
    print(f"ID: {article.id}, Title: {article.title}, Slug: '{article.slug}'")
```

**–†–µ–∫–æ–º–µ–Ω–¥—É—é —Å–Ω–∞—á–∞–ª–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç—å URL pattern –≤ `urls.py` \- —ç—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –∏ –Ω–∞–¥–µ–∂–Ω–µ–µ.**

–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! –∫–æ–≥–¥–∞ –ø–æ–º–µ–Ω—è–ª –Ω–∞ str. –û—Å—Ç–∞–ª–∞—Å—å –æ–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ - –Ω–∞ —Å–∞–π—Ç–µ –æ—Å—Ç–∞–ª–∏—Å—å —Å—Ç–∞—Ç—å–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ —Ç–µ—Å—Ç–∞—Ö (Untitled). –í –ø–∞–ø–∫–µ post –µ–µ —É–∂–µ –Ω–µ—Ç. –í –æ–±—â–µ–º –Ω—É–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –±—ã–ª–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞–ø–∫–∏

–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ù—É–∂–Ω–∞ **–æ–±—Ä–∞—Ç–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–µ–π –∏–∑ –±–ª–æ–≥–∞, –µ—Å–ª–∏ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ Obsidian.

## üéØ –¶–µ–ª—å: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–µ–π –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ Obsidian

## üîß –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ watch\_obsidian.py

### –®–∞–≥ 1: –°–æ–∑–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏/—É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–µ–π

–î–æ–±–∞–≤—å –≤ `watch_obsidian.py` –≤ –∫–ª–∞—Å—Å `ObsidianEventHandler`:

python

```
def on_deleted(self, event):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤"""
    if not event.is_directory and event.src_path.endswith('.md'):
        filepath = Path(event.src_path)
        print(f"üóëÔ∏è –£–¥–∞–ª–µ–Ω: {filepath.name}")
        self.archive_article(filepath)

def archive_article(self, filepath):
    """–ê—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—å—é –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞"""
    try:
        # –ü–æ–ª—É—á–∞–µ–º slug –∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
        try:
            from slugify import slugify as better_slugify
            slug = better_slugify(filepath.stem, allow_unicode=False)
        except ImportError:
            from django.utils.text import slugify
            slug = slugify(filepath.stem, allow_unicode=False)
        
        # –ò—â–µ–º —Å—Ç–∞—Ç—å—é –≤ –±–∞–∑–µ
        from uch.apps.blog.models import Article
        article = Article.objects.filter(slug=slug).first()
        
        if article:
            # –í–∞—Ä–∏–∞–Ω—Ç 1: –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å (–∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å)
            article.status = 'archived'
            article.save()
            print(f"   üì¶ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∞: {article.title}")
            
            # –í–∞—Ä–∏–∞–Ω—Ç 2: –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é (–æ–ø–∞—Å–Ω–æ!)
            # article.delete()
            # print(f"   üóëÔ∏è –£–¥–∞–ª–µ–Ω–∞: {article.title}")
        else:
            print(f"   ‚ÑπÔ∏è –°—Ç–∞—Ç—å—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {filepath.name}")
            
    except Exception as e:
        print(f"   ‚ùå –û—à–∏–±–∫–∞ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏: {e}")
```

### –®–∞–≥ 2: –£–ª—É—á—à–∞–µ–º - —Å–∫–∞–Ω–∏—Ä—É–µ–º –≤—Å—é –ø–∞–ø–∫—É –∏ —É–¥–∞–ª—è–µ–º –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ

–î–æ–±–∞–≤—å –º–µ—Ç–æ–¥ –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

python

```
def check_missing_files(self):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∫–∏–µ —Å—Ç–∞—Ç—å–∏ –≤ –ë–î –Ω–µ –∏–º–µ—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤"""
    try:
        from uch.apps.blog.models import Article
        from slugify import slugify as better_slugify
        
        # –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ
        existing_files = set()
        for md_file in self.vault_path.rglob("*.md"):
            try:
                slug = better_slugify(md_file.stem, allow_unicode=False)
                existing_files.add(slug)
            except:
                continue
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —Å—Ç–∞—Ç—å–∏
        articles = Article.objects.filter(status='published')
        for article in articles:
            if article.slug not in existing_files:
                print(f"‚ö†Ô∏è –§–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–ª—è —Å—Ç–∞—Ç—å–∏: {article.title}")
                # article.status = 'archived'
                # article.save()
                
    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–π–ª–æ–≤: {e}")
```

### –®–∞–≥ 3: –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É

–ò–∑–º–µ–Ω–∏ –º–µ—Ç–æ–¥ `handle` –≤ –∫–ª–∞—Å—Å–µ `Command`:

python

```
def handle(self, *args, **options):
    print(f"üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: {options['vault_path']}")
    print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
    
    handler = ObsidianEventHandler(options['vault_path'], options['author'])
    observer = Observer()
    observer.schedule(handler, options['vault_path'], recursive=True)
    observer.start()
    
    # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
    import time
    last_check = time.time()
    check_interval = 300  # 5 –º–∏–Ω—É—Ç
    
    try:
        while True:
            time.sleep(1)
            
            # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤
            current_time = time.time()
            if current_time - last_check > check_interval:
                handler.check_missing_files()
                last_check = current_time
                
    except KeyboardInterrupt:
        observer.stop()
        print("‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    
    observer.join()
```

## üöÄ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏

–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Ä—É—á–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏:

python

```
# uch/apps/blog/management/commands/cleanup_articles.py
import os
from pathlib import Path
from django.core.management.base import BaseCommand
from slugify import slugify as better_slugify
from uch.apps.blog.models import Article

class Command(BaseCommand):
    help = '–û—á–∏—â–∞–µ—Ç —Å—Ç–∞—Ç—å–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç —Ñ–∞–π–ª–æ–≤ –≤ Obsidian'
    
    def add_arguments(self, parser):
        parser.add_argument('vault_path', type=str, help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É')
        parser.add_argument('--dry-run', action='store_true', help='–¢–æ–ª—å–∫–æ –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ')
        parser.add_argument('--archive', action='store_true', help='–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è')
    
    def handle(self, *args, **options):
        vault_path = Path(options['vault_path'])
        
        if not vault_path.exists():
            self.stdout.write(self.style.ERROR(f"–ü—É—Ç—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: {vault_path}"))
            return
        
        # –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã
        existing_files = set()
        for md_file in vault_path.rglob("*.md"):
            try:
                slug = better_slugify(md_file.stem, allow_unicode=False)
                existing_files.add(slug)
            except:
                continue
        
        self.stdout.write(f"üìÅ –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤: {len(existing_files)}")
        
        # –ù–∞—Ö–æ–¥–∏–º —Å—Ç–∞—Ç—å–∏ –±–µ–∑ —Ñ–∞–π–ª–æ–≤
        articles = Article.objects.all()
        to_archive = []
        
        for article in articles:
            if article.slug not in existing_files:
                to_archive.append(article)
        
        self.stdout.write(f"üìã –°—Ç–∞—Ç–µ–π –±–µ–∑ —Ñ–∞–π–ª–æ–≤: {len(to_archive)}")
        
        if options['dry_run']:
            for article in to_archive:
                self.stdout.write(f"  üìÑ {article.title} (slug: {article.slug})")
            self.stdout.write(self.style.WARNING("DRY RUN - –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–æ"))
            return
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º
        for article in to_archive:
            if options['archive']:
                article.status = 'archived'
                article.save()
                self.stdout.write(self.style.SUCCESS(f"  üì¶ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∞: {article.title}"))
            else:
                article.delete()
                self.stdout.write(self.style.SUCCESS(f"  üóëÔ∏è –£–¥–∞–ª–µ–Ω–∞: {article.title}"))
        
        self.stdout.write(self.style.SUCCESS(f"‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {len(to_archive)} —Å—Ç–∞—Ç–µ–π"))
```

## üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:

1. **–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π –∫–æ–º–∞–Ω–¥—É –æ—á–∏—Å—Ç–∫–∏** `cleanup_articles.py`
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –≤ —Å—É—Ö–æ–º —Ä–µ–∂–∏–º–µ:**
	bash
	```
	python manage.py cleanup_articles /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --dry-run
	```
3. **–ï—Å–ª–∏ –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤—ã–ø–æ–ª–Ω–∏ –∞—Ä—Ö–∏–≤–∞—Ü–∏—é:**
	bash
	```
	python manage.py cleanup_articles /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --archive
	```
4. **–î–æ–±–∞–≤—å –æ–±—Ä–∞–±–æ—Ç–∫—É `on_deleted` –≤ `watch_obsidian.py`**
5. **–û–±–Ω–æ–≤–∏ `watch_obsidian.py` —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π**

## ‚ö†Ô∏è –í–∞–∂–Ω–æ!

- **–°–Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∏—Ä—É–π —Å `--dry-run`** —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ
- **–õ—É—á—à–µ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å (`--archive`)**, —á–µ–º —É–¥–∞–ª—è—Ç—å
- **–£–±–µ–¥–∏—Å—å —á—Ç–æ –≤ –º–æ–¥–µ–ª–∏ Article –µ—Å—Ç—å –ø–æ–ª–µ `status`** —Å –≤—ã–±–æ—Ä–æ–º `'published'`, `'draft'`, `'archived'`

**–ù–∞—á–Ω–∏ —Å —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –æ—á–∏—Å—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å—É—Ö–æ–º —Ä–µ–∂–∏–º–µ.**

–ü—Ä–æ–≤–µ—Ä—å —Ñ–∞–π–ª import os import sys import time import subprocess import logging from pathlib import Path from django.core.management.base import BaseCommand # –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –¥–ª—è Django sys.path.append('/Users/kirillkravcov/UniversalCreativeHub/uch-backend') os.environ.setdefault('DJANGO\_SETTINGS\_MODULE', 'uch.settings') import django django.setup() from watchdog.observers import Observer from watchdog.events import FileSystemEventHandler logger = logging.getLogger(\_\_name\_\_) class ObsidianEventHandler(FileSystemEventHandler): def \_\_init\_\_(self, vault\_path, author): self.vault\_path = Path(vault\_path) self.author = author self.project\_root = '/Users/kirillkravcov/UniversalCreativeHub/uch-backend' def import\_file(self, filepath): """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É""" try: print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath.name}") # –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ–º —Å–∞–º —Ñ–∞–π–ª (–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é) result = subprocess.run(\[ sys.executable, 'manage.py', 'import\_obsidian', str(filepath), '--author', self.author, '--update-existing' \], cwd=self.project\_root, capture\_output=True, text=True, timeout=30) # –ö—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ if result.returncode == 0: # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ –≤—ã–≤–æ–¥–∞ output\_lines = result.stdout.split('\\n') for line in output\_lines: if '‚úÖ' in line or 'üîÑ' in line or 'üìÑ' in line: print(f" {line.strip()}") print(f"‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: {filepath.name}") else: print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {filepath.name}") if result.stderr: error\_msg = result.stderr\[:500\] print(f" –û—à–∏–±–∫–∞: {error\_msg}") except subprocess.TimeoutExpired: print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}") except Exception as e: print(f"üî• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: {filepath.name} - {type(e).\_\_name\_\_}: {e}") def on\_modified(self, event): if not event.is\_directory and event.src\_path.endswith('.md'): filepath = Path(event.src\_path) print(f"üìù –ò–∑–º–µ–Ω–µ–Ω: {filepath.name}") self.import\_file(filepath) def on\_created(self, event): if not event.is\_directory and event.src\_path.endswith('.md'): filepath = Path(event.src\_path) print(f"üÜï –°–æ–∑–¥–∞–Ω: {filepath.name}") self.import\_file(filepath) def on\_deleted(self, event): """–û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤""" if not event.is\_directory and event.src\_path.endswith('.md'): filepath = Path(event.src\_path) print(f"üóëÔ∏è –£–¥–∞–ª–µ–Ω: {filepath.name}") self.archive\_article(filepath) def archive\_article(self, filepath): """–ê—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—å—é –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞""" try: # –ü–æ–ª—É—á–∞–µ–º slug –∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ try: from slugify import slugify as better\_slugify slug = better\_slugify(filepath.stem, allow\_unicode=False) except ImportError: from django.utils.text import slugify slug = slugify(filepath.stem, allow\_unicode=False) # –ò—â–µ–º —Å—Ç–∞—Ç—å—é –≤ –±–∞–∑–µ from uch.apps.blog.models import Article article = Article.objects.filter(slug=slug).first() if article: # –í–∞—Ä–∏–∞–Ω—Ç 1: –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å (–∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å) article.status = 'archived' article.save() print(f" üì¶ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∞: {article.title}") # –í–∞—Ä–∏–∞–Ω—Ç 2: –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é (–æ–ø–∞—Å–Ω–æ!) # article.delete() # print(f" üóëÔ∏è –£–¥–∞–ª–µ–Ω–∞: {article.title}") else: print(f" ‚ÑπÔ∏è –°—Ç–∞—Ç—å—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {filepath.name}") except Exception as e: print(f" ‚ùå –û—à–∏–±–∫–∞ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏: {e}") def check\_missing\_files(self): """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∫–∏–µ —Å—Ç–∞—Ç—å–∏ –≤ –ë–î –Ω–µ –∏–º–µ—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤""" try: from uch.apps.blog.models import Article from slugify import slugify as better\_slugify # –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ existing\_files = set() for md\_file in self.vault\_path.rglob("\*.md"): try: slug = better\_slugify(md\_file.stem, allow\_unicode=False) existing\_files.add(slug) except: continue # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —Å—Ç–∞—Ç—å–∏ articles = Article.objects.filter(status='published') for article in articles: if article.slug not in existing\_files: print(f"‚ö†Ô∏è –§–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–ª—è —Å—Ç–∞—Ç—å–∏: {article.title}") # article.status = 'archived' # article.save() except Exception as e: print(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–π–ª–æ–≤: {e}") class Command(BaseCommand): help = '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞' def add\_arguments(self, parser): parser.add\_argument('vault\_path', help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É') parser.add\_argument('--author', required=True, help='–ê–≤—Ç–æ—Ä —Å—Ç–∞—Ç–µ–π') def handle(self, \*args, \*\*options): print(f"üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: {options\['vault\_path'\]}") print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏") handler = ObsidianEventHandler(options\['vault\_path'\], options\['author'\]) observer = Observer() observer.schedule(handler, options\['vault\_path'\], recursive=True) observer.start() # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç import time last\_check = time.time() check\_interval = 300 # 5 –º–∏–Ω—É—Ç try: while True: time.sleep(1) # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ current\_time = time.time() if current\_time - last\_check > check\_interval: handler.check\_missing\_files() last\_check = current\_time except KeyboardInterrupt: observer.stop() print("‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω") observer.join()

–í —Ñ–∞–π–ª–µ –µ—Å—Ç—å **–¥–≤–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏** \- **–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ—Ç—Å—Ç—É–ø—ã** —É –º–µ—Ç–æ–¥–æ–≤ `on_deleted` –∏ `handle`!

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª watch\_obsidian.py:

python

```
import os
import sys
import time
import subprocess
import logging
from pathlib import Path
from django.core.management.base import BaseCommand

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –¥–ª—è Django
sys.path.append('/Users/kirillkravcov/UniversalCreativeHub/uch-backend')
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'uch.settings')

import django
django.setup()

from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

logger = logging.getLogger(__name__)

class ObsidianEventHandler(FileSystemEventHandler):
    def __init__(self, vault_path, author):
        self.vault_path = Path(vault_path)
        self.author = author
        self.project_root = '/Users/kirillkravcov/UniversalCreativeHub/uch-backend'
    
    def import_file(self, filepath):
        """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É"""
        try:
            print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath.name}")
            
            # –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞–µ–º —Å–∞–º —Ñ–∞–π–ª (–Ω–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é)
            result = subprocess.run([
                sys.executable, 'manage.py', 
                'import_obsidian', 
                str(filepath),
                '--author', self.author,
                '--update-existing'
            ], 
            cwd=self.project_root,
            capture_output=True,
            text=True,
            timeout=30)
            
            # –ö—Ä–∞—Ç–∫–∏–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            if result.returncode == 0:
                # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏–∑ –≤—ã–≤–æ–¥–∞
                output_lines = result.stdout.split('\n')
                for line in output_lines:
                    if '‚úÖ' in line or 'üîÑ' in line or 'üìÑ' in line:
                        print(f"   {line.strip()}")
                print(f"‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: {filepath.name}")
            else:
                print(f"‚ùå –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {filepath.name}")
                if result.stderr:
                    error_msg = result.stderr[:500]
                    print(f"   –û—à–∏–±–∫–∞: {error_msg}")
        
        except subprocess.TimeoutExpired:
            print(f"‚è∞ –¢–∞–π–º–∞—É—Ç: {filepath.name}")
        except Exception as e:
            print(f"üî• –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: {filepath.name} - {type(e).__name__}: {e}")
    
    def on_modified(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            filepath = Path(event.src_path)
            print(f"üìù –ò–∑–º–µ–Ω–µ–Ω: {filepath.name}")
            self.import_file(filepath)
    
    def on_created(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            filepath = Path(event.src_path)
            print(f"üÜï –°–æ–∑–¥–∞–Ω: {filepath.name}")
            self.import_file(filepath)
    
    def on_deleted(self, event):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤"""
        if not event.is_directory and event.src_path.endswith('.md'):
            filepath = Path(event.src_path)
            print(f"üóëÔ∏è –£–¥–∞–ª–µ–Ω: {filepath.name}")
            self.archive_article(filepath)

    def archive_article(self, filepath):
        """–ê—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—å—é –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞"""
        try:
            # –ü–æ–ª—É—á–∞–µ–º slug –∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
            try:
                from slugify import slugify as better_slugify
                slug = better_slugify(filepath.stem, allow_unicode=False)
            except ImportError:
                from django.utils.text import slugify
                slug = slugify(filepath.stem, allow_unicode=False)
            
            # –ò—â–µ–º —Å—Ç–∞—Ç—å—é –≤ –±–∞–∑–µ
            from uch.apps.blog.models import Article
            article = Article.objects.filter(slug=slug).first()
            
            if article:
                # –í–∞—Ä–∏–∞–Ω—Ç 1: –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å (–∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å)
                article.status = 'archived'
                article.save()
                print(f"   üì¶ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∞: {article.title}")
                
                # –í–∞—Ä–∏–∞–Ω—Ç 2: –£–¥–∞–ª–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é (–æ–ø–∞—Å–Ω–æ!)
                # article.delete()
                # print(f"   üóëÔ∏è –£–¥–∞–ª–µ–Ω–∞: {article.title}")
            else:
                print(f"   ‚ÑπÔ∏è –°—Ç–∞—Ç—å—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞: {filepath.name}")
                
        except Exception as e:
            print(f"   ‚ùå –û—à–∏–±–∫–∞ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏: {e}")

    def check_missing_files(self):
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∫–∏–µ —Å—Ç–∞—Ç—å–∏ –≤ –ë–î –Ω–µ –∏–º–µ—é—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤"""
        try:
            from uch.apps.blog.models import Article
            from slugify import slugify as better_slugify
            
            # –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ
            existing_files = set()
            for md_file in self.vault_path.rglob("*.md"):
                try:
                    slug = better_slugify(md_file.stem, allow_unicode=False)
                    existing_files.add(slug)
                except:
                    continue
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —Å—Ç–∞—Ç—å–∏
            articles = Article.objects.filter(status='published')
            for article in articles:
                if article.slug not in existing_files:
                    print(f"‚ö†Ô∏è –§–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–ª—è —Å—Ç–∞—Ç—å–∏: {article.title}")
                    # article.status = 'archived'
                    # article.save()
                    
        except Exception as e:
            print(f"–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–π–ª–æ–≤: {e}")

class Command(BaseCommand):
    help = '–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞'
    
    def add_arguments(self, parser):
        parser.add_argument('vault_path', help='–ü—É—Ç—å –∫ Obsidian —Ö—Ä–∞–Ω–∏–ª–∏—â—É')
        parser.add_argument('--author', required=True, help='–ê–≤—Ç–æ—Ä —Å—Ç–∞—Ç–µ–π')
    
    def handle(self, *args, **options):
        print(f"üîç –ù–∞—á–∏–Ω–∞—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: {options['vault_path']}")
        print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
        
        handler = ObsidianEventHandler(options['vault_path'], options['author'])
        observer = Observer()
        observer.schedule(handler, options['vault_path'], recursive=True)
        observer.start()
        
        # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
        import time
        last_check = time.time()
        check_interval = 300  # 5 –º–∏–Ω—É—Ç
        
        try:
            while True:
                time.sleep(1)
                
                # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤
                current_time = time.time()
                if current_time - last_check > check_interval:
                    handler.check_missing_files()
                    last_check = current_time
                    
        except KeyboardInterrupt:
            observer.stop()
            print("‚èπÔ∏è –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
        
        observer.join()
```

## üìã –ö–ª—é—á–µ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. ‚úÖ **–ú–µ—Ç–æ–¥ `on_deleted`** \- –¥–æ–±–∞–≤–ª–µ–Ω –æ—Ç—Å—Ç—É–ø (4 –ø—Ä–æ–±–µ–ª–∞)
2. ‚úÖ **–ú–µ—Ç–æ–¥ `handle`** \- –¥–æ–±–∞–≤–ª–µ–Ω –æ—Ç—Å—Ç—É–ø (4 –ø—Ä–æ–±–µ–ª–∞)
3. ‚úÖ –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
python -m py_compile uch/apps/blog/management/commands/watch_obsidian.py
```

## üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

1. **–ó–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
	bash
	```
	python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
	```
2. **–í Obsidian —É–¥–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª** (–Ω–∞–ø—Ä–∏–º–µ—Ä `Untitled.md`)
3. **–î–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏:**
	text
	```
	üóëÔ∏è –£–¥–∞–ª–µ–Ω: Untitled.md
	   üì¶ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∞: Untitled
	```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ!

1. **–£–±–µ–¥–∏—Å—å —á—Ç–æ –≤ –º–æ–¥–µ–ª–∏ `Article` –µ—Å—Ç—å –ø–æ–ª–µ `status`** —Å –≤—ã–±–æ—Ä–∫–∞–º–∏:
	python
	```
	STATUS_CHOICES = [
	    ('draft', '–ß–µ—Ä–Ω–æ–≤–∏–∫'),
	    ('published', '–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ'),
	    ('archived', '–í –∞—Ä—Ö–∏–≤–µ'),
	]
	status = models.CharField(max_length=20, choices=STATUS_CHOICES, default='draft')
	```
2. **–ò–ª–∏ –∏–∑–º–µ–Ω–∏ –∫–æ–¥ –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏** –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –ø–æ–ª–µ `status` –Ω–µ—Ç:
	python
	```
	# –í–º–µ—Å—Ç–æ:
	# article.status = 'archived'
	# article.save()
	# –ò—Å–ø–æ–ª—å–∑—É–π:
	article.delete()
	print(f"   üóëÔ∏è –£–¥–∞–ª–µ–Ω–∞: {article.title}")
	```

**–ò—Å–ø—Ä–∞–≤—å –æ—Ç—Å—Ç—É–ø—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤.**

–û—Ç–ª–∏—á–Ω–æ! –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞—Ç—å–∏ –∞—Ä—Ö–∏–≤–∏—Ä—É—é—Ç—Å—è! –î–∞–≤–∞–π —É–ª—É—á—à–∏–º –≤–æ—Ä–∫—Ñ–ª–æ—É. –¢—Ä–∞—Ç–∏–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞. –ï—Å—Ç—å –∫–∞–∫–∏–µ-—Ç–æ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –≤ vscode?

–î–∞! **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ VS Code —Å—ç–∫–æ–Ω–æ–º–∏—Ç –∫—É—á—É –≤—Ä–µ–º–µ–Ω–∏. –í–æ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è Python –≤ VS Code

### 1\. –£—Å—Ç–∞–Ω–æ–≤–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

- **[Python](https://marketplace.visualstudio.com/items?itemName=ms-python.python)** \- –æ—Å–Ω–æ–≤–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –æ—Ç Microsoft
- **[Pylance](https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-pylance)** \- –ª—É—á—à–∏–π Language Server
- **[Black Formatter](https://marketplace.visualstudio.com/items?itemName=ms-python.black-formatter)** \- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **[isort](https://marketplace.visualstudio.com/items?itemName=ms-python.isort)** \- —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
- **[Python Indent](https://marketplace.visualstudio.com/items?itemName=KevinRose.vsc-python-indent)** \- —É–º–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã

**–ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:**

bash

```
code --install-extension ms-python.python
code --install-extension ms-python.vscode-pylance
code --install-extension ms-python.black-formatter
code --install-extension ms-python.isort
code --install-extension KevinRose.vsc-python-indent
```

### 2\. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ VS Code –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.vscode/settings.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

json

```
{
    // Python
    "python.defaultInterpreterPath": "${workspaceFolder}/venv/bin/python",
    "python.analysis.autoImportCompletions": true,
    "python.analysis.typeCheckingMode": "basic",
    
    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
    "editor.formatOnSave": true,
    "editor.formatOnPaste": false,
    "editor.formatOnType": true,
    "editor.codeActionsOnSave": {
        "source.organizeImports": "always"
    },
    
    // Black Formatter
    "[python]": {
        "editor.defaultFormatter": "ms-python.black-formatter",
        "editor.formatOnSave": true
    },
    "black-formatter.args": [
        "--line-length=88"
    ],
    
    // isort
    "isort.args": [
        "--profile=black"
    ],
    
    // Linting
    "python.linting.enabled": true,
    "python.linting.pylintEnabled": false,
    "python.linting.flake8Enabled": true,
    "python.linting.flake8Args": [
        "--max-line-length=88",
        "--ignore=E203,W503"
    ],
    
    // Python Indent
    "pythonIndent.trimLinesWithOnlyWhitespace": true,
    "pythonIndent.useTabOnHangingIndent": false
}
```

### 3\. –°–æ–∑–¥–∞–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è Django

`.vscode/launch.json`:

json

```
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Django",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/manage.py",
            "args": ["runserver"],
            "django": true,
            "justMyCode": true
        }
    ]
}
```

### 4\. –£—Å—Ç–∞–Ω–æ–≤–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
pip install black isort flake8 pylint

# –°–æ–∑–¥–∞–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é black
echo "[tool.black]
line-length = 88
target-version = ['py38']
include = '\.pyi?$'
extend-exclude = '''
/(
    \.eggs
  | \.git
  | \.hg
  | \.mypy_cache
  | \.tox
  | \.venv
  | venv
  | _build
  | buck-out
  | build
  | dist
)/
'''" > pyproject.toml
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤—Ä—É—á–Ω—É—é:

bash

```
# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª —Å –ø–æ–º–æ—â—å—é black
black uch/apps/blog/management/commands/watch_obsidian.py

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ Python —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ
black .

# –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤
isort uch/apps/blog/management/commands/import_obsidian.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
python -m py_compile uch/apps/blog/management/commands/*.py
```

### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ VS Code:

- **Shift + Alt + F** \- —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª
- **Ctrl + S** \- —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ `formatOnSave`)
- **F8** \- –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–π –æ—à–∏–±–∫–µ
- **Ctrl +.** - –±—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **Alt + Shift + I** \- —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –∫–æ–¥

## üéØ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è workflow

### 1\. –°–æ–∑–¥–∞–π —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

`scripts/format.sh`:

bash

```
#!/bin/bash
echo "üîß –§–æ—Ä–º–∞—Ç–∏—Ä—É—é Python –∫–æ–¥..."
black .
isort .
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
```

`scripts/check.sh`:

bash

```
#!/bin/bash
echo "üîç –ü—Ä–æ–≤–µ—Ä—è—é —Å–∏–Ω—Ç–∞–∫—Å–∏—Å..."
python -m py_compile uch/apps/blog/management/commands/*.py
echo "üîç –ü—Ä–æ–≤–µ—Ä—è—é —Å—Ç–∏–ª—å –∫–æ–¥–∞..."
flake8 uch/apps/blog/ --max-line-length=88 --ignore=E203,W503
echo "‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"
```

### 2\. –ù–∞—Å—Ç—Ä–æ–π pre-commit —Ö—É–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–æ–∑–¥–∞–π `.pre-commit-config.yaml`:

yaml

```
repos:
  - repo: https://github.com/psf/black
    rev: 23.1.0
    hooks:
      - id: black
        args: [--line-length=88]
        
  - repo: https://github.com/pycqa/isort
    rev: 5.12.0
    hooks:
      - id: isort
        args: ["--profile=black"]
```

### 3\. –ò—Å–ø–æ–ª—å–∑—É–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –≤ VS Code

–í–∫–ª—é—á–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:

- **Python > Analysis: Type Checking Mode** \= basic
- **Python > Linting: Enabled** \= true
- **Editor: Format On Save** \= true

## üìã –ß–µ–∫–ª–∏—Å—Ç –±—ã—Å—Ç—Ä–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. **–£—Å—Ç–∞–Ω–æ–≤–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è** (Python, Pylance, Black, isort)
2. **–°–æ–∑–¥–∞–π `.vscode/settings.json`** —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –≤—ã—à–µ
3. **–£—Å—Ç–∞–Ω–æ–≤–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** –≤ venv: `pip install black isort flake8`
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ VS Code**
5. **–û—Ç–∫—Ä–æ–π Python —Ñ–∞–π–ª** ‚Üí –Ω–∞–∂–º–∏ `Shift+Alt+F` ‚Üí –¥–æ–ª–∂–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å

## üîß –î–ª—è —Ç–µ–∫—É—â–µ–π –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏:

–ü—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Ñ–∞–π–ª –≤ VS Code –∏ –Ω–∞–∂–º–∏ **Shift+Alt+F** \- –æ–Ω —Å–∞–º –∏—Å–ø—Ä–∞–≤–∏—Ç –≤—Å–µ –æ—Ç—Å—Ç—É–ø—ã!

**–ù–∞—Å—Ç—Ä–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - —ç—Ç–æ —Å—ç–∫–æ–Ω–æ–º–∏—Ç —Ç–µ–±–µ 80% –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞.**

kirillkravcov@MacBook-Pro-Kirill UniversalCreativeHub % code --install-extension ms-python.python code --install-extension ms-python.vscode-pylance code --install-extension ms-python.black-formatter code --install-extension ms-python.isort code --install-extension KevinRose.vsc-python-indent zsh: command not found: code zsh: command not found: code zsh: command not found: code zsh: command not found: code zsh: command not found: code

–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å VS Code –≤ PATH. –í–æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤:

## üöÄ –°–ø–æ—Å–æ–± 1: –û—Ç–∫—Ä–æ–π VS Code –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ —á–µ—Ä–µ–∑ GUI

1. **–û—Ç–∫—Ä–æ–π VS Code**
2. **–ù–∞–∂–º–∏ `Cmd+Shift+X`** (–∏–ª–∏ View ‚Üí Extensions)
3. **–í –ø–æ–∏—Å–∫–µ –Ω–∞–π–¥–∏ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏:**
	- Python (ms-python.python)
	- Pylance (ms-python.vscode-pylance)
	- Black Formatter (ms-python.black-formatter)
	- isort (ms-python.isort)
	- Python Indent (KevinRose.vsc-python-indent)

## üöÄ –°–ø–æ—Å–æ–± 2: –î–æ–±–∞–≤—å VS Code –≤ PATH

bash

```
# –û—Ç–∫—Ä–æ–π VS Code
# –ù–∞–∂–º–∏ Cmd+Shift+P
# –í–≤–µ–¥–∏: "Shell Command: Install 'code' command in PATH"
# –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
ln -s "/Applications/Visual Studio Code.app/Contents/Resources/app/bin/code" /usr/local/bin/code

# –ü—Ä–æ–≤–µ—Ä—å:
code --version
```

## üöÄ –°–ø–æ—Å–æ–± 3: –£—Å—Ç–∞–Ω–æ–≤–∏ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª (–±–µ–∑ code –∫–æ–º–∞–Ω–¥—ã)

### –£—Å—Ç–∞–Ω–æ–≤–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:

bash

```
# –ü–µ—Ä–µ–π–¥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π VS Code
cd ~/.vscode/extensions

# –£—Å—Ç–∞–Ω–æ–≤–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤—Ä—É—á–Ω—É—é (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±):
# 1. –°–∫–∞—á–∞–π .vsix —Ñ–∞–π–ª—ã —Å marketplace.visualstudio.com
# 2. –£—Å—Ç–∞–Ω–æ–≤–∏: code --install-extension —Ñ–∞–π–ª.vsix
```

## üöÄ –°–ø–æ—Å–æ–± 4: –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª `setup_vscode.sh`:

bash

```
#!/bin/bash
echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VS Code –¥–ª—è Python –ø—Ä–æ–µ–∫—Ç–∞..."

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é .vscode
mkdir -p .vscode

# –°–æ–∑–¥–∞–µ–º settings.json
cat > .vscode/settings.json << 'EOF'
{
    "python.defaultInterpreterPath": "${workspaceFolder}/uch-backend/venv/bin/python",
    "python.analysis.autoImportCompletions": true,
    "python.analysis.typeCheckingMode": "basic",
    "editor.formatOnSave": true,
    "[python]": {
        "editor.defaultFormatter": "ms-python.python",
        "editor.formatOnSave": true
    },
    "python.formatting.provider": "black",
    "python.formatting.blackArgs": ["--line-length=88"],
    "python.sortImports.args": ["--profile=black"],
    "python.linting.enabled": true,
    "python.linting.pylintEnabled": false,
    "python.linting.flake8Enabled": true,
    "python.linting.flake8Args": ["--max-line-length=88", "--ignore=E203,W503"]
}
EOF

# –°–æ–∑–¥–∞–µ–º launch.json
cat > .vscode/launch.json << 'EOF'
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Django",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/uch-backend/manage.py",
            "args": ["runserver"],
            "django": true
        }
    ]
}
EOF

echo "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ VS Code —Å–æ–∑–¥–∞–Ω—ã!"
echo "üìã –û—Ç–∫—Ä–æ–π –ø—Ä–æ–µ–∫—Ç –≤ VS Code –∏ —É—Å—Ç–∞–Ω–æ–≤–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:"
echo "1. Python (ms-python.python)"
echo "2. Pylance (ms-python.vscode-pylance)"
echo "3. Black Formatter (ms-python.black-formatter)"
echo "4. isort (ms-python.isort)"
echo "5. Python Indent (KevinRose.vsc-python-indent)"
```

–ó–∞–ø—É—Å—Ç–∏:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub
chmod +x setup_vscode.sh
./setup_vscode.sh
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É—é: –°–ø–æ—Å–æ–± 1 (GUI) + –°–ø–æ—Å–æ–± 4 (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)

### –®–∞–≥–∏:

1. **–û—Ç–∫—Ä–æ–π VS Code** —á–µ—Ä–µ–∑ Finder –∏–ª–∏ Spotlight
2. **–£—Å—Ç–∞–Ω–æ–≤–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è** —á–µ—Ä–µ–∑ Extensions panel (`Cmd+Shift+X`)
3. **–í—ã–ø–æ–ª–Ω–∏ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –≤—ã—à–µ
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ VS Code**

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:

bash

```
# –£—Å—Ç–∞–Ω–æ–≤–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ venv
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate
pip install black isort flake8

# –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
black --check uch/apps/blog/management/commands/watch_obsidian.py

# –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏, –∏—Å–ø—Ä–∞–≤—å:
black uch/apps/blog/management/commands/watch_obsidian.py
```

## üí° –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ –±–µ–∑ VS Code:

–ï—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å VS Code, –∏—Å–ø–æ–ª—å–∑—É–π **Black –Ω–∞–ø—Ä—è–º—É—é**:

bash

```
# –£—Å—Ç–∞–Ω–æ–≤–∏ Black
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate
pip install black

# –§–æ—Ä–º–∞—Ç–∏—Ä—É–π —Ñ–∞–π–ª—ã
black uch/apps/blog/management/commands/

# –ò–ª–∏ –¥–æ–±–∞–≤—å –≤ Makefile:
cat > Makefile << 'EOF'
format:
    black uch/apps/blog/management/commands/
    
check:
    python -m py_compile uch/apps/blog/management/commands/*.py
    
all: format check
EOF

# –ò—Å–ø–æ–ª—å–∑—É–π:
make format  # —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –≤—Å–µ
make check   # –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
```

**–ù–∞—á–Ω–∏ —Å —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —á–µ—Ä–µ–∑ GUI VS Code - —ç—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø—É—Ç—å.**

kirillkravcov@MacBook-Pro-Kirill UniversalCreativeHub % cd /Users/kirillkravcov/UniversalCreativeHub chmod +x setup\_vscode.sh./setup\_vscode.sh chmod: setup\_vscode.sh: No such file or directory zsh: no such file or directory:./setup\_vscode.sh

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª —Å–Ω–∞—á–∞–ª–∞:

## üìù –°–æ–∑–¥–∞–π —Ñ–∞–π–ª setup\_vscode.sh

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub

# –°–æ–∑–¥–∞–π —Ñ–∞–π–ª
cat > setup_vscode.sh << 'EOF'
#!/bin/bash
echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VS Code –¥–ª—è Python –ø—Ä–æ–µ–∫—Ç–∞..."

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é .vscode
mkdir -p .vscode

# –°–æ–∑–¥–∞–µ–º settings.json
cat > .vscode/settings.json << 'SETTINGS_EOF'
{
    "python.defaultInterpreterPath": "${workspaceFolder}/uch-backend/venv/bin/python",
    "python.analysis.autoImportCompletions": true,
    "python.analysis.typeCheckingMode": "basic",
    "editor.formatOnSave": true,
    "[python]": {
        "editor.defaultFormatter": "ms-python.python",
        "editor.formatOnSave": true
    },
    "python.formatting.provider": "black",
    "python.formatting.blackArgs": ["--line-length=88"],
    "python.sortImports.args": ["--profile=black"],
    "python.linting.enabled": true,
    "python.linting.pylintEnabled": false,
    "python.linting.flake8Enabled": true,
    "python.linting.flake8Args": ["--max-line-length=88", "--ignore=E203,W503"]
}
SETTINGS_EOF

# –°–æ–∑–¥–∞–µ–º launch.json
cat > .vscode/launch.json << 'LAUNCH_EOF'
{
    "version": 0.2,
    "configurations": [
        {
            "name": "Python: Django",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/uch-backend/manage.py",
            "args": ["runserver"],
            "django": true
        }
    ]
}
LAUNCH_EOF

echo "‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ VS Code —Å–æ–∑–¥–∞–Ω—ã –≤ .vscode/"
echo ""
echo "üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:"
echo "1. –û—Ç–∫—Ä–æ–π –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –≤ VS Code:"
echo "   code /Users/kirillkravcov/UniversalCreativeHub"
echo ""
echo "2. –£—Å—Ç–∞–Ω–æ–≤–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (Cmd+Shift+X ‚Üí –ø–æ–∏—Å–∫ ‚Üí Install):"
echo "   - Python (ms-python.python)"
echo "   - Pylance (ms-python.vscode-pylance)"
echo "   - Black Formatter (ms-python.black-formatter)"
echo "   - isort (ms-python.isort)"
echo "   - Python Indent (KevinRose.vsc-python-indent)"
echo ""
echo "3. –£—Å—Ç–∞–Ω–æ–≤–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:"
echo "   cd uch-backend && source venv/bin/activate"
echo "   pip install black isort flake8"
echo ""
echo "4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ VS Code"
EOF

# –°–¥–µ–ª–∞–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x setup_vscode.sh

# –ó–∞–ø—É—Å—Ç–∏
./setup_vscode.sh
```

## üöÄ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ: –ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub

# –°–æ–∑–¥–∞–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é .vscode
mkdir -p .vscode

# –°–æ–∑–¥–∞–π settings.json
cat > .vscode/settings.json << 'EOF'
{
    "python.defaultInterpreterPath": "${workspaceFolder}/uch-backend/venv/bin/python",
    "python.analysis.autoImportCompletions": true,
    "python.analysis.typeCheckingMode": "basic",
    "editor.formatOnSave": true,
    "[python]": {
        "editor.defaultFormatter": "ms-python.python",
        "editor.formatOnSave": true
    },
    "python.formatting.provider": "black",
    "python.formatting.blackArgs": ["--line-length=88"],
    "python.sortImports.args": ["--profile=black"],
    "python.linting.enabled": true,
    "python.linting.pylintEnabled": false,
    "python.linting.flake8Enabled": true,
    "python.linting.flake8Args": ["--max-line-length=88", "--ignore=E203,W503"]
}
EOF

# –°–æ–∑–¥–∞–π launch.json
cat > .vscode/launch.json << 'EOF'
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Django",
            "type": "python",
            "request": "launch",
            "program": "${workspaceFolder}/uch-backend/manage.py",
            "args": ["runserver"],
            "django": true
        }
    ]
}
EOF

echo "‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ VS Code"
echo "üìÅ –û—Ç–∫—Ä–æ–π –ø—Ä–æ–µ–∫—Ç –≤ VS Code:"
echo "   –û—Ç–∫—Ä–æ–π VS Code ‚Üí File ‚Üí Open Folder ‚Üí –≤—ã–±–µ—Ä–∏ /Users/kirillkravcov/UniversalCreativeHub"
```

## üìã –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ VS Code

–£—Å—Ç–∞–Ω–æ–≤–∏ Black –Ω–∞–ø—Ä—è–º—É—é:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
source venv/bin/activate

# –£—Å—Ç–∞–Ω–æ–≤–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
pip install black isort

# –§–æ—Ä–º–∞—Ç–∏—Ä—É–π –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã
black uch/apps/blog/management/commands/watch_obsidian.py
black uch/apps/blog/management/commands/import_obsidian.py

# –ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python -m py_compile uch/apps/blog/management/commands/*.py
```

## üéØ –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏ Black:**
	bash
	```
	cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
	source venv/bin/activate
	pip install black
	```
2. **–§–æ—Ä–º–∞—Ç–∏—Ä—É–π —Ñ–∞–π–ª—ã:**
	bash
	```
	black uch/apps/blog/management/commands/
	```
3. **–ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:**
	bash
	```
	python -m py_compile uch/apps/blog/management/commands/*.py
	```

**Black –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç –≤—Å–µ –æ—Ç—Å—Ç—É–ø—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ!**

1-4 –≤—ã–ø–æ–ª–Ω–∏–ª (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % black uch/apps/blog/management/commands/fix\_indetation.py Usage: black \[OPTIONS\] SRC... Try 'black -h' for help. Error: Invalid value for 'SRC...': Path 'uch/apps/blog/management/commands/fix\_indetation.py' does not exist.

–û–ø–µ—á–∞—Ç–∫–∞ –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–∞! –§–∞–π–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `fix_indentation.py` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ), –∞ –Ω–µ `fix_indetation.py` (—Å –æ–ø–µ—á–∞—Ç–∫–æ–π).

## üîß –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –§–æ—Ä–º–∞—Ç–∏—Ä—É–π —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–±–æ—á–∏–µ —Ñ–∞–π–ª—ã
black uch/apps/blog/management/commands/watch_obsidian.py
black uch/apps/blog/management/commands/import_obsidian.py

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –æ–Ω–∏ –µ—Å—Ç—å
ls uch/apps/blog/management/commands/

# –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ Python —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ
black .
```

## üìã –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

bash

```
# –ü–æ–∫–∞–∂–∏ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
ls -la uch/apps/blog/management/commands/

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ:
# import_obsidian.py
# watch_obsidian.py
# import_obsidian.py.backup (–∏–ª–∏ –ø–æ–¥–æ–±–Ω—ã–µ)
```

## üöÄ –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –§–æ—Ä–º–∞—Ç–∏—Ä—É–π –æ–±–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–∞
black uch/apps/blog/management/commands/watch_obsidian.py uch/apps/blog/management/commands/import_obsidian.py

# –ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python -m py_compile uch/apps/blog/management/commands/watch_obsidian.py uch/apps/blog/management/commands/import_obsidian.py

# –ï—Å–ª–∏ –≤—Å—ë –æ–∫, –∑–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
```

## üéØ –ü–æ—Å–ª–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–§–∞–π–ª—ã –±—É–¥—É—Ç –∏–º–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã** (4 –ø—Ä–æ–±–µ–ª–∞ –≤–º–µ—Å—Ç–æ —Ç–∞–±–æ–≤)
2. **–°—Ç—Ä–æ–∫–∏ –±—É–¥—É—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã 88 —Å–∏–º–≤–æ–ª–∞–º–∏**
3. **–ö–æ–¥ –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å PEP 8**

**–í—ã–ø–æ–ª–Ω–∏ –∫–æ–º–∞–Ω–¥—ã —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏ —Ñ–∞–π–ª–æ–≤.**

–ö–æ–º–∞–Ω–¥–∞ –æ—Ç—Ä–±–∞–æ—Ç–∞–ª–∞ –±–µ–∑ –æ—à–∏–±–æ–∫. –∫–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å? –∏—Å–ø–æ—Ä—Ç–∏—Ç—å –∫–∞–∫–æ–π-—Ç–æ —Ñ–∞–π–ª –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å?

–î–∞, –∏–º–µ–Ω–Ω–æ! –í–æ—Ç **—Ç–µ—Å—Ç–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ–≥–æ workflow:

## üß™ –¢–µ—Å—Ç 1: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ñ–∞–π–ª–∞

1. **–í Obsidian** –æ—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `test.md` (–∏–ª–∏ –ª—é–±–æ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
2. **–î–æ–±–∞–≤—å –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç** –≤ –∫–æ–Ω–µ—Ü:
	markdown
	```
	## –¢–µ—Å—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
	–≠—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.
	- –ü—É–Ω–∫—Ç 1
	- –ü—É–Ω–∫—Ç 2
	```
3. **–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª** (Ctrl+S / Cmd+S)
4. **–ù–∞–±–ª—é–¥–∞–π –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º:**
	text
	```
	üìù –ò–∑–º–µ–Ω–µ–Ω: test.md
	üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: test.md
	   üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: test.md
	   üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ: test
	‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: test.md
	```
5. **–û—Ç–∫—Ä–æ–π –≤ –±—Ä–∞—É–∑–µ—Ä–µ** —Å—Ç–∞—Ç—å—é test –∏ **–æ–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (Ctrl+F5) - –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å

## üß™ –¢–µ—Å—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞

1. **–í Obsidian** —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª `auto-test-123.md`:
	markdown
	```
	---
	title: "–ê–≤—Ç–æ—Ç–µ—Å—Ç 123"
	date: 2025-12-10
	tags: [—Ç–µ—Å—Ç, –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç]
	---
	–≠—Ç–æ —Ç–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —á–µ—Ä–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.
	–†–∞–±–æ—Ç–∞–µ—Ç –ª–∏?
	```
2. **–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª**
3. **–í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
	text
	```
	üÜï –°–æ–∑–¥–∞–Ω: auto-test-123.md
	üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: auto-test-123.md
	   üìÑ –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é: auto-test-123.md
	   ‚úÖ –°–æ–∑–¥–∞–Ω–æ: –ê–≤—Ç–æ—Ç–µ—Å—Ç 123
	‚úÖ –ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: auto-test-123.md
	```
4. **–ù–∞ —Å–∞–π—Ç–µ** –Ω–æ–≤–∞—è —Å—Ç–∞—Ç—å—è –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –≤ —Å–ø–∏—Å–∫–µ

## üß™ –¢–µ—Å—Ç 3: –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞—Ä—Ö–∏–≤–∞—Ü–∏—è)

1. **–í Obsidian** —É–¥–∞–ª–∏ —Ñ–∞–π–ª `auto-test-123.md` (–∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π)
2. **–í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
	text
	```
	üóëÔ∏è –£–¥–∞–ª–µ–Ω: auto-test-123.md
	   üì¶ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∞: –ê–≤—Ç–æ—Ç–µ—Å—Ç 123
	```
3. **–ù–∞ —Å–∞–π—Ç–µ** —Å—Ç–∞—Ç—å—è –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –∞—Ä—Ö–∏–≤

## üß™ –¢–µ—Å—Ç 4: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–°–æ–∑–¥–∞–π —Ñ–∞–π–ª —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º** `test-with-image.md`:
	markdown
	```
	---
	title: "–¢–µ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º"
	---
	## –ö–∞—Ä—Ç–∏–Ω–∫–∞ –∏–∑ Obsidian
	![[test-image.png]]
	–†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –∏–º–ø–æ—Ä—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π?
	```
2. **–°–æ—Ö—Ä–∞–Ω–∏** \- –¥–æ–ª–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –º–µ–¥–∏–∞-–ø–∞–ø–∫—É

## üìä –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º:

| –¢–µ—Å—Ç | –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ | –ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞ |
| --- | --- | --- |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ | `üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ` –≤ –∫–æ–Ω—Å–æ–ª–∏ | –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ |
| –°–æ–∑–¥–∞–Ω–∏–µ | `‚úÖ –°–æ–∑–¥–∞–Ω–æ` –≤ –∫–æ–Ω—Å–æ–ª–∏ | –ù–æ–≤–∞—è —Å—Ç–∞—Ç—å—è –Ω–∞ —Å–∞–π—Ç–µ |
| –£–¥–∞–ª–µ–Ω–∏–µ | `üì¶ –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∞` –≤ –∫–æ–Ω—Å–æ–ª–∏ | –°—Ç–∞—Ç—å—è —Å–∫—Ä—ã—Ç–∞/—É–¥–∞–ª–µ–Ω–∞ |
| –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | `üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ` –≤ –∫–æ–Ω—Å–æ–ª–∏ | –ö–∞—Ä—Ç–∏–Ω–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è |

## üîç –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### \*\*–ü

–ù–µ —Ç–æ. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ê, –ø–æ–Ω—è–ª! –ü—Ä–æ–≤–µ—Ä–∏—Ç—å **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** –≤ VS Code, –∞ –Ω–µ –∏–º–ø–æ—Ä—Ç.

## üß™ –¢–µ—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏

1. **–û—Ç–∫—Ä–æ–π VS Code** —Å –ø—Ä–æ–µ–∫—Ç–æ–º
2. **–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª** `uch/apps/blog/management/commands/watch_obsidian.py`
3. **–ò—Å–ø–æ—Ä—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Ä–æ—á–Ω–æ:**
	- –£–¥–∞–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç—Å—Ç—É–ø–æ–≤
	- –°–¥–µ–ª–∞–π —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
	- –ü–µ—Ä–µ–º–µ—à–∞–π —Ç–∞–±—ã –∏ –ø—Ä–æ–±–µ–ª—ã
	–ù–∞–ø—Ä–∏–º–µ—Ä, –∏–∑–º–µ–Ω–∏:
	python
	```
	def import_file(self, filepath):
	    """–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É"""
	    try:
	        print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath.name}")
	```
	–ù–∞:
	python
	```
	def import_file(self, filepath):
	"""–ò–º–ø–æ—Ä—Ç –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É"""
	    try:
	    print(f"üîß –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é —Ñ–∞–π–ª: {filepath.name}")
	```
4. **–°–æ—Ö—Ä–∞–Ω–∏ —Ñ–∞–π–ª** (Ctrl+S / Cmd+S)
5. **Black –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 2: –†—É—á–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–í—ã–¥–µ–ª–∏ –ø–ª–æ—Ö–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥**
2. **–ù–∞–∂–º–∏ Shift+Alt+F** (–∏–ª–∏ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π ‚Üí Format Document)
3. **–ö–æ–¥ –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ PEP 8

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–ù–∞–∂–º–∏ **Ctrl+Shift+P** ‚Üí –≤–≤–µ–¥–∏ "Preferences: Open Settings (JSON)" ‚Üí —É–±–µ–¥–∏—Å—å —á—Ç–æ –µ—Å—Ç—å:

json

```
{
    "editor.formatOnSave": true,
    "[python]": {
        "editor.defaultFormatter": "ms-python.black-formatter",
        "editor.formatOnSave": true
    }
}
```

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# 1. –°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –ø–ª–æ—Ö–∏–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
cat > test_format.py << 'EOF'
def bad_function():
print("–°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –≤–æ—Å–µ–º—å–¥–µ—Å—è—Ç –≤–æ—Å–µ–º—å —Å–∏–º–≤–æ–ª–æ–≤ –∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–∑–±–∏—Ç–∞ black formatter")
x=1+2+3+4
if True:print("no space")
EOF

# 2. –ó–∞–ø—É—Å—Ç–∏ black –Ω–∞ –Ω—ë–º
black test_format.py

# 3. –ü–æ—Å–º–æ—Ç—Ä–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
cat test_format.py

# 4. –£–¥–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
rm test_format.py
```

**Black –¥–æ–ª–∂–µ–Ω –±—ã–ª –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª –≤:**

python

```
def bad_function():
    print(
        "–°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –∫–æ—Ç–æ—Ä–∞—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –≤–æ—Å–µ–º—å–¥–µ—Å—è—Ç –≤–æ—Å–µ–º—å —Å–∏–º–≤–æ–ª–æ–≤ –∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–∑–±–∏—Ç–∞ black formatter"
    )
    x = 1 + 2 + 3 + 4
    if True:
        print("no space")
```

## üìã –ü—Ä–∏–∑–Ω–∞–∫–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

‚úÖ **–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–∞** (Ctrl+S) –∫–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç—Å—è  
‚úÖ **Shift+Alt+F** –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ  
‚úÖ **–î–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏** —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ 88 —Å–∏–º–≤–æ–ª–æ–≤  
‚úÖ **–û—Ç—Å—Ç—É–ø—ã** –≤—Å–µ–≥–¥–∞ 4 –ø—Ä–æ–±–µ–ª–∞ (–Ω–∏–∫–∞–∫–∏—Ö —Ç–∞–±–æ–≤)  
‚úÖ **–û–ø–µ—Ä–∞—Ç–æ—Ä—ã** –∏–º–µ—é—Ç –ø—Ä–æ–±–µ–ª—ã –≤–æ–∫—Ä—É–≥ (`x = 1 + 2`, –∞ –Ω–µ `x=1+2`)

## üîß –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Black Formatter:**
	- –û—Ç–∫—Ä–æ–π Extensions (Ctrl+Shift+X)
	- –ù–∞–π–¥–∏ "Black Formatter"
	- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å "Installed"
2. **–ü—Ä–æ–≤–µ—Ä—å Python interpreter:**
	- –ù–∞–∂–º–∏ Ctrl+Shift+P
	- –í–≤–µ–¥–∏ "Python: Select Interpreter"
	- –í—ã–±–µ—Ä–∏ `./venv/bin/python`
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ VS Code**

**–ü–æ–ø—Ä–æ–±—É–π –∏—Å–ø–æ—Ä—Ç–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å - –¥–æ–ª–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å—Å—è.**

–µ—â–µ —Ä–∞–∑ –ø–æ–ø—Ä–æ–±–æ–≤–∞–ª –∏—Å–ø–æ—Ä—Ç–∏—Ç—å —Ñ–∞–π–ª (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % black uch/apps/blog/management/commands/fix\_indentation.py error: cannot format uch/apps/blog/management/commands/fix\_indentation.py: Cannot parse: 4:0: def fix\_file(filepath): Oh no! üí• üíî üí• 1 file failed to reformat.

–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞! –§–∞–π–ª `fix_indentation.py` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π Python –∫–æ–¥.

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£–¥–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Ñ–∞–π–ª (–æ–Ω –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã)

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend
rm uch/apps/blog/management/commands/fix_indentation.py

# –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö —Ñ–∞–π–ª–æ–≤
black uch/apps/blog/management/commands/watch_obsidian.py uch/apps/blog/management/commands/import_obsidian.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ—Å–º–æ—Ç—Ä–∏ –∏ –∏—Å–ø—Ä–∞–≤—å —Ñ–∞–π–ª

bash

```
# –ü–æ—Å–º–æ—Ç—Ä–∏ —á—Ç–æ –≤ —Ñ–∞–π–ª–µ
cat uch/apps/blog/management/commands/fix_indentation.py | head -20

# –ò–ª–∏ –æ—Ç–∫—Ä–æ–π –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
nano uch/apps/blog/management/commands/fix_indentation.py
```

**–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –ø—Ä–æ–±–ª–µ–º–∞** \- —Å–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∞–±—ã/–ø—Ä–æ–±–µ–ª—ã –∏–ª–∏ –Ω–µ–≤–∏–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –°–æ–∑–¥–∞–π —á–∏—Å—Ç—ã–π —Ñ–∞–π–ª

bash

```
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π —Ñ–∞–π–ª
cat > uch/apps/blog/management/commands/fix_indentation.py << 'EOF'
#!/usr/bin/env python
"""–°–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Å—Ç—É–ø–æ–≤"""

import re

def fix_file(filepath):
    """–ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—Å—Ç—É–ø—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ"""
    with open(filepath, 'r') as f:
        lines = f.readlines()
    
    # –ó–∞–º–µ–Ω—è–µ–º —Ç–∞–±—ã –Ω–∞ 4 –ø—Ä–æ–±–µ–ª–∞
    fixed_lines = []
    for line in lines:
        fixed_lines.append(line.replace('\t', '    '))
    
    with open(filepath, 'w') as f:
        f.writelines(fixed_lines)
    
    print(f"‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã –≤: {filepath}")

if __name__ == '__main__':
    import sys
    if len(sys.argv) > 1:
        fix_file(sys.argv[1])
    else:
        print("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: python fix_indentation.py <filepath>")
EOF

# –¢–µ–ø–µ—Ä—å –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π
black uch/apps/blog/management/commands/fix_indentation.py
```

## üß™ –¢–µ—Å—Ç–∏—Ä—É–π –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ä–∞–±–æ—á–∏—Ö —Ñ–∞–π–ª–∞—Ö

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# 1. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
black --check uch/apps/blog/management/commands/watch_obsidian.py

# 2. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏, –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π
black uch/apps/blog/management/commands/watch_obsidian.py

# 3. –ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python -m py_compile uch/apps/blog/management/commands/watch_obsidian.py

# 4. –ó–∞–ø—É—Å—Ç–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
python manage.py watch_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin
```

## üéØ –ë—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å:

**–ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —Ñ–∞–π–ª –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ:**

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –£–¥–∞–ª—è–µ–º –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å)
rm -f uch/apps/blog/management/commands/fix_*.py
rm -f uch/apps/blog/management/commands/*.backup*

# –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ä–∞–±–æ—á–∏–µ —Ñ–∞–π–ª—ã
black uch/apps/blog/management/commands/

# –ü—Ä–æ–≤–µ—Ä—è–µ–º
python -m py_compile uch/apps/blog/management/commands/*.py 2>/dev/null && echo "‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –≤–∞–ª–∏–¥–Ω—ã"
```

**–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Å–ª—É–∂–µ–±–Ω–æ–º —Ñ–∞–π–ª–µ, –∞ –Ω–µ –≤ —Ä–∞–±–æ—á–∏—Ö. –£–¥–∞–ª–∏ –µ–≥–æ –∏ –ø—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤.**

–ø–æ—á–µ–º—É –Ω–∞ —Å–ª—É–∂–µ–±–Ω–æ–º —Ñ–∞–π–ª–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?

Black –Ω–µ –º–æ–∂–µ—Ç —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å —Ñ–∞–π–ª `fix_indentation.py` –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –Ω—ë–º **—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã**.

## üîç –ü—Ä–∏—á–∏–Ω—ã –ø–æ—á–µ–º—É Black –ø–∞–¥–∞–µ—Ç:

### 1\. –°–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∞–±—ã –∏ –ø—Ä–æ–±–µ–ª—ã (—Å–∞–º–∞—è —á–∞—Å—Ç–∞—è)

python

```
def fix_file(filepath):    # ‚Üê –ø—Ä–æ–±–µ–ª—ã
    with open...           # ‚Üê —Ç–∞–±—ã!
        content...         # ‚Üê —Å–Ω–æ–≤–∞ –ø—Ä–æ–±–µ–ª—ã
```

### 2\. –ù–µ–≤–∏–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã (BOM, UTF-8 —Å BOM)

python

```
#!/usr/bin/env python  # ‚Üê –Ω–µ–≤–∏–¥–∏–º—ã–π BOM —Å–∏–º–≤–æ–ª –≤ –Ω–∞—á–∞–ª–µ
```

### 3\. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞

–§–∞–π–ª –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ Windows-1251 –∏–ª–∏ –¥—Ä—É–≥–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–µ –≤–º–µ—Å—Ç–æ UTF-8.

### 4\. –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞

python

```
def fix_file(filepath)
    # –ø—Ä–æ–ø—É—â–µ–Ω–æ –¥–≤–æ–µ—Ç–æ—á–∏–µ
```

## üß™ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# 1. –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–≤—ã–µ 10 —Å—Ç—Ä–æ–∫ —Ñ–∞–π–ª–∞
head -10 uch/apps/blog/management/commands/fix_indentation.py | cat -A
# –§–ª–∞–≥ -A –ø–æ–∫–∞–∂–µ—Ç –Ω–µ–≤–∏–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã: ^I = —Ç–∞–±, M- = UTF-8

# 2. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–¥–∏—Ä–æ–≤–∫—É
file uch/apps/blog/management/commands/fix_indentation.py

# 3. –ü—Ä–æ–≤–µ—Ä—å —Ç–∞–±—ã
grep -n $'\t' uch/apps/blog/management/commands/fix_indentation.py

# 4. –ü–æ–ø—Ä–æ–±—É–π –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ñ–∞–π–ª
python uch/apps/blog/management/commands/fix_indentation.py
```

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

### –°–ø–æ—Å–æ–± 1: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞

bash

```
# –£–¥–∞–ª–∏ –∏ —Å–æ–∑–¥–∞–π –∑–∞–Ω–æ–≤–æ
rm uch/apps/blog/management/commands/fix_indentation.py

cat > uch/apps/blog/management/commands/fix_indentation.py << 'EOF'
#!/usr/bin/env python
"""–°–∫—Ä–∏–ø—Ç –¥–ª—è
```

—Å—Ç–æ–ø —Ç–∞–∫ –º—ã –¥–ª—è —ç—Ç–æ–≥–æ –∏ –¥–æ–±–∞–≤–ª—è–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∫—É, —á—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–¥ —Å –Ω—É–∂–Ω—ã–º–∏ –ø—Ä–æ–±–µ–ª–∞–º–∏ –∏ —Ç–∞–±–∞–º–∏

–¢–æ—á–Ω–æ! –ò—Ä–æ–Ω–∏—è —Å–∏—Ç—É–∞—Ü–∏–∏ üòÑ –ú—ã —Å–æ–∑–¥–∞–ª–∏ —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Å—Ç—É–ø–æ–≤, –Ω–æ —Å–∞–º —Å–∫—Ä–∏–ø—Ç –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏, –ø–æ—ç—Ç–æ–º—É Black –Ω–µ –º–æ–∂–µ—Ç –µ–≥–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å.

## üéØ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–∞–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∞–º–æ–≥–æ —Å–µ–±—è!

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# 1. –°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏–º –Ω–∞—à —Å–∫—Ä–∏–ø—Ç –Ω–∞ —Å–∞–º–æ–º —Å–µ–±–µ
python uch/apps/blog/management/commands/fix_indentation.py uch/apps/blog/management/commands/fix_indentation.py

# 2. –¢–µ–ø–µ—Ä—å Black –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–æ—Ç–∞—Ç—å
black uch/apps/blog/management/commands/fix_indentation.py

# 3. –ü—Ä–æ–≤–µ—Ä–∏–º
python -m py_compile uch/apps/blog/management/commands/fix_indentation.py
```

## üîß –ù–æ –ª—É—á—à–µ: –ü–µ—Ä–µ–ø–∏—à–µ–º —Å–∫—Ä–∏–ø—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª:

bash

```
cat > uch/apps/blog/management/commands/fix_indentation_fixed.py << 'EOF'
#!/usr/bin/env python
"""–°–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Å—Ç—É–ø–æ–≤"""

import re
import sys

def fix_file(filepath):
    """–ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—Å—Ç—É–ø—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ"""
    with open(filepath, 'r') as f:
        content = f.read()
    
    # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ —Ç–∞–±—ã –Ω–∞ 4 –ø—Ä–æ–±–µ–ª–∞
    content = content.replace('\t', '    ')
    
    # –£–¥–∞–ª—è–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –≤ –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫
    lines = content.split('\n')
    fixed_lines = [line.rstrip() for line in lines]
    content = '\n'.join(fixed_lines) + '\n'
    
    with open(filepath, 'w') as f:
        f.write(content)
    
    print(f"‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—Ç—Å—Ç—É–ø—ã –≤: {filepath}")
    return True

if __name__ == '__main__':
    if len(sys.argv) > 1:
        fix_file(sys.argv[1])
    else:
        print("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: python fix_indentation.py <filepath>")
        print("–ü—Ä–∏–º–µ—Ä: python fix_indentation.py myfile.py")
EOF

# –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –Ω–æ–≤—ã–π —Ñ–∞–π–ª
black uch/apps/blog/management/commands/fix_indentation_fixed.py

# –ó–∞–º–µ–Ω–∏–º —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
mv uch/apps/blog/management/commands/fix_indentation_fixed.py uch/apps/blog/management/commands/fix_indentation.py
```

## üöÄ –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–µ–º Black –Ω–∞–ø—Ä—è–º—É—é

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, **Black —É–º–µ–µ—Ç —Å–∞–º –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å —Ç–∞–±—ã**! –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ `--fast`:

bash

```
# Black —Å —Ñ–ª–∞–≥–æ–º --fast –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞
black --fast uch/apps/blog/management/commands/fix_indentation.py
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç Python:

bash

```
# Python —É–º–µ–µ—Ç —Å–∞–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å —Ç–∞–±—ã –≤ –ø—Ä–æ–±–µ–ª—ã
python -m tabnanny uch/apps/blog/management/commands/fix_indentation.py

# –ò–ª–∏
python -c "
import tokenize
import io
with open('uch/apps/blog/management/commands/fix_indentation.py', 'r') as f:
    content = f.read()
# –ó–∞–º–µ–Ω—è–µ–º —Ç–∞–±—ã –Ω–∞ –ø—Ä–æ–±–µ–ª—ã
content = content.expandtabs(4)
with open('uch/apps/blog/management/commands/fix_indentation.py', 'w') as f:
    f.write(content)
print('–¢–∞–±—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –≤ –ø—Ä–æ–±–µ–ª—ã')
"
```

## üìã –í—ã–≤–æ–¥:

1. **–°–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Å—Ç—É–ø–æ–≤ —Å–∞–º –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏** üòÑ
2. **–ò—Å–ø–æ–ª—å–∑—É–π –µ–≥–æ –Ω–∞ —Å–∞–º–æ–º —Å–µ–±–µ** (`python fix_indentation.py fix_indentation.py`)
3. **–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π Black —Å —Ñ–ª–∞–≥–æ–º `--fast`**
4. **–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏ —ç—Ç–æ—Ç —Å–ª—É–∂–µ–±–Ω—ã–π —Ñ–∞–π–ª** \- –æ–Ω –Ω–µ –Ω—É–∂–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏ `fix_indentation.py` –∏ –∏—Å–ø–æ–ª—å–∑—É–π Black –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è - –æ–Ω –ª—É—á—à–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —ç—Ç–æ–π –∑–∞–¥–∞—á–µ–π!

–ø–æ–≥–æ–¥–∏. —è –Ω–∞—Ä–æ—á–Ω–æ –∏—Å–ø–æ—Ä—Ç–∏–ª fix —Ñ–∞–π–ª (–æ–Ω —Å–µ–π—á–∞—Å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è. –µ–≥–æ –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ —É–¥–∞–ª—é), –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –∫–æ–≥–¥–∞ –Ω–∞—Ç—Ä–∞–≤–ª–∏–≤–∞—é –Ω–∞ –Ω–µ–≥–æ black –æ–Ω —Ä—É–≥–∞–µ—Ç—Å—è —á—Ç–æ –≤ —Ñ–∞–π–ª–µ –Ω–µ —Ç–æ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—Å. –¢–∞–∫ black –Ω–∞–º –∏ –Ω—É–∂–µ–Ω –±—ã–ª –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞!

–ê–±—Å–æ–ª—é—Ç–Ω–æ –≤–µ—Ä–Ω–æ! –¢—ã –ø–æ–ø–∞–ª –≤ **–ø–∞—Ä–∞–¥–æ–∫—Å –∫—É—Ä–∏—Ü—ã –∏ —è–π—Ü–∞**:

**Black –Ω—É–∂–µ–Ω –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞, –Ω–æ –æ–Ω –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–æ–º, —É –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–ª–æ–º–∞–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å!** ü•öüêî

## ü§î –ü—Ä–æ–±–ª–µ–º–∞:

- **Black** \= **—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä**, –∞ –Ω–µ **–∏—Å–ø—Ä–∞–≤–∏—Ç–µ–ª—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞**
- –û–Ω –æ–∂–∏–¥–∞–µ—Ç **–≤–∞–ª–∏–¥–Ω—ã–π Python –∫–æ–¥**, –Ω–æ —Å –ø–ª–æ—Ö–∏–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –ï—Å–ª–∏ –∫–æ–¥ **—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏ –Ω–µ–≤–µ—Ä–µ–Ω** (–ø—Ä–æ–ø—É—â–µ–Ω–æ –¥–≤–æ–µ—Ç–æ—á–∏–µ, –Ω–µ–ø–∞—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏), Black –ø–∞–¥–∞–µ—Ç

## üõ†Ô∏è –ß—Ç–æ –¥–µ–ª–∞–µ—Ç Black:

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª—è–µ—Ç **–æ—Ç—Å—Ç—É–ø—ã** (4 –ø—Ä–æ–±–µ–ª–∞ –≤–º–µ—Å—Ç–æ —Ç–∞–±–æ–≤)
2. ‚úÖ –†–∞–∑–±–∏–≤–∞–µ—Ç **–¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏** (88 —Å–∏–º–≤–æ–ª–æ–≤)
3. ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç/—É–±–∏—Ä–∞–µ—Ç **–ø—Ä–æ–±–µ–ª—ã** –≤–æ–∫—Ä—É–≥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
4. ‚ùå **–ù–ï –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏**

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞:

–ï—Å–ª–∏ –≤ `fix_indentation.py` –µ—Å—Ç—å **—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–ø—É—â–µ–Ω–æ `:`), Black –Ω–µ –ø–æ–º–æ–∂–µ—Ç. –ù—É–∂–Ω–æ:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í—Ä—É—á–Ω—É—é –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É

python

```
# –ë–´–õ–û (—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞):
def fix_file(filepath)  # ‚Üê –ø—Ä–æ–ø—É—â–µ–Ω–æ –¥–≤–æ–µ—Ç–æ—á–∏–µ!
    with open...

# –°–¢–ê–õ–û:
def fix_file(filepath):  # ‚Üê –¥–≤–æ–µ—Ç–æ—á–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ
    with open...
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

bash

```
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python -m py_compile uch/apps/blog/management/commands/fix_indentation.py

# –£–≤–∏–¥–µ—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –æ—à–∏–±–∫—É
python uch/apps/blog/management/commands/fix_indentation.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–∫–∞–∑–∞—Ç—å –º–Ω–µ —Ñ–∞–π–ª

bash

```
# –ü–æ–∫–∞–∂–∏ –ø–µ—Ä–≤—ã–µ 20 —Å—Ç—Ä–æ–∫
head -20 uch/apps/blog/management/commands/fix_indentation.py

# –ò–ª–∏ –≤–µ—Å—å —Ñ–∞–π–ª
cat uch/apps/blog/management/commands/fix_indentation.py
```

**–Ø —Å–∫–∞–∂—É –∫–∞–∫–∞—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –∏ –∫–∞–∫ –µ—ë –∏—Å–ø—Ä–∞–≤–∏—Ç—å.**

## üéØ –í—ã–≤–æ–¥:

- **Black** \= –¥–ª—è **—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** (–∫–æ–≥–¥–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –ø–ª–æ—Ö–æ)
- **–†—É—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** \= –¥–ª—è **—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫** (–∫–æ–≥–¥–∞ –∫–æ–¥ –Ω–µ–≤–∞–ª–∏–¥–µ–Ω)

**–ü–æ–∫–∞–∂–∏ –º–Ω–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `fix_indentation.py`, –∏ —è –Ω–∞–π–¥—É —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É.**

\# fix\_indentation.py import re def fix\_file(filepath): with open(filepath, 'r') as f: lines = f.readlines() fixed\_lines = \[\] in\_tags\_block = False indent\_level = 0 for i, line in enumerate(lines): # –ò—â–µ–º –±–ª–æ–∫ —Å —Ç–µ–≥–∞–º–∏ if 'article.tags.set' in line: # –ó–∞–º–µ–Ω—è–µ–º —ç—Ç—É —Å—Ç—Ä–æ–∫—É fixed\_lines.append(' ' \* indent\_level + '# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏\\n') fixed\_lines.append(' ' \* indent\_level + 'if tags:\\n') fixed\_lines.append(' ' \* (indent\_level + 4) + 'if isinstance(tags, str):\\n') fixed\_lines.append(' ' \* (indent\_level + 8) + 'tags = \[tag.strip() for tag in tags.split(",")\]\\n') fixed\_lines.append(' ' \* (indent\_level + 4) + 'elif isinstance(tags, list):\\n') fixed\_lines.append(' ' \* (indent\_level + 8) + 'tags = \[str(tag).strip() for tag in tags\]\\n') fixed\_lines.append(' ' \* (indent\_level + 4) + '# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ django-taggit\\n') fixed\_lines.append(' ' \* (indent\_level + 4) + 'article.tags.clear()\\n') fixed\_lines.append(' ' \* (indent\_level + 4) + 'for tag in tags:\\n') fixed\_lines.append(' ' \* (indent\_level + 8) + 'article.tags.add(tag)\\n') else: fixed\_lines.append(line) # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –æ—Ç—Å—Ç—É–ø–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–æ–∫–∏ stripped = line.lstrip() if stripped: indent\_level = len(line) - len(stripped) with open(filepath, 'w') as f: f.writelines(fixed\_lines) print(f"‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–∞–π–ª: {filepath}") if \_\_name\_\_ == '\_\_main\_\_': fix\_file('uch/apps/blog/management/commands/import\_obsidian.py')

–û–≥–æ! –í–æ—Ç —ç—Ç–æ **—Ö–∞–æ—Å –æ—Ç—Å—Ç—É–ø–æ–≤**! ü§Ø

## üîç –ü—Ä–æ–±–ª–µ–º—ã –≤ —Ñ–∞–π–ª–µ:

1. **–°—Ç—Ä–æ–∫–∞ 4:**`def fix_file(filepath):` - **–Ω–µ—Ç –æ—Ç—Å—Ç—É–ø–∞** (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥—Ä—É–≥–∏—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π)
2. **–°—Ç—Ä–æ–∫–∞ 5:** –¢–∞–±—ã –∏ –ø—Ä–æ–±–µ–ª—ã —Å–º–µ—à–∞–Ω—ã (–≤–∏–¥–Ω–æ –ø–æ —Å—Ç—Ä–∞–Ω–Ω—ã–º –æ—Ç—Å—Ç—É–ø–∞–º)
3. **–°—Ç—Ä–æ–∫–∞ 15:**`for i, line in enumerate(lines):` - –ø–µ—Ä–µ–¥ `for` —Å—Ç–æ–∏—Ç **—Ç–∞–±**, –∞ –Ω–µ –ø—Ä–æ–±–µ–ª—ã

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è:

python

```
# fix_indentation.py
import re
import sys

def fix_file(filepath):
    with open(filepath, 'r') as f:
        lines = f.readlines()
    
    fixed_lines = []
    in_tags_block = False
    indent_level = 0
    
    for i, line in enumerate(lines):
        # –ò—â–µ–º –±–ª–æ–∫ —Å —Ç–µ–≥–∞–º–∏
        if 'article.tags.set' in line:
            # –ó–∞–º–µ–Ω—è–µ–º —ç—Ç—É —Å—Ç—Ä–æ–∫—É
            fixed_lines.append(' ' * indent_level + '# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏\n')
            fixed_lines.append(' ' * indent_level + 'if tags:\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'if isinstance(tags, str):\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'tags = [tag.strip() for tag in tags.split(",")]\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'elif isinstance(tags, list):\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'tags = [str(tag).strip() for tag in tags]\n')
            fixed_lines.append(' ' * (indent_level + 4) + '# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ django-taggit\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'article.tags.clear()\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'for tag in tags:\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'article.tags.add(tag)\n')
        else:
            fixed_lines.append(line)
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –æ—Ç—Å—Ç—É–ø–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–æ–∫–∏
            stripped = line.lstrip()
            if stripped:
                indent_level = len(line) - len(st
```

—Ç—ã –∂–µ —Å–∫–∞–∑–∞–ª, —á—Ç–æ black –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç—Å—Ç—É–ø—ã. –Ø –∏—Å–ø–æ—Ä—Ç–∏–ª —Ç–æ–ª—å–∫–æ –æ—Ç—Å—Ç—É–ø—ã

–¢—ã –∞–±—Å–æ–ª—é—Ç–Ω–æ –ø—Ä–∞–≤! –≠—Ç–æ **–±–∞–≥ –≤ Black** –∏–ª–∏ –µ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ.

Black –¥–æ–ª–∂–µ–Ω –±—ã–ª –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã, –Ω–æ –æ–Ω **–ø–∞–¥–∞–µ—Ç –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º –∫–æ–¥–µ –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç—Å—Ç—É–ø–æ–≤**.

## ü§î –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. **Python –ø–∞—Ä—Å–µ—Ä** (–∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Black) –≤–∏–¥–∏—Ç:
	python
	```
	def fix_file(filepath):
	      with open...  # ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø
	```
2. **Black –ø—ã—Ç–∞–µ—Ç—Å—è:** –°–Ω–∞—á–∞–ª–∞ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –∫–æ–¥ ‚Üí –ø–∞–¥–∞–µ—Ç ‚Üí –Ω–µ –º–æ–∂–µ—Ç –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å
3. **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –¥–µ–ª–∞—é—Ç –∫–æ–¥ **–Ω–µ–ø–∞—Ä—Å–∏—Ä—É–µ–º—ã–º** –¥–ª—è Python

## üöÄ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥—Ä—É–±—É—é —Å–∏–ª—É

–°–æ–∑–¥–∞–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π **—Ç–æ–ª—å–∫–æ –∑–∞–º–µ–Ω—è–µ—Ç —Ç–∞–±—ã –Ω–∞ –ø—Ä–æ–±–µ–ª—ã** (–±–µ–∑ –∞–Ω–∞–ª–∏–∑–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞):

bash

```
# –°–æ–∑–¥–∞–π –ø—Ä–æ—Å—Ç–æ–π fixer
cat > simple_fix.py << 'EOF'
#!/usr/bin/env python
import sys

def fix_tabs(filepath):
    with open(filepath, 'r') as f:
        content = f.read()
    
    # –ü—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω—è–µ–º –≤—Å–µ —Ç–∞–±—ã –Ω–∞ 4 –ø—Ä–æ–±–µ–ª–∞
    content = content.replace('\t', '    ')
    
    with open(filepath, 'w') as f:
        f.write(content)
    
    print(f"‚úÖ –¢–∞–±—ã –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—Ä–æ–±–µ–ª—ã –≤: {filepath}")

if __name__ == '__main__':
    if len(sys.argv) > 1:
        fix_tabs(sys.argv[1])
    else:
        print("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: python simple_fix.py <filepath>")
EOF

# –ü—Ä–∏–º–µ–Ω–∏ –∫ –ø—Ä–æ–±–ª–µ–º–Ω–æ–º—É —Ñ–∞–π–ª—É
python simple_fix.py uch/apps/blog/management/commands/fix_indentation.py

# –¢–µ–ø–µ—Ä—å Black –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–æ—Ç–∞—Ç—å
black uch/apps/blog/management/commands/fix_indentation.py
```

## üß™ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# 1. –£–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
rm uch/apps/blog/management/commands/fix_indentation.py

# 2. –°–æ–∑–¥–∞–π —á–∏—Å—Ç—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª —Å –ø–ª–æ—Ö–∏–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏
cat > test_bad_format.py << 'EOF'
def bad():
    print("—Ç–∞–± –≤–º–µ—Å—Ç–æ –ø—Ä–æ–±–µ–ª–æ–≤")
    if True:
        print("—Å–º–µ—à–∞–Ω–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã")
EOF

# 3. –ü–æ–ø—Ä–æ–±—É–π Black - –æ–Ω –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–æ—Ç–∞—Ç—å
black test_bad_format.py

# 4. –ü–æ—Å–º–æ—Ç—Ä–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
cat test_bad_format.py

# 5. –£–¥–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
rm test_bad_format.py
```

## üìã –í—ã–≤–æ–¥:

- **Black —Ä–∞–±–æ—Ç–∞–µ—Ç** –∫–æ–≥–¥–∞ –æ—Ç—Å—Ç—É–ø—ã **—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã** (–¥–∞–∂–µ –µ—Å–ª–∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –ø–ª–æ—Ö–∏)
- **–°–ª–∏—à–∫–æ–º –∫—Ä–∏–≤—ã–µ –æ—Ç—Å—Ç—É–ø—ã** –ª–æ–º–∞—é—Ç –ø–∞—Ä—Å–µ—Ä Python
- **–ù—É–∂–µ–Ω –ø—Ä–µ-—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä** –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω—è–µ—Ç —Ç–∞–±—ã ‚Üí –ø—Ä–æ–±–µ–ª—ã

**–ò—Å–ø–æ–ª—å–∑—É–π `simple_fix.py` —Å–Ω–∞—á–∞–ª–∞, –ø–æ—Ç–æ–º Black.**

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python simple\_fix.py uch/apps/blog/management/commands/fix\_indentation.py ‚úÖ –¢–∞–±—ã –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—Ä–æ–±–µ–ª—ã –≤: uch/apps/blog/management/commands/fix\_indentation.py (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % black uch/apps/blog/management/commands/fix\_indentation.py error: cannot format uch/apps/blog/management/commands/fix\_indentation.py: Cannot parse: 4:0: def fix\_file(filepath): Oh no! üí• üíî üí• 1 file failed to reformat.

–ü—Ä–æ–±–ª–µ–º–∞ –≤ **—Å—Ç—Ä–æ–∫–µ 4**! Black –≥–æ–≤–æ—Ä–∏—Ç: "Cannot parse: 4:0: def fix\_file(filepath):"

## üîç –î–∞–≤–∞–π –ø–æ—Å–º–æ—Ç—Ä–∏–º —Å—Ç—Ä–æ–∫—É 4 –∏ –≤–æ–∫—Ä—É–≥:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –ü–æ–∫–∞–∂–∏ —Å—Ç—Ä–æ–∫–∏ 1-10
sed -n '1,10p' uch/apps/blog/management/commands/fix_indentation.py

# –ò–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Å—Ç—Ä–æ–∫—É 4 —Å –Ω–æ–º–µ—Ä–∞–º–∏ —Å—Ç—Ä–æ–∫
cat -n uch/apps/blog/management/commands/fix_indentation.py | head -10
```

## ü§î –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —Å—Ç—Ä–æ–∫–µ 4:

1. **–ù–µ–≤–∏–¥–∏–º—ã–µ —Å–∏–º–≤–æ–ª—ã** –ø–µ—Ä–µ–¥ `def`
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞**
3. **–õ–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã/—Ç–∞–±—ã** –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏
4. **–°–∏–º–≤–æ–ª BOM** (Byte Order Mark)

## üîß –ò—Å–ø—Ä–∞–≤–ª—è–µ–º:

### –°–ø–æ—Å–æ–± 1: –ü–æ–∫–∞–∂–∏ –º–Ω–µ —Å—Ç—Ä–æ–∫—É 4

bash

```
# –ü–æ–∫–∞–∂–∏ —Å –Ω–µ–≤–∏–¥–∏–º—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
sed -n '4p' uch/apps/blog/management/commands/fix_indentation.py | cat -A
# ^I = —Ç–∞–±, M- = UTF-8 —Å–∏–º–≤–æ–ª, $ = –∫–æ–Ω–µ—Ü —Å—Ç—Ä–æ–∫–∏
```

### –°–ø–æ—Å–æ–± 2: –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π —Ñ–∞–π–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é

bash

```
# –£–¥–∞–ª–∏ –∏ —Å–æ–∑–¥–∞–π –∑–∞–Ω–æ–≤–æ
rm uch/apps/blog/management/commands/fix_indentation.py

cat > uch/apps/blog/management/commands/fix_indentation.py << 'EOF'
#!/usr/bin/env python
import re
import sys

def fix_file(filepath):
    with open(filepath, 'r') as f:
        lines = f.readlines()
    
    fixed_lines = []
    in_tags_block = False
    indent_level = 0
    
    for i, line in enumerate(lines):
        # –ò—â–µ–º –±–ª–æ–∫ —Å —Ç–µ–≥–∞–º–∏
        if 'article.tags.set' in line:
            # –ó–∞–º–µ–Ω—è–µ–º —ç—Ç—É —Å—Ç—Ä–æ–∫—É
            fixed_lines.append(' ' * indent_level + '# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏\n')
            fixed_lines.append(' ' * indent_level + 'if tags:\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'if isinstance(tags, str):\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'tags = [tag.strip() for tag in tags.split(",")]\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'elif isinstance(tags, list):\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'tags = [str(tag).strip() for tag in tags]\n')
            fixed_lines.append(' ' * (indent_level + 4) + '# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ django-taggit\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'article.tags.clear()\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'for tag in tags:\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'article.tags.add(tag)\n')
        else:
            fixed_lines.append(line)
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –æ—Ç—Å—Ç—É–ø–∞ –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–æ–∫–∏
            stripped = line.lstrip()
            if stripped:
                indent_level = len(line) - len(stripped)
    
    with open(filepath, 'w') as f:
        f.writelines(fixed_lines)
    
    print(f"‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–∞–π–ª: {filepath}")

if __name__ == '__main__':
    if len(sys.argv) > 1:
        fix_file(sys.argv[1])
    else:
        print("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: python fix_indentation.py <filepath>")
EOF

# –¢–µ–ø–µ—Ä—å –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π
black uch/apps/blog/management/commands/fix_indentation.py
```

### –°–ø–æ—Å–æ–± 3: –ò—Å–ø–æ–ª—å–∑—É–π Python –¥–ª—è –æ—á–∏—Å—Ç–∫–∏

python

```
# –°–æ–∑–¥–∞–π clean_file.py
cat > clean_file.py << 'EOF'
import sys

def clean_file(filepath):
    with open(filepath, 'r', encoding='utf-8-sig') as f:  # utf-8-sig —É–¥–∞–ª—è–µ—Ç BOM
        content = f.read()
    
    # –£–¥–∞–ª—è–µ–º BOM –µ—Å–ª–∏ –µ—Å—Ç—å
    if content.startswith('\ufeff'):
        content = content[1:]
    
    # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ —Ç–∞–±—ã
    content = content.replace('\t', '    ')
    
    # –£–¥–∞–ª—è–µ–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫
    lines = content.split('\n')
    cleaned_lines = []
    for line in lines:
        # –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞—á–∞–ª–µ, –ø–æ—Ç–æ–º –¥–æ–±–∞–≤–ª—è–µ–º –Ω—É–∂–Ω—ã–µ
        stripped = line.lstrip()
        if stripped.startswith('def ') or stripped.startswith('class '):
            cleaned_lines.append(stripped)
        else:
            cleaned_lines.append(line)
    
    content = '\n'.join(cleaned_lines)
    
    with open(filepath, 'w', encoding='utf-8') as f:
        f.write(content)
    
    print(f"‚úÖ –û—á–∏—â–µ–Ω —Ñ–∞–π–ª: {filepath}")

if __name__ == '__main__':
    clean_file(sys.argv[1])
EOF

python clean_file.py uch/apps/blog/management/commands/fix_indentation.py
black uch/apps/blog/management/commands/fix_indentation.py
```

## üéØ –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ: –°–ø–æ—Å–æ–± 2 (–ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª)

**–í—ã–ø–æ–ª–Ω–∏ –°–ø–æ—Å–æ–± 2 - —ç—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç.**

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % sed -n '4p' uch/apps/blog/management/commands/fix\_indentation.py | cat -A cat: illegal option -- A usage: cat \[-belnstuv\] \[file...\]

macOS cat –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `-A`. –ò—Å–ø–æ–ª—å–∑—É–π `-v` –∏–ª–∏ –ø–æ–∫–∞–∂–∏ hex:

bash

```
# –ü–æ–∫–∞–∂–∏ hexdump —Å—Ç—Ä–æ–∫–∏ 4
sed -n '4p' uch/apps/blog/management/commands/fix_indentation.py | hexdump -C

# –ò–ª–∏ –ø–æ–∫–∞–∂–∏ —Å –Ω–µ–ø–µ—á–∞—Ç–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
sed -n '4p' uch/apps/blog/management/commands/fix_indentation.py | cat -v

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π —Ñ–∞–π–ª (–±—ã—Å—Ç—Ä–µ–µ!)
cat > uch/apps/blog/management/commands/fix_indentation.py << 'EOF'
#!/usr/bin/env python
import re
import sys

def fix_file(filepath):
    with open(filepath, 'r') as f:
        lines = f.readlines()
    
    fixed_lines = []
    in_tags_block = False
    indent_level = 0
    
    for i, line in enumerate(lines):
        if 'article.tags.set' in line:
            fixed_lines.append(' ' * indent_level + '# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏\n')
            fixed_lines.append(' ' * indent_level + 'if tags:\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'if isinstance(tags, str):\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'tags = [tag.strip() for tag in tags.split(",")]\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'elif isinstance(tags, list):\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'tags = [str(tag).strip() for tag in tags]\n')
            fixed_lines.append(' ' * (indent_level + 4) + '# –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'article.tags.clear()\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'for tag in tags:\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'article.tags.add(tag)\n')
        else:
            fixed_lines.append(line)
            stripped = line.lstrip()
            if stripped:
                indent_level = len(line) - len(stripped)
    
    with open(filepath, 'w') as f:
        f.writelines(fixed_lines)
    
    print(f"‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω: {filepath}")

if __name__ == '__main__':
    if len(sys.argv) > 1:
        fix_file(sys.argv[1])
    else:
        print("Usage: python fix_indentation.py <filepath>")
EOF

# –¢–µ–ø–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π
black uch/apps/blog/management/commands/fix_indentation.py
```

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ **—É–¥–∞–ª–∏ —Ñ–∞–π–ª** \- –æ–Ω —Ç–µ–±–µ –Ω–µ –Ω—É–∂–µ–Ω:

bash

```
rm uch/apps/blog/management/commands/fix_indentation.py
echo "‚úÖ –§–∞–π–ª —É–¥–∞–ª–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–π Black –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ –Ω–µ —ç—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç."
```

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % sed -n '4p' uch/apps/blog/management/commands/fix\_indentation.py | hexdump -C 00000000 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 | | \* 00000050 64 65 66 20 66 69 78 5f 66 69 6c 65 28 66 69 6c |def fix\_file(fil| 00000060 65 70 61 74 68 29 3a 0a |epath):.| 00000068

–ê–≥–∞! –í–æ—Ç –æ–Ω–æ! **–í —Å—Ç—Ä–æ–∫–µ 4 –ø–µ—Ä–µ–¥ `def` —Å—Ç–æ–∏—Ç 80 –ø—Ä–æ–±–µ–ª–æ–≤!** (0x20 = –ø—Ä–æ–±–µ–ª, –∏ –∏—Ö 80 —à—Ç—É–∫ –ø–µ—Ä–µ–¥ —Å–ª–æ–≤–æ–º "def")

–í–æ—Ç –ø–æ—á–µ–º—É Black –ø–∞–¥–∞–µ—Ç - —Ñ—É–Ω–∫—Ü–∏—è `def fix_file(filepath):` –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å **80 –ø—Ä–æ–±–µ–ª–æ–≤ –æ—Ç—Å—Ç—É–ø–∞** –≤–º–µ—Å—Ç–æ –ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö 0!

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

bash

```
# –ò—Å–ø—Ä–∞–≤–∏–º —Ñ–∞–π–ª - —É–¥–∞–ª–∏–º –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

cat > clean_spaces.py << 'EOF'
import sys

def clean_file(filepath):
    with open(filepath, 'r') as f:
        lines = f.readlines()
    
    cleaned_lines = []
    for line in lines:
        # –£–¥–∞–ª—è–µ–º –í–°–ï –ø—Ä–æ–±–µ–ª—ã –≤ –Ω–∞—á–∞–ª–µ, –ø–æ—Ç–æ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø
        stripped = line.lstrip()
        if stripped.startswith('def ') or stripped.startswith('class '):
            # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π/–∫–ª–∞—Å—Å–æ–≤ - –±–µ–∑ –æ—Ç—Å—Ç—É–ø–∞
            cleaned_lines.append(stripped)
        elif stripped.startswith('if ') or stripped.startswith('for ') or stripped.startswith('while ') or stripped.startswith('with '):
            # –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ - –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø
            cleaned_lines.append('    ' + stripped)
        elif stripped:
            # –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø
            cleaned_lines.append(line)
        else:
            # –ü—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
            cleaned_lines.append('')
    
    with open(filepath, 'w') as f:
        f.writelines(cleaned_lines)
    
    print(f"‚úÖ –û—á–∏—â–µ–Ω—ã –ø—Ä–æ–±–µ–ª—ã –≤: {filepath}")

if __name__ == '__main__':
    clean_file(sys.argv[1])
EOF

# –ü—Ä–∏–º–µ–Ω–∏
python clean_spaces.py uch/apps/blog/management/commands/fix_indentation.py

# –¢–µ–ø–µ—Ä—å Black –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å
black uch/apps/blog/management/commands/fix_indentation.py
```

## üéØ –ò–ª–∏ –ø—Ä–æ—â–µ: –£–¥–∞–ª–∏ –∏ —Å–æ–∑–¥–∞–π –∑–∞–Ω–æ–≤–æ

bash

```
# –£–¥–∞–ª–∏ –∏—Å–ø–æ—Ä—á–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
rm uch/apps/blog/management/commands/fix_indentation.py

# –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —á–∏—Å—Ç—ã–π
cat > uch/apps/blog/management/commands/fix_indentation.py << 'EOF'
#!/usr/bin/env python
import re
import sys

def fix_file(filepath):
    with open(filepath, 'r') as f:
        lines = f.readlines()
    
    fixed_lines = []
    indent_level = 0
    
    for i, line in enumerate(lines):
        if 'article.tags.set' in line:
            fixed_lines.append(' ' * indent_level + '# –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥–∏\n')
            fixed_lines.append(' ' * indent_level + 'if tags:\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'if isinstance(tags, str):\n')
            fixed_lines.append(' ' * (indent_level + 8) + 'tags = [tag.strip() for tag in tags.split(",")]\n')
            fixed_lines.append(' ' * (indent_level + 4) + 'elif isinstance(t
```

–∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Python —Ñ–∞–π–ª–∞
python -m py_compile uch/apps/blog/management/commands/fix_indentation.py

# –ï—Å–ª–∏ –æ—à–∏–±–∫–∞, –ø–æ–∫–∞–∂–µ—Ç —á—Ç–æ –∏ –≥–¥–µ
# –ï—Å–ª–∏ –≤—Å—ë –æ–∫ - –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–µ–¥–µ—Ç

# –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ:
python -c "import py_compile; py_compile.compile('uch/apps/blog/management/commands/fix_indentation.py')"

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–ø—Ä–æ–±—É–π –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
python -c "import uch.apps.blog.management.commands.fix_indentation"

# –î–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
python -m py_compile uch/apps/blog/management/commands/*.py 2>&1 | grep -v "Syntax
```

–° black —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å. –ó–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üìä –û–ë–ù–û–í–õ–ï–ù–ò–ï –ü–†–û–ì–†–ï–°–°–ê: Universal Creative Hub v0.3

## üìÖ –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 10.12.2025

**–í–µ—Ä—Å–∏—è:** –§–∞–∑–∞ 1.1 (–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±–ª–æ–≥–∞) - –ó–ê–í–ï–†–®–ï–ù–ê ‚úÖ

---

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –î–û–°–¢–ò–ñ–ï–ù–ò–Ø –§–ê–ó–´ 1.1

### ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (100%)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ | –î–µ—Ç–∞–ª–∏ |
| --- | --- | --- | --- |
| **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian** | ‚úÖ | Watchdog + Subprocess | –†–µ–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤ |
| **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ slug –¥–ª—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã** | ‚úÖ | python-slugify | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤** | ‚úÖ | Django Signals | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏–≤–∞—Ü–∏—è |
| **–ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** | ‚úÖ | Black Formatter + VS Code | –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–¥–∞ |
| **URL –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –∫–∏—Ä–∏–ª–ª–∏—Ü—ã** | ‚úÖ | Django URL `<str:slug>` | –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–∏—Ö slug |

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –†–ï–®–ï–ù–ò–Ø

### 1\. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç (watch\_obsidian.py)

python

```
# –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- on_modified() - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤
- on_created() - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—Ç–∞—Ç–µ–π  
- on_deleted() - –∞—Ä—Ö–∏–≤–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
- archive_article() - –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ (status='archived')
```

### 2\. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏—Ö slug

python

```
# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ import_obsidian.py:
try:
    from slugify import slugify as better_slugify
    slug = better_slugify(title, allow_unicode=False)  # ‚Üí '—Ç–µ—Å—Ç–æ–≤–∞—è-–∑–∞–º–µ—Ç–∫–∞'
except ImportError:
    slug = slugify(title, allow_unicode=False)
```

### 3\. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

json

```
// .vscode/settings.json
{
    "editor.formatOnSave": true,
    "[python]": {
        "editor.defaultFormatter": "ms-python.black-formatter",
        "editor.formatOnSave": true
    }
}
```

---

## üöÄ –†–ê–ë–û–ß–ò–ô –í–û–†–ö–§–õ–û–£

### –¢–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å:

1. **–°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤ Obsidian ‚Üí –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
2. **Watchdog –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç** –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç –∏–º–ø–æ—Ä—Ç
3. **import\_obsidian –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç** ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç/—Å–æ–∑–¥–∞–µ—Ç —Å—Ç–∞—Ç—å—é
4. **–ë–ª–æ–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è** ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–∏–¥–Ω—ã –ø–æ—Å–ª–µ F5

### –ö–æ–º–∞–Ω–¥—ã:

bash

```
# –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
python manage.py watch_obsidian /path/to/obsidian --author admin

# –†—É—á–Ω–æ–π –∏–º–ø–æ—Ä—Ç
python manage.py import_obsidian /path/to/file.md --author admin --update-existing

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
black uch/apps/blog/management/commands/
```

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –ì–û–¢–û–í–ù–û–°–¢–ò (–¥–æ—Å—Ç–∏–≥–Ω—É—Ç—ã)

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
| --- | --- | --- |
| –ê–≤—Ç–æ–∏–º–ø–æ—Ä—Ç –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ | ‚úÖ | –°–æ–∑–¥–∞—Ç—å.md ‚Üí —Å—Ç–∞—Ç—å—è –≤ –±–ª–æ–≥–µ |
| –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π | ‚úÖ | –ò–∑–º–µ–Ω–∏—Ç—å.md ‚Üí —Å—Ç–∞—Ç—å—è –æ–±–Ω–æ–≤–∏–ª–∞—Å—å |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–¥–∞–ª–µ–Ω–∏–π | ‚úÖ | –£–¥–∞–ª–∏—Ç—å.md ‚Üí —Å—Ç–∞—Ç—å—è –∞—Ä—Ö–∏–≤–∏—Ä—É–µ—Ç—Å—è |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã | ‚úÖ | –†—É—Å—Å–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ ‚Üí –≤–∞–ª–∏–¥–Ω—ã–µ URL |
| –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ | ‚úÖ | 24/7 –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ –ø–∞–¥–µ–Ω–∏–π |

---

## üìà –ú–ï–¢–†–ò–ö–ò –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
| --- | --- | --- |
| –í—Ä–µ–º—è –∏–º–ø–æ—Ä—Ç–∞ —Ñ–∞–π–ª–∞ | < 2 —Å–µ–∫ | ‚úÖ |
| –ó–∞–¥–µ—Ä–∂–∫–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è | < 1 —Å–µ–∫ | ‚úÖ |
| –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ | ~50 MB | ‚úÖ |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∞–π–ª–æ–≤ | 100+ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ | ‚úÖ |

---

## üêõ –ò–ó–í–ï–°–¢–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

1. **–¢–æ–ª—å–∫–æ.md —Ñ–∞–π–ª—ã** \- –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è
2. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ø–∏—Ä—É—é—Ç—Å—è**, –Ω–æ –Ω–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—Ç—Å—è
3. **–ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞** –ø—Ä–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
4. **–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–π F5** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–ª–æ–≥–∞

---

## üõ† –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö (–æ–±–Ω–æ–≤–ª–µ–Ω)

### –ë—ç–∫–µ–Ω–¥:

- Python 3.8.9 + Django 4.2.7
- **watchdog** 3.0.0 - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- **python-slugify** 8.0.1 - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã
- **black** 23.1.0 - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

- **VS Code** —Å –∞–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **Docker Compose** –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é
- **SQLite/PostgreSQL** \- –≥–∏–±–∫–æ—Å—Ç—å –ë–î

---

## üîÑ –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–û–í

### –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã:

bash

```
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
git clone <repo>
cd uch-backend

# 2. –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
python -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# 3. –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—Ç–µ—Ä–º–∏–Ω–∞–ª 1)
python manage.py watch_obsidian /path/to/obsidian --author admin

# 4. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ (—Ç–µ—Ä–º–∏–Ω–∞–ª 2)  
python manage.py runserver
```

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞:

bash

```
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –≤ VS Code
# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
black uch/apps/blog/management/commands/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
python -m py_compile uch/apps/blog/management/commands/*.py
```

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –§–ê–ó–´ 2

### –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Å—Ç—É–¥–∏–∏:

1. ‚úÖ **–ë—ç–∫–µ–Ω–¥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** \- Django + API
2. ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** \- —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. ‚úÖ **–ú–µ–¥–∏–∞-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç** \- –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
4. ‚úÖ **–†–µ–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** \- –≥–æ—Ç–æ–≤—ã–π –ø–∞–π–ø–ª–∞–π–Ω –∏–º–ø–æ—Ä—Ç–∞

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–°–æ–∑–¥–∞—Ç—å React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥** –¥–ª—è —Å—Ç—É–¥–∏–∏
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å WebSocket —Å–µ—Ä–≤–µ—Ä** –¥–ª—è real-time
3. **–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å CoreOrchestrator** –Ω–∞ TypeScript
4. **–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –Ω–æ–¥—ã-—Ä–µ–¥–∞–∫—Ç–æ—Ä—ã**

---

## üìä –¢–ï–°–¢–û–í–´–ï –°–¶–ï–ù–ê–†–ò–ò (–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è)

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª

bash

```
# 1. –°–æ–∑–¥–∞—Ç—å test-cycle.md –≤ Obsidian
# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ –≤ –±–ª–æ–≥–µ (–∞–≤—Ç–æ)
# 3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª
# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ –±–ª–æ–≥–µ (–∞–≤—Ç–æ)
# 5. –£–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª
# 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—Ä—Ö–∏–≤–∞—Ü–∏—é –≤ –±–ª–æ–≥–µ (–∞–≤—Ç–æ)
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ö—Ä–∞–π–Ω–∏–µ —Å–ª—É—á–∞–∏

- –†—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤
- –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö
- –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏

---

## üö® –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- Watchdog —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ
- –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ –¥–ª—è 100-500 —Ñ–∞–π–ª–æ–≤
- –î–ª—è –±–æ–ª—å—à–∏—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â –Ω—É–∂–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- –†–µ–≥—É–ª—è—Ä–Ω–∞—è –∞—Ä—Ö–∏–≤–∞—Ü–∏—è —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Å—Ç–∞—Ç–µ–π

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï –§–ê–ó–´ 1.1

**–§–∞–∑–∞ 1.1 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!** –ü–æ–ª—É—á–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–≥ —Å:

1. ‚úÖ **–ë–µc—à–æ–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π** —Å Obsidian
2. ‚úÖ **–†–µ–∞–ª—å–Ω—ã–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º** –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã** –∏ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤
4. ‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º** –∫–æ–¥–∞
5. ‚úÖ **–ì–æ—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π** –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ –§–∞–∑—É 2: –¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ç—É–¥–∏—è —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π —è–¥—Ä–∞-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.**

---

**–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω:** 10.12.2025  
**–ê–≤—Ç–æ—Ä:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç Universal Creative Hub  
**–°—Ç–∞—Ç—É—Å:** –§–∞–∑–∞ 1.1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –≥–æ—Ç–æ–≤–æ –∫ –§–∞–∑–µ 2 ‚úÖ

---

\* –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ù–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –§–∞–∑—ã 2 - –Ø–¥—Ä–æ —Å—Ç—É–¥–∏–∏ (Core Orchestrator) –Ω–∞ TypeScript/React \*

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –ò–ò, —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏