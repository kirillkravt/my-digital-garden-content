---
title: "DeepSeek"
source: "https://chat.deepseek.com/a/chat/s/ae4871ba-e343-4957-9b8c-9d7facea2bbe"
author:
published:
created: 2025-12-09
description: "Chat with DeepSeek AI ‚Äì your intelligent assistant for coding, content creation, file reading, and more. Upload documents, engage in long-context conversations, and get expert help in AI, natural language processing, and beyond. | Ê∑±Â∫¶Ê±ÇÁ¥¢ÔºàDeepSeekÔºâÂä©ÂäõÁºñÁ®ã‰ª£Á†ÅÂºÄÂèë„ÄÅÂàõÊÑèÂÜô‰Ωú„ÄÅÊñá‰ª∂Â§ÑÁêÜÁ≠â‰ªªÂä°ÔºåÊîØÊåÅÊñá‰ª∂‰∏ä‰º†ÂèäÈïøÊñáÊú¨ÂØπËØùÔºåÈöèÊó∂‰∏∫ÊÇ®Êèê‰æõÈ´òÊïàÁöÑAIÊîØÊåÅ„ÄÇ"
tags:
  - "clippings"
---
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∏ –∏–º–ø–æ—Ä—Ç–∞ Obsidian

–ü—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–∞–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ markdown —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –∞–≤—Ç–æ–∏–º–ø–æ—Ä—Ç –∏–∑ obsidian. –ü—Ä–∞–≤–∏–ª–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –±–µ—Ä–∏ –∏–∑ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

–û—Ç–ª–∏—á–Ω–æ. –ü—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ –ø–æ—ç—Ç–∞–ø–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–ª—é—á–µ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –¥–ª—è –§–∞–∑—ã 1: **Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä –≤ –∞–¥–º–∏–Ω–∫–µ** –∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian**.

---

### üéØ –®–ê–ì 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (django-markdownx)

**–¶–µ–ª—å:** –ó–∞–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ `content` –≤ –∞–¥–º–∏–Ω–∫–µ –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º.

#### 1.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –Ω–∞—Ö–æ–¥—è—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `uch-backend` —Å –∞–∫—Ç–∏–≤–Ω—ã–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º (`venv`):

bash

```
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ django-markdownx –∏ –æ–±–Ω–æ–≤–∏—Ç–µ requirements.txt
pip install django-markdownx pillow
pip freeze > requirements.txt
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–∞–∫–µ—Ç—ã `django-markdownx` –∏ `Pillow` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `requirements.txt`.

#### 1.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django (settings.py)

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `uch/settings.py`:

python

```
# uch/settings.py

# –í INSTALLED_APPS –¥–æ–±–∞–≤—å—Ç–µ 'markdownx' –ü–û–°–õ–ï 'django.contrib.staticfiles'
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    'taggit',           # –£–∂–µ –µ—Å—Ç—å
    'markdownx',        # <-- –î–û–ë–ê–í–ò–¢–¨ –≠–¢–£ –°–¢–†–û–ö–£
    # –í–∞—à–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    'uch.apps.blog',
]

# –í –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è markdownx
MARKDOWNX_MARKDOWN_EXTENSIONS = [
    'markdown.extensions.extra',   # –¢–∞–±–ª–∏—Ü—ã, –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã –∏ —Ç.–¥.
    'markdown.extensions.codehilite', # –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–æ–¥–∞
]
MARKDOWNX_EDITOR_RESIZABLE = True  # –†–µ–¥–∞–∫—Ç–æ—Ä —Å –∏–∑–º–µ–Ω—è–µ–º—ã–º —Ä–∞–∑–º–µ—Ä–æ–º
```

#### 1.3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ (models.py)

–ó–∞–º–µ–Ω–∏—Ç–µ –ø–æ–ª–µ `content` –≤ –º–æ–¥–µ–ª–∏ `Article` –Ω–∞ `MarkdownxField`:

python

```
# uch/apps/blog/models.py
from django.db import models
from taggit.managers import TaggableManager
from markdownx.models import MarkdownxField  # <-- –ò–º–ø–æ—Ä—Ç –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –ø–æ–ª—è

class Article(models.Model):
    # ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
    # title, slug, status, category, tags, author, created_at, published_at

    # –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–£ –°–¢–†–û–ö–£:
    # content = models.TextField(verbose_name='–°–æ–¥–µ—Ä–∂–∏–º–æ–µ')
    # –ù–ê –≠–¢–£:
    content = MarkdownxField(verbose_name='–°–æ–¥–µ—Ä–∂–∏–º–æ–µ (Markdown)')
    
    # ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –º–æ–¥–µ–ª–∏ ...
```

#### 1.4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∫–∏ (admin.py)

–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –º–æ–¥–µ–ª—å `Article` –¥–ª—è markdownx –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:

#### 1.5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ URL-–º–∞—Ä—à—Ä—É—Ç–æ–≤

–í –≥–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª `uch/urls.py` –¥–æ–±–∞–≤—å—Ç–µ –º–∞—Ä—à—Ä—É—Ç—ã –¥–ª—è markdownx:

python

```
# uch/urls.py
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path('admin/', admin.site.urls),
    path('markdownx/', include('markdownx.urls')),  # <-- –î–û–ë–ê–í–ò–¢–¨ –≠–¢–£ –°–¢–†–û–ö–£
    path('', include('uch.apps.blog.urls')),
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

#### 1.6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç—å–∏ (article\_detail.html)

–ü–æ—Å–∫–æ–ª—å–∫—É —Ç–µ–ø–µ—Ä—å –∫–æ–Ω—Ç–µ–Ω—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ Markdown, –µ–≥–æ –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –≤ HTML –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏. –û–±–Ω–æ–≤–∏—Ç–µ —à–∞–±–ª–æ–Ω:

html

```
<!-- uch/apps/blog/templates/blog/article_detail.html -->
{% extends 'base.html' %}
{% load markdownify %}  <!-- <-- –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û–¢ –¢–ï–ì -->

{% block content %}
<article>
    <h1>{{ article.title }}</h1>
    <!-- –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–£ –°–¢–†–û–ö–£: -->
    <!-- <p>{{ article.content|linebreaks }}</p> -->
    <!-- –ù–ê –≠–¢–£: -->
    <div class="article-content">
        {{ article.content|markdownify }}  <!-- <-- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Markdown –≤ HTML -->
    </div>
</article>
{% endblock %}
```

**–î–ª—è —Ä–∞–±–æ—Ç—ã —Ç–µ–≥–∞ `markdownify` –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞–∫–µ—Ç `django-markdownify`:**

bash

```
pip install django-markdownify
```

–î–æ–±–∞–≤—å—Ç–µ `'markdownify'` –≤ `INSTALLED_APPS` –≤ `settings.py`.

#### 1.7. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

bash

```
python manage.py makemigrations blog
python manage.py migrate
```

---

### ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò –†–ï–î–ê–ö–¢–û–†–ê MARKDOWN

–ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

- –ü–∞–∫–µ—Ç—ã `django-markdownx`, `Pillow` –∏ `django-markdownify` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `requirements.txt`
- `markdownx` –∏ `markdownify` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `INSTALLED_APPS`
- URL `markdownx/` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `uch/urls.py`
- –í –º–æ–¥–µ–ª–∏ `Article` –ø–æ–ª–µ `content` –∏–º–µ–µ—Ç —Ç–∏–ø `MarkdownxField`
- –ö–ª–∞—Å—Å `ArticleAdmin` –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `MarkdownxModelAdmin`
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (`python manage.py migrate`)
- –í —à–∞–±–ª–æ–Ω–µ `article_detail.html` –∑–∞–≥—Ä—É–∂–µ–Ω —Ç–µ–≥ `{% load markdownify %}` –∏ –∫–æ–Ω—Ç–µ–Ω—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ `{{ article.content|markdownify }}`

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä: `python manage.py runserver`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É: `http://localhost:8000/admin/blog/article/add/`
3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—è –≤—ã —É–≤–∏–¥–∏—Ç–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä Markdown —Å –ø–∞–Ω–µ–ª—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (–≤–∫–ª–∞–¥–∫–∞ "Preview").
4. –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç–∞—Ç—å—é —Å Markdown-—Ä–∞–∑–º–µ—Ç–∫–æ–π (–∑–∞–≥–æ–ª–æ–≤–∫–∏ `#`, —Å–ø–∏—Å–∫–∏ `-`, –∫–æ–¥ \`\`\`).
5. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç–∞—Ç—å—é –Ω–∞ —Å–∞–π—Ç–µ. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–∑–º–µ—Ç–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∞ –≤ HTML.

---

### üéØ –®–ê–ì 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ Obsidian (–ë–∞–∑–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π)

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å Django-–∫–æ–º–∞–Ω–¥—É –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ Markdown-—Ñ–∞–π–ª–æ–≤ –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥.

#### 2.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤

bash

```
pip install python-frontmatter watchdog
pip freeze > requirements.txt
```

- `python-frontmatter` ‚Äî –¥–ª—è —á—Ç–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (front matter) –∏–∑ Markdown-—Ñ–∞–π–ª–æ–≤.
- `watchdog` ‚Äî –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –±—É–¥—É—â–µ–π –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏).

#### 2.2. –°–æ–∑–¥–∞–Ω–∏–µ Django-–∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –∫–æ–º–∞–Ω–¥—ã:

bash

```
mkdir -p uch/apps/blog/management/commands
touch uch/apps/blog/management/__init__.py
touch uch/apps/blog/management/commands/__init__.py
touch uch/apps/blog/management/commands/import_obsidian.py
```

–ù–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –±–∞–∑–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π:

python

```
# uch/apps/blog/management/commands/import_obsidian.py
import os
import glob
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.utils.text import slugify
from django.utils import timezone
import frontmatter
from taggit.models import Tag

from uch.apps.blog.models import Article, Category

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'

    def add_arguments(self, parser):
        parser.add_argument(
            'obsidian_path',
            type=str,
            help='–ü—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Obsidian'
        )
        parser.add_argument(
            '--author',
            type=str,
            default='admin',
            help='–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Django, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∞–≤—Ç–æ—Ä–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin)'
        )
        parser.add_argument(
            '--default-category',
            type=str,
            default='Imported',
            help='–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "Imported")'
        )

    def handle(self, *args, **options):
        obsidian_path = Path(options['obsidian_path'])
        author_username = options['author']
        default_category_name = options['default_category']

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        if not obsidian_path.exists() or not obsidian_path.is_dir():
            raise CommandError(f'–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è "{obsidian_path}" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
        try:
            author = User.objects.get(username=author_username)
        except User.DoesNotExist:
            raise CommandError(f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∏–º–µ–Ω–µ–º "{author_username}" –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        default_category, created = Category.objects.get_or_create(
            name=default_category_name,
            defaults={'slug': slugify(default_category_name)}
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "{default_category_name}"'))

        # –ü–æ–∏—Å–∫ –≤—Å–µ—Ö .md —Ñ–∞–π–ª–æ–≤
        md_files = list(obsidian_path.rglob('*.md'))
        self.stdout.write(f'–ù–∞–π–¥–µ–Ω–æ {len(md_files)} .md —Ñ–∞–π–ª–æ–≤.')

        imported_count = 0
        updated_count = 0

        for md_file in md_files:
            try:
                with open(md_file, 'r', encoding='utf-8') as f:
                    post = frontmatter.load(f)

                # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ front matter
                metadata = post.metadata
                content = post.content

                # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
                title = metadata.get('title', md_file.stem)  # –ò–º—è —Ñ–∞–π–ª–∞ –∫–∞–∫ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                slug = metadata.get('slug', slugify(title))

                # –°—Ç–∞—Ç—É—Å: –µ—Å–ª–∏ –≤ front matter –µ—Å—Ç—å published: true, —Ç–æ 'published'
                status = 'published' if metadata.get('published', False) else 'draft'

                # –ö–∞—Ç–µ–≥–æ—Ä–∏—è –∏–∑ front matter –∏–ª–∏ —Ç–µ–≥–æ–≤
                category_name = metadata.get('category')
                if category_name:
                    category, _ = Category.objects.get_or_create(
                        name=category_name,
                        defaults={'slug': slugify(category_name)}
                    )
                else:
                    category = default_category

                # –¢–µ–≥–∏ –∏–∑ front matter
                tags = metadata.get('tags', [])
                if isinstance(tags, str):
                    tags = [t.strip() for t in tags.split(',')]

                # –î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
                published_date = metadata.get('date')
                if published_date:
                    # –ü–æ–ø—Ä–æ–±—É–µ–º —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É (—É–ø—Ä–æ—â–µ–Ω–Ω–æ)
                    from datetime import datetime
                    try:
                        if isinstance(published_date, str):
                            published_at = datetime.fromisoformat(published_date.replace('Z', '+00:00'))
                        else:
                            published_at = published_date
                    except (ValueError, AttributeError):
                        published_at = timezone.now()
                else:
                    published_at = timezone.now()

                # –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
                article, created = Article.objects.update_or_create(
                    slug=slug,
                    defaults={
                        'title': title,
                        'content': content,
                        'status': status,
                        'category': category,
                        'author': author,
                        'published_at': published_at,
                    }
                )

                # –û—á–∏—Å—Ç–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤
                article.tags.clear()
                for tag_name in tags:
                    article.tags.add(tag_name)

                if created:
                    imported_count += 1
                    self.stdout.write(f'[–ò–ú–ü–û–†–¢] –°–æ–∑–¥–∞–Ω–∞: "{title}"')
                else:
                    updated_count += 1
                    self.stdout.write(f'[–û–ë–ù–û–í–õ–ï–ù–ò–ï] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "{title}"')

            except Exception as e:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ {md_file}: {e}'))

        self.stdout.write(self.style.SUCCESS(
            f'–ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω. –°–æ–∑–¥–∞–Ω–æ: {imported_count}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}.'
        ))
```

#### 2.3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏–º–ø–æ—Ä—Ç–∞

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ Markdown-—Ñ–∞–π–ª–∞ –≤ —Å—Ç–∏–ª–µ Obsidian:**

–°–æ–∑–¥–∞–π—Ç–µ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ —Ñ–∞–π–ª `test_obsidian_note.md` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

markdown

```
---
title: "–ú–æ—è –ø–µ—Ä–≤–∞—è –∑–∞–º–µ—Ç–∫–∞ –∏–∑ Obsidian"
slug: "my-first-obsidian-note"
date: 2025-12-08
published: true
category: "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"
tags: ["obsidian", "–∏–º–ø–æ—Ä—Ç", "–±–ª–æ–≥"]
---

# –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑ Obsidian

–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞, –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–∑ Obsidian.

## –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫

- –°–ø–∏—Å–æ–∫
- –≠–ª–µ–º–µ–Ω—Ç–æ–≤

\`–ö–æ–¥ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—Å—Ç–∞\`

\`\`\`python
print("Hello from Obsidian")
```

**–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç** –∏ *–∫—É—Ä—Å–∏–≤*.

text

```
**–ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã:**
\`\`\`bash
# –£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –≥–¥–µ –ª–µ–∂–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
python manage.py import_obsidian /–ø—É—Ç—å/–∫/–ø–∞–ø–∫–µ/—Å/—Ñ–∞–π–ª–æ–º.md --author admin --default-category "Imported"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

- –í –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è `[–ò–ú–ü–û–†–¢] –°–æ–∑–¥–∞–Ω–∞: "–ú–æ—è –ø–µ—Ä–≤–∞—è –∑–∞–º–µ—Ç–∫–∞ –∏–∑ Obsidian"` –∏ –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç.
- –í –∞–¥–º–∏–Ω–∫–µ –±–ª–æ–≥–∞ (`/admin/blog/article/`) –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å—Ç–∞—Ç—å—è —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º, –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏" –∏ —Ç–µ–≥–∞–º–∏.
- –°—Ç–∞—Ç—å—è –∏–º–µ–µ—Ç —Å—Ç–∞—Ç—É—Å "–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ".
- –ù–∞ —Å–∞–π—Ç–µ —Å—Ç–∞—Ç—å—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `/blog/my-first-obsidian-note/`, Markdown-—Ä–∞–∑–º–µ—Ç–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è.

---

### ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò –ò–ú–ü–û–†–¢–ê –ò–ó OBSIDIAN

–ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

- –ü–∞–∫–µ—Ç—ã `python-frontmatter` –∏ `watchdog` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.
- –§–∞–π–ª –∫–æ–º–∞–Ω–¥—ã `import_obsidian.py` —Å–æ–∑–¥–∞–Ω –ø–æ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –ø—É—Ç–∏.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å `admin` (–∏–ª–∏ —É–∫–∞–∑–∞–Ω–Ω—ã–π –≤–∞–º–∏) —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ.
- –£ –≤–∞—Å –µ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π Markdown-—Ñ–∞–π–ª —Å front matter –≤ —Ñ–æ—Ä–º–∞—Ç–µ YAML (–∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ).

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –∏–º–ø–æ—Ä—Ç–∞ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –ø—É—Ç–µ–º.
2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í –∫–æ–Ω—Å–æ–ª–∏ ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –∏–º–ø–æ—Ä—Ç–µ.
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω–∫—É –∏ —Å–∞–π—Ç.
4. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°—Ç–∞—Ç—å—è –ø–æ—è–≤–∏–ª–∞—Å—å –≤ —Å–ø–∏—Å–∫–µ, –µ–µ –¥–∞–Ω–Ω—ã–µ (–∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ç–µ–≥–∏, —Å—Ç–∞—Ç—É—Å) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç front matter.

---

### üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –∏–º–ø–æ—Ä—Ç–∞:** –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ Obsidian (`[[—Å—Å—ã–ª–∫–∞]]`), –≤–ª–æ–∂–µ–Ω–∏–π (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π) –∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ front matter.
2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (watchdog):** –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ —Ä–µ–∂–∏–º–µ –¥–µ–º–æ–Ω–∞, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–∞–ø–∫–µ Obsidian –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
3. **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ UI –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞:** –î–æ–±–∞–≤—å—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –∞–¥–º–∏–Ω–∫–µ –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –ø–æ –∫–Ω–æ–ø–∫–µ.
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Git:** –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∞–ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—É–ª–ª–∏–Ω–≥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Obsidian –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º.

---

**–í–∞—à–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ (—Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –∏–º–ø–æ—Ä—Ç) —Å–æ–æ–±—â–∏—Ç–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –í —Å–ª—É—á–∞–µ –æ—à–∏–±–æ–∫ ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏.

–Ω–∞ —à–∞–≥–µ 1.6 –ø—Ä–æ–±–ª–µ–º–∞ —Å–º–æ—Ç—Ä–∏–º —Ç–æ–ª—å–∫–æ –µ–≥–æ. –£ –º–µ–Ω—è —Ñ–∞–π–ª article\_detail –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —É–∫–∞–∑–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫ {% extends "base.html" %} {% load markdown\_tags %} {% load markdownify %} {% block title %}{{ article.title }} | Universal Creative Hub{% endblock %} {% block content %} <article> <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏ --> <header class="mb-4"> <h1 class="display-4">{{ article.title }}</h1> <div class="d-flex justify-content-between align-items-center mt-3"> <div> <span class="badge bg-primary me-2">{{ article.category.name }}</span> {% for tag in article.tags.all %} <span class="badge bg-secondary me-1">{{ tag.name }}</span> {% endfor %} </div> <small class="text-muted"> –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ article.created\_at|date:"d.m.Y H:i" }} {% if article.updated\_at!= article.created\_at %} <br><small>–û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ article.updated\_at|date:"d.m.Y H:i" }}</small> {% endif %} </small> </div> </header> <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ --> {% if article.featured\_image %} <div class="mb-4"> <img src="{{ article.featured\_image.url }}" alt="{{ article.title }}" class="img-fluid rounded"> {% if article.featured\_image\_caption %} <p class="text-muted mt-2">{{ article.featured\_image\_caption }}</p> {% endif %} </div> {% endif %} <!-- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ --> <div class="markdown-content"> {{ article.content|markdown|safe }} </div> <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è --> <div class="mt-5 pt-4 border-top"> <div class="row"> <div class="col-6"> {% if previous\_article %} <small>–ü—Ä–µ–¥—ã–¥—É—â–∞—è —Å—Ç–∞—Ç—å—è</small><br> <a href="{% url 'blog:article\_detail' previous\_article.slug %}"> ‚Üê {{ previous\_article.title }} </a> {% endif %} </div> <div class="col-6 text-end"> {% if next\_article %} <small>–°–ª–µ–¥—É—é—â–∞—è —Å—Ç–∞—Ç—å—è</small><br> <a href="{% url 'blog:article\_detail' next\_article.slug %}"> {{ next\_article.title }} ‚Üí </a> {% endif %} </div> </div> </div> </article> {% endblock %}

–û—Ç–ª–∏—á–Ω–æ, –≤–∏–∂—É —á—Ç–æ –≤ –≤–∞—à–µ–º —à–∞–±–ª–æ–Ω–µ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä `markdown` –≤–º–µ—Å—Ç–æ `markdownify`. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç —É –≤–∞—Å —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫–æ–π-—Ç–æ Markdown –ø–∞–∫–µ—Ç (–≤–µ—Ä–æ—è—Ç–Ω–æ `django-markdown` –∏–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–¥–æ–±–Ω–æ–µ).

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–µ–º —Ä–µ—à–µ–Ω–∏–µ –ø–æ–¥ –≤–∞—à—É —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

---

### üîç –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π Markdown-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**1.1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã:**

bash

```
pip list | grep -i markdown
```

**1.2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `INSTALLED_APPS` –≤ `settings.py`:**  
–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –µ—Å—Ç—å –ª–∏ —Ç–∞–º —á—Ç–æ-—Ç–æ —Å–≤—è–∑–∞–Ω–Ω–æ–µ —Å markdown (–Ω–∞–ø—Ä–∏–º–µ—Ä: `'markdown'`, `'markdownify'`, `'django_markdown'`).

**1.3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–≥ –≤ —à–∞–±–ª–æ–Ω–µ:**  
–í–∞—à —à–∞–±–ª–æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:

django

```
{{ article.content|markdown|safe }}
```

–ó–Ω–∞—á–∏—Ç:

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–ª—å—Ç—Ä `markdown` (–Ω–µ `markdownify`)
- –§–∏–ª—å—Ç—Ä `|markdown` –≤–µ—Ä–æ—è—Ç–Ω–æ –∏–∑ –ø–∞–∫–µ—Ç–∞ `django-markdown` –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è

---

### ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê: –§–∏–ª—å—Ç—Ä markdown –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å MarkdownxField

–ï—Å–ª–∏ –≤—ã –∑–∞–º–µ–Ω–∏–ª–∏ `TextField` –Ω–∞ `MarkdownxField` –≤ –º–æ–¥–µ–ª–∏, —Ñ–∏–ª—å—Ç—Ä `|markdown` –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Ç–∞–∫ –∫–∞–∫:

1. `MarkdownxField` —Ö—Ä–∞–Ω–∏—Ç "—Å—ã—Ä–æ–π" Markdown —Ç–µ–∫—Å—Ç
2. –§–∏–ª—å—Ç—Ä `markdown` –æ–∂–∏–¥–∞–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–æ–∫—É Markdown –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ—ë –≤ HTML
3. –ù–æ –Ω–∞–º –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–∏–ª—å—Ç—Ä —Å–æ–≤–º–µ—Å—Ç–∏–º —Å –Ω–æ–≤—ã–º —Ç–∏–ø–æ–º –ø–æ–ª—è

---

### ‚úÖ –†–ï–®–ï–ù–ò–ï: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å MarkdownxField

–ï—Å—Ç—å **–¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞**:

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é markdownx (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

Markdownx –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–≤–æ–π —Å–ø–æ—Å–æ–± —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞. –û–±–Ω–æ–≤–∏—Ç–µ —à–∞–±–ª–æ–Ω:

django

```
<!-- uch/apps/blog/templates/blog/article_detail.html -->
{% extends "base.html" %}
{% load markdown_tags %}  <!-- –ï—Å–ª–∏ —ç—Ç–æ –≤–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ç–µ–≥ -->
{% load markdownify %}    <!-- –î–ª—è markdownify, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω -->
<!-- –£–î–ê–õ–ò–¢–ï —Å—Ç—Ä–æ–∫—É —Å load markdown –µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ -->

{% block content %}
<article>
    <!-- ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —à–∞–±–ª–æ–Ω–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... -->

    <!-- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ -->
    <!-- –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–£ –°–¢–†–û–ö–£: -->
    <!-- {{ article.content|markdown|safe }} -->
    <!-- –ù–ê –û–î–ù–£ –ò–ó –≠–¢–ò–•: -->

    <!-- –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å markdownx (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω django-markdownx) -->
    {{ article.content|safe }}

    <!-- –ò–õ–ò –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å markdownify (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω django-markdownify) -->
    {{ article.content|markdownify }}

    <!-- ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ —à–∞–±–ª–æ–Ω–∞ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... -->
</article>
{% endblock %}
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ TextField, –Ω–æ —Å markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º –≤ –∞–¥–º–∏–Ω–∫–µ

–ï—Å–ª–∏ —Ñ–∏–ª—å—Ç—Ä `|markdown` –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

1. **–í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ TextField –≤ –º–æ–¥–µ–ª–∏:**

python

```
# uch/apps/blog/models.py
# –ó–ê–ú–ï–ù–ò–¢–ï:
# content = MarkdownxField(verbose_name='–°–æ–¥–µ—Ä–∂–∏–º–æ–µ (Markdown)')
# –ù–ê:
content = models.TextField(verbose_name='–°–æ–¥–µ—Ä–∂–∏–º–æ–µ (Markdown)')
```

1. **–û–±–Ω–æ–≤–∏—Ç–µ –∞–¥–º–∏–Ω–∫—É, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∏–¥–∂–µ—Ç –≤–º–µ—Å—Ç–æ ModelAdmin:**
1. **–í —à–∞–±–ª–æ–Ω–µ –æ—Å—Ç–∞–≤—å—Ç–µ –∫–∞–∫ –±—ã–ª–æ:**

django

```
{{ article.content|markdown|safe }}
```

---

### üéØ –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò –†–ê–ë–û–¢–´

**–ü–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —É–±–µ–¥–∏—Ç–µ—Å—å:**

**–ï—Å–ª–∏ –≤—ã–±—Ä–∞–ª–∏ –í–∞—Ä–∏–∞–Ω—Ç –ê:**

- `django-markdownx` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `INSTALLED_APPS`
- –ü–æ–ª–µ `content` –≤ –º–æ–¥–µ–ª–∏ –∏–º–µ–µ—Ç —Ç–∏–ø `MarkdownxField`
- –í —à–∞–±–ª–æ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `{{ article.content|safe }}` –∏–ª–∏ `{{ article.content|markdownify }}`
- –ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—å–∏ –≤ –∞–¥–º–∏–Ω–∫–µ Markdown –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –≤–æ –≤–∫–ª–∞–¥–∫–µ Preview

**–ï—Å–ª–∏ –≤—ã–±—Ä–∞–ª–∏ –í–∞—Ä–∏–∞–Ω—Ç –ë:**

- –ü–æ–ª–µ `content` –≤ –º–æ–¥–µ–ª–∏ –∏–º–µ–µ—Ç —Ç–∏–ø `TextField`
- –í –∞–¥–º–∏–Ω–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `AdminMarkdownxWidget`
- –í —à–∞–±–ª–æ–Ω–µ –æ—Å—Ç–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä `{{ article.content|markdown|safe }}`
- –ü–∞–∫–µ—Ç –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞ `markdown` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

### üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
	bash
	```
	python manage.py runserver
	```
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–¥–º–∏–Ω–∫—É:**
	- –ü–µ—Ä–µ–π–¥–∏—Ç–µ: `http://localhost:8000/admin/blog/article/add/`
	- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–∏–¥–∏—Ç–µ Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä
3. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç–∞—Ç—å—é:**
	- –í–≤–µ–¥–∏—Ç–µ Markdown: `# –ó–∞–≥–æ–ª–æ–≤–æ–∫`, `- —Å–ø–∏—Å–æ–∫`, `**–∂–∏—Ä–Ω—ã–π**`
	- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ:**
	- –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç–∞—Ç—å—é –Ω–∞ —Å–∞–π—Ç–µ
	- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Markdown –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ HTML

---

### üîß –ï–°–õ–ò –í–û–ó–ù–ò–ö–õ–ò –ü–†–û–ë–õ–ï–ú–´:

**–ü—Ä–æ–±–ª–µ–º–∞:** "Unknown filter 'markdownify'"  
**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `django-markdownify` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `INSTALLED_APPS`

**–ü—Ä–æ–±–ª–µ–º–∞:** Markdown –Ω–µ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è, –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ —Ç–µ–∫—Å—Ç  
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:

1. –í –∞–¥–º–∏–Ω–∫–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç Markdown –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. –í —à–∞–±–ª–æ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä
3. –ù–µ –∑–∞–±—ã–ª–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∏–ø–∞ –ø–æ–ª—è

---

**–í–∞—à —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç (–ê –∏–ª–∏ –ë), –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Å–æ–æ–±—â–∏—Ç–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ **–í–∞—Ä–∏–∞–Ω—Ç –ê**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ markdownx –∏ –±–æ–ª–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–µ–Ω.

—É –º–µ–Ω—è —Ç–∞–∫ venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % pip list | grep -i markdown django-markdownx 4.0.9 Markdown 3.7 –∫–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª—É—á—à–µ –≤—ã–±—Ä–∞—Ç—å?

–û—Ç–ª–∏—á–Ω–æ! –£ –≤–∞—Å —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω **django-markdownx** –∏ **Markdown**. –ó–Ω–∞—á–∏—Ç —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –≤—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è **–í–∞—Ä–∏–∞–Ω—Ç–∞ –ê** (–Ω–∞—Ç–∏–≤–Ω—ã–π markdownx).

–í–∞—à —Ç–µ–∫—É—â–∏–π —Ñ–∏–ª—å—Ç—Ä `{{ article.content|markdown|safe }}` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞–∫–µ—Ç `django-markdown` (–∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä), –Ω–æ –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –Ω–∞—Ç–∏–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ markdownx.

---

### ‚úÖ –í–´–ë–ò–†–ê–ï–ú –í–ê–†–ò–ê–ù–¢ –ê (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `django-markdownx`
2. –ï–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥: –æ–¥–∏–Ω –ø–∞–∫–µ—Ç –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
3. –ü—Ä–æ—â–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
4. –õ—É—á—à–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞–¥–º–∏–Ω–∫–æ–π

---

### üõ† –®–ê–ì–ò –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

#### 1\. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ markdownx –≤ INSTALLED\_APPS

python

```
# uch/settings.py - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ
INSTALLED_APPS = [
    # ...
    'markdownx',  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å
    'uch.apps.blog',
]
```

#### 2\. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª–µ content - MarkdownxField

python

```
# uch/apps/blog/models.py - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ
from markdownx.models import MarkdownxField

class Article(models.Model):
    # ...
    content = MarkdownxField(verbose_name='–°–æ–¥–µ—Ä–∂–∏–º–æ–µ (Markdown)')  # –î–æ–ª–∂–Ω–æ –±—ã—Ç—å MarkdownxField
    # ...
```

#### 3\. –û–±–Ω–æ–≤–∏—Ç–µ —à–∞–±–ª–æ–Ω (article\_detail.html)

–ó–∞–º–µ–Ω–∏—Ç–µ —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–æ–∫—É —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:

django

```
<!-- –ë–´–õ–û: -->
{{ article.content|markdown|safe }}

<!-- –°–¢–ê–õ–û: -->
{{ article.content|safe }}
```

**–ü–æ–ª–Ω—ã–π –±–ª–æ–∫ –≤ –≤–∞—à–µ–º —à–∞–±–ª–æ–Ω–µ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:**

django

```
<!-- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ -->
<div class="markdown-content">
    {{ article.content|safe }}  <!-- –ò–ó–ú–ï–ù–ò–õ–ò –≠–¢–£ –°–¢–†–û–ö–£ -->
</div>
```

#### 4\. –£–±–µ—Ä–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ —Ç–µ–≥–∏ –∑–∞–≥—Ä—É–∑–∫–∏ (–µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å)

–í –Ω–∞—á–∞–ª–µ —à–∞–±–ª–æ–Ω–∞ —É –≤–∞—Å –µ—Å—Ç—å:

django

```
{% load markdown_tags %}
{% load markdownify %}
```

–ï—Å–ª–∏ `markdown_tags` \- –≤–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ç–µ–≥ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º `markdown`, –∞ `markdownify` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ:

django

```
{% extends "base.html" %}
<!-- –£–î–ê–õ–ò–¢–ï —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –µ—Å–ª–∏ –æ–Ω–∏ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã -->
<!-- {% load markdown_tags %} -->
<!-- {% load markdownify %} -->
```

#### 5\. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –º–µ–Ω—è–ª–∏ —Ç–∏–ø –ø–æ–ª—è)

bash

```
python manage.py makemigrations blog
python manage.py migrate
```

---

### üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

1. **–°–æ–∑–¥–∞–π—Ç–µ/–æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç—å—é –≤ –∞–¥–º–∏–Ω–∫–µ:**
	- –ü–µ—Ä–µ–π–¥–∏—Ç–µ: `http://localhost:8000/admin/blog/article/add/`
	- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í–∏–¥–∏—Ç–µ markdownx-—Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ "Write" –∏ "Preview"
	- –ù–∞–ø–∏—à–∏—Ç–µ Markdown: `# –¢–µ—Å—Ç`, `**–∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**`, `- —Å–ø–∏—Å–æ–∫`
2. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ:**
	- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Markdown –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ HTML

---

### ‚ö†Ô∏è –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø:

**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∞–¥–º–∏–Ω–∫–µ –Ω–µ—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ markdownx  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ `admin.py`:

**–ü—Ä–æ–±–ª–µ–º–∞:** HTML –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ —Ç–µ–∫—Å—Ç (–≤–∏–¥–Ω–æ —Ç–µ–≥–∏)  
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `{{ article.content|safe }}`, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ `{{ article.content }}`

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∞ "MarkdownxField –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ"  
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º–ø–æ—Ä—Ç –≤ `models.py`:

python

```
from markdownx.models import MarkdownxField  # ‚Üê –≠—Ç–æ—Ç –∏–º–ø–æ—Ä—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å
```

---

### üìã –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –í–´–ü–û–õ–ù–ï–ù–ò–Ø:

- –ü–æ–ª–µ `content` –≤ –º–æ–¥–µ–ª–∏ - `MarkdownxField`
- –í –∞–¥–º–∏–Ω–∫–µ `ArticleAdmin` –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `MarkdownxModelAdmin`
- –í —à–∞–±–ª–æ–Ω–µ `article_detail.html` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `{{ article.content|safe }}`
- URL `markdownx/` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `uch/urls.py` (–∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —à–∞–≥–∞—Ö)
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç—å—è —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ —Å–æ–æ–±—â–∏—Ç–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.** –ï—Å–ª–∏ –±—É–¥—É—Ç –æ—à–∏–±–∫–∏ - –ø—Ä–∏—à–ª–∏—Ç–µ –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥.

—Ä–µ–¥–∞–∫—Ç–æ—Ä –µ—Å—Ç—å –≤ –∞–¥–º–∏–Ω–∫–µ. –≤ –∞–¥–º–∏–Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤ HTML. –ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ —Å–∞–π—Ç–µ –≤–∏–¥–Ω—ã —Ç—ç–≥–∏ —Ñ–æ—Ä–º–∞—Ç–∞ markdown —Ç–µ–∫—Å—Ç –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ—Ç—Å—è –≤ HTML

–ü—Ä–æ–±–ª–µ–º–∞ —è—Å–Ω–∞: –≤ –∞–¥–º–∏–Ω–∫–µ markdownx –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç Markdown –≤ HTML –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞, –Ω–æ –Ω–∞ —Å–∞–π—Ç–µ –º—ã –≤–∏–¥–∏–º —Å—ã—Ä–æ–π Markdown. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ:

1. **–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö** —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å—ã—Ä–æ–π Markdown —Ç–µ–∫—Å—Ç
2. **–ü—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏** –Ω–∞ —Å–∞–π—Ç–µ –æ–Ω –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ HTML

---

### üîç –ü–†–ò–ß–ò–ù–ê –ü–†–û–ë–õ–ï–ú–´:

–ö–æ–≥–¥–∞ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `{{ article.content|safe }}`, –≤—ã –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ–ª—è "–∫–∞–∫ –µ—Å—Ç—å", –¥–æ–±–∞–≤–ª—è—è —Ç–æ–ª—å–∫–æ `safe` –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è HTML. –ù–æ –µ—Å–ª–∏ –≤ –ø–æ–ª–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è Markdown (`# –ó–∞–≥–æ–ª–æ–≤–æ–∫`), –æ–Ω –∏ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω –∫–∞–∫ —Ç–µ–∫—Å—Ç.

**–ú–∞—Ä–∫–¥–∞—É–Ω –≤ –±–∞–∑–µ:**

markdown

```
# –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç–∞—Ç—å–∏

–≠—Ç–æ **–∂–∏—Ä–Ω—ã–π** —Ç–µ–∫—Å—Ç.
```

**–ß—Ç–æ –≤—ã–≤–æ–¥–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ:** —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ —Ç–µ–∫—Å—Ç (–≤–∏–¥–Ω–æ `#` –∏ `**`).

---

### ‚úÖ –†–ï–®–ï–ù–ò–ï:

Markdownx –¥–æ–ª–∂–µ–Ω **—Å–∞–º —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å** Markdown –≤ HTML –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –ø–æ–ª—é. –ù–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–Ω –º–æ–∂–µ—Ç —ç—Ç–æ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å. –ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ —Ä–µ—à–µ–Ω–∏—è:

#### –°–ü–û–°–û–ë 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å markdownx-—Ñ–∏–ª—å—Ç—Ä –≤ —à–∞–±–ª–æ–Ω–µ (–Ω–∞–¥–µ–∂–Ω–µ–µ)

django

```
<!-- –í –Ω–∞—á–∞–ª–æ —à–∞–±–ª–æ–Ω–∞ –¥–æ–±–∞–≤—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É markdownx —Ç–µ–≥–æ–≤ -->
{% load markdownx_tags %}

<!-- –í –±–ª–æ–∫–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞: -->
<div class="markdown-content">
    {{ article.content|markdownx }}  <!-- –ò–õ–ò markdown | safe -->
</div>
```

#### –°–ü–û–°–û–ë 2: –†–µ–Ω–¥–µ—Ä–∏—Ç—å –≤ Python-–∫–æ–¥–µ

–î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥ –≤ –º–æ–¥–µ–ª—å `Article`:

python

```
# uch/apps/blog/models.py
from markdownx.utils import markdownify

class Article(models.Model):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...
    
    @property
    def content_html(self):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML-–≤–µ—Ä—Å–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞"""
        return markdownify(self.content)
```

–í —à–∞–±–ª–æ–Ω–µ:

django

```
<div class="markdown-content">
    {{ article.content_html|safe }}
</div>
```

#### –°–ü–û–°–û–ë 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å markdownify (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

–ï—Å–ª–∏ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `django-markdownify`:

bash

```
pip install django-markdownify
```

–î–æ–±–∞–≤—å—Ç–µ –≤ `settings.py`:

python

```
INSTALLED_APPS = [
    # ...
    'markdownify',
]
```

–í —à–∞–±–ª–æ–Ω–µ:

django

```
{% load markdownify %}

<div class="markdown-content">
    {{ article.content|markdownify }}
</div>
```

---

### üéØ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô –°–ü–û–°–û–ë (–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π):

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `markdownify` \- –æ–Ω —Ç–æ—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å MarkdownxField:**

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ markdownify:**

bash

```
pip install django-markdownify
pip freeze > requirements.txt
```

1. **–î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**

python

```
# uch/settings.py
INSTALLED_APPS = [
    # ...
    'markdownx',
    'markdownify',  # ‚Üê –î–û–ë–ê–í–ò–¢–¨
    # ...
]

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ markdownify (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
MARKDOWNIFY = {
    "default": {
        "WHITELIST_TAGS": [
            'a', 'abbr', 'acronym', 'b', 'blockquote', 'code',
            'em', 'i', 'li', 'ol', 'p', 'strong', 'ul',
            'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
        ]
    }
}
```

1. **–û–±–Ω–æ–≤–∏—Ç–µ —à–∞–±–ª–æ–Ω:**

django

```
<!-- uch/apps/blog/templates/blog/article_detail.html -->
{% extends "base.html" %}
{% load markdownify %}  <!-- –¢–û–õ–¨–ö–û —ç—Ç–æ—Ç —Ç–µ–≥ -->

<!-- ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ... -->

<div class="markdown-content">
    {{ article.content|markdownify }}  <!-- –ò–ó–ú–ï–ù–ò–¢–¨ –ù–ê –≠–¢–û -->
</div>
```

1. **–£–¥–∞–ª–∏—Ç–µ `|safe`, —Ç–∞–∫ –∫–∞–∫ `markdownify` —É–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—ã–π HTML.**

---

### üß™ –ë–´–°–¢–†–´–ô –¢–ï–°–¢ –ë–ï–ó –£–°–¢–ê–ù–û–í–ö–ò:

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ **–°–ø–æ—Å–æ–± 2** (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –≤ –º–æ–¥–µ–ª—å):

python

```
# uch/apps/blog/models.py
from markdownx.utils import markdownify
from django.utils.safestring import mark_safe

class Article(models.Model):
    # ... –≤–∞—à–∏ –ø–æ–ª—è ...
    
    @property
    def content_html(self):
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç HTML-–≤–µ—Ä—Å–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞"""
        return mark_safe(markdownify(self.content))
```

django

```
<!-- –í —à–∞–±–ª–æ–Ω–µ: -->
<div class="markdown-content">
    {{ article.content_html }}
</div>
```

–≠—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ä–∞–∑—É, —Ç–∞–∫ –∫–∞–∫ `markdownx.utils.markdownify` —É–∂–µ –¥–æ—Å—Ç—É–ø–µ–Ω (–æ–Ω —á–∞—Å—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–≥–æ django-markdownx).

---

### üìã –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –±–∞–∑–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è Markdown:**
	- –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç–∞—Ç—å—é –≤ –∞–¥–º–∏–Ω–∫–µ ‚Üí –≤–∫–ª–∞–¥–∫–∞ "Write"
	- –í—ã –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å Markdown-—Ä–∞–∑–º–µ—Ç–∫—É
2. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã—à–µ**
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
	- –°–æ–∑–¥–∞–π—Ç–µ —Å—Ç–∞—Ç—å—é —Å Markdown: `# –¢–µ—Å—Ç`, `**–∂–∏—Ä–Ω—ã–π**`, `- —Å–ø–∏—Å–æ–∫`
	- –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ
	- –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ
	- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
		- `# –¢–µ—Å—Ç` ‚Üí `<h1>–¢–µ—Å—Ç</h1>`
		- `**–∂–∏—Ä–Ω—ã–π**` ‚Üí `<strong>–∂–∏—Ä–Ω—ã–π</strong>`
		- `- —Å–ø–∏—Å–æ–∫` ‚Üí `<ul><li>—Å–ø–∏—Å–æ–∫</li></ul>`

---

**–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ.** –°–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `django-markdownify` (–°–ø–æ—Å–æ–± 3), —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π –¥–ª—è —Ç–µ—Å—Ç–∞ - –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ –º–æ–¥–µ–ª—å (–°–ø–æ—Å–æ–± 2).

**–°–æ–æ–±—â–∏—Ç–µ, –∫–∞–∫–æ–π —Å–ø–æ—Å–æ–± –≤—ã–±—Ä–∞–ª–∏ –∏ —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å.**

c django-markdownify –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

–û—Ç–ª–∏—á–Ω–æ! üéâ **django-markdownify** —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–∏–ª –ø—Ä–æ–±–ª–µ–º—É. –¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å:

1. ‚úÖ **Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä –≤ –∞–¥–º–∏–Ω–∫–µ** (—á–µ—Ä–µ–∑ django-markdownx)
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Markdown ‚Üí HTML –Ω–∞ —Å–∞–π—Ç–µ** (—á–µ—Ä–µ–∑ django-markdownify)
3. ‚úÖ **–ï–¥–∏–Ω—ã–π —Ä–∞–±–æ—á–∏–π –ø—Ä–æ—Ü–µ—Å—Å:** –ø–∏—à–µ—Ç–µ Markdown –≤ –∞–¥–º–∏–Ω–∫–µ ‚Üí –≤–∏–¥–∏—Ç–µ HTML –Ω–∞ —Å–∞–π—Ç–µ

---

### üìã –§–ò–ù–ê–õ–¨–ù–´–ô –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –≠–¢–û–ì–û –®–ê–ì–ê:

- **django-markdownx** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `INSTALLED_APPS`
- **django-markdownify** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `INSTALLED_APPS`
- –ü–æ–ª–µ `content` –≤ –º–æ–¥–µ–ª–∏ `Article` –∏–º–µ–µ—Ç —Ç–∏–ø `MarkdownxField`
- –í –∞–¥–º–∏–Ω–∫–µ `ArticleAdmin` –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `MarkdownxModelAdmin`
- –í —à–∞–±–ª–æ–Ω–µ `article_detail.html`:
	- –ó–∞–≥—Ä—É–∂–µ–Ω —Ç–µ–≥ `{% load markdownify %}`
	- –ö–æ–Ω—Ç–µ–Ω—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ `{{ article.content|markdownify }}`
- –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (`python manage.py migrate`)
- –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ç–∞—Ç—å—è —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ (Markdown –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ HTML)

---

### üéØ –ü–ï–†–ï–•–û–î –ö –°–õ–ï–î–£–Æ–©–ï–ú–£ –®–ê–ì–£:

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –∫ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –∏–º–ø–æ—Ä—Ç—É –∏–∑ Obsidian** (–®–∞–≥ 2 –∏–∑ –ø–ª–∞–Ω–∞).

#### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ):
	bash
	```
	pip install python-frontmatter watchdog
	pip freeze > requirements.txt
	```
2. **–°–æ–∑–¥–∞—Ç—å Django-–∫–æ–º–∞–Ω–¥—É** `import_obsidian.py` (–∫–æ–¥ —É–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω —Ä–∞–Ω–µ–µ)
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç** –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º Markdown-—Ñ–∞–π–ª–µ
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç –≤ –∞–¥–º–∏–Ω–∫—É** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –Ω–æ –ø–æ–ª–µ–∑–Ω–æ)

---

### ‚ùì –í–û–ü–†–û–°:

**–ü—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ Obsidian?**

–ò–ª–∏ –Ω—É–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞:

- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —á—Ç–æ-—Ç–æ –µ—â–µ –¥–ª—è –±–ª–æ–≥–∞ (RSS, –ø–æ–∏—Å–∫, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)?
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π?

**–°–ª–µ–¥—É—è –ø–æ—ç—Ç–∞–ø–Ω–æ–º—É –ø–æ–¥—Ö–æ–¥—É, —Å–ª–µ–¥—É—é—â–∏–π –ª–æ–≥–∏—á–Ω—ã–π —à–∞–≥ - –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian**, –∫–∞–∫ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –≤ –§–∞–∑–µ 1.

–ø—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ –∏–º–ø–æ—Ä—Ç—É

–û—Ç–ª–∏—á–Ω–æ! –ü—Ä–∏—Å—Ç—É–ø–∞–µ–º –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ Obsidian.

---

### üéØ –®–ê–ì 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ Obsidian

#### 2.1. –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –ø–∞–∫–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

bash

```
# –ü—Ä–æ–≤–µ—Ä–∏–º —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
pip list | grep -E "(frontmatter|watchdog)"

# –ï—Å–ª–∏ –∏—Ö –Ω–µ—Ç, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º
pip install python-frontmatter watchdog
pip freeze > requirements.txt
```

---

#### 2.2. –°–æ–∑–¥–∞–¥–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è Django-–∫–æ–º–∞–Ω–¥—ã

bash

```
# –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ)
mkdir -p uch/apps/blog/management/commands
touch uch/apps/blog/management/__init__.py
touch uch/apps/blog/management/commands/__init__.py

# –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –∫–æ–º–∞–Ω–¥—ã –∏–º–ø–æ—Ä—Ç–∞
touch uch/apps/blog/management/commands/import_obsidian.py
```

---

#### 2.3. –°–æ–∑–¥–∞–µ–º –∫–æ–º–∞–Ω–¥—É –∏–º–ø–æ—Ä—Ç–∞

–í–æ—Ç **–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è** –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä–∞—è —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤–∞—à—É —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É (MarkdownxField):

python

```
# uch/apps/blog/management/commands/import_obsidian.py
import os
import glob
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.utils.text import slugify
from django.utils import timezone
from datetime import datetime
import frontmatter
from taggit.models import Tag

from uch.apps.blog.models import Article, Category

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'

    def add_arguments(self, parser):
        parser.add_argument(
            'obsidian_path',
            type=str,
            help='–ü—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Obsidian'
        )
        parser.add_argument(
            '--author',
            type=str,
            default='admin',
            help='–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Django, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∞–≤—Ç–æ—Ä–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin)'
        )
        parser.add_argument(
            '--default-category',
            type=str,
            default='Imported',
            help='–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "Imported")'
        )
        parser.add_argument(
            '--dry-run',
            action='store_true',
            help='–ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ, –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î'
        )
        parser.add_argument(
            '--update-existing',
            action='store_true',
            help='–û–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏ (–ø–æ —Å–ª–∞–≥—É)'
        )

    def handle(self, *args, **options):
        obsidian_path = Path(options['obsidian_path'])
        author_username = options['author']
        default_category_name = options['default_category']
        dry_run = options['dry_run']
        update_existing = options['update_existing']

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        if not obsidian_path.exists() or not obsidian_path.is_dir():
            raise CommandError(f'–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è "{obsidian_path}" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
        try:
            author = User.objects.get(username=author_username)
        except User.DoesNotExist:
            raise CommandError(f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∏–º–µ–Ω–µ–º "{author_username}" –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        default_category, created = Category.objects.get_or_create(
            name=default_category_name,
            defaults={'slug': slugify(default_category_name)}
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "{default_category_name}"'))

        # –ü–æ–∏—Å–∫ –≤—Å–µ—Ö .md —Ñ–∞–π–ª–æ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
        md_files = list(obsidian_path.rglob('*.md'))
        self.stdout.write(f'–ù–∞–π–¥–µ–Ω–æ {len(md_files)} .md —Ñ–∞–π–ª–æ–≤ –≤ "{obsidian_path}".')

        imported_count = 0
        updated_count = 0
        skipped_count = 0

        for md_file in md_files:
            try:
                with open(md_file, 'r', encoding='utf-8') as f:
                    post = frontmatter.load(f)

                # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ front matter
                metadata = post.metadata
                content = post.content

                # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
                title = metadata.get('title', md_file.stem)
                
                # –°–æ–∑–¥–∞–Ω–∏–µ slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
                slug_source = metadata.get('slug', title)
                slug = slugify(slug_source)
                
                if not slug:  # –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π –ø–æ—Å–ª–µ slugify
                    slug = slugify(md_file.stem)

                # –°—Ç–∞—Ç—É—Å
                status = 'draft'
                if metadata.get('published') in [True, 'true', 'True', 'yes']:
                    status = 'published'
                elif metadata.get('status'):
                    status = metadata.get('status')

                # –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                category_name = metadata.get('category', metadata.get('categories'))
                if category_name:
                    if isinstance(category_name, list):
                        category_name = category_name[0]  # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                    category, _ = Category.objects.get_or_create(
                        name=category_name,
                        defaults={'slug': slugify(category_name)}
                    )
                else:
                    category = default_category

                # –¢–µ–≥–∏
                tags = []
                if 'tags' in metadata:
                    tags_meta = metadata['tags']
                    if isinstance(tags_meta, str):
                        tags = [t.strip() for t in tags_meta.split(',')]
                    elif isinstance(tags_meta, list):
                        tags = [str(t).strip() for t in tags_meta]
                
                # –¢–∞–∫–∂–µ –∏—â–µ–º —Ç–µ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Obsidian #—Ç–µ–≥ –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ
                import re
                content_tags = re.findall(r'#([a-zA-Z–∞-—è–ê-–Ø0-9_-]+)', content)
                tags.extend(content_tags)
                tags = list(set(tags))  # –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã

                # –î–∞—Ç–∞
                published_at = timezone.now()
                if 'date' in metadata:
                    date_value = metadata['date']
                    try:
                        if isinstance(date_value, str):
                            # –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞—Ç
                            for fmt in ('%Y-%m-%d', '%Y-%m-%d %H:%M:%S', '%d.%m.%Y', '%Y/%m/%d'):
                                try:
                                    published_at = datetime.strptime(date_value, fmt)
                                    break
                                except ValueError:
                                    continue
                            published_at = timezone.make_aware(published_at)
                        else:
                            published_at = date_value
                    except Exception as e:
                        self.stdout.write(self.style.WARNING(f'–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É "{date_value}" –¥–ª—è —Ñ–∞–π–ª–∞ {md_file}: {e}'))

                # –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Å—Ç–∞—Ç—å—è —Å —Ç–∞–∫–∏–º slug?
                existing_article = Article.objects.filter(slug=slug).first()
                
                if existing_article and not update_existing:
                    self.stdout.write(f'[–ü–†–û–ü–£–©–ï–ù–û] –°—Ç–∞—Ç—å—è —Å slug "{slug}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.')
                    skipped_count += 1
                    continue

                # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏
                article_data = {
                    'title': title,
                    'content': content,  # MarkdownxField –ø—Ä–∏–º–µ—Ç Markdown
                    'slug': slug,
                    'status': status,
                    'category': category,
                    'author': author,
                    'published_at': published_at,
                }

                if dry_run:
                    self.stdout.write(f'[DRY RUN] {"–û–±–Ω–æ–≤–∏—Ç—å" if existing_article else "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"}: "{title}"')
                    self.stdout.write(f'        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category.name}, –¢–µ–≥–∏: {tags}, –°—Ç–∞—Ç—É—Å: {status}')
                    imported_count += 1
                    continue

                # –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
                if existing_article and update_existing:
                    for key, value in article_data.items():
                        setattr(existing_article, key, value)
                    existing_article.save()
                    article = existing_article
                    updated_count += 1
                    action = '–û–ë–ù–û–í–õ–ï–ù–ò–ï'
                else:
                    article = Article.objects.create(**article_data)
                    imported_count += 1
                    action = '–ò–ú–ü–û–†–¢'

                # –û—á–∏—Å—Ç–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤
                article.tags.clear()
                for tag_name in tags:
                    if tag_name:  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Ç–µ–≥–∏
                        article.tags.add(tag_name)

                self.stdout.write(f'[{action}] {"–û–±–Ω–æ–≤–ª–µ–Ω–∞" if action == "–û–ë–ù–û–í–õ–ï–ù–ò–ï" else "–°–æ–∑–¥–∞–Ω–∞"}: "{title}" (slug: {slug})')

            except UnicodeDecodeError:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤ —Ñ–∞–π–ª–µ {md_file}. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.'))
                skipped_count += 1
            except Exception as e:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ {md_file}: {e}'))
                skipped_count += 1

        # –ò—Ç–æ–≥–∏
        self.stdout.write('\n' + '='*50)
        if dry_run:
            self.stdout.write(self.style.WARNING(f'DRY RUN –ó–ê–í–ï–†–®–ï–ù. –ë—ã–ª–æ –±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}'))
        else:
            self.stdout.write(self.style.SUCCESS(
                f'–ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}, –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped_count}'
            ))
```

---

#### 2.4. –°–æ–∑–¥–∞–¥–∏–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª Obsidian –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test_obsidian_note.md` –≤ –ª—é–±–æ–π –ø–∞–ø–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –†–∞–±–æ—á–µ–º —Å—Ç–æ–ª–µ):

markdown

```
---
title: "–ú–æ–π –ø–µ—Ä–≤—ã–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian"
slug: "first-obsidian-import"
date: 2025-12-08
published: true
category: "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏"
tags: ["obsidian", "–∏–º–ø–æ—Ä—Ç", "–±–ª–æ–≥", "django"]
---

# –¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ Obsidian

–≠—Ç–æ **—Ç–µ—Å—Ç–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞**, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±–ª–æ–≥ Universal Creative Hub.

## –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º

1. –ò–º–ø–æ—Ä—Ç Markdown —Å front matter
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ª–∞–≥–∞
3. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–µ–≥–æ–≤
4. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Markdown –≤ HTML —á–µ—Ä–µ–∑ markdownify

### –ö–æ–¥-–ø—Ä–∏–º–µ—Ä

\`\`\`python
def hello_obsidian():
    print("Hello from Obsidian vault!")
```

## –°—Å—ã–ª–∫–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [–°—Å—ã–ª–∫–∞ –Ω–∞ Django](https://www.djangoproject.com/)
- *–ö—É—Ä—Å–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç*
- **–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**

#obsidian #import #test

text

```
---

#### **2.5. –¢–µ—Å—Ç–∏—Ä—É–µ–º –∫–æ–º–∞–Ω–¥—É**

\`\`\`bash
# –°–Ω–∞—á–∞–ª–∞ DRY RUN (–ø–æ–∫–∞–∂–µ—Ç —á—Ç–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞–Ω–æ –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)
python manage.py import_obsidian ~/Desktop --dry-run --author admin

# –ï—Å–ª–∏ –≤—Å–µ —Ö–æ—Ä–æ—à–æ, —Ä–µ–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç
python manage.py import_obsidian ~/Desktop --author admin --update-existing

# –° –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø—É—Ç–µ–º
python manage.py import_obsidian "/path/to/your/obsidian/vault" --author admin
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

text

```
–ù–∞–π–¥–µ–Ω–æ X .md —Ñ–∞–π–ª–æ–≤ –≤ "...".
[–ò–ú–ü–û–†–¢] –°–æ–∑–¥–∞–Ω–∞: "–ú–æ–π –ø–µ—Ä–≤—ã–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian" (slug: first-obsidian-import)
–ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: 1, –û–±–Ω–æ–≤–ª–µ–Ω–æ: 0, –ü—Ä–æ–ø—É—â–µ–Ω–æ: 0
```

---

#### 2.6. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç

1. **–í –∞–¥–º–∏–Ω–∫–µ Django:**
	- –ü–µ—Ä–µ–π–¥–∏—Ç–µ: `http://localhost:8000/admin/blog/article/`
	- –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤–∞—è —Å—Ç–∞—Ç—å—è "–ú–æ–π –ø–µ—Ä–≤—ã–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian"
	- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ: –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏", —Ç–µ–≥–∏, —Å—Ç–∞—Ç—É—Å "–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ"
2. **–ù–∞ —Å–∞–π—Ç–µ:**
	- –ü–µ—Ä–µ–π–¥–∏—Ç–µ: `http://localhost:8000/blog/first-obsidian-import/`
	- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** Markdown –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ HTML

---

### ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò –ò–ú–ü–û–†–¢–ê:

- –ü–∞–∫–µ—Ç—ã `python-frontmatter` –∏ `watchdog` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –§–∞–π–ª –∫–æ–º–∞–Ω–¥—ã `import_obsidian.py` —Å–æ–∑–¥–∞–Ω –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- –¢–µ—Å—Ç–æ–≤—ã–π Markdown-—Ñ–∞–π–ª —Å front matter —Å–æ–∑–¥–∞–Ω
- –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- DRY RUN –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –†–µ–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç —Å–æ–∑–¥–∞–µ—Ç —Å—Ç–∞—Ç—å—é –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –°—Ç–∞—Ç—å—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∞–¥–º–∏–Ω–∫–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–æ–ª—è–º–∏
- –ù–∞ —Å–∞–π—Ç–µ Markdown –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ HTML —á–µ—Ä–µ–∑ markdownify
- –¢–µ–≥–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

### üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –£–õ–£–ß–®–ï–ù–ò–Ø (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞):

1. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞-—Ñ–∞–π–ª–æ–≤ –∏–∑ Obsidian)
2. **–û–±—Ä–∞–±–æ—Ç–∫—É –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ Obsidian** (`[[other-note]]` ‚Üí —Å—Å—ã–ª–∫–∏ –≤ –±–ª–æ–≥–µ)
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é** (—á–µ—Ä–µ–∑ watchdog –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤)
4. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞** –≤ –∞–¥–º–∏–Ω–∫–µ Django

---

**–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞ –∏ —Å–æ–æ–±—â–∏—Ç–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.** –ï—Å–ª–∏ –±—É–¥—É—Ç –æ—à–∏–±–∫–∏ - –ø—Ä–∏—à–ª–∏—Ç–µ –ø–æ–ª–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏.

–¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ! –¥–≤–∏–≥–∞–µ–º—Å—è –¥–∞–ª—å—à–µ –ø–æ —É–ª—É—á—à–µ–Ω–∏—è–º

–û—Ç–ª–∏—á–Ω–æ! üéâ –ò–º–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç. –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–π–¥–µ–º –∫ —É–ª—É—á—à–µ–Ω–∏—è–º.

---

### üéØ –£–õ–£–ß–®–ï–ù–ò–ï 1: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ

–ö–æ–≥–¥–∞ –≤ Obsidian-–∑–∞–º–µ—Ç–∫–∞—Ö –µ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (`![[image.png]]`), –∏—Ö –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ –º–µ–¥–∏–∞-–ø–∞–ø–∫—É Django.

#### 1.1. –û–±–Ω–æ–≤–∏–º –∫–æ–º–∞–Ω–¥—É –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–î–æ–±–∞–≤–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫:

python

```
# uch/apps/blog/management/commands/import_obsidian.py
# –î–û–ë–ê–í–ò–ú –í –ù–ê–ß–ê–õ–û –§–ê–ô–õ–ê:
import shutil
import re
from django.core.files import File
from django.conf import settings

# –î–û–ë–ê–í–ò–ú –ú–ï–¢–û–î –í –ö–õ–ê–°–° Command:
def _process_images(self, content, md_file, article):
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
    1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
    2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
    3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
    """
    # –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Obsidian: ![[image.png]]
    pattern = r'!\[\[([^\]]+\.(?:png|jpg|jpeg|gif|bmp|webp|svg))\]\]'
    
    def replace_image(match):
        image_filename = match.group(1)
        image_path = md_file.parent / image_filename
        
        if image_path.exists() and image_path.is_file():
            # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
            unique_name = f"{article.slug}_{image_path.name}"
            media_path = settings.MEDIA_ROOT / 'blog' / 'images' / unique_name
            
            # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
            media_path.parent.mkdir(parents=True, exist_ok=True)
            
            # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª
            shutil.copy2(image_path, media_path)
            
            # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown
            media_url = f"{settings.MEDIA_URL}blog/images/{unique_name}"
            return f'![{image_path.stem}]({media_url})'
        
        return match.group(0)  # –û—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –±—ã–ª–æ –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
    
    # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    processed_content = re.sub(pattern, replace_image, content)
    return processed_content

# –í –º–µ—Ç–æ–¥–µ handle, –ü–û–°–õ–ï –∏–∑–≤–ª–µ—á–µ–Ω–∏—è content (—Å—Ç—Ä–æ–∫–∞ ~70):
# content = post.content
# –î–û–ë–ê–í–ò–ú:
if not dry_run:
    content = self._process_images(content, md_file, article_data)
```

---

#### 1.2. –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ MEDIA –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `uch/settings.py`:

python

```
# uch/settings.py
import os

# ... –¥—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ...

# –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã
MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
media_dirs = [
    MEDIA_ROOT,
    MEDIA_ROOT / 'blog',
    MEDIA_ROOT / 'blog' / 'images',
]
for dir_path in media_dirs:
    dir_path.mkdir(exist_ok=True)
```

---

#### 1.3. –î–æ–±–∞–≤–∏–º URL –¥–ª—è –º–µ–¥–∏–∞ –≤ development

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `uch/urls.py` –µ—Å—Ç—å:

python

```
# uch/urls.py
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # ... –≤–∞—à–∏ –º–∞—Ä—à—Ä—É—Ç—ã ...
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

---

### üéØ –£–õ–£–ß–®–ï–ù–ò–ï 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ Obsidian

–í Obsidian —Å—Å—ã–ª–∫–∏ –≤–∏–¥–∞ `[[other-note]]` –¥–æ–ª–∂–Ω—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å—Å—è –≤ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ç—å–∏ –≤ –±–ª–æ–≥–µ.

#### 2.1. –î–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç–∫—É —Å—Å—ã–ª–æ–∫

python

```
# –í –¢–û–¢ –ñ–ï –§–ê–ô–õ import_obsidian.py –¥–æ–±–∞–≤–∏–º –º–µ—Ç–æ–¥:
def _process_wikilinks(self, content, md_file):
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç Obsidian wikilinks [[note]] –≤ –æ–±—ã—á–Ω—ã–µ Markdown —Å—Å—ã–ª–∫–∏.
    –°–Ω–∞—á–∞–ª–∞ –ø—ã—Ç–∞–µ—Ç—Å—è –Ω–∞–π—Ç–∏ —Å—Ç–∞—Ç—å—é –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫—É, –∑–∞—Ç–µ–º –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞.
    """
    # –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è [[note]] –∏–ª–∏ [[note|display text]]
    pattern = r'\[\[([^\]]+?)(?:\|([^\]]+))?\]\]'
    
    def replace_wikilink(match):
        link_content = match.group(1)  # –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Å—ã–ª–∫–∏
        display_text = match.group(2) or link_content  # –û—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç
        
        # –£–±–∏—Ä–∞–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ .md –µ—Å–ª–∏ –µ—Å—Ç—å
        if link_content.endswith('.md'):
            link_content = link_content[:-3]
        
        # –ü—ã—Ç–∞–µ–º—Å—è –Ω–∞–π—Ç–∏ —Å—Ç–∞—Ç—å—é –ø–æ slug (slugify –∑–∞–≥–æ–ª–æ–≤–∫–∞)
        from django.utils.text import slugify
        possible_slugs = [
            slugify(link_content),
            slugify(link_content.replace(' ', '-')),
            link_content.lower().replace(' ', '-')
        ]
        
        for slug in possible_slugs:
            try:
                article = Article.objects.get(slug=slug)
                return f'[{display_text}]({article.get_absolute_url()})'
            except Article.DoesNotExist:
                continue
        
        # –ï—Å–ª–∏ —Å—Ç–∞—Ç—å—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ —Ç–µ–∫—Å—Ç
        return display_text
    
    processed_content = re.sub(pattern, replace_wikilink, content)
    return processed_content

# –í –º–µ—Ç–æ–¥–µ handle, –ü–û–°–õ–ï –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
# content = self._process_images(content, md_file, article_data)
# –î–û–ë–ê–í–ò–ú:
content = self._process_wikilinks(content, md_file)
```

---

#### 2.2. –î–æ–±–∞–≤–∏–º –º–µ—Ç–æ–¥ get\_absolute\_url –≤ –º–æ–¥–µ–ª—å

–ß—Ç–æ–±—ã —Å—Å—ã–ª–∫–∏ —Ä–∞–±–æ—Ç–∞–ª–∏, –¥–æ–±–∞–≤–∏–º –≤ –º–æ–¥–µ–ª—å `Article`:

python

```
# uch/apps/blog/models.py
from django.urls import reverse

class Article(models.Model):
    # ... –ø–æ–ª—è ...
    
    def get_absolute_url(self):
        return reverse('blog:article_detail', args=[self.slug])
```

---

### üéØ –£–õ–£–ß–®–ï–ù–ò–ï 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (watchdog)

#### 3.1. –°–æ–∑–¥–∞–¥–∏–º –∫–æ–º–∞–Ω–¥—É –¥–ª—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

python

```
# uch/apps/blog/management/commands/watch_obsidian.py
import time
from pathlib import Path
from django.core.management.base import BaseCommand
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler
import subprocess
import os

class ObsidianEventHandler(FileSystemEventHandler):
    def __init__(self, vault_path, author='admin'):
        self.vault_path = Path(vault_path)
        self.author = author
        self.last_processed = {}
    
    def on_modified(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            self._process_file(event.src_path, 'modified')
    
    def on_created(self, event):
        if not event.is_directory and event.src_path.endswith('.md'):
            self._process_file(event.src_path, 'created')
    
    def _process_file(self, filepath, action):
        """–ó–∞–ø—É—Å–∫–∞–µ—Ç –∏–º–ø–æ—Ä—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞"""
        from django.core.management import call_command
        
        filepath = Path(filepath)
        rel_path = filepath.relative_to(self.vault_path)
        
        print(f"[{action.upper()}] {rel_path}")
        
        # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ—Ç —Ñ–∞–π–ª (—á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É)
        try:
            call_command(
                'import_obsidian',
                str(filepath.parent),
                '--author', self.author,
                '--update-existing'
            )
            print(f"‚úì –£—Å–ø–µ—à–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω: {rel_path}")
        except Exception as e:
            print(f"‚úó –û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ {rel_path}: {e}")

class Command(BaseCommand):
    help = '–ù–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ –ø–∞–ø–∫–µ Obsidian –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç'
    
    def add_arguments(self, parser):
        parser.add_argument(
            'obsidian_path',
            type=str,
            help='–ü—É—Ç—å –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É Obsidian'
        )
        parser.add_argument(
            '--author',
            type=str,
            default='admin',
            help='–ê–≤—Ç–æ—Ä –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö —Å—Ç–∞—Ç–µ–π'
        )
    
    def handle(self, *args, **options):
        vault_path = Path(options['obsidian_path'])
        author = options['author']
        
        if not vault_path.exists():
            self.stderr.write(f'–û—à–∏–±–∫–∞: –ø—É—Ç—å {vault_path} –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç')
            return
        
        self.stdout.write(f'üëÅ  –ù–∞—á–∏–Ω–∞—é –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞: {vault_path}')
        self.stdout.write(f'üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç —Å –∞–≤—Ç–æ—Ä–æ–º: {author}')
        self.stdout.write('‚ÑπÔ∏è  –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏')
        
        event_handler = ObsidianEventHandler(vault_path, author)
        observer = Observer()
        observer.schedule(event_handler, str(vault_path), recursive=True)
        observer.start()
        
        try:
            while True:
                time.sleep(1)
        except KeyboardInterrupt:
            observer.stop()
            self.stdout.write('\nüëã –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è...')
        
        observer.join()
```

---

#### 3.2. –¢–µ—Å—Ç–∏—Ä—É–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é

bash

```
# –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è
python manage.py watch_obsidian ~/path/to/obsidian/vault --author admin
```

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ `.md` —Ñ–∞–π–ª–∞ –≤ Obsidian, –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –±–ª–æ–≥.

---

### üéØ –£–õ–£–ß–®–ï–ù–ò–ï 4: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –≤ –∞–¥–º–∏–Ω–∫–µ

#### 4.1. –°–æ–∑–¥–∞–¥–∏–º –∫–∞—Å—Ç–æ–º–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–¥–º–∏–Ω–∫–∏

python

```
# uch/apps/blog/admin.py - –î–û–ë–ê–í–ò–ú –ö –°–£–©–ï–°–¢–í–£–Æ–©–ï–ú–£ –ö–û–î–£:
from django.contrib import admin
from django.urls import path
from django.shortcuts import render, redirect
from django.contrib import messages
from django.core.management import call_command
from io import StringIO
import sys

class ObsidianImportAdmin(admin.ModelAdmin):
    """–ê–¥–º–∏–Ω–∫–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ Obsidian"""
    
    def get_urls(self):
        urls = super().get_urls()
        custom_urls = [
            path(
                'obsidian-import/',
                self.admin_site.admin_view(self.obsidian_import_view),
                name='blog_obsidian_import',
            ),
        ]
        return custom_urls + urls
    
    def obsidian_import_view(self, request):
        if request.method == 'POST':
            vault_path = request.POST.get('vault_path', '').strip()
            author = request.POST.get('author', 'admin').strip()
            update_existing = 'update_existing' in request.POST
            
            if not vault_path:
                messages.error(request, '–£–∫–∞–∂–∏—Ç–µ –ø—É—Ç—å –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É Obsidian')
            else:
                try:
                    # –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã
                    out = StringIO()
                    err_out = StringIO()
                    sys.stdout = out
                    sys.stderr = err_out
                    
                    call_command(
                        'import_obsidian',
                        vault_path,
                        '--author', author,
                        '--update-existing' if update_existing else '',
                    )
                    
                    # –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã–≤–æ–¥
                    sys.stdout = sys.__stdout__
                    sys.stderr = sys.__stderr__
                    
                    output = out.getvalue()
                    error_output = err_out.getvalue()
                    
                    messages.success(request, '–ò–º–ø–æ—Ä—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!')
                    return render(request, 'admin/obsidian_import_result.html', {
                        'output': output,
                        'error_output': error_output,
                        'vault_path': vault_path,
                    })
                    
                except Exception as e:
                    messages.error(request, f'–û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞: {str(e)}')
        
        return render(request, 'admin/obsidian_import_form.html')

# –†–ï–ì–ò–°–¢–†–ò–†–£–ï–ú –ù–û–í–£–Æ –ê–î–ú–ò–ù–ö–£
@admin.register(Article)
class ArticleAdmin(MarkdownxModelAdmin, ObsidianImportAdmin):  # –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
    # ... –≤–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ...
    change_list_template = 'admin/blog/article/change_list.html'  # –î–ª—è –∫–Ω–æ–ø–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
```

#### 4.2. –°–æ–∑–¥–∞–¥–∏–º —à–∞–±–ª–æ–Ω—ã –¥–ª—è –∞–¥–º–∏–Ω–∫–∏

bash

```
mkdir -p uch/apps/blog/templates/admin/blog/article/
```

html

```
<!-- uch/apps/blog/templates/admin/blog/article/change_list.html -->
{% extends "admin/change_list.html" %}

{% block object-tools %}
    <div class="object-tools">
        <a href="{% url 'admin:blog_obsidian_import' %}" class="btn btn-high btn-success">
            <i class="icon-plus-sign icon-white"></i> –ò–º–ø–æ—Ä—Ç –∏–∑ Obsidian
        </a>
        {{ block.super }}
    </div>
{% endblock %}
```

html

```
<!-- uch/apps/blog/templates/admin/obsidian_import_form.html -->
{% extends "admin/base_site.html" %}

{% block content %}
<div class="module">
    <h2>–ò–º–ø–æ—Ä—Ç —Å—Ç–∞—Ç–µ–π –∏–∑ Obsidian</h2>
    
    <form method="post">
        {% csrf_token %}
        
        <div class="form-row">
            <label for="vault_path">–ü—É—Ç—å –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É Obsidian:</label>
            <input type="text" name="vault_path" id="vault_path" 
                   style="width: 80%;"
                   placeholder="/Users/username/Obsidian Vault"
                   required>
        </div>
        
        <div class="form-row">
            <label for="author">–ê–≤—Ç–æ—Ä (username Django):</label>
            <input type="text" name="author" id="author" 
                   value="admin" style="width: 200px;">
        </div>
        
        <div class="form-row">
            <label>
                <input type="checkbox" name="update_existing" checked>
                –û–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏
            </label>
        </div>
        
        <div class="submit-row">
            <input type="submit" value="–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç" class="default">
        </div>
    </form>
    
    <div class="help">
        <h3>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h3>
        <ul>
            <li>–£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –≤–∞—à–µ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Obsidian</li>
            <li>–§–∞–π–ª—ã .md –±—É–¥—É—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ —Å—Ç–∞—Ç—å–∏ –±–ª–æ–≥–∞</li>
            <li>Front matter (–∑–∞–≥–æ–ª–æ–≤–æ–∫, —Ç–µ–≥–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏—è) –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–ª–µ–π</li>
            <li>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ![[image.png]] –±—É–¥—É—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ –º–µ–¥–∏–∞-–ø–∞–ø–∫—É</li>
            <li>–°—Å—ã–ª–∫–∏ [[other-note]] –±—É–¥—É—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –≤ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ç—å–∏</li>
        </ul>
    </div>
</div>
{% endblock %}
```

html

```
<!-- uch/apps/blog/templates/admin/obsidian_import_result.html -->
{% extends "admin/base_site.html" %}

{% block content %}
<div class="module">
    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ Obsidian</h2>
    
    <div class="form-row">
        <strong>–ü—É—Ç—å –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É:</strong> {{ vault_path }}
    </div>
    
    {% if output %}
    <div class="form-row">
        <h3>–í—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã:</h3>
        <pre style="background: #f8f9fa; padding: 10px; border-radius: 5px; max-height: 400px; overflow: auto;">{{ output }}</pre>
    </div>
    {% endif %}
    
    {% if error_output %}
    <div class="form-row">
        <h3>–û—à–∏–±–∫–∏:</h3>
        <pre style="background: #fee; padding: 10px; border-radius: 5px; color: #c00;">{{ error_output }}</pre>
    </div>
    {% endif %}
    
    <div class="submit-row">
        <a href="{% url 'admin:blog_article_changelist' %}" class="button">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É —Å—Ç–∞—Ç–µ–π</a>
        <a href="{% url 'admin:blog_obsidian_import' %}" class="button">–ù–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç</a>
    </div>
</div>
{% endblock %}
```

---

### ‚úÖ –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø –£–õ–£–ß–®–ï–ù–ò–ô:

**–£–ª—É—á—à–µ–Ω–∏–µ 1 - –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:**

- –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É —Å `![[image.png]]`
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ `media/blog/images/`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –≤ —Å—Ç–∞—Ç—å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–£–ª—É—á—à–µ–Ω–∏–µ 2 - –°—Å—ã–ª–∫–∏:**

- –°–æ–∑–¥–∞—Ç—å –¥–≤–µ –∑–∞–º–µ—Ç–∫–∏ —Å —Å—Å—ã–ª–∫–æ–π `[[other-note]]`
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∞ –≤ HTML-—Å—Å—ã–ª–∫—É –Ω–∞ —Å—Ç–∞—Ç—å—é

**–£–ª—É—á—à–µ–Ω–∏–µ 3 - –ê–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**

- –ó–∞–ø—É—Å—Ç–∏—Ç—å `python manage.py watch_obsidian`
- –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª –≤ Obsidian
- –£–≤–∏–¥–µ—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏

**–£–ª—É—á—à–µ–Ω–∏–µ 4 - –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**

- –ü–µ—Ä–µ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É ‚Üí –°—Ç–∞—Ç—å–∏
- –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ò–º–ø–æ—Ä—Ç –∏–∑ Obsidian"
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç
- –£–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ

---

### üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò –ü–û–°–õ–ï –£–õ–£–ß–®–ï–ù–ò–ô:

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á** (Celery) –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Git** \- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π pull –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º
3. **–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** –æ–± —É—Å–ø–µ—à–Ω–æ–º/–Ω–µ—É—Å–ø–µ—à–Ω–æ–º –∏–º–ø–æ—Ä—Ç–µ
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏–º–ø–æ—Ä—Ç–∞
5. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ front matter** (YAML, TOML, JSON)

---

**–ù–∞—á–Ω–∏—Ç–µ —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –£–ª—É—á—à–µ–Ω–∏—è 1 (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è).** –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–º–ø–æ—Ä—Ç. –°–æ–æ–±—â–∏—Ç–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö!

1.1 —Å–º–æ—Ç—Ä–∏–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ –¥–∞–ª—å—à–µ –Ω–µ –∏–¥–µ–º: –Ω–µ –º–æ–≥—É –ø–æ–Ω—è—Ç—å –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥: import os import glob from pathlib import Path from django.core.management.base import BaseCommand, CommandError from django.contrib.auth.models import User from django.utils.text import slugify from django.utils import timezone from datetime import datetime import frontmatter from taggit.models import Tag from uch.apps.blog.models import Article, Category import shutil import re from django.core.files import File from django.conf import settings class Command(BaseCommand): help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥' def add\_arguments(self, parser): parser.add\_argument( 'obsidian\_path', type=str, help='–ü—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Obsidian' ) parser.add\_argument( '--author', type=str, default='admin', help='–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Django, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∞–≤—Ç–æ—Ä–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin)' ) parser.add\_argument( '--default-category', type=str, default='Imported', help='–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "Imported")' ) parser.add\_argument( '--dry-run', action='store\_true', help='–ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ, –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î' ) parser.add\_argument( '--update-existing', action='store\_true', help='–û–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏ (–ø–æ —Å–ª–∞–≥—É)' ) def handle(self, \*args, \*\*options): obsidian\_path = Path(options\['obsidian\_path'\]) author\_username = options\['author'\] default\_category\_name = options\['default\_category'\] dry\_run = options\['dry\_run'\] update\_existing = options\['update\_existing'\] # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ if not obsidian\_path.exists() or not obsidian\_path.is\_dir(): raise CommandError(f'–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è "{obsidian\_path}" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π') # –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞ try: author = User.objects.get(username=author\_username) except User.DoesNotExist: raise CommandError(f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∏–º–µ–Ω–µ–º "{author\_username}" –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.') # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é default\_category, created = Category.objects.get\_or\_create( name=default\_category\_name, defaults={'slug': slugify(default\_category\_name)} ) if created: self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "{default\_category\_name}"')) # –ü–æ–∏—Å–∫ –≤—Å–µ—Ö.md —Ñ–∞–π–ª–æ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ md\_files = list(obsidian\_path.rglob('\*.md')) self.stdout.write(f'–ù–∞–π–¥–µ–Ω–æ {len(md\_files)}.md —Ñ–∞–π–ª–æ–≤ –≤ "{obsidian\_path}".') imported\_count = 0 updated\_count = 0 skipped\_count = 0 for md\_file in md\_files: try: with open(md\_file, 'r', encoding='utf-8') as f: post = frontmatter.load(f) # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ front matter metadata = post.metadata content = post.content # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ title = metadata.get('title', md\_file.stem) # –°–æ–∑–¥–∞–Ω–∏–µ slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ slug\_source = metadata.get('slug', title) slug = slugify(slug\_source) if not slug: # –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π –ø–æ—Å–ª–µ slugify slug = slugify(md\_file.stem) # –°—Ç–∞—Ç—É—Å status = 'draft' if metadata.get('published') in \[True, 'true', 'True', 'yes'\]: status = 'published' elif metadata.get('status'): status = metadata.get('status') # –ö–∞—Ç–µ–≥–æ—Ä–∏—è category\_name = metadata.get('category', metadata.get('categories')) if category\_name: if isinstance(category\_name, list): category\_name = category\_name\[0\] # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é category, \_ = Category.objects.get\_or\_create( name=category\_name, defaults={'slug': slugify(category\_name)} ) else: category = default\_category # –¢–µ–≥–∏ tags = \[\] if 'tags' in metadata: tags\_meta = metadata\['tags'\] if isinstance(tags\_meta, str): tags = \[t.strip() for t in tags\_meta.split(',')\] elif isinstance(tags\_meta, list): tags = \[str(t).strip() for t in tags\_meta\] # –¢–∞–∫–∂–µ –∏—â–µ–º —Ç–µ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Obsidian #—Ç–µ–≥ –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ import re content\_tags = re.findall(r'#(\[a-zA-Z–∞-—è–ê-–Ø0-9\_-\]+)', content) tags.extend(content\_tags) tags = list(set(tags)) # –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã # –î–∞—Ç–∞ published\_at = timezone.now() if 'date' in metadata: date\_value = metadata\['date'\] try: if isinstance(date\_value, str): # –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞—Ç for fmt in ('%Y-%m-%d', '%Y-%m-%d %H:%M:%S', '%d.%m.%Y', '%Y/%m/%d'): try: published\_at = datetime.strptime(date\_value, fmt) break except ValueError: continue published\_at = timezone.make\_aware(published\_at) else: published\_at = date\_value except Exception as e: self.stdout.write(self.style.WARNING(f'–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É "{date\_value}" –¥–ª—è —Ñ–∞–π–ª–∞ {md\_file}: {e}')) # –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Å—Ç–∞—Ç—å—è —Å —Ç–∞–∫–∏–º slug? existing\_article = Article.objects.filter(slug=slug).first() if existing\_article and not update\_existing: self.stdout.write(f'\[–ü–†–û–ü–£–©–ï–ù–û\] –°—Ç–∞—Ç—å—è —Å slug "{slug}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.') skipped\_count += 1 continue # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏ article\_data = { 'title': title, 'content': content, # MarkdownxField –ø—Ä–∏–º–µ—Ç Markdown 'slug': slug, 'status': status, 'category': category, 'author': author, 'published\_at': published\_at, } if dry\_run: self.stdout.write(f'\[DRY RUN\] {"–û–±–Ω–æ–≤–∏—Ç—å" if existing\_article else "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"}: "{title}"') self.stdout.write(f' –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category.name}, –¢–µ–≥–∏: {tags}, –°—Ç–∞—Ç—É—Å: {status}') imported\_count += 1 continue # –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ if existing\_article and update\_existing: for key, value in article\_data.items(): setattr(existing\_article, key, value) existing\_article.save() article = existing\_article updated\_count += 1 action = '–û–ë–ù–û–í–õ–ï–ù–ò–ï' else: article = Article.objects.create(\*\*article\_data) imported\_count += 1 action = '–ò–ú–ü–û–†–¢' # –û—á–∏—Å—Ç–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ article.tags.clear() for tag\_name in tags: if tag\_name: # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Ç–µ–≥–∏ article.tags.add(tag\_name) self.stdout.write(f'\[{action}\] {"–û–±–Ω–æ–≤–ª–µ–Ω–∞" if action == "–û–ë–ù–û–í–õ–ï–ù–ò–ï" else "–°–æ–∑–¥–∞–Ω–∞"}: "{title}" (slug: {slug})') except UnicodeDecodeError: self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤ —Ñ–∞–π–ª–µ {md\_file}. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.')) skipped\_count += 1 except Exception as e: self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ {md\_file}: {e}')) skipped\_count += 1 # –ò—Ç–æ–≥–∏ self.stdout.write('\\n' + '='\*50) if dry\_run: self.stdout.write(self.style.WARNING(f'DRY RUN –ó–ê–í–ï–†–®–ï–ù. –ë—ã–ª–æ –±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported\_count}')) else: self.stdout.write(self.style.SUCCESS( f'–ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported\_count}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated\_count}, –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped\_count}' ))

–û—Ç–ª–∏—á–Ω–æ, —É –≤–∞—Å –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥ –∫–æ–º–∞–Ω–¥—ã –∏–º–ø–æ—Ä—Ç–∞. –¢–µ–ø–µ—Ä—å **–¥–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**. –í–æ—Ç –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥:

---

### üìù –î–û–ë–ê–í–õ–Ø–ï–ú –ú–ï–¢–û–î –î–õ–Ø –û–ë–†–ê–ë–û–¢–ö–ò –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ **–≤–Ω—É—Ç—Ä—å –∫–ª–∞—Å—Å–∞ `Command`**, –ø–µ—Ä–µ–¥ –º–µ—Ç–æ–¥–æ–º `handle`:

python

```
class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'
    
    # ========== –ù–û–í–´–ô –ú–ï–¢–û–î ==========
    def _process_images(self, content, md_file, article_title, slug):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
        1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
        2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
        3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
        """
        # –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Obsidian: ![[image.png]] –∏–ª–∏ ![[image.png|–ø–æ–¥–ø–∏—Å—å]]
        pattern = r'!\[\[([^\|\]]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg))(?:\|([^\]]+))?\]\]'
        
        def replace_image(match):
            image_filename = match.group(1).strip()
            caption = match.group(2) or image_filename.split('.')[0]  # –ü–æ–¥–ø–∏—Å—å –∏–ª–∏ –∏–º—è —Ñ–∞–π–ª–∞
            
            # –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –≤ Obsidian
            image_path = md_file.parent / image_filename
            
            if image_path.exists() and image_path.is_file():
                try:
                    # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
                    import hashlib
                    file_hash = hashlib.md5(str(image_path).encode()).hexdigest()[:8]
                    unique_name = f"{slug}_{file_hash}_{image_path.name}"
                    media_path = settings.MEDIA_ROOT / 'blog' / 'images' / unique_name
                    
                    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                    media_path.parent.mkdir(parents=True, exist_ok=True)
                    
                    # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª
                    shutil.copy2(image_path, media_path)
                    
                    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown
                    media_url = f"/media/blog/images/{unique_name}"
                    return f'![{caption}]({media_url})'
                
                except Exception as e:
                    self.stdout.write(self.style.WARNING(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è {image_filename}: {e}'))
                    return f'![{caption}](–û–®–ò–ë–ö–ê: {image_filename})'
            
            # –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
            self.stdout.write(self.style.WARNING(f'–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_path}'))
            return f'![{caption}](–ù–ï –ù–ê–ô–î–ï–ù–û: {image_filename})'
        
        # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        processed_content = re.sub(pattern, replace_image, content)
        return processed_content
    # ========== –ö–û–ù–ï–¶ –ù–û–í–û–ì–û –ú–ï–¢–û–î–ê ==========
    
    def add_arguments(self, parser):
        # ... –≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
```

---

### üìù –û–ë–ù–û–í–õ–Ø–ï–ú –ú–ï–¢–û–î handle –î–õ–Ø –û–ë–†–ê–ë–û–¢–ö–ò –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô

–ù–∞–π–¥–∏—Ç–µ –≤ –º–µ—Ç–æ–¥–µ `handle` —É—á–∞—Å—Ç–æ–∫ –≥–¥–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è `article_data` –∏ –¥–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

python

```
# –í –º–µ—Ç–æ–¥–µ handle, –ù–ê–ô–î–ò–¢–ï –≠–¢–û–¢ –£–ß–ê–°–¢–û–ö (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 120-130):
# –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏
article_data = {
    'title': title,
    'content': content,  # MarkdownxField –ø—Ä–∏–º–µ—Ç Markdown
    'slug': slug,
    'status': status,
    'category': category,
    'author': author,
    'published_at': published_at,
}

# –ò –ó–ê–ú–ï–ù–ò–¢–ï –ï–ì–û –ù–ê:
# –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏
if not dry_run:
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
    processed_content = self._process_images(content, md_file, title, slug)
else:
    processed_content = content

article_data = {
    'title': title,
    'content': processed_content,  # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
    'slug': slug,
    'status': status,
    'category': category,
    'author': author,
    'published_at': published_at,
}
```

---

### üìù –ü–û–õ–ù–´–ô –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ô –§–ê–ô–õ

–í–æ—Ç –∫–∞–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å **–ø–æ–ª–Ω—ã–π —Ñ–∞–π–ª** —Å –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º –º–µ—Ç–æ–¥–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

python

```
import os
import glob
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.utils.text import slugify
from django.utils import timezone
from datetime import datetime
import frontmatter
from taggit.models import Tag

from uch.apps.blog.models import Article, Category

import shutil
import re
import hashlib
from django.conf import settings

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'
    
    def _process_images(self, content, md_file, article_title, slug):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
        1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
        2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
        3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
        """
        # –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Obsidian: ![[image.png]] –∏–ª–∏ ![[image.png|–ø–æ–¥–ø–∏—Å—å]]
        pattern = r'!\[\[([^\|\]]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg))(?:\|([^\]]+))?\]\]'
        
        def replace_image(match):
            image_filename = match.group(1).strip()
            caption = match.group(2) or image_filename.split('.')[0]  # –ü–æ–¥–ø–∏—Å—å –∏–ª–∏ –∏–º—è —Ñ–∞–π–ª–∞
            
            # –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –≤ Obsidian
            image_path = md_file.parent / image_filename
            
            if image_path.exists() and image_path.is_file():
                try:
                    # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
                    file_hash = hashlib.md5(str(image_path).encode()).hexdigest()[:8]
                    unique_name = f"{slug}_{file_hash}_{image_path.name}"
                    media_path = settings.MEDIA_ROOT / 'blog' / 'images' / unique_name
                    
                    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                    media_path.parent.mkdir(parents=True, exist_ok=True)
                    
                    # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª
                    shutil.copy2(image_path, media_path)
                    
                    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown
                    media_url = f"/media/blog/images/{unique_name}"
                    return f'![{caption}]({media_url})'
                
                except Exception as e:
                    self.stdout.write(self.style.WARNING(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è {image_filename}: {e}'))
                    return f'![{caption}](–û–®–ò–ë–ö–ê: {image_filename})'
            
            # –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
            self.stdout.write(self.style.WARNING(f'–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_path}'))
            return f'![{caption}](–ù–ï –ù–ê–ô–î–ï–ù–û: {image_filename})'
        
        # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        processed_content = re.sub(pattern, replace_image, content)
        return processed_content
    
    def add_arguments(self, parser):
        parser.add_argument(
            'obsidian_path',
            type=str,
            help='–ü—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Obsidian'
        )
        parser.add_argument(
            '--author',
            type=str,
            default='admin',
            help='–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Django, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∞–≤—Ç–æ—Ä–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin)'
        )
        parser.add_argument(
            '--default-category',
            type=str,
            default='Imported',
            help='–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "Imported")'
        )
        parser.add_argument(
            '--dry-run',
            action='store_true',
            help='–ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ, –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î'
        )
        parser.add_argument(
            '--update-existing',
            action='store_true',
            help='–û–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏ (–ø–æ —Å–ª–∞–≥—É)'
        )

    def handle(self, *args, **options):
        obsidian_path = Path(options['obsidian_path'])
        author_username = options['author']
        default_category_name = options['default_category']
        dry_run = options['dry_run']
        update_existing = options['update_existing']

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        if not obsidian_path.exists() or not obsidian_path.is_dir():
            raise CommandError(f'–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è "{obsidian_path}" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
        try:
            author = User.objects.get(username=author_username)
        except User.DoesNotExist:
            raise CommandError(f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∏–º–µ–Ω–µ–º "{author_username}" –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        default_category, created = Category.objects.get_or_create(
            name=default_category_name,
            defaults={'slug': slugify(default_category_name)}
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "{default_category_name}"'))

        # –ü–æ–∏—Å–∫ –≤—Å–µ—Ö .md —Ñ–∞–π–ª–æ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
        md_files = list(obsidian_path.rglob('*.md'))
        self.stdout.write(f'–ù–∞–π–¥–µ–Ω–æ {len(md_files)} .md —Ñ–∞–π–ª–æ–≤ –≤ "{obsidian_path}".')

        imported_count = 0
        updated_count = 0
        skipped_count = 0

        for md_file in md_files:
            try:
                with open(md_file, 'r', encoding='utf-8') as f:
                    post = frontmatter.load(f)

                # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ front matter
                metadata = post.metadata
                content = post.content

                # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
                title = metadata.get('title', md_file.stem)
                
                # –°–æ–∑–¥–∞–Ω–∏–µ slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
                slug_source = metadata.get('slug', title)
                slug = slugify(slug_source)
                
                if not slug:  # –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π –ø–æ—Å–ª–µ slugify
                    slug = slugify(md_file.stem)

                # –°—Ç–∞—Ç—É—Å
                status = 'draft'
                if metadata.get('published') in [True, 'true', 'True', 'yes']:
                    status = 'published'
                elif metadata.get('status'):
                    status = metadata.get('status')

                # –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                category_name = metadata.get('category', metadata.get('categories'))
                if category_name:
                    if isinstance(category_name, list):
                        category_name = category_name[0]  # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                    category, _ = Category.objects.get_or_create(
                        name=category_name,
                        defaults={'slug': slugify(category_name)}
                    )
                else:
                    category = default_category

                # –¢–µ–≥–∏
                tags = []
                if 'tags' in metadata:
                    tags_meta = metadata['tags']
                    if isinstance(tags_meta, str):
                        tags = [t.strip() for t in tags_meta.split(',')]
                    elif isinstance(tags_meta, list):
                        tags = [str(t).strip() for t in tags_meta]
                
                # –¢–∞–∫–∂–µ –∏—â–µ–º —Ç–µ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Obsidian #—Ç–µ–≥ –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ
                content_tags = re.findall(r'#([a-zA-Z–∞-—è–ê-–Ø0-9_-]+)', content)
                tags.extend(content_tags)
                tags = list(set(tags))  # –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã

                # –î–∞—Ç–∞
                published_at = timezone.now()
                if 'date' in metadata:
                    date_value = metadata['date']
                    try:
                        if isinstance(date_value, str):
                            # –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞—Ç
                            for fmt in ('%Y-%m-%d', '%Y-%m-%d %H:%M:%S', '%d.%m.%Y', '%Y/%m/%d'):
                                try:
                                    published_at = datetime.strptime(date_value, fmt)
                                    break
                                except ValueError:
                                    continue
                            published_at = timezone.make_aware(published_at)
                        else:
                            published_at = date_value
                    except Exception as e:
                        self.stdout.write(self.style.WARNING(f'–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É "{date_value}" –¥–ª—è —Ñ–∞–π–ª–∞ {md_file}: {e}'))

                # –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Å—Ç–∞—Ç—å—è —Å —Ç–∞–∫–∏–º slug?
                existing_article = Article.objects.filter(slug=slug).first()
                
                if existing_article and not update_existing:
                    self.stdout.write(f'[–ü–†–û–ü–£–©–ï–ù–û] –°—Ç–∞—Ç—å—è —Å slug "{slug}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.')
                    skipped_count += 1
                    continue

                # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏
                if not dry_run:
                    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
                    processed_content = self._process_images(content, md_file, title, slug)
                else:
                    processed_content = content

                article_data = {
                    'title': title,
                    'content': processed_content,  # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
                    'slug': slug,
                    'status': status,
                    'category': category,
                    'author': author,
                    'published_at': published_at,
                }

                if dry_run:
                    self.stdout.write(f'[DRY RUN] {"–û–±–Ω–æ–≤–∏—Ç—å" if existing_article else "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"}: "{title}"')
                    self.stdout.write(f'        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category.name}, –¢–µ–≥–∏: {tags}, –°—Ç–∞—Ç—É—Å: {status}')
                    imported_count += 1
                    continue

                # –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
                if existing_article and update_existing:
                    for key, value in article_data.items():
                        setattr(existing_article, key, value)
                    existing_article.save()
                    article = existing_article
                    updated_count += 1
                    action = '–û–ë–ù–û–í–õ–ï–ù–ò–ï'
                else:
                    article = Article.objects.create(**article_data)
                    imported_count += 1
                    action = '–ò–ú–ü–û–†–¢'

                # –û—á–∏—Å—Ç–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∏
                article.tags.clear()
                for tag_name in tags:
                    if tag_name:  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Ç–µ–≥–∏
                        article.tags.add(tag_name)

                self.stdout.write(f'[{action}] {"–û–±–Ω–æ–≤–ª–µ–Ω–∞" if action == "–û–ë–ù–û–í–õ–ï–ù–ò–ï" else "–°–æ–∑–¥–∞–Ω–∞"}: "{title}" (slug: {slug})')

            except UnicodeDecodeError:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤ —Ñ–∞–π–ª–µ {md_file}. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.'))
                skipped_count += 1
            except Exception as e:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ {md_file}: {e}'))
                skipped_count += 1

        # –ò—Ç–æ–≥–∏
        self.stdout.write('\n' + '='*50)
        if dry_run:
            self.stdout.write(self.style.WARNING(f'DRY RUN –ó–ê–í–ï–†–®–ï–ù. –ë—ã–ª–æ –±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}'))
        else:
            self.stdout.write(self.style.SUCCESS(
                f'–ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}, –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped_count}'
            ))
```

---

### ‚úÖ –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º:**
	markdown
	```
	---
	title: "–¢–µ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º"
	published: true
	---
	# –¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
	–í–æ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑ Obsidian:
	![[test-image.png]]
	–ò–ª–∏ —Å –ø–æ–¥–ø–∏—Å—å—é:
	![[test-image.png|–ú–æ—è –ø–æ–¥–ø–∏—Å—å]]
	```
2. **–ü–æ–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª `test-image.png` –≤ —Ç—É –∂–µ –ø–∞–ø–∫—É, —á—Ç–æ –∏.md —Ñ–∞–π–ª**
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–º–ø–æ—Ä—Ç:**
	bash
	```
	python manage.py import_obsidian /–ø—É—Ç—å/–∫/–ø–∞–ø–∫–µ --author admin --update-existing
	```
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
	- –í –∫–æ–Ω—Å–æ–ª–∏ –µ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ–±—Ä–∞–±–æ—Ç–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
	- –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ `uch-backend/media/blog/images/`
	- –í —Å—Ç–∞—Ç—å–µ —Å—Å—ã–ª–∫–∞ –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ `/media/blog/images/...`
	- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ

---

**–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç–µ –º–µ—Ç–æ–¥ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ, —Å–æ–æ–±—â–∏—Ç–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.** –ï—Å–ª–∏ –±—É–¥—É—Ç –æ—à–∏–±–∫–∏ - –ø—Ä–∏—à–ª–∏—Ç–µ –ø–æ–ª–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

3 –∑–∞–ø—É—Å–∫ –∏–º–ø–æ—Ä—Ç–∞. —Å–º–æ—Ç—Ä–∏–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py import\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" % (app\_name, name)) File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/importlib/\_\_init\_\_.py", line 127, in import\_module return \_bootstrap.\_gcd\_import(name\[level:\], package, level) File "<frozen importlib.\_bootstrap>", line 1014, in \_gcd\_import File "<frozen importlib.\_bootstrap>", line 991, in \_find\_and\_load File "<frozen importlib.\_bootstrap>", line 975, in \_find\_and\_load\_unlocked File "<frozen importlib.\_bootstrap>", line 671, in \_load\_unlocked File "<frozen importlib.\_bootstrap\_external>", line 779, in exec\_module File "<frozen importlib.\_bootstrap\_external>", line 916, in get\_code File "<frozen importlib.\_bootstrap\_external>", line 846, in source\_to\_code File "<frozen importlib.\_bootstrap>", line 219, in \_call\_with\_frames\_removed File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/import\_obsidian.py", line 218 processed\_content = self.\_process\_images(content, md\_file, title, slug) ^ TabError: inconsistent use of tabs and spaces in indentation

–û—à–∏–±–∫–∞ **TabError** –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ —Ñ–∞–π–ª–µ Python —Å–º–µ—à–∞–Ω—ã —Ç–∞–±—ã –∏ –ø—Ä–æ–±–µ–ª—ã –¥–ª—è –æ—Ç—Å—Ç—É–ø–æ–≤. –≠—Ç–æ —á–∞—Å—Ç–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

---

## üõ† –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

bash

```
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ autopep8 –µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç
pip install autopep8

# –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—Ç—Å—Ç—É–ø—ã –≤ —Ñ–∞–π–ª–µ
autopep8 --in-place --aggressive --aggressive uch/apps/blog/management/commands/import_obsidian.py
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –æ—Ç—Å—Ç—É–ø–æ–≤:**
	bash
	```
	nano uch/apps/blog/management/commands/import_obsidian.py
	```
2. **–ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 218 –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—Ç—É–ø—ã –≤–æ–∫—Ä—É–≥ –Ω–µ–µ.**

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏:

bash

```
# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª
cat > uch/apps/blog/management/commands/import_obsidian_fixed.py << 'EOF'
import os
import glob
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.utils.text import slugify
from django.utils import timezone
from datetime import datetime
import frontmatter
from taggit.models import Tag

from uch.apps.blog.models import Article, Category

import shutil
import re
import hashlib
from django.conf import settings

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'
    
    def _process_images(self, content, md_file, article_title, slug):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
        1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
        2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
        3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
        """
        # –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Obsidian: ![[image.png]] –∏–ª–∏ ![[image.png|–ø–æ–¥–ø–∏—Å—å]]
        pattern = r'!\[\[([^\|\]]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg))(?:\|([^\]]+))?\]\]'
        
        def replace_image(match):
            image_filename = match.group(1).strip()
            caption = match.group(2) or image_filename.split('.')[0]  # –ü–æ–¥–ø–∏—Å—å –∏–ª–∏ –∏–º—è —Ñ–∞–π–ª–∞
            
            # –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –≤ Obsidian
            image_path = md_file.parent / image_filename
            
            if image_path.exists() and image_path.is_file():
                try:
                    # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
                    file_hash = hashlib.md5(str(image_path).encode()).hexdigest()[:8]
                    unique_name = f"{slug}_{file_hash}_{image_path.name}"
                    media_path = settings.MEDIA_ROOT / 'blog' / 'images' / unique_name
                    
                    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                    media_path.parent.mkdir(parents=True, exist_ok=True)
                    
                    # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª
                    shutil.copy2(image_path, media_path)
                    
                    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown
                    media_url = f"/media/blog/images/{unique_name}"
                    return f'![{caption}]({media_url})'
                
                except Exception as e:
                    self.stdout.write(self.style.WARNING(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è {image_filename}: {e}'))
                    return f'![{caption}](–û–®–ò–ë–ö–ê: {image_filename})'
            
            # –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
            self.stdout.write(self.style.WARNING(f'–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_path}'))
            return f'![{caption}](–ù–ï –ù–ê–ô–î–ï–ù–û: {image_filename})'
        
        # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        processed_content = re.sub(pattern, replace_image, content)
        return processed_content
    
    def add_arguments(self, parser):
        parser.add_argument(
            'obsidian_path',
            type=str,
            help='–ü—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Obsidian'
        )
        parser.add_argument(
            '--author',
            type=str,
            default='admin',
            help='–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Django, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∞–≤—Ç–æ—Ä–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin)'
        )
        parser.add_argument(
            '--default-category',
            type=str,
            default='Imported',
            help='–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "Imported")'
        )
        parser.add_argument(
            '--dry-run',
            action='store_true',
            help='–ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ, –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î'
        )
        parser.add_argument(
            '--update-existing',
            action='store_true',
            help='–û–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏ (–ø–æ —Å–ª–∞–≥—É)'
        )

    def handle(self, *args, **options):
        obsidian_path = Path(options['obsidian_path'])
        author_username = options['author']
        default_category_name = options['default_category']
        dry_run = options['dry_run']
        update_existing = options['update_existing']

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        if not obsidian_path.exists() or not obsidian_path.is_dir():
            raise CommandError(f'–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è "{obsidian_path}" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
        try:
            author = User.objects.get(username=author_username)
        except User.DoesNotExist:
            raise CommandError(f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∏–º–µ–Ω–µ–º "{author_username}" –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        default_category, created = Category.objects.get_or_create(
            name=default_category_name,
            defaults={'slug': slugify(default_category_name)}
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "{default_category_name}"'))

        # –ü–æ–∏—Å–∫ –≤—Å–µ—Ö .md —Ñ–∞–π–ª–æ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
        md_files = list(obsidian_path.rglob('*.md'))
        self.stdout.write(f'–ù–∞–π–¥–µ–Ω–æ {len(md_files)} .md —Ñ–∞–π–ª–æ–≤ –≤ "{obsidian_path}".')

        imported_count = 0
        updated_count = 0
        skipped_count = 0

        for md_file in md_files:
            try:
                with open(md_file, 'r', encoding='utf-8') as f:
                    post = frontmatter.load(f)

                # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ front matter
                metadata = post.metadata
                content = post.content

                # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
                title = metadata.get('title', md_file.stem)
                
                # –°–æ–∑–¥–∞–Ω–∏–µ slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
                slug_source = metadata.get('slug', title)
                slug = slugify(slug_source)
                
                if not slug:  # –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π –ø–æ—Å–ª–µ slugify
                    slug = slugify(md_file.stem)

                # –°—Ç–∞—Ç—É—Å
                status = 'draft'
                if metadata.get('published') in [True, 'true', 'True', 'yes']:
                    status = 'published'
                elif metadata.get('status'):
                    status = metadata.get('status')

                # –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                category_name = metadata.get('category', metadata.get('categories'))
                if category_name:
                    if isinstance(category_name, list):
                        category_name = category_name[0]  # –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                    category, _ = Category.objects.get_or_create(
                        name=category_name,
                        defaults={'slug': slugify(category_name)}
                    )
                else:
                    category = default_category

                # –¢–µ–≥–∏
                tags = []
                if 'tags' in metadata:
                    tags_meta = metadata['tags']
                    if isinstance(tags_meta, str):
                        tags = [t.strip() for t in tags_meta.split(',')]
                    elif isinstance(tags_meta, list):
                        tags = [str(t).strip() for t in tags_meta]
                
                # –¢–∞–∫–∂–µ –∏—â–µ–º —Ç–µ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Obsidian #—Ç–µ–≥ –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ
                content_tags = re.findall(r'#([a-zA-Z–∞-—è–ê-–Ø0-9_-]+)', content)
                tags.extend(content_tags)
                tags = list(set(tags))  # –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã

                # –î–∞—Ç–∞
                published_at = timezone.now()
                if 'date' in metadata:
                    date_value = metadata['date']
                    try:
                        if isinstance(date_value, str):
                            # –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞—Ç
                            for fmt in ('%Y-%m-%d', '%Y-%m-%d %H:%M:%S', '%d.%m.%Y', '%Y/%m/%d'):
                                try:
                                    published_at = datetime.strptime(date_value, fmt)
                                    break
                                except ValueError:
                                    continue
                            published_at = timezone.make_aware(published_at)
                        else:
                            published_at = date_value
                    except Exception as e:
                        self.stdout.write(self.style.WARNING(f'–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É "{date_value}" –¥–ª—è —Ñ–∞–π–ª–∞ {md_file}: {e}'))

                # –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Å—Ç–∞—Ç—å—è —Å —Ç–∞–∫–∏–º slug?
                existing_article = Article.objects.filter(slug=slug).first()
                
                if existing_article and not update_existing:
                    self.stdout.write(f'[–ü–†–û–ü–£–©–ï–ù–û] –°—Ç–∞—Ç—å—è —Å slug "{slug}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.')
                    skipped_count += 1
                    continue

                # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏
                if not dry_run:
                    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
                    processed_content = self._process_images(content, md_file, title, slug)
                else:
                    processed_content = content

                article_data = {
                    'title': title,
                    'content': processed_content,  # –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
                    'slug': slug,
                    'status': status,
                    'category': category,
                    'author': author,
                    'published_at': published_at,
                }

                if dry_run:
                    self.stdout.write(f'[DRY RUN] {"–û–±–Ω–æ–≤–∏—Ç—å" if existing_article else "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"}: "{title}"')
                    self.stdout.write(f'        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category.name}, –¢–µ–≥–∏: {tags}, –°—Ç–∞—Ç—É—Å: {status}')
                    imported_count += 1
                    continue

                # –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
                if existing_article and update_existing:
                    for key, value in article_data.items():
                        setattr(existing_article, key, value)
                    existing_article.save()
                    article = existing_article
                    updated_count += 1
                    action = '–û–ë–ù–û–í–õ–ï–ù–ò–ï'
                else:
                    article = Article.objects.create(**article_data)
                    imported_count += 1
                    action = '–ò–ú–ü–û–†–¢'

                # –û—á–∏—Å—Ç–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∏
                article.tags.clear()
                for tag_name in tags:
                    if tag_name:  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É—Å—Ç—ã–µ —Ç–µ–≥–∏
                        article.tags.add(tag_name)

                self.stdout.write(f'[{action}] {"–û–±–Ω–æ–≤–ª–µ–Ω–∞" if action == "–û–ë–ù–û–í–õ–ï–ù–ò–ï" else "–°–æ–∑–¥–∞–Ω–∞"}: "{title}" (slug: {slug})')

            except UnicodeDecodeError:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤ —Ñ–∞–π–ª–µ {md_file}. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.'))
                skipped_count += 1
            except Exception as e:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ {md_file}: {e}'))
                skipped_count += 1

        # –ò—Ç–æ–≥–∏
        self.stdout.write('\n' + '='*50)
        if dry_run:
            self.stdout.write(self.style.WARNING(f'DRY RUN –ó–ê–í–ï–†–®–ï–ù. –ë—ã–ª–æ –±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}'))
        else:
            self.stdout.write(self.style.SUCCESS(
                f'–ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}, –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped_count}'
            ))
EOF

# –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
mv uch/apps/blog/management/commands/import_obsidian.py uch/apps/blog/management/commands/import_obsidian_backup.py

# –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª
mv uch/apps/blog/management/commands/import_obsidian_fixed.py uch/apps/blog/management/commands/import_obsidian.py
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

bash

```
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Ñ–∞–π–ª–∞
python -m py_compile uch/apps/blog/management/commands/import_obsidian.py

# –ï—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫, –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∏–º–ø–æ—Ä—Ç
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --dry-run
```

---

## üîß –ï–°–õ–ò –û–®–ò–ë–ö–ê –ü–û–í–¢–û–†–ò–¢–°–Ø:

### –ë—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º—É:

bash

```
# –ü–æ–∫–∞–∂–µ—Ç —Å—Ç—Ä–æ–∫–∏ —Å —Ç–∞–±–∞–º–∏
grep -n $'\t' uch/apps/blog/management/commands/import_obsidian.py

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Python –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
python3 -c "
import sys
with open('uch/apps/blog/management/commands/import_obsidian.py', 'r') as f:
    for i, line in enumerate(f, 1):
        if '\t' in line:
            print(f'–°—Ç—Ä–æ–∫–∞ {i} —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∞–±—ã')
            sys.exit(1)
print('–í—Å–µ –æ—Ç—Å—Ç—É–ø—ã - –ø—Ä–æ–±–µ–ª—ã')
"
```

### –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞:

bash

```
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ reindent
pip install reindent

# –ò—Å–ø—Ä–∞–≤—å—Ç–µ –≤—Å–µ Python —Ñ–∞–π–ª—ã –≤ –ø—Ä–æ–µ–∫—Ç–µ
find . -name "*.py" -exec reindent -r {} \;
```

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–Ω–æ –∏–∑ —Ä–µ—à–µ–Ω–∏–π –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç. –°–æ–æ–±—â–∏—Ç–µ, —á—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å.**

–ò–º–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫: (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py import\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing –ù–∞–π–¥–µ–Ω–æ 6.md —Ñ–∞–π–ª–æ–≤ –≤ "/Users/kirillkravcov/obsidian/my-digital-garden-content/posts". \[–û–ë–ù–û–í–õ–ï–ù–ò–ï\] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è" (slug: ) \[–û–ë–ù–û–í–õ–ï–ù–ò–ï\] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "–¢–µ—Å—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è" (slug: unified-test) \[–û–ë–ù–û–í–õ–ï–ù–ò–ï\] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "deploy-test" (slug: deploy-test) –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/abae988de571f443aa5f1274711d96a4.jpg –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2022-02-05 –≤ 15.41.39.png \[–û–ë–ù–û–í–õ–ï–ù–ò–ï\] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "–¢–µ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º" (slug: ) \[–û–ë–ù–û–í–õ–ï–ù–ò–ï\] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç" (slug: ) \[–û–ë–ù–û–í–õ–ï–ù–ò–ï\] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è" (slug: test-fix) ================================================== –ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: 0, –û–±–Ω–æ–≤–ª–µ–Ω–æ: 6, –ü—Ä–æ–ø—É—â–µ–Ω–æ: 0 –í –∫–æ–Ω—Å–æ–ª–∏ –µ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ–±—Ä–∞–±–æ—Ç–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è - –ø—Ä–æ–π–¥–µ–Ω–æ –§–∞–π–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ uch-backend/media/blog/images/ - –Ω–µ—Ç –í —Å—Ç–∞—Ç—å–µ —Å—Å—ã–ª–∫–∞ –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ /media/blog/images/... - –Ω–µ—Ç –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ - –Ω–µ—Ç –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ. –î–∞–ª—å—à–µ –Ω–µ –∏–¥–µ–º

–û—Ç–ª–∏—á–Ω–æ! –ò–º–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º –∏—Ö –ø–æ –ø–æ—Ä—è–¥–∫—É.

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê 1: –ü—É—Å—Ç—ã–µ slug (–≤–∏–¥–∏–º –≤ –≤—ã–≤–æ–¥–µ slug: )

–ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–∞—Ç—å–∏ –∏–º–µ—é—Ç –ø—É—Å—Ç–æ–π slug –ø–æ—Å–ª–µ `slugify()`. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –Ω–µ-ASCII —Å–∏–º–≤–æ–ª—ã –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã.

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –º–µ—Ç–æ–¥–µ handle:

–ù–∞–π–¥–∏—Ç–µ –≤ –∫–æ–¥–µ —É—á–∞—Å—Ç–æ–∫ –≥–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è slug:

python

```
# –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 110-120):
slug_source = metadata.get('slug', title)
slug = slugify(slug_source)

if not slug:  # –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π –ø–æ—Å–ª–µ slugify
    slug = slugify(md_file.stem)
```

**–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:**

python

```
# –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
title = metadata.get('title', md_file.stem)

# –°–æ–∑–¥–∞–Ω–∏–µ slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
slug_source = metadata.get('slug', title)
slug = slugify(slug_source)

if not slug:  # –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π –ø–æ—Å–ª–µ slugify
    # –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
    slug_candidates = [
        slugify(md_file.stem),
        slugify(str(md_file.stem).replace('_', '-')),
        f"article-{hash(str(md_file))[:8]}",  # –£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ö–µ—à –µ—Å–ª–∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
    ]
    
    for candidate in slug_candidates:
        if candidate and candidate.strip():  # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –Ω–µ –ø—É—Å—Ç–æ–π
            slug = candidate
            break
    
    # –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—É—Å—Ç–æ
    if not slug:
        slug = f"imported-{hash(str(md_file))[:10]}"
```

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê 2: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è

–°–æ–æ–±—â–µ–Ω–∏–µ "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ" –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –Ω–µ–≤–µ—Ä–Ω—ã–π. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º –º–µ—Ç–æ–¥ `_process_images`:

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ \_process\_images:

python

```
def _process_images(self, content, md_file, article_title, slug):
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
    1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
    2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
    3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
    """
    # –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Obsidian: ![[image.png]] –∏–ª–∏ ![[image.png|–ø–æ–¥–ø–∏—Å—å]]
    # –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω: ![[–∏–º—è —Ñ–∞–π–ª–∞]] –∏–ª–∏ ![[–ø–∞–ø–∫–∞/–∏–º—è —Ñ–∞–π–ª–∞]]
    pattern = r'!\[\[([^\]\n]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\|([^\]]+))?\]\]'
    
    def replace_image(match):
        image_filename = match.group(1).strip()
        caption = match.group(2) or image_filename.split('.')[0]  # –ü–æ–¥–ø–∏—Å—å –∏–ª–∏ –∏–º—è —Ñ–∞–π–ª–∞
        
        # –î–µ–∫–æ–¥–∏—Ä—É–µ–º URL-encoded —Å–∏–º–≤–æ–ª—ã –µ—Å–ª–∏ –µ—Å—Ç—å
        import urllib.parse
        image_filename = urllib.parse.unquote(image_filename)
        
        # –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –≤ Obsidian
        image_path = md_file.parent / image_filename
        
        # –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞–ø—Ä—è–º—É—é, –∏—â–µ–º –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö
        if not image_path.exists():
            # –ò—â–µ–º –≤–æ –≤—Å–µ—Ö –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö
            for img_file in md_file.parent.rglob(image_filename):
                if img_file.is_file():
                    image_path = img_file
                    break
            else:
                # –ò—â–µ–º —Ñ–∞–π–ª—ã —Å –ø–æ—Ö–æ–∂–∏–º–∏ –∏–º–µ–Ω–∞–º–∏ (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ —Ç.–¥.)
                simple_name = image_filename.replace(' ', '').lower()
                for img_file in md_file.parent.rglob('*'):
                    if img_file.is_file() and img_file.name.replace(' ', '').lower() == simple_name:
                        image_path = img_file
                        break
        
        if image_path.exists() and image_path.is_file():
            try:
                # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
                import hashlib
                file_hash = hashlib.md5(str(image_path).encode()).hexdigest()[:8]
                safe_slug = slug.replace('/', '-') if slug else 'no-slug'
                unique_name = f"{safe_slug}_{file_hash}_{image_path.name}"
                media_path = settings.MEDIA_ROOT / 'blog' / 'images' / unique_name
                
                # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                media_path.parent.mkdir(parents=True, exist_ok=True)
                
                # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
                if not media_path.exists():
                    shutil.copy2(image_path, media_path)
                    self.stdout.write(f'  üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {image_filename} ‚Üí {unique_name}')
                
                # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown
                media_url = f"/media/blog/images/{unique_name}"
                return f'![{caption}]({media_url} "{caption}")'
            
            except Exception as e:
                self.stdout.write(self.style.WARNING(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è {image_filename}: {e}'))
                return f'![{caption}](–û–®–ò–ë–ö–ê: {image_filename})'
        
        # –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω - –ª–æ–≥–∏—Ä—É–µ–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        self.stdout.write(self.style.WARNING(f'–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_filename}'))
        self.stdout.write(f'  –ò—Å–∫–∞–ª–∏ –≤: {md_file.parent}')
        self.stdout.write(f'  –ü–æ–ª–Ω—ã–π –ø—É—Ç—å: {image_path}')
        
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        return f'![{caption}](–ù–ï –ù–ê–ô–î–ï–ù–û: {image_filename})'
    
    # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    processed_content = re.sub(pattern, replace_image, content)
    return processed_content
```

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ MEDIA

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ–∑–¥–∞–Ω—ã:

python

```
# uch/settings.py - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ:
import os

# –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã
MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media')  # –ò–ª–∏ BASE_DIR / 'media'

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü settings.py)
try:
    os.makedirs(os.path.join(MEDIA_ROOT, 'blog', 'images'), exist_ok=True)
    print(f"‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: {MEDIA_ROOT}")
except Exception as e:
    print(f"‚úó –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: {e}")
```

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ MEDIA\_URL —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ development

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `uch/urls.py` –µ—Å—Ç—å:

python

```
# uch/urls.py
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # ... –≤–∞—à–∏ –º–∞—Ä—à—Ä—É—Ç—ã ...
]

if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

---

## üß™ –¢–ï–°–¢–û–í–ê–Ø –ó–ê–ú–ï–¢–ö–ê –î–õ–Ø –ü–†–û–í–ï–†–ö–ò:

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

markdown

```
---
title: "–¢–µ—Å—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"
slug: "test-images-import"
published: true
---

# –¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ
![[test-image.jpg]]

## –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø–æ–¥–ø–∏—Å—å—é
![[test-image.jpg|–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞]]

## –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–æ–¥–ø–∞–ø–∫–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
![[images/test-image.jpg]]
```

1. **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `test-image.jpg`** –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ —á—Ç–æ –∏.md —Ñ–∞–π–ª
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∏–º–ø–æ—Ä—Ç:**
	bash
	```
	python manage.py import_obsidian /–ø—É—Ç—å/–∫/–ø–∞–ø–∫–µ/—Å/—Ç–µ—Å—Ç–æ–º --author admin --update-existing
	```

---

## üîç –î–õ–Ø –î–ï–ë–ê–ì–ì–ò–ù–ì–ê –°–£–©–ï–°–¢–í–£–Æ–©–ò–• –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô:

–î–∞–≤–∞–π—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–ø–æ–º–∏–Ω–∞—é—Ç—Å—è:

bash

```
# –í—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
# –í –º–µ—Ç–æ–¥–µ handle, –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º _process_images, –¥–æ–±–∞–≤—å—Ç–µ:
self.stdout.write(f"  –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é —Ñ–∞–π–ª: {md_file}")
self.stdout.write(f"  –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Ñ–∞–π–ª–∞: {md_file.parent}")
self.stdout.write(f"  –§–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: {list(md_file.parent.glob('*'))}")
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

python

```
# test_images.py
from pathlib import Path
import re

md_file = Path("/Users/kirillkravcov/obsidian/my-digital-garden-content/posts/–¢–µ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º.md")
content = md_file.read_text(encoding='utf-8')

# –ù–∞–π–¥–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
pattern = r'!\[\[([^\]\n]+)\]\]'
matches = re.findall(pattern, content)

print(f"–§–∞–π–ª: {md_file}")
print(f"–ù–∞–π–¥–µ–Ω–æ —Å—Å—ã–ª–æ–∫ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: {len(matches)}")
for match in matches:
    print(f"  - {match}")
    
    # –ü—Ä–æ–≤–µ—Ä–∏–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª
    img_path = md_file.parent / match
    print(f"    –°—É—â–µ—Å—Ç–≤—É–µ—Ç: {img_path.exists()} - {img_path}")
    
    # –ü–æ–∏—â–µ–º –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö
    if not img_path.exists():
        found = list(md_file.parent.rglob(match))
        print(f"    –ù–∞–π–¥–µ–Ω–æ –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö: {len(found)}")
        for f in found:
            print(f"      {f}")
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ slug** –¥–ª—è —Å—Ç–∞—Ç–µ–π —Å –ø—É—Å—Ç—ã–º–∏ slug
2. **–£–ª—É—á—à–∏—Ç—å –ø–æ–∏—Å–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** –≤ –º–µ—Ç–æ–¥–µ `_process_images`
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å MEDIA –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –≤ `settings.py`
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –≤ `urls.py`
5. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª** —Å –ø—Ä–æ—Å—Ç—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
6. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç —Å –æ—Ç–ª–∞–¥–∫–æ–π**

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ –ø–æ—Ä—è–¥–∫—É –∏ —Å–æ–æ–±—â–∏—Ç–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.** –ù–∞—á–Ω–∏—Ç–µ —Å **–ø—Ä–æ–±–ª–µ–º—ã 1 (slug)** –∏ **–ø—Ä–æ–±–ª–µ–º—ã 2 (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)**, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã.

–†–∞–∑–±–∏—Ä–∞–µ–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ –¥–∞–ª—å—à–µ –Ω–µ –∏–¥–µ–º: (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py import\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media Traceback (most recent call last): File "manage.py", line 22, in <module> main() File "manage.py", line 18, in main execute\_from\_command\_line(sys.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 442, in execute\_from\_command\_line utility.execute() File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 436, in execute self.fetch\_command(subcommand).run\_from\_argv(self.argv) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 275, in fetch\_command klass = load\_command\_class(app\_name, subcommand) File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/venv/lib/python3.8/site-packages/django/core/management/\_\_init\_\_.py", line 48, in load\_command\_class module = import\_module("%s.management.commands.%s" % (app\_name, name)) File "/Applications/Xcode.app/Contents/Developer/Library/Frameworks/Python3.framework/Versions/3.8/lib/python3.8/importlib/\_\_init\_\_.py", line 127, in import\_module return \_bootstrap.\_gcd\_import(name\[level:\], package, level) File "<frozen importlib.\_bootstrap>", line 1014, in \_gcd\_import File "<frozen importlib.\_bootstrap>", line 991, in \_find\_and\_load File "<frozen importlib.\_bootstrap>", line 975, in \_find\_and\_load\_unlocked File "<frozen importlib.\_bootstrap>", line 671, in \_load\_unlocked File "<frozen importlib.\_bootstrap\_external>", line 779, in exec\_module File "<frozen importlib.\_bootstrap\_external>", line 916, in get\_code File "<frozen importlib.\_bootstrap\_external>", line 846, in source\_to\_code File "<frozen importlib.\_bootstrap>", line 219, in \_call\_with\_frames\_removed File "/Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/blog/management/commands/import\_obsidian.py", line 182 for candidate in slug\_candidates: ^ TabError: inconsistent use of tabs and spaces in indentation

–°–Ω–æ–≤–∞ –æ—à–∏–±–∫–∞ **TabError** \- —Å–º–µ—à–∞–Ω—ã —Ç–∞–±—ã –∏ –ø—Ä–æ–±–µ–ª—ã. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–∑-–∑–∞ –Ω–µ–∞–∫–∫—É—Ä–∞—Ç–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.

–î–∞–≤–∞–π—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏:

---

## üõ† –ü–ï–†–ï–°–û–ó–î–ê–ï–ú –§–ê–ô–õ –° –ü–†–ê–í–ò–õ–¨–ù–´–ú–ò –û–¢–°–¢–£–ü–ê–ú–ò:

bash

```
# 1. –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª (—Å–æ–∑–¥–∞–µ–º backup)
cp uch/apps/blog/management/commands/import_obsidian.py uch/apps/blog/management/commands/import_obsidian_backup2.py

# 2. –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —á–∏—Å—Ç—ã–π —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏ (4 –ø—Ä–æ–±–µ–ª–∞)
cat > uch/apps/blog/management/commands/import_obsidian.py << 'EOF'
import os
import glob
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.utils.text import slugify
from django.utils import timezone
from datetime import datetime
import frontmatter
from taggit.models import Tag
import urllib.parse

from uch.apps.blog.models import Article, Category

import shutil
import re
import hashlib
from django.conf import settings

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'
    
    def _process_images(self, content, md_file, article_title, slug):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
        1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
        2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
        3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
        """
        # –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Obsidian
        pattern = r'!\[\[([^\]\n]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\|([^\]]+))?\]\]'
        
        def replace_image(match):
            image_filename = match.group(1).strip()
            caption = match.group(2) or image_filename.split('.')[0]
            
            # –î–µ–∫–æ–¥–∏—Ä—É–µ–º URL-encoded —Å–∏–º–≤–æ–ª—ã
            image_filename = urllib.parse.unquote(image_filename)
            
            # –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –≤ Obsidian
            image_path = md_file.parent / image_filename
            
            # –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞–ø—Ä—è–º—É—é, –∏—â–µ–º –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö
            if not image_path.exists():
                for img_file in md_file.parent.rglob(image_filename):
                    if img_file.is_file():
                        image_path = img_file
                        break
                else:
                    # –ò—â–µ–º —Ñ–∞–π–ª—ã —Å –ø–æ—Ö–æ–∂–∏–º–∏ –∏–º–µ–Ω–∞–º–∏
                    simple_name = image_filename.replace(' ', '').lower()
                    for img_file in md_file.parent.rglob('*'):
                        if img_file.is_file() and img_file.name.replace(' ', '').lower() == simple_name:
                            image_path = img_file
                            break
            
            if image_path.exists() and image_path.is_file():
                try:
                    # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
                    file_hash = hashlib.md5(str(image_path).encode()).hexdigest()[:8]
                    safe_slug = slug.replace('/', '-') if slug else 'no-slug'
                    unique_name = f"{safe_slug}_{file_hash}_{image_path.name}"
                    media_path = settings.MEDIA_ROOT / 'blog' / 'images' / unique_name
                    
                    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                    media_path.parent.mkdir(parents=True, exist_ok=True)
                    
                    # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
                    if not media_path.exists():
                        shutil.copy2(image_path, media_path)
                        self.stdout.write(f'  üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {image_filename} ‚Üí {unique_name}')
                    
                    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É
                    media_url = f"/media/blog/images/{unique_name}"
                    return f'![{caption}]({media_url} "{caption}")'
                
                except Exception as e:
                    self.stdout.write(self.style.WARNING(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è {image_filename}: {e}'))
                    return f'![{caption}](–û–®–ò–ë–ö–ê: {image_filename})'
            
            # –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
            self.stdout.write(self.style.WARNING(f'–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_filename}'))
            return f'![{caption}](–ù–ï –ù–ê–ô–î–ï–ù–û: {image_filename})'
        
        # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        processed_content = re.sub(pattern, replace_image, content)
        return processed_content
    
    def add_arguments(self, parser):
        parser.add_argument(
            'obsidian_path',
            type=str,
            help='–ü—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Obsidian'
        )
        parser.add_argument(
            '--author',
            type=str,
            default='admin',
            help='–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Django, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∞–≤—Ç–æ—Ä–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin)'
        )
        parser.add_argument(
            '--default-category',
            type=str,
            default='Imported',
            help='–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "Imported")'
        )
        parser.add_argument(
            '--dry-run',
            action='store_true',
            help='–ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ, –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î'
        )
        parser.add_argument(
            '--update-existing',
            action='store_true',
            help='–û–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏ (–ø–æ —Å–ª–∞–≥—É)'
        )

    def handle(self, *args, **options):
        obsidian_path = Path(options['obsidian_path'])
        author_username = options['author']
        default_category_name = options['default_category']
        dry_run = options['dry_run']
        update_existing = options['update_existing']

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        if not obsidian_path.exists() or not obsidian_path.is_dir():
            raise CommandError(f'–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è "{obsidian_path}" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
        try:
            author = User.objects.get(username=author_username)
        except User.DoesNotExist:
            raise CommandError(f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∏–º–µ–Ω–µ–º "{author_username}" –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        default_category, created = Category.objects.get_or_create(
            name=default_category_name,
            defaults={'slug': slugify(default_category_name)}
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "{default_category_name}"'))

        # –ü–æ–∏—Å–∫ –≤—Å–µ—Ö .md —Ñ–∞–π–ª–æ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
        md_files = list(obsidian_path.rglob('*.md'))
        self.stdout.write(f'–ù–∞–π–¥–µ–Ω–æ {len(md_files)} .md —Ñ–∞–π–ª–æ–≤ –≤ "{obsidian_path}".')

        imported_count = 0
        updated_count = 0
        skipped_count = 0

        for md_file in md_files:
            try:
                with open(md_file, 'r', encoding='utf-8') as f:
                    post = frontmatter.load(f)

                # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ front matter
                metadata = post.metadata
                content = post.content

                # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
                title = metadata.get('title', md_file.stem)
                
                # –°–æ–∑–¥–∞–Ω–∏–µ slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
                slug_source = metadata.get('slug', title)
                slug = slugify(slug_source)

                # –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π, —Å–æ–∑–¥–∞–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
                if not slug:
                    slug_candidates = [
                        slugify(md_file.stem),
                        slugify(str(md_file.stem).replace('_', '-')),
                        f"article-{hash(str(md_file))[:8]}",
                    ]
                    
                    for candidate in slug_candidates:
                        if candidate and candidate.strip():
                            slug = candidate
                            break
                    
                    # –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—É—Å—Ç–æ
                    if not slug:
                        slug = f"imported-{hash(str(md_file))[:10]}"

                # –°—Ç–∞—Ç—É—Å
                status = 'draft'
                if metadata.get('published') in [True, 'true', 'True', 'yes']:
                    status = 'published'
                elif metadata.get('status'):
                    status = metadata.get('status')

                # –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                category_name = metadata.get('category', metadata.get('categories'))
                if category_name:
                    if isinstance(category_name, list):
                        category_name = category_name[0]
                    category, _ = Category.objects.get_or_create(
                        name=category_name,
                        defaults={'slug': slugify(category_name)}
                    )
                else:
                    category = default_category

                # –¢–µ–≥–∏
                tags = []
                if 'tags' in metadata:
                    tags_meta = metadata['tags']
                    if isinstance(tags_meta, str):
                        tags = [t.strip() for t in tags_meta.split(',')]
                    elif isinstance(tags_meta, list):
                        tags = [str(t).strip() for t in tags_meta]
                
                # –¢–∞–∫–∂–µ –∏—â–µ–º —Ç–µ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Obsidian #—Ç–µ–≥ –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ
                content_tags = re.findall(r'#([a-zA-Z–∞-—è–ê-–Ø0-9_-]+)', content)
                tags.extend(content_tags)
                tags = list(set(tags))

                # –î–∞—Ç–∞
                published_at = timezone.now()
                if 'date' in metadata:
                    date_value = metadata['date']
                    try:
                        if isinstance(date_value, str):
                            for fmt in ('%Y-%m-%d', '%Y-%m-%d %H:%M:%S', '%d.%m.%Y', '%Y/%m/%d'):
                                try:
                                    published_at = datetime.strptime(date_value, fmt)
                                    break
                                except ValueError:
                                    continue
                            published_at = timezone.make_aware(published_at)
                        else:
                            published_at = date_value
                    except Exception as e:
                        self.stdout.write(self.style.WARNING(f'–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É "{date_value}" –¥–ª—è —Ñ–∞–π–ª–∞ {md_file}: {e}'))

                # –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Å—Ç–∞—Ç—å—è —Å —Ç–∞–∫–∏–º slug?
                existing_article = Article.objects.filter(slug=slug).first()
                
                if existing_article and not update_existing:
                    self.stdout.write(f'[–ü–†–û–ü–£–©–ï–ù–û] –°—Ç–∞—Ç—å—è —Å slug "{slug}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.')
                    skipped_count += 1
                    continue

                # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏
                if not dry_run:
                    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
                    processed_content = self._process_images(content, md_file, title, slug)
                else:
                    processed_content = content

                article_data = {
                    'title': title,
                    'content': processed_content,
                    'slug': slug,
                    'status': status,
                    'category': category,
                    'author': author,
                    'published_at': published_at,
                }

                if dry_run:
                    self.stdout.write(f'[DRY RUN] {"–û–±–Ω–æ–≤–∏—Ç—å" if existing_article else "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"}: "{title}"')
                    self.stdout.write(f'        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category.name}, –¢–µ–≥–∏: {tags}, –°—Ç–∞—Ç—É—Å: {status}')
                    imported_count += 1
                    continue

                # –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
                if existing_article and update_existing:
                    for key, value in article_data.items():
                        setattr(existing_article, key, value)
                    existing_article.save()
                    article = existing_article
                    updated_count += 1
                    action = '–û–ë–ù–û–í–õ–ï–ù–ò–ï'
                else:
                    article = Article.objects.create(**article_data)
                    imported_count += 1
                    action = '–ò–ú–ü–û–†–¢'

                # –û—á–∏—Å—Ç–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∏
                article.tags.clear()
                for tag_name in tags:
                    if tag_name:
                        article.tags.add(tag_name)

                self.stdout.write(f'[{action}] {"–û–±–Ω–æ–≤–ª–µ–Ω–∞" if action == "–û–ë–ù–û–í–õ–ï–ù–ò–ï" else "–°–æ–∑–¥–∞–Ω–∞"}: "{title}" (slug: {slug})')

            except UnicodeDecodeError:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤ —Ñ–∞–π–ª–µ {md_file}. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.'))
                skipped_count += 1
            except Exception as e:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ {md_file}: {e}'))
                skipped_count += 1

        # –ò—Ç–æ–≥–∏
        self.stdout.write('\n' + '='*50)
        if dry_run:
            self.stdout.write(self.style.WARNING(f'DRY RUN –ó–ê–í–ï–†–®–ï–ù. –ë—ã–ª–æ –±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}'))
        else:
            self.stdout.write(self.style.SUCCESS(
                f'–ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}, –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped_count}'
            ))
EOF
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –°–ò–ù–¢–ê–ö–°–ò–°–ê:

bash

```
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
python -m py_compile uch/apps/blog/management/commands/import_obsidian.py

# –ï—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --dry-run
```

---

## üõ† –ï–°–õ–ò –í–°–ï –ï–©–ï –û–®–ò–ë–ö–ê:

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç—Å—Ç—É–ø–æ–≤:

bash

```
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Ç–∞–±–æ–≤ –≤ —Ñ–∞–π–ª–µ
cat -A uch/apps/blog/management/commands/import_obsidian.py | head -20

# 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sed –¥–ª—è –∑–∞–º–µ–Ω—ã —Ç–∞–±–æ–≤ –Ω–∞ 4 –ø—Ä–æ–±–µ–ª–∞
sed -i '' 's/\t/    /g' uch/apps/blog/management/commands/import_obsidian.py

# 3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Python –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
python3 -c "
import sys
with open('uch/apps/blog/management/commands/import_obsidian.py', 'r') as f:
    lines = f.readlines()
with open('uch/apps/blog/management/commands/import_obsidian_fixed.py', 'w') as f:
    for line in lines:
        # –ó–∞–º–µ–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ —Ç–∞–±—ã –Ω–∞ 4 –ø—Ä–æ–±–µ–ª–∞
        if line.startswith('\t'):
            # –°—á–∏—Ç–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–æ–≤ –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏
            tab_count = len(line) - len(line.lstrip('\t'))
            f.write(' ' * (4 * tab_count) + line.lstrip('\t'))
        else:
            f.write(line)
"

# 4. –ó–∞–º–µ–Ω–∏—Ç—å —Ñ–∞–π–ª
mv uch/apps/blog/management/commands/import_obsidian_fixed.py uch/apps/blog/management/commands/import_obsidian.py
```

---

## üéØ –ü–†–û–°–¢–û–ô –¢–ï–°–¢ –§–ê–ô–õ–ê:

bash

```
# –°–æ–∑–¥–∞–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
cat > test_syntax.py << 'EOF'
import sys
sys.path.insert(0, '.')
try:
    from uch.apps.blog.management.commands.import_obsidian import Command
    print("‚úì –ò–º–ø–æ—Ä—Ç –∫–æ–º–∞–Ω–¥—ã —É—Å–ø–µ—à–µ–Ω")
    cmd = Command()
    print("‚úì –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–æ–º–∞–Ω–¥—ã —É—Å–ø–µ—à–Ω–æ")
except SyntaxError as e:
    print(f"‚úó –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞: {e}")
    print(f"  –§–∞–π–ª: {e.filename}, –°—Ç—Ä–æ–∫–∞: {e.lineno}")
except Exception as e:
    print(f"‚úó –î—Ä—É–≥–∞—è –æ—à–∏–±–∫–∞: {e}")
EOF

python test_syntax.py
```

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞. –°–æ–æ–±—â–∏—Ç–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.**

–ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ: (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py import\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --dry-run ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media –ù–∞–π–¥–µ–Ω–æ 7.md —Ñ–∞–π–ª–æ–≤ –≤ "/Users/kirillkravcov/obsidian/my-digital-garden-content/posts". –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.md: 'int' object is not subscriptable –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/unified-test.md: 'int' object is not subscriptable \[–ü–†–û–ü–£–©–ï–ù–û\] –°—Ç–∞—Ç—å—è —Å slug "test-images-import" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. \[–ü–†–û–ü–£–©–ï–ù–û\] –°—Ç–∞—Ç—å—è —Å slug "deploy-test" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/–¢–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.md: 'int' object is not subscriptable –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç.md: 'int' object is not subscriptable –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ /Users/kirillkravcov/obsidian/my-digital-garden-content/posts/test-fix.md: 'int' object is not subscriptable ================================================== DRY RUN –ó–ê–í–ï–†–®–ï–ù. –ë—ã–ª–æ –±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: 0

–û—à–∏–±–∫–∞ **'int' object is not subscriptable** –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –≤ —Å—Ç—Ä–æ–∫–µ —Å `hash(str(md_file))[:8]`. –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ `hash()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ, –∞ –Ω–µ —Å—Ç—Ä–æ–∫—É, –∏ –º—ã –ø—ã—Ç–∞–µ–º—Å—è —Å–¥–µ–ª–∞—Ç—å —Å—Ä–µ–∑ `[:8]`.

–ò—Å–ø—Ä–∞–≤–ª—è–µ–º —ç—Ç—É —Å—Ç—Ä–æ–∫—É –≤ –∫–æ–¥–µ:

---

## üõ† –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò:

–ù–∞–π–¥–∏—Ç–µ –≤ –∫–æ–¥–µ —Å—Ç—Ä–æ–∫–∏ —Å `hash(str(md_file))[:8]` –∏ `hash(str(md_file))[:10]`:

python

```
# –°—Ç–∞—Ä—ã–π –∫–æ–¥ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∏ 125-135):
slug_candidates = [
    slugify(md_file.stem),
    slugify(str(md_file.stem).replace('_', '-')),
    f"article-{hash(str(md_file))[:8]}",  # <-- –û–®–ò–ë–ö–ê –ó–î–ï–°–¨!
]

# ...
if not slug:
    slug = f"imported-{hash(str(md_file))[:10]}"  # <-- –ò –ó–î–ï–°–¨!
```

**–ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞:**

python

```
slug_candidates = [
    slugify(md_file.stem),
    slugify(str(md_file.stem).replace('_', '-')),
    f"article-{abs(hash(str(md_file))) % 1000000:06d}",  # <-- –ò–°–ü–†–ê–í–õ–ï–ù–û
]

# ...
if not slug:
    slug = f"imported-{abs(hash(str(md_file))) % 100000000:08d}"  # <-- –ò–°–ü–†–ê–í–õ–ï–ù–û
```

---

## üìù –ü–û–õ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –£–ß–ê–°–¢–ö–ê –ö–û–î–ê:

–ù–∞–π–¥–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ —ç—Ç–æ—Ç —É—á–∞—Å—Ç–æ–∫ (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∏ 120-140):

python

```
# –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π, —Å–æ–∑–¥–∞–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
if not slug:
    slug_candidates = [
        slugify(md_file.stem),
        slugify(str(md_file.stem).replace('_', '-')),
        f"article-{hash(str(md_file))[:8]}",
    ]
    
    for candidate in slug_candidates:
        if candidate and candidate.strip():
            slug = candidate
            break
    
    # –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—É—Å—Ç–æ
    if not slug:
        slug = f"imported-{hash(str(md_file))[:10]}"
```

**–ò –∑–∞–º–µ–Ω–∏—Ç–µ –µ–≥–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞:**

python

```
# –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π, —Å–æ–∑–¥–∞–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
if not slug:
    slug_candidates = [
        slugify(md_file.stem),
        slugify(str(md_file.stem).replace('_', '-')),
        f"article-{abs(hash(str(md_file))) % 1000000:06d}",
    ]
    
    for candidate in slug_candidates:
        if candidate and candidate.strip():
            slug = candidate
            break
    
    # –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—É—Å—Ç–æ
    if not slug:
        slug = f"imported-{abs(hash(str(md_file))) % 100000000:08d}"
```

---

## üîß –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï (–ë–û–õ–ï–ï –ù–ê–î–ï–ñ–ù–û–ï):

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `hashlib` –≤–º–µ—Å—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ `hash()`:

python

```
import hashlib  # <-- –£–∂–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞

# –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π, —Å–æ–∑–¥–∞–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
if not slug:
    # –°–æ–∑–¥–∞–µ–º —Ö–µ—à –∏–∑ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É
    file_hash = hashlib.md5(str(md_file).encode()).hexdigest()[:8]
    
    slug_candidates = [
        slugify(md_file.stem),
        slugify(str(md_file.stem).replace('_', '-')),
        f"article-{file_hash}",
    ]
    
    for candidate in slug_candidates:
        if candidate and candidate.strip():
            slug = candidate
            break
    
    # –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—É—Å—Ç–æ
    if not slug:
        slug = f"imported-{file_hash}"
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

bash

```
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python -m py_compile uch/apps/blog/management/commands/import_obsidian.py

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ dry-run
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --dry-run

# –ï—Å–ª–∏ dry-run —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing
```

---

## üìã –û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢ –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

bash

```
‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media
–ù–∞–π–¥–µ–Ω–æ 7 .md —Ñ–∞–π–ª–æ–≤ –≤ "/Users/kirillkravcov/obsidian/my-digital-garden-content/posts".
[DRY RUN] –û–±–Ω–æ–≤–∏—Ç—å: "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è"
        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: Imported, –¢–µ–≥–∏: [], –°—Ç–∞—Ç—É—Å: draft
[DRY RUN] –û–±–Ω–æ–≤–∏—Ç—å: "–¢–µ—Å—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è"
        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: Imported, –¢–µ–≥–∏: [], –°—Ç–∞—Ç—É—Å: draft
[DRY RUN] –û–±–Ω–æ–≤–∏—Ç—å: "–¢–µ—Å—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"
        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: Imported, –¢–µ–≥–∏: [], –°—Ç–∞—Ç—É—Å: published
# ... –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
```

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ dry-run —Å–Ω–æ–≤–∞. –°–æ–æ–±—â–∏—Ç–µ –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.**

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python -m py\_compile uch/apps/blog/management/commands/import\_obsidian.py (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py import\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --dry-run ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media –ù–∞–π–¥–µ–Ω–æ 7.md —Ñ–∞–π–ª–æ–≤ –≤ "/Users/kirillkravcov/obsidian/my-digital-garden-content/posts". \[DRY RUN\] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å: "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è" –ö–∞—Ç–µ–≥–æ—Ä–∏—è: Imported, –¢–µ–≥–∏: \[\], –°—Ç–∞—Ç—É—Å: draft \[–ü–†–û–ü–£–©–ï–ù–û\] –°—Ç–∞—Ç—å—è —Å slug "unified-test" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. \[–ü–†–û–ü–£–©–ï–ù–û\] –°—Ç–∞—Ç—å—è —Å slug "test-images-import" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. \[–ü–†–û–ü–£–©–ï–ù–û\] –°—Ç–∞—Ç—å—è —Å slug "deploy-test" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. \[DRY RUN\] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å: "–¢–µ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º" –ö–∞—Ç–µ–≥–æ—Ä–∏—è: Imported, –¢–µ–≥–∏: \[\], –°—Ç–∞—Ç—É—Å: published \[DRY RUN\] –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å: "–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç" –ö–∞—Ç–µ–≥–æ—Ä–∏—è: Imported, –¢–µ–≥–∏: \[\], –°—Ç–∞—Ç—É—Å: draft \[–ü–†–û–ü–£–©–ï–ù–û\] –°—Ç–∞—Ç—å—è —Å slug "test-fix" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. ================================================== DRY RUN –ó–ê–í–ï–†–®–ï–ù. –ë—ã–ª–æ –±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: 3 (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py import\_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --update-existing ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media –ù–∞–π–¥–µ–Ω–æ 7.md —Ñ–∞–π–ª–æ–≤ –≤ "/Users/kirillkravcov/obsidian/my-digital-garden-content/posts". \[–ò–ú–ü–û–†–¢\] –°–æ–∑–¥–∞–Ω–∞: "–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è" (slug: article-888541) \[–û–ë–ù–û–í–õ–ï–ù–ò–ï\] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "–¢–µ—Å—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è" (slug: unified-test) –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: posts/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2022-02-05 –≤ 15.41.39.png –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: images/test-image.jpg \[–û–ë–ù–û–í–õ–ï–ù–ò–ï\] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "–¢–µ—Å—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π" (slug: test-images-import) \[–û–ë–ù–û–í–õ–ï–ù–ò–ï\] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "deploy-test" (slug: deploy-test) –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: abae988de571f443aa5f1274711d96a4.jpg üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2022-02-05 –≤ 15.41.39.png ‚Üí article-944429\_3aa473c8\_–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2022-02-05 –≤ 15.41.39.png \[–ò–ú–ü–û–†–¢\] –°–æ–∑–¥–∞–Ω–∞: "–¢–µ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º" (slug: article-944429) \[–ò–ú–ü–û–†–¢\] –°–æ–∑–¥–∞–Ω–∞: "–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ—Å—Ç" (slug: article-324257) \[–û–ë–ù–û–í–õ–ï–ù–ò–ï\] –û–±–Ω–æ–≤–ª–µ–Ω–∞: "–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è" (slug: test-fix) ================================================== –ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: 3, –û–±–Ω–æ–≤–ª–µ–Ω–æ: 4, –ü—Ä–æ–ø—É—â–µ–Ω–æ: 0 (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % make run python manage.py runserver ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media Watching for file changes with StatReloader Performing system checks... System check identified no issues (0 silenced). December 09, 2025 - 11:36:02 Django version 4.2.7, using settings 'uch.settings' Starting development server at http://127.0.0.1:8000/ Quit the server with CONTROL-C.

–û—Ç–ª–∏—á–Ω–æ! –ò–º–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏. –î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤—ã–≤–æ–¥:

---

## üìä –ê–ù–ê–õ–ò–ó –†–ï–ó–£–õ–¨–¢–ê–¢–û–í:

### ‚úÖ –£–°–ü–ï–•–ò:

1. **–ò–º–ø–æ—Ä—Ç —Å—Ç–∞—Ç–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç** \- —Å–æ–∑–¥–∞–Ω–æ 3, –æ–±–Ω–æ–≤–ª–µ–Ω–æ 4 —Å—Ç–∞—Ç—å–∏
2. **Slug –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** \- –≤–∏–¥–∏–º `article-888541`, `article-944429` –∏ —Ç.–¥.
3. **–û–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ:**
	text
	```
	üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: –°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2022-02-05 –≤ 15.41.39.png ‚Üí article-944429_3aa473c8_–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2022-02-05 –≤ 15.41.39.png
	```

### ‚ùå –ü–†–û–ë–õ–ï–ú–´ –° –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–Ø–ú–ò:

1. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã:**
	- `posts/–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2022-02-05 –≤ 15.41.39.png` \- –ø–æ—Ç–æ–º –ù–ê–ô–î–ï–ù–û –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!
	- `images/test-image.jpg` \- –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–æ–¥–ø–∞–ø–∫–µ
	- `abae988de571f443aa5f1274711d96a4.jpg` \- –Ω–µ –Ω–∞–π–¥–µ–Ω
2. **–ü—É—Ç–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ:**
	- `posts/...` - –ø–æ—Ö–æ–∂–µ –Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å
	- `images/...` - –ø–æ–¥–ø–∞–ø–∫–∞

---

## üõ† –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–ò–°–ö–ê –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô:

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ Obsidian –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã —Å—Å—ã–ª–æ–∫ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –î–∞–≤–∞–π—Ç–µ —É–ª—É—á—à–∏–º –º–µ—Ç–æ–¥ `_process_images`:

python

```
def _process_images(self, content, md_file, article_title, slug):
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
    1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
    2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
    3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
    """
    # –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Obsidian
    # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: ![[image.png]], ![[folder/image.png]], ![[image.png|caption]]
    pattern = r'!\[\[([^\]\n]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\|([^\]]+))?\]\]'
    
    def replace_image(match):
        image_ref = match.group(1).strip()  # –ú–æ–∂–µ—Ç –±—ã—Ç—å "image.png" –∏–ª–∏ "folder/image.png"
        caption = match.group(2) or Path(image_ref).stem  # –ò–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–∞–∫ –ø–æ–¥–ø–∏—Å—å
        
        # –î–µ–∫–æ–¥–∏—Ä—É–µ–º URL-encoded —Å–∏–º–≤–æ–ª—ã
        image_ref = urllib.parse.unquote(image_ref)
        
        # –í–∞—Ä–∏–∞–Ω—Ç—ã –ø—É—Ç–µ–π –¥–ª—è –ø–æ–∏—Å–∫–∞
        search_paths = []
        
        # 1. –ü—Ä—è–º–æ –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        search_paths.append(md_file.parent / image_ref)
        
        # 2. –í –ø–æ–¥–ø–∞–ø–∫–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ md —Ñ–∞–π–ª–∞
        if '/' in image_ref or '\\' in image_ref:
            # –†–∞–∑–±–∏–≤–∞–µ–º –ø—É—Ç—å
            parts = Path(image_ref).parts
            search_paths.append(md_file.parent / Path(*parts))
            
            # –¢–∞–∫–∂–µ –ø—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ —Ç–æ–ª—å–∫–æ –∏–º—è —Ñ–∞–π–ª–∞
            search_paths.append(md_file.parent / parts[-1])
        
        # 3. –¢–æ–ª—å–∫–æ –∏–º—è —Ñ–∞–π–ª–∞ (–±–µ–∑ –ø—É—Ç–∏)
        search_paths.append(md_file.parent / Path(image_ref).name)
        
        # 4. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
        search_paths.extend(list(md_file.parent.rglob(Path(image_ref).name)))
        
        # 5. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º —Å –ø–æ—Ö–æ–∂–∏–º –∏–º–µ–Ω–µ–º (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
        clean_name = Path(image_ref).name.replace(' ', '').lower()
        for img_file in md_file.parent.rglob('*'):
            if img_file.is_file() and img_file.name.replace(' ', '').lower() == clean_name:
                search_paths.append(img_file)
        
        # –£–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
        search_paths = list(dict.fromkeys(search_paths))
        
        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
        self.stdout.write(f'  üîç –ò—â—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {image_ref}')
        self.stdout.write(f'    –í–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–∏—Å–∫–∞: {[str(p) for p in search_paths[:3]]}')
        
        # –ò—â–µ–º –ø–µ—Ä–≤—ã–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
        image_path = None
        for search_path in search_paths:
            if search_path.exists() and search_path.is_file():
                image_path = search_path
                self.stdout.write(f'    ‚úì –ù–∞–π–¥–µ–Ω–æ: {image_path}')
                break
        
        if image_path:
            try:
                # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
                file_hash = hashlib.md5(str(image_path).encode()).hexdigest()[:8]
                safe_slug = slug.replace('/', '-') if slug else 'no-slug'
                unique_name = f"{safe_slug}_{file_hash}_{image_path.name}"
                media_path = settings.MEDIA_ROOT / 'blog' / 'images' / unique_name
                
                # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                media_path.parent.mkdir(parents=True, exist_ok=True)
                
                # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
                if not media_path.exists():
                    shutil.copy2(image_path, media_path)
                    self.stdout.write(f'    üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: {image_path.name} ‚Üí {unique_name}')
                else:
                    self.stdout.write(f'    ‚è≠Ô∏è  –£–∂–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: {unique_name}')
                
                # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É
                media_url = f"/media/blog/images/{unique_name}"
                return f'![{caption}]({media_url} "{caption}")'
            
            except Exception as e:
                self.stdout.write(self.style.WARNING(f'    ‚úó –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: {e}'))
                return f'![{caption}](–û–®–ò–ë–ö–ê: {image_ref})'
        
        # –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
        self.stdout.write(self.style.WARNING(f'    ‚úó –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_ref}'))
        self.stdout.write(f'    –ò—Å–∫–∞–ª–∏ –≤: {md_file.parent}')
        
        # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å)
        return f'![{caption}](–ù–ï –ù–ê–ô–î–ï–ù–û: {image_ref})'
    
    # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
    processed_content = re.sub(pattern, replace_image, content)
    return processed_content
```

---

## üîç –°–û–ó–î–ê–î–ò–ú –¢–ï–°–¢–û–í–´–ô –§–ê–ô–õ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò:

–ß—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ –ø—É—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, —Å–æ–∑–¥–∞–¥–∏–º —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É:

markdown

```
---
title: "–¢–µ—Å—Ç –ø—É—Ç–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"
slug: "test-image-paths"
published: true
---

# –¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø—É—Ç–µ–π

## 1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ
![[test-image.jpg]]

## 2. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–æ–¥–ø–∞–ø–∫–µ
![[images/test-image.jpg]]

## 3. –° –ø–æ–¥–ø–∏—Å—å—é
![[test-image.jpg|–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞]]

## 4. –° –ø—Ä–æ–±–µ–ª–∞–º–∏ –≤ –∏–º–µ–Ω–∏
![[–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2022-02-05 –≤ 15.41.39.png]]
```

---

## üß™ –ü–†–û–í–ï–†–ö–ê –° –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û–ô –û–¢–õ–ê–î–ö–û–ô:

–î–æ–±–∞–≤–∏–º –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π –≤—ã–≤–æ–¥ –≤ –Ω–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:

python

```
# –í –º–µ—Ç–æ–¥–µ handle, –≤ –Ω–∞—á–∞–ª–µ —Ü–∏–∫–ª–∞ for md_file in md_files:
self.stdout.write(f'\nüìÑ –û–±—Ä–∞–±–æ—Ç–∫–∞: {md_file.name}')
self.stdout.write(f'  –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: {md_file.parent}')
self.stdout.write(f'  –§–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: {[f.name for f in md_file.parent.iterdir() if f.is_file()][:5]}...')
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

1. **–û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ `_process_images`** —Å —É–ª—É—á—à–µ–Ω–Ω—ã–º –ø–æ–∏—Å–∫–æ–º
2. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:**
	text
	```
	posts/
	‚îú‚îÄ‚îÄ test-image-paths.md
	‚îú‚îÄ‚îÄ test-image.jpg
	‚îî‚îÄ‚îÄ images/
	    ‚îî‚îÄ‚îÄ test-image.jpg
	```
3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç —Å –æ—Ç–ª–∞–¥–∫–æ–π**
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ `media/blog/images/`**
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å—Å—ã–ª–∫–∏ –≤ —Å—Ç–∞—Ç—å—è—Ö –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ `/media/blog/images/...`**

---

## üöÄ –ë–´–°–¢–†–´–ô –¢–ï–°–¢ –†–ê–ë–û–¢–´ –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô:

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Ä—É—á–Ω—É—é —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–æ—Å—å –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:

bash

```
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –º–µ–¥–∏–∞
ls -la uch-backend/media/blog/images/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–¥–Ω—É –∏–∑ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π –≤ –∞–¥–º–∏–Ω–∫–µ
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ: http://localhost:8000/admin/blog/article/
# –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç–∞—Ç—å—é "–¢–µ—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º" –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç
```

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ `_process_images` –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–º–µ—Ç–∫—É. –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∏–º–ø–æ—Ä—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.**

–í –∞–¥–º–∏–Ω–∫–µ <h1>–¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø—É—Ç–µ–π</h1> <h2>1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ</h2> <p><img alt="posts/test-image" src="–ù–ï –ù–ê–ô–î–ï–ù–û: posts/test-image.png" /></p> <h2>2. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–æ–¥–ø–∞–ø–∫–µ</h2> <p><img alt="posts/images/test-image" src="–ù–ï –ù–ê–ô–î–ï–ù–û: posts/images/test-image.png" /></p> <h2>3. –° –ø–æ–¥–ø–∏—Å—å—é</h2> <p><img alt="–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞" src="/media/blog/images/test-image-paths\_aa3264a7\_Kirillkravt.png" title="–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞" /></p> <h2>4. –° –ø—Ä–æ–±–µ–ª–∞–º–∏ –≤ –∏–º–µ–Ω–∏</h2> <p><img alt="–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21" src="/media/blog/images/test-image-paths\_f6104e59\_–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33.png" title="–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21" /></p> –Ω–∞ —Å–∞–π—Ç–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

–û—Ç–ª–∏—á–Ω–æ! –ú—ã –≤–∏–¥–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º:

1. **–ß–∞—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞–π–¥–µ–Ω–∞ –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞** (–ø—É–Ω–∫—Ç—ã 3 –∏ 4)
2. **–î—Ä—É–≥–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã** (–ø—É–Ω–∫—Ç—ã 1 –∏ 2)
3. **–ù–∞ —Å–∞–π—Ç–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** \- —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ —Å MEDIA\_URL

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê 1: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –≤ Obsidian

–í –≤—ã–≤–æ–¥–µ –≤–∏–¥–∏–º:

- `posts/test-image.png` \- –Ω–æ —Ñ–∞–π–ª –≤–µ—Ä–æ—è—Ç–Ω–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `test-image.jpg`
- `posts/images/test-image.png` \- –Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `.jpg`

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

–§–∞–π–ª—ã –≤ Obsidian –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. –£–ª—É—á—à–∏–º –ø–æ–∏—Å–∫:

python

```
# –í –º–µ—Ç–æ–¥–µ _process_images, —É–ª—É—á—à–∞–µ–º –ø–æ–∏—Å–∫:
# –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ pattern = r'!\[\[([^\]\n]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\|([^\]]+))?\]\]'

# –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ –ø—É—Ç–∏ –∏ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
image_ref = match.group(1).strip()
image_name = Path(image_ref).stem  # –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
image_ref_ext = Path(image_ref).suffix.lower()  # –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
valid_extensions = {'.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp', '.svg'}

# –ï—Å–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ, –ø—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
if not image_ref_ext or image_ref_ext not in valid_extensions:
    # –ü—Ä–æ–±—É–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
    for ext in valid_extensions:
        possible_path = md_file.parent / f"{image_name}{ext}"
        if possible_path.exists():
            image_ref = f"{image_name}{ext}"
            break
```

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê 2: –ö–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —Å–∞–π—Ç–µ

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ **MEDIA\_URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**. –í development –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤.

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ uch/urls.py:

python

```
# uch/urls.py
from django.conf import settings
from django.conf.urls.static import static
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('markdownx/', include('markdownx.urls')),
    path('', include('uch.apps.blog.urls')),
]

# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –¥–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞:
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ uch/settings.py:

python

```
# uch/settings.py

# –í development –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
DEBUG = True

# –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã
MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'

# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
STATIC_URL = 'static/'
STATIC_ROOT = BASE_DIR / 'staticfiles'
STATICFILES_DIRS = [BASE_DIR / 'static']
```

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º

–ü—Ä–æ–≤–µ—Ä–∏–º, –¥–æ—Å—Ç—É–ø–Ω—ã –ª–∏ —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é:

bash

```
# 1. –ü—Ä–æ–≤–µ—Ä–∏–º —á—Ç–æ —Ñ–∞–π–ª—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏—Å—å
ls -la uch-backend/media/blog/images/

# 2. –ü–æ–ø—Ä–æ–±—É–µ–º –æ—Ç–∫—Ä—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ
# –ù–∞–ø—Ä–∏–º–µ—Ä: http://localhost:8000/media/blog/images/test-image-paths_aa3264a7_Kirillkravt.png
```

**–ï—Å–ª–∏ —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –ø—Ä—è–º–æ–º—É URL**, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ —à–∞–±–ª–æ–Ω–µ.

---

## üõ† –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –î–õ–Ø –¢–ï–°–¢–ê:

### 1\. –í—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤–∏–º –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –≤ —à–∞–±–ª–æ–Ω –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

–í `article_detail.html` –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –æ—Ç–ª–∞–¥–∫—É:

django

```
<!-- –í –Ω–∞—á–∞–ª–æ –±–ª–æ–∫–∞ content –¥–æ–±–∞–≤—å—Ç–µ: -->
{% if article.slug == "test-image-paths" %}
<div style="background: #f0f0f0; padding: 10px; margin-bottom: 20px;">
    <h4>–û—Ç–ª–∞–¥–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:</h4>
    <p>MEDIA_URL: {{ MEDIA_URL }}</p>
    <p>–°—Ç–∞—Ç—å—è slug: {{ article.slug }}</p>
    <p>–ö–æ–Ω—Ç–µ–Ω—Ç (–ø–µ—Ä–≤—ã–µ 500 —Å–∏–º–≤–æ–ª–æ–≤): {{ article.content|slice:":500" }}</p>
</div>
{% endif %}
```

### 2\. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏:

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8000/media/blog/images/test-image-paths_aa3264a7_Kirillkravt.png`

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –∫–∞—Ä—Ç–∏–Ω–∫—É** \- –∑–Ω–∞—á–∏—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã.  
**–ï—Å–ª–∏ –Ω–µ—Ç** \- –ø—Ä–æ–±–ª–µ–º–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π MEDIA\_URL.

---

## üß™ –¢–ï–°–¢–û–í–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í –î–õ–Ø –û–ë–°–ò–î–ò–ê–ù–ê:

–°–æ–∑–¥–∞–π—Ç–µ —Ç–æ—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

text

```
/Users/kirillkravcov/obsidian/my-digital-garden-content/
‚îî‚îÄ‚îÄ posts/
    ‚îú‚îÄ‚îÄ test-image-paths.md
    ‚îú‚îÄ‚îÄ test-image.jpg            # –§–∞–π–ª 1
    ‚îú‚îÄ‚îÄ test-image.png            # –§–∞–π–ª 2 (–¥—É–±–ª–∏–∫–∞—Ç —Å –¥—Ä—É–≥–∏–º —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º)
    ‚îî‚îÄ‚îÄ images/
        ‚îú‚îÄ‚îÄ test-image.jpg        # –§–∞–π–ª 3
        ‚îî‚îÄ‚îÄ test-image.png        # –§–∞–π–ª 4
```

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `test-image-paths.md`:**

markdown

```
---
title: "–¢–µ—Å—Ç –ø—É—Ç–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π"
slug: "test-image-paths"
published: true
---

# –¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø—É—Ç–µ–π

## 1. JPG –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ
![[test-image.jpg]]

## 2. PNG –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ  
![[test-image.png]]

## 3. JPG –≤ –ø–æ–¥–ø–∞–ø–∫–µ images
![[images/test-image.jpg]]

## 4. PNG –≤ –ø–æ–¥–ø–∞–ø–∫–µ images
![[images/test-image.png]]

## 5. –° –ø–æ–¥–ø–∏—Å—å—é
![[test-image.jpg|–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞]]

## 6. –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (Obsidian —á–∞—Å—Ç–æ —Ç–∞–∫ –¥–µ–ª–∞–µ—Ç)
![[test-image]]
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å `urls.py`** \- –µ—Å—Ç—å –ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –≤ DEBUG —Ä–µ–∂–∏–º–µ
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª—É –Ω–∞–ø—Ä—è–º—É—é** –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. **–û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** –¥–ª—è —Ä–∞–±–æ—Ç—ã –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
4. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ñ–∞–π–ª–æ–≤** —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏
5. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç —Å –æ—Ç–ª–∞–¥–∫–æ–π**

---

## üîß –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï –î–õ–Ø –ü–†–û–í–ï–†–ö–ò –ú–ï–î–ò–ê:

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω–µ—Ü `uch/urls.py`:

python

```
# –î–û–ë–ê–í–¨–¢–ï –≠–¢–û –î–ê–ñ–ï –ï–°–õ–ò –£–ñ–ï –ï–°–¢–¨
from django.conf import settings
from django.conf.urls.static import static

# ... –≤–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ urlpatterns ...

# –≠–¢–û –î–û–õ–ñ–ù–û –ë–´–¢–¨ –ü–û–°–õ–ï –í–°–ï–• urlpatterns
urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é:  
`http://localhost:8000/media/blog/images/test-image-paths_aa3264a7_Kirillkravt.png`

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É MEDIA\_URL –∏ —Å–æ–æ–±—â–∏—Ç–µ:**

1. –î–æ—Å—Ç—É–ø–Ω–æ –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ –ø—Ä—è–º–æ–º—É URL?
2. –ß—Ç–æ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –≤ `uch/urls.py`?

(venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python -m py\_compile uch/apps/blog/management/commands/import\_obsidian.py Sorry: IndentationError: expected an indented block (import\_obsidian.py, line 202)

–û—à–∏–±–∫–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–æ–±–ª–µ–º—É —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏ –≤ —Å—Ç—Ä–æ–∫–µ 202 —Ñ–∞–π–ª–∞ `import_obsidian.py`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≥–¥–µ-—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –æ—Ç—Å—Ç—É–ø–∞ –∏–ª–∏ –µ—Å—Ç—å —Å–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∞–±—ã/–ø—Ä–æ–±–µ–ª—ã.

---

## üîß –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï:

### 1\. –ù–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º–Ω—É—é —Å—Ç—Ä–æ–∫—É:

bash

```
# –ü–æ–∫–∞–∂–µ–º —Å—Ç—Ä–æ–∫—É 202 —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
sed -n '195,210p' uch/apps/blog/management/commands/import_obsidian.py

# –ò–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Å—Ç—Ä–æ–∫—É 202
head -n 202 uch/apps/blog/management/commands/import_obsidian.py | tail -n 1
```

### 2\. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

bash

```
# –ò—Å–ø–æ–ª—å–∑—É–µ–º autopep8 –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
pip install autopep8
autopep8 --in-place uch/apps/blog/management/commands/import_obsidian.py

# –ò–ª–∏ reindent
pip install reindent
reindent -r uch/apps/blog/management/commands/import_obsidian.py
```

### 3\. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª:

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —á–∏—Å—Ç—ã–π —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏:

bash

```
# –°–æ–∑–¥–∞–π—Ç–µ backup
cp uch/apps/blog/management/commands/import_obsidian.py uch/apps/blog/management/commands/import_obsidian_backup.py

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π —Ñ–∞–π–ª
cat > uch/apps/blog/management/commands/import_obsidian_fixed.py << 'EOF'
import os
import glob
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.utils.text import slugify
from django.utils import timezone
from datetime import datetime
import frontmatter
from taggit.models import Tag
import urllib.parse

from uch.apps.blog.models import Article, Category

import shutil
import re
import hashlib
from django.conf import settings

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'
    
    def _process_images(self, content, md_file, article_title, slug):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
        1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
        2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
        3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
        """
        # –ü–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Obsidian
        pattern = r'!\[\[([^\]\n]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\|([^\]]+))?\]\]'
        
        def replace_image(match):
            image_filename = match.group(1).strip()
            caption = match.group(2) or image_filename.split('.')[0]
            
            # –î–µ–∫–æ–¥–∏—Ä—É–µ–º URL-encoded —Å–∏–º–≤–æ–ª—ã
            image_filename = urllib.parse.unquote(image_filename)
            
            # –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –≤ Obsidian
            image_path = md_file.parent / image_filename
            
            # –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–∞–ø—Ä—è–º—É—é, –∏—â–µ–º –≤ –ø–æ–¥–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö
            if not image_path.exists():
                for img_file in md_file.parent.rglob(image_filename):
                    if img_file.is_file():
                        image_path = img_file
                        break
                else:
                    # –ò—â–µ–º —Ñ–∞–π–ª—ã —Å –ø–æ—Ö–æ–∂–∏–º–∏ –∏–º–µ–Ω–∞–º–∏
                    simple_name = image_filename.replace(' ', '').lower()
                    for img_file in md_file.parent.rglob('*'):
                        if img_file.is_file() and img_file.name.replace(' ', '').lower() == simple_name:
                            image_path = img_file
                            break
            
            if image_path.exists() and image_path.is_file():
                try:
                    # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
                    file_hash = hashlib.md5(str(image_path).encode()).hexdigest()[:8]
                    safe_slug = slug.replace('/', '-') if slug else 'no-slug'
                    unique_name = f"{safe_slug}_{file_hash}_{image_path.name}"
                    media_path = settings.MEDIA_ROOT / 'blog' / 'images' / unique_name
                    
                    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                    media_path.parent.mkdir(parents=True, exist_ok=True)
                    
                    # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
                    if not media_path.exists():
                        shutil.copy2(image_path, media_path)
                        self.stdout.write(f'  üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {image_filename} ‚Üí {unique_name}')
                    
                    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É
                    media_url = f"/media/blog/images/{unique_name}"
                    return f'![{caption}]({media_url} "{caption}")'
                
                except Exception as e:
                    self.stdout.write(self.style.WARNING(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è {image_filename}: {e}'))
                    return f'![{caption}](–û–®–ò–ë–ö–ê: {image_filename})'
            
            # –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
            self.stdout.write(self.style.WARNING(f'–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_filename}'))
            return f'![{caption}](–ù–ï –ù–ê–ô–î–ï–ù–û: {image_filename})'
        
        # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        processed_content = re.sub(pattern, replace_image, content)
        return processed_content
    
    def add_arguments(self, parser):
        parser.add_argument(
            'obsidian_path',
            type=str,
            help='–ü—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Obsidian'
        )
        parser.add_argument(
            '--author',
            type=str,
            default='admin',
            help='–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Django, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∞–≤—Ç–æ—Ä–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin)'
        )
        parser.add_argument(
            '--default-category',
            type=str,
            default='Imported',
            help='–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "Imported")'
        )
        parser.add_argument(
            '--dry-run',
            action='store_true',
            help='–ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ, –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î'
        )
        parser.add_argument(
            '--update-existing',
            action='store_true',
            help='–û–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏ (–ø–æ —Å–ª–∞–≥—É)'
        )

    def handle(self, *args, **options):
        obsidian_path = Path(options['obsidian_path'])
        author_username = options['author']
        default_category_name = options['default_category']
        dry_run = options['dry_run']
        update_existing = options['update_existing']

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        if not obsidian_path.exists() or not obsidian_path.is_dir():
            raise CommandError(f'–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è "{obsidian_path}" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
        try:
            author = User.objects.get(username=author_username)
        except User.DoesNotExist:
            raise CommandError(f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∏–º–µ–Ω–µ–º "{author_username}" –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        default_category, created = Category.objects.get_or_create(
            name=default_category_name,
            defaults={'slug': slugify(default_category_name)}
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "{default_category_name}"'))

        # –ü–æ–∏—Å–∫ –≤—Å–µ—Ö .md —Ñ–∞–π–ª–æ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
        md_files = list(obsidian_path.rglob('*.md'))
        self.stdout.write(f'–ù–∞–π–¥–µ–Ω–æ {len(md_files)} .md —Ñ–∞–π–ª–æ–≤ –≤ "{obsidian_path}".')

        imported_count = 0
        updated_count = 0
        skipped_count = 0

        for md_file in md_files:
            try:
                with open(md_file, 'r', encoding='utf-8') as f:
                    post = frontmatter.load(f)

                # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ front matter
                metadata = post.metadata
                content = post.content

                # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
                title = metadata.get('title', md_file.stem)
                
                # –°–æ–∑–¥–∞–Ω–∏–µ slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
                slug_source = metadata.get('slug', title)
                slug = slugify(slug_source)

                # –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π, —Å–æ–∑–¥–∞–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
                if not slug:
                    # –°–æ–∑–¥–∞–µ–º —Ö–µ—à –∏–∑ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª—É
                    file_hash = hashlib.md5(str(md_file).encode()).hexdigest()[:8]
                    
                    slug_candidates = [
                        slugify(md_file.stem),
                        slugify(str(md_file.stem).replace('_', '-')),
                        f"article-{file_hash}",
                    ]
                    
                    for candidate in slug_candidates:
                        if candidate and candidate.strip():
                            slug = candidate
                            break
                    
                    # –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—É—Å—Ç–æ
                    if not slug:
                        slug = f"imported-{file_hash}"

                # –°—Ç–∞—Ç—É—Å
                status = 'draft'
                if metadata.get('published') in [True, 'true', 'True', 'yes']:
                    status = 'published'
                elif metadata.get('status'):
                    status = metadata.get('status')

                # –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                category_name = metadata.get('category', metadata.get('categories'))
                if category_name:
                    if isinstance(category_name, list):
                        category_name = category_name[0]
                    category, _ = Category.objects.get_or_create(
                        name=category_name,
                        defaults={'slug': slugify(category_name)}
                    )
                else:
                    category = default_category

                # –¢–µ–≥–∏
                tags = []
                if 'tags' in metadata:
                    tags_meta = metadata['tags']
                    if isinstance(tags_meta, str):
                        tags = [t.strip() for t in tags_meta.split(',')]
                    elif isinstance(tags_meta, list):
                        tags = [str(t).strip() for t in tags_meta]
                
                # –¢–∞–∫–∂–µ –∏—â–µ–º —Ç–µ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Obsidian #—Ç–µ–≥ –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ
                content_tags = re.findall(r'#([a-zA-Z–∞-—è–ê-–Ø0-9_-]+)', content)
                tags.extend(content_tags)
                tags = list(set(tags))

                # –î–∞—Ç–∞
                published_at = timezone.now()
                if 'date' in metadata:
                    date_value = metadata['date']
                    try:
                        if isinstance(date_value, str):
                            for fmt in ('%Y-%m-%d', '%Y-%m-%d %H:%M:%S', '%d.%m.%Y', '%Y/%m/%d'):
                                try:
                                    published_at = datetime.strptime(date_value, fmt)
                                    break
                                except ValueError:
                                    continue
                            published_at = timezone.make_aware(published_at)
                        else:
                            published_at = date_value
                    except Exception as e:
                        self.stdout.write(self.style.WARNING(f'–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É "{date_value}" –¥–ª—è —Ñ–∞–π–ª–∞ {md_file}: {e}'))

                # –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Å—Ç–∞—Ç—å—è —Å —Ç–∞–∫–∏–º slug?
                existing_article = Article.objects.filter(slug=slug).first()
                
                if existing_article and not update_existing:
                    self.stdout.write(f'[–ü–†–û–ü–£–©–ï–ù–û] –°—Ç–∞—Ç—å—è —Å slug "{slug}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.')
                    skipped_count += 1
                    continue

                # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏
                if not dry_run:
                    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
                    processed_content = self._process_images(content, md_file, title, slug)
                else:
                    processed_content = content

                article_data = {
                    'title': title,
                    'content': processed_content,
                    'slug': slug,
                    'status': status,
                    'category': category,
                    'author': author,
                    'published_at': published_at,
                }

                if dry_run:
                    self.stdout.write(f'[DRY RUN] {"–û–±–Ω–æ–≤–∏—Ç—å" if existing_article else "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"}: "{title}"')
                    self.stdout.write(f'        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category.name}, –¢–µ–≥–∏: {tags}, –°—Ç–∞—Ç—É—Å: {status}')
                    imported_count += 1
                    continue

                # –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
                if existing_article and update_existing:
                    for key, value in article_data.items():
                        setattr(existing_article, key, value)
                    existing_article.save()
                    article = existing_article
                    updated_count += 1
                    action = '–û–ë–ù–û–í–õ–ï–ù–ò–ï'
                else:
                    article = Article.objects.create(**article_data)
                    imported_count += 1
                    action = '–ò–ú–ü–û–†–¢'

                # –û—á–∏—Å—Ç–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∏
                article.tags.clear()
                for tag_name in tags:
                    if tag_name:
                        article.tags.add(tag_name)

                self.stdout.write(f'[{action}] {"–û–±–Ω–æ–≤–ª–µ–Ω–∞" if action == "–û–ë–ù–û–í–õ–ï–ù–ò–ï" else "–°–æ–∑–¥–∞–Ω–∞"}: "{title}" (slug: {slug})')

            except UnicodeDecodeError:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤ —Ñ–∞–π–ª–µ {md_file}. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.'))
                skipped_count += 1
            except Exception as e:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ {md_file}: {e}'))
                skipped_count += 1

        # –ò—Ç–æ–≥–∏
        self.stdout.write('\n' + '='*50)
        if dry_run:
            self.stdout.write(self.style.WARNING(f'DRY RUN –ó–ê–í–ï–†–®–ï–ù. –ë—ã–ª–æ –±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}'))
        else:
            self.stdout.write(self.style.SUCCESS(
                f'–ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}, –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped_count}'
            ))
EOF

# –ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞—Ä—ã–π —Ñ–∞–π–ª
mv uch/apps/blog/management/commands/import_obsidian_fixed.py uch/apps/blog/management/commands/import_obsidian.py
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

bash

```
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
python -m py_compile uch/apps/blog/management/commands/import_obsidian.py

# –ï—Å–ª–∏ –Ω–µ—Ç –æ—à–∏–±–æ–∫, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç
python manage.py import_obsidian /Users/kirillkravcov/obsidian/my-digital-garden-content/posts --author admin --dry-run
```

---

## üéØ –ï–°–õ–ò –í–°–ï –ï–©–ï –û–®–ò–ë–ö–ê:

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ—à–∞–≥–æ–≤—É—é –ø—Ä–æ–≤–µ—Ä–∫—É:

bash

```
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—Ç—É–ø—ã –≤ –ø—Ä–æ–±–ª–µ–º–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
sed -n '195,210p' uch/apps/blog/management/commands/import_obsidian.py | cat -A

# 2. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—Ç—Å—Ç—É–ø—ã –≤—Ä—É—á–Ω—É—é
python3 -c "
lines = []
with open('uch/apps/blog/management/commands/import_obsidian.py', 'r') as f:
    for i, line in enumerate(f, 1):
        if i >= 195 and i <= 210:
            print(f'{i:3}: {repr(line)}')
        lines.append(line.expandtabs(4))

with open('uch/apps/blog/management/commands/import_obsidian_fixed.py', 'w') as f:
    f.writelines(lines)
"

mv uch/apps/blog/management/commands/import_obsidian_fixed.py uch/apps/blog/management/commands/import_obsidian.py
```

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–Ω–æ –∏–∑ —Ä–µ—à–µ–Ω–∏–π –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å. –°–æ–æ–±—â–∏—Ç–µ, –ø–æ–ª—É—á–∏–ª–æ—Å—å –ª–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.**

import\_obsidian.py

PY 16.85KB

–ò—Å–ø—Ä–∞–≤—å

–Ø –≤–∏–∂—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –∫–æ–¥–µ:

1. **–ú–µ—Ç–æ–¥ `_process_images` –æ–±—ä—è–≤–ª–µ–Ω –≤–Ω–µ –∫–ª–∞—Å—Å–∞** (–Ω–µ—Ç –æ—Ç—Å—Ç—É–ø–∞)
2. **–°–º–µ—à–∞–Ω–Ω—ã–µ —Ç–∞–±—ã –∏ –ø—Ä–æ–±–µ–ª—ã** (–æ—Å–æ–±–µ–Ω–Ω–æ –≤–∏–¥–Ω–æ –ø–æ —Å–∏–º–≤–æ–ª—É `\t`)
3. **–ö–æ–¥ –≤–Ω–µ —Ñ—É–Ω–∫—Ü–∏–π** (—Å—Ç—Ä–æ–∫–∏ 35-45)
4. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã –≤ —Ü–∏–∫–ª–µ**

–í–æ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ñ–∞–π–ª–∞:

python

```
import os
import glob
from pathlib import Path
from django.core.management.base import BaseCommand, CommandError
from django.contrib.auth.models import User
from django.utils.text import slugify
from django.utils import timezone
from datetime import datetime
import frontmatter
from taggit.models import Tag
import urllib.parse

from uch.apps.blog.models import Article, Category

import shutil
import re
import hashlib
from django.conf import settings

class Command(BaseCommand):
    help = '–ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç Markdown —Ñ–∞–π–ª—ã –∏–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ Obsidian –≤ –±–ª–æ–≥'

    def _process_images(self, content, md_file, article_title, slug):
        """
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ:
        1. –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ ![[image.png]] —Å—Å—ã–ª–∫–∏
        2. –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã –≤ MEDIA_ROOT/blog/images/
        3. –ó–∞–º–µ–Ω—è–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ Django media URL
        """
        # –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Obsidian
        # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: ![[image.png]], ![[folder/image.png]], ![[image.png|caption]]
        pattern = r'!\[\[([^\]\n]+?\.(?:png|jpg|jpeg|gif|bmp|webp|svg|webm|mp4|pdf))(?:\|([^\]]+))?\]\]'
        
        def replace_image(match):
            # –ú–æ–∂–µ—Ç –±—ã—Ç—å "image.png" –∏–ª–∏ "folder/image.png"
            image_ref = match.group(1).strip()
            # –ò–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–∞–∫ –ø–æ–¥–ø–∏—Å—å
            caption = match.group(2) or Path(image_ref).stem

            # –î–µ–∫–æ–¥–∏—Ä—É–µ–º URL-encoded —Å–∏–º–≤–æ–ª—ã
            image_ref = urllib.parse.unquote(image_ref)
            
            # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ –ø—É—Ç–∏ –∏ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            image_name = Path(image_ref).stem  # –ë–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            image_ref_ext = Path(image_ref).suffix.lower()  # –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

            # –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
            valid_extensions = {'.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp', '.svg'}

            # –ï—Å–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–µ, –ø—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
            if not image_ref_ext or image_ref_ext not in valid_extensions:
                # –ü—Ä–æ–±—É–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
                for ext in valid_extensions:
                    possible_path = md_file.parent / f"{image_name}{ext}"
                    if possible_path.exists():
                        image_ref = f"{image_name}{ext}"
                        break

            # –í–∞—Ä–∏–∞–Ω—Ç—ã –ø—É—Ç–µ–π –¥–ª—è –ø–æ–∏—Å–∫–∞
            search_paths = []

            # 1. –ü—Ä—è–º–æ –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
            search_paths.append(md_file.parent / image_ref)

            # 2. –í –ø–æ–¥–ø–∞–ø–∫–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ md —Ñ–∞–π–ª–∞
            if '/' in image_ref or '\\' in image_ref:
                # –†–∞–∑–±–∏–≤–∞–µ–º –ø—É—Ç—å
                parts = Path(image_ref).parts
                search_paths.append(md_file.parent / Path(*parts))

                # –¢–∞–∫–∂–µ –ø—Ä–æ–±—É–µ–º –Ω–∞–π—Ç–∏ —Ç–æ–ª—å–∫–æ –∏–º—è —Ñ–∞–π–ª–∞
                search_paths.append(md_file.parent / parts[-1])

            # 3. –¢–æ–ª—å–∫–æ –∏–º—è —Ñ–∞–π–ª–∞ (–±–µ–∑ –ø—É—Ç–∏)
            search_paths.append(md_file.parent / Path(image_ref).name)

            # 4. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
            search_paths.extend(list(md_file.parent.rglob(Path(image_ref).name)))

            # 5. –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º —Ñ–∞–π–ª–∞–º —Å –ø–æ—Ö–æ–∂–∏–º –∏–º–µ–Ω–µ–º (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
            clean_name = Path(image_ref).name.replace(' ', '').lower()
            for img_file in md_file.parent.rglob('*'):
                if img_file.is_file() and img_file.name.replace(' ', '').lower() == clean_name:
                    search_paths.append(img_file)

            # –£–±–∏—Ä–∞–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã
            search_paths = list(dict.fromkeys(search_paths))

            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
            self.stdout.write(f'  üîç –ò—â—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {image_ref}')
            self.stdout.write(f'    –í–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–∏—Å–∫–∞: {[str(p) for p in search_paths[:3]]}')

            # –ò—â–µ–º –ø–µ—Ä–≤—ã–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª
            image_path = None
            for search_path in search_paths:
                if search_path.exists() and search_path.is_file():
                    image_path = search_path
                    self.stdout.write(f'    ‚úì –ù–∞–π–¥–µ–Ω–æ: {image_path}')
                    break

            if image_path:
                try:
                    # –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞
                    file_hash = hashlib.md5(str(image_path).encode()).hexdigest()[:8]
                    safe_slug = slug.replace('/', '-') if slug else 'no-slug'
                    unique_name = f"{safe_slug}_{file_hash}_{image_path.name}"
                    media_path = settings.MEDIA_ROOT / 'blog' / 'images' / unique_name

                    # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
                    media_path.parent.mkdir(parents=True, exist_ok=True)

                    # –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
                    if not media_path.exists():
                        shutil.copy2(image_path, media_path)
                        self.stdout.write(f'    üì∏ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: {image_path.name} ‚Üí {unique_name}')
                    else:
                        self.stdout.write(f'    ‚è≠Ô∏è  –£–∂–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ: {unique_name}')

                    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –Ω–æ–≤—É—é —Å—Å—ã–ª–∫—É
                    media_url = f"/media/blog/images/{unique_name}"
                    return f'![{caption}]({media_url} "{caption}")'

                except Exception as e:
                    self.stdout.write(self.style.WARNING(f'    ‚úó –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: {e}'))
                    return f'![{caption}](–û–®–ò–ë–ö–ê: {image_ref})'

            # –§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
            self.stdout.write(self.style.WARNING(f'    ‚úó –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ: {image_ref}'))
            self.stdout.write(f'    –ò—Å–∫–∞–ª–∏ –≤: {md_file.parent}')

            # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
            return f'![{caption}](–ù–ï –ù–ê–ô–î–ï–ù–û: {image_ref})'

        # –ó–∞–º–µ–Ω—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        processed_content = re.sub(pattern, replace_image, content)
        return processed_content

    def add_arguments(self, parser):
        parser.add_argument(
            'obsidian_path',
            type=str,
            help='–ü—É—Ç—å –∫ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Obsidian'
        )
        parser.add_argument(
            '--author',
            type=str,
            default='admin',
            help='–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Django, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω –∞–≤—Ç–æ—Ä–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: admin)'
        )
        parser.add_argument(
            '--default-category',
            type=str,
            default='Imported',
            help='–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "Imported")'
        )
        parser.add_argument(
            '--dry-run',
            action='store_true',
            help='–ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ, –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î'
        )
        parser.add_argument(
            '--update-existing',
            action='store_true',
            help='–û–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏ (–ø–æ —Å–ª–∞–≥—É)'
        )

    def handle(self, *args, **options):
        obsidian_path = Path(options['obsidian_path'])
        author_username = options['author']
        default_category_name = options['default_category']
        dry_run = options['dry_run']
        update_existing = options['update_existing']

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        if not obsidian_path.exists() or not obsidian_path.is_dir():
            raise CommandError(f'–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è "{obsidian_path}" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–µ–π')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞
        try:
            author = User.objects.get(username=author_username)
        except User.DoesNotExist:
            raise CommandError(f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –∏–º–µ–Ω–µ–º "{author_username}" –Ω–µ –Ω–∞–π–¥–µ–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ.')

        # –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        default_category, created = Category.objects.get_or_create(
            name=default_category_name,
            defaults={'slug': slugify(default_category_name)}
        )
        if created:
            self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "{default_category_name}"'))

        # –ü–æ–∏—Å–∫ –≤—Å–µ—Ö .md —Ñ–∞–π–ª–æ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
        md_files = list(obsidian_path.rglob('*.md'))
        self.stdout.write(f'–ù–∞–π–¥–µ–Ω–æ {len(md_files)} .md —Ñ–∞–π–ª–æ–≤ –≤ "{obsidian_path}".')

        imported_count = 0
        updated_count = 0
        skipped_count = 0

        for md_file in md_files:
            # –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ
            self.stdout.write(f'\nüìÑ –û–±—Ä–∞–±–æ—Ç–∫–∞: {md_file.name}')
            self.stdout.write(f'  –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: {md_file.parent}')
            file_list = [f.name for f in md_file.parent.iterdir() if f.is_file()][:5]
            self.stdout.write(f'  –§–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: {file_list}...')
            
            try:
                with open(md_file, 'r', encoding='utf-8') as f:
                    post = frontmatter.load(f)

                # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ front matter
                metadata = post.metadata
                content = post.content

                # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞
                title = metadata.get('title', md_file.stem)

                # –°–æ–∑–¥–∞–Ω–∏–µ slug –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
                slug_source = metadata.get('slug', title)
                slug = slugify(slug_source)

                # –ï—Å–ª–∏ slug –ø—É—Å—Ç–æ–π, —Å–æ–∑–¥–∞–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
                if not slug:
                    slug_candidates = [
                        slugify(md_file.stem),
                        slugify(str(md_file.stem).replace('_', '-')),
                        f"article-{abs(hash(str(md_file))) % 1000000:06d}",
                    ]

                    for candidate in slug_candidates:
                        if candidate and candidate.strip():
                            slug = candidate
                            break

                    # –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø—É—Å—Ç–æ
                    if not slug:
                        slug = f"imported-{abs(hash(str(md_file))) % 100000000:08d}"

                # –°—Ç–∞—Ç—É—Å
                status = 'draft'
                if metadata.get('published') in [True, 'true', 'True', 'yes']:
                    status = 'published'
                elif metadata.get('status'):
                    status = metadata.get('status')

                # –ö–∞—Ç–µ–≥–æ—Ä–∏—è
                category_name = metadata.get('category', metadata.get('categories'))
                if category_name:
                    if isinstance(category_name, list):
                        category_name = category_name[0]
                    category, _ = Category.objects.get_or_create(
                        name=category_name,
                        defaults={'slug': slugify(category_name)}
                    )
                else:
                    category = default_category

                # –¢–µ–≥–∏
                tags = []
                if 'tags' in metadata:
                    tags_meta = metadata['tags']
                    if isinstance(tags_meta, str):
                        tags = [t.strip() for t in tags_meta.split(',')]
                    elif isinstance(tags_meta, list):
                        tags = [str(t).strip() for t in tags_meta]

                # –¢–∞–∫–∂–µ –∏—â–µ–º —Ç–µ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Obsidian #—Ç–µ–≥ –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ
                content_tags = re.findall(r'#([a-zA-Z–∞-—è–ê-–Ø0-9_-]+)', content)
                tags.extend(content_tags)
                tags = list(set(tags))

                # –î–∞—Ç–∞
                published_at = timezone.now()
                if 'date' in metadata:
                    date_value = metadata['date']
                    try:
                        if isinstance(date_value, str):
                            for fmt in ('%Y-%m-%d', '%Y-%m-%d %H:%M:%S', '%d.%m.%Y', '%Y/%m/%d'):
                                try:
                                    published_at = datetime.strptime(date_value, fmt)
                                    break
                                except ValueError:
                                    continue
                            published_at = timezone.make_aware(published_at)
                        else:
                            published_at = date_value
                    except Exception as e:
                        self.stdout.write(self.style.WARNING(f'–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞—Ç—É "{date_value}" –¥–ª—è —Ñ–∞–π–ª–∞ {md_file}: {e}'))

                # –°—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Å—Ç–∞—Ç—å—è —Å —Ç–∞–∫–∏–º slug?
                existing_article = Article.objects.filter(slug=slug).first()

                if existing_article and not update_existing:
                    self.stdout.write(f'[–ü–†–û–ü–£–©–ï–ù–û] –°—Ç–∞—Ç—å—è —Å slug "{slug}" —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ --update-existing –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.')
                    skipped_count += 1
                    continue

                # –î–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞—Ç—å–∏
                if not dry_run:
                    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
                    processed_content = self._process_images(content, md_file, title, slug)
                else:
                    processed_content = content

                article_data = {
                    'title': title,
                    'content': processed_content,
                    'slug': slug,
                    'status': status,
                    'category': category,
                    'author': author,
                    'published_at': published_at,
                }

                if dry_run:
                    self.stdout.write(f'[DRY RUN] {"–û–±–Ω–æ–≤–∏—Ç—å" if existing_article else "–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å"}: "{title}"')
                    self.stdout.write(f'        –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {category.name}, –¢–µ–≥–∏: {tags}, –°—Ç–∞—Ç—É—Å: {status}')
                    imported_count += 1
                    continue

                # –°–æ–∑–¥–∞–Ω–∏–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
                if existing_article and update_existing:
                    for key, value in article_data.items():
                        setattr(existing_article, key, value)
                    existing_article.save()
                    article = existing_article
                    updated_count += 1
                    action = '–û–ë–ù–û–í–õ–ï–ù–ò–ï'
                else:
                    article = Article.objects.create(**article_data)
                    imported_count += 1
                    action = '–ò–ú–ü–û–†–¢'

                # –û—á–∏—Å—Ç–∫–∞ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–∏
                article.tags.clear()
                for tag_name in tags:
                    if tag_name:
                        article.tags.add(tag_name)

                self.stdout.write(f'[{action}] {"–û–±–Ω–æ–≤–ª–µ–Ω–∞" if action == "–û–ë–ù–û–í–õ–ï–ù–ò–ï" else "–°–æ–∑–¥–∞–Ω–∞"}: "{title}" (slug: {slug})')

            except UnicodeDecodeError:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –≤ —Ñ–∞–π–ª–µ {md_file}. –ü—Ä–æ–ø—É—Å–∫–∞–µ–º.'))
                skipped_count += 1
            except Exception as e:
                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–∞ {md_file}: {e}'))
                skipped_count += 1

        # –ò—Ç–æ–≥–∏
        self.stdout.write('\n' + '='*50)
        if dry_run:
            self.stdout.write(self.style.WARNING(f'DRY RUN –ó–ê–í–ï–†–®–ï–ù. –ë—ã–ª–æ –±—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}'))
        else:
            self.stdout.write(self.style.SUCCESS(
                f'–ò–ú–ü–û–†–¢ –ó–ê–í–ï–†–®–ï–ù. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: {imported_count}, –û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}, –ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped_count}'
            ))
```

**–ö–ª—é—á–µ–≤—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

1. **–ú–µ—Ç–æ–¥ `_process_images` —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Å—Ç—É–ø–∞–µ—Ç** –∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ `Command`
2. **–£–±—Ä–∞–Ω—ã —Ç–∞–±—ã**, —Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–µ–ª—ã (4 –ø—Ä–æ–±–µ–ª–∞ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –æ—Ç—Å—Ç—É–ø–∞)
3. **–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `replace_image`** —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `_process_images`
4. **–û—Ç–ª–∞–¥–æ—á–Ω—ã–π –∫–æ–¥** –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–∏ —Ü–∏–∫–ª–∞
5. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—Ç—Å—Ç—É–ø—ã** –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è Python —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

bash

```
python -m py_compile uch/apps/blog/management/commands/import_obsidian.py
```

–ï—Å–ª–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–µ–∑ –æ—à–∏–±–æ–∫, —Ñ–∞–π–ª –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

–∫–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –æ—à–∏–±–æ–∫. –≤ –∞–¥–º–∏–Ω–∫–µ –ø–æ—è–≤–∏–ª–∏—Å—å –≤—Å–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏. –Ω–∞ —Å–∞–π—Ç–µ –Ω–µ—Ç

–û—Ç–ª–∏—á–Ω–æ! –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –∫–∞—Ä—Ç–∏–Ω–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è. –¢–µ–ø–µ—Ä—å –ø—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –Ω–∞ —Å–∞–π—Ç–µ. –≠—Ç–æ **–ø—Ä–æ–±–ª–µ–º–∞ —Å MEDIA\_URL –≤ —à–∞–±–ª–æ–Ω–µ**.

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê: MEDIA\_URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ —à–∞–±–ª–æ–Ω–µ

–ö–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ —à–∞–±–ª–æ–Ω –Ω–µ –∑–Ω–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º.

---

## üîß –†–ï–®–ï–ù–ò–ï 1: –î–æ–±–∞–≤–∏—Ç—å MEDIA\_URL –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç —à–∞–±–ª–æ–Ω–∞

### 1.1. –î–æ–±–∞–≤—å—Ç–µ MEDIA\_URL –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã:

–í `uch/settings.py` –¥–æ–±–∞–≤—å—Ç–µ:

python

```
# uch/settings.py

# –í —Ä–∞–∑–¥–µ–ª–µ TEMPLATES –¥–æ–±–∞–≤—å—Ç–µ 'django.template.context_processors.media'
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
                'django.template.context_processors.media',  # <-- –î–û–ë–ê–í–¨–¢–ï –≠–¢–£ –°–¢–†–û–ö–£
                'uch.apps.blog.context_processors.blog_context',  # –í–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
            ],
        },
    },
]
```

---

### 1.2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ MEDIA\_URL –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —à–∞–±–ª–æ–Ω–µ:

–í—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –æ—Ç–ª–∞–¥–∫—É –≤ `article_detail.html`:

django

```
<!-- uch/apps/blog/templates/blog/article_detail.html -->
{% extends "base.html" %}
{% load markdownify %}

{% block content %}
<!-- –í–†–ï–ú–ï–ù–ù–ê–Ø –û–¢–õ–ê–î–ö–ê -->
<div style="background: #f0f0f0; padding: 10px; margin-bottom: 20px; border: 1px solid #ccc;">
    <h4>–û—Ç–ª–∞–¥–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤:</h4>
    <p>MEDIA_URL: {{ MEDIA_URL|default:"–ù–ï –£–°–¢–ê–ù–û–í–õ–ï–ù" }}</p>
    <p>DEBUG: {{ debug|default:"–ù–ï–¢" }}</p>
    <p>–°—Ç–∞—Ç—å—è: {{ article.title }}</p>
</div>
<!-- –ö–û–ù–ï–¶ –û–¢–õ–ê–î–ö–ò -->

<article>
    <!-- ... –≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ ... -->
</article>
{% endblock %}
```

---

## üîß –†–ï–®–ï–ù–ò–ï 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å URL –∫–∞—Ä—Ç–∏–Ω–æ–∫ –≤—Ä—É—á–Ω—É—é

### 2.1. –°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫:

### 2.2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä –≤ —à–∞–±–ª–æ–Ω–µ:

django

```
<!-- article_detail.html -->
{% load media_filters %}

<!-- –í –±–ª–æ–∫–µ —Å markdownify: -->
<div class="markdown-content">
    {% comment %}
    –ü—Ä–æ–±—É–µ–º —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:
    1. –°–Ω–∞—á–∞–ª–∞ markdownify (–ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç Markdown –≤ HTML)
    2. –ó–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω—è–µ–º –Ω–∞—à —Ñ–∏–ª—å—Ç—Ä –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫
    {% endcomment %}
    
    {{ article.content|markdownify|fix_media_url|safe }}
</div>
```

---

## üîß –†–ï–®–ï–ù–ò–ï 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ urls.py

### 3.1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ uch/urls.py –µ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤:

python

```
# uch/urls.py
from django.conf import settings
from django.conf.urls.static import static
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('markdownx/', include('markdownx.urls')),
    path('', include('uch.apps.blog.urls')),
]

# –í–ê–ñ–ù–û: –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Å–∞–º–æ–º –∫–æ–Ω—Ü–µ
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)
```

---

## üîß –†–ï–®–ï–ù–ò–ï 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤ –Ω–∞–ø—Ä—è–º—É—é

### 4.1. –ù–∞–π–¥–∏—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

bash

```
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–æ—Å—å
ls -la uch-backend/media/blog/images/

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
# -rw-r--r--  1 user  staff  12345 Dec  9 12:00 test-image-paths_aa3264a7_Kirillkravt.png
# -rw-r--r--  1 user  staff  23456 Dec  9 12:00 test-image-paths_f6104e59_–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞.png
```

### 4.2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–º—É—é:

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ URL —Ç–∏–ø–∞:

text

```
http://localhost:8000/media/blog/images/test-image-paths_aa3264a7_Kirillkravt.png
```

**–ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è** \- –∑–Ω–∞—á–∏—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã, –ø—Ä–æ–±–ª–µ–º–∞ –≤ —à–∞–±–ª–æ–Ω–µ.  
**–ï—Å–ª–∏ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è** \- –ø—Ä–æ–±–ª–µ–º–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π MEDIA\_URL –≤ urls.py.

---

## üîß –†–ï–®–ï–ù–ò–ï 5: –í—Ä–µ–º–µ–Ω–Ω–æ–µ –±—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 5.1. –î–æ–±–∞–≤—å—Ç–µ –±–∞–∑–æ–≤—ã–π URL –≤ —à–∞–±–ª–æ–Ω:

–í `base.html` –¥–æ–±–∞–≤—å—Ç–µ –≤ `<head>`:

html

```
<!-- uch/templates/base.html -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Universal Creative Hub{% endblock %}</title>
    
    <!-- –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Ç–µ–≥ -->
    <base href="http://localhost:8000/" />
    
    <!-- ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ ... -->
</head>
```

---

## üß™ –¢–ï–°–¢ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò:

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ MEDIA\_URL –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç-–≤—å—é:

python

```
# uch/apps/blog/views.py - –¥–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—É—é –≤—å—é
def test_media(request):
    from django.conf import settings
    from django.http import HttpResponse
    import json
    
    data = {
        'MEDIA_URL': settings.MEDIA_URL,
        'MEDIA_ROOT': str(settings.MEDIA_ROOT),
        'DEBUG': settings.DEBUG,
    }
    
    return HttpResponse(json.dumps(data, indent=2), content_type='application/json')
```

python

```
# uch/apps/blog/urls.py - –¥–æ–±–∞–≤—å—Ç–µ –º–∞—Ä—à—Ä—É—Ç
urlpatterns = [
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã ...
    path('test-media/', views.test_media, name='test_media'),
]
```

–ü–µ—Ä–µ–π–¥–∏—Ç–µ: `http://localhost:8000/blog/test-media/`

---

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —à–∞–±–ª–æ–Ω–∞ —Å raw content

–í—Ä–µ–º–µ–Ω–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –≤ —à–∞–±–ª–æ–Ω:

django

```
<!-- –í article_detail.html, –ü–û–°–õ–ï –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç—å–∏: -->
<hr>
<h3>Raw content (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏):</h3>
<pre style="background: #f8f9fa; padding: 10px; overflow: auto; max-height: 300px;">
{{ article.content|safe }}
</pre>
```

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è.

---

## üìã –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å `settings.py`** \- –¥–æ–±–∞–≤–ª–µ–Ω –ª–∏ `django.template.context_processors.media`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å `urls.py`** \- –µ—Å—Ç—å –ª–∏ `static(settings.MEDIA_URL, ...)`
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª—É –Ω–∞–ø—Ä—è–º—É—é** –≤ –±—Ä–∞—É–∑–µ—Ä–µ
4. **–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ª–∞–¥–∫—É –≤ —à–∞–±–ª–æ–Ω** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ MEDIA\_URL
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç—å–∏** \- –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–∏ —Å—Å—ã–ª–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è

---

## üöÄ –°–ê–ú–û–ï –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï:

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –±—ã—Å—Ç—Ä–æ –ø–æ—á–∏–Ω–∏—Ç—å, –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω–µ—Ü `uch/urls.py` **–ë–ï–ó —É—Å–ª–æ–≤–∏—è if DEBUG**:

python

```
# –í –ö–û–ù–¶–ï uch/urls.py –î–û–ë–ê–í–¨–¢–ï:
urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ.

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫—É –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ñ–∞–π–ª–æ–≤ (–†–µ—à–µ–Ω–∏–µ 4.2). –°–æ–æ–±—â–∏—Ç–µ:**

1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ –ø—Ä—è–º–æ–º—É URL?
2. –ß—Ç–æ –≤—ã–≤–æ–¥–∏—Ç –æ—Ç–ª–∞–¥–∫–∞ –≤ —à–∞–±–ª–æ–Ω–µ (MEDIA\_URL –∑–Ω–∞—á–µ–Ω–∏–µ)?

–∏–¥—É –ø–æ –ø–µ—Ä–≤–æ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É –û—Ç–ª–∞–¥–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤: MEDIA\_URL: /media/ DEBUG: –ù–ï–¢ –°—Ç–∞—Ç—å—è: –¢–µ—Å—Ç –ø—É—Ç–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–û—Ç–ª–∏—á–Ω–æ! **MEDIA\_URL: /media/** \- —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –ó–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Django, –∞ –≤ **—Å–∞–º–∏—Ö —Å—Å—ã–ª–∫–∞—Ö –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**.

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º, –∫–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ —Å—Å—ã–ª–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ —Å—Ç–∞—Ç—å–∏.

---

## üîç –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∏–º raw content —Å—Ç–∞—Ç—å–∏

–î–æ–±–∞–≤–∏–º –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—É—é –æ—Ç–ª–∞–¥–∫—É –≤ —à–∞–±–ª–æ–Ω:

django

```
<!-- uch/apps/blog/templates/blog/article_detail.html -->
{% extends "base.html" %}
{% load markdownify %}

{% block content %}
<!-- –î–ï–¢–ê–õ–¨–ù–ê–Ø –û–¢–õ–ê–î–ö–ê -->
<div style="background: #f0f0f0; padding: 15px; margin-bottom: 20px; border: 1px solid #ccc;">
    <h4>üîß –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤:</h4>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
        <div>
            <h5>–ù–∞—Å—Ç—Ä–æ–π–∫–∏:</h5>
            <p><strong>MEDIA_URL:</strong> {{ MEDIA_URL }}</p>
            <p><strong>–°—Ç–∞—Ç—å—è ID:</strong> {{ article.id }}</p>
            <p><strong>Slug:</strong> {{ article.slug }}</p>
        </div>
        <div>
            <h5>–¢–µ—Å—Ç —Å—Å—ã–ª–æ–∫:</h5>
            <p>–¢–µ—Å—Ç 1: <code>/media/blog/images/test_123.jpg</code></p>
            <p>–¢–µ—Å—Ç 2: <code>media/blog/images/test_123.jpg</code></p>
            <p>–¢–µ—Å—Ç 3: <code>http://localhost:8000/media/blog/images/test_123.jpg</code></p>
        </div>
    </div>
    
    <hr>
    
    <h5>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç–∞—Ç—å–∏ (–ø–µ—Ä–≤—ã–µ 1000 —Å–∏–º–≤–æ–ª–æ–≤):</h5>
    <pre style="background: white; padding: 10px; border: 1px solid #ddd; max-height: 200px; overflow: auto;">
{{ article.content|truncatechars:1000 }}
    </pre>
    
    <h5>HTML –ø–æ—Å–ª–µ markdownify:</h5>
    <div style="background: white; padding: 10px; border: 1px solid #ddd; max-height: 200px; overflow: auto;">
        {{ article.content|markdownify|safe }}
    </div>
</div>
<!-- –ö–û–ù–ï–¶ –û–¢–õ–ê–î–ö–ò -->

<article>
    <!-- ... –≤–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –¥–ª—è —Å—Ç–∞—Ç—å–∏ ... -->
    <div class="markdown-content">
        {{ article.content|markdownify }}
    </div>
</article>
{% endblock %}
```

---

## üîç –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∏–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–æ–ª–µ `content` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

bash

```
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ Django shell
python manage.py shell
```

python

```
# –í Django shell –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
from uch.apps.blog.models import Article

# –ù–∞–π–¥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç–∞—Ç—å—é
article = Article.objects.get(slug="test-image-paths")

# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞—á–∞–ª–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
print("–ü–µ—Ä–≤—ã–µ 500 —Å–∏–º–≤–æ–ª–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:")
print(article.content[:500])

# –ò–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
with open('/tmp/article_content.txt', 'w', encoding='utf-8') as f:
    f.write(article.content)

print("–ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ /tmp/article_content.txt")
```

---

## üîç –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∏–º –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –Ω–∞ –¥–∏—Å–∫–µ

bash

```
# –ù–∞–π–¥–∏—Ç–µ –≤—Å–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã –¥–ª—è —ç—Ç–æ–π —Å—Ç–∞—Ç—å–∏
cd uch-backend/media/blog/images/
ls -la | grep -i "test-image-paths"

# –ò–ª–∏ –≤—Å–µ —Ñ–∞–π–ª—ã
ls -la
```

---

## üéØ –í–û–ó–ú–û–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø:

### –ü—Ä–æ–±–ª–µ–º–∞ A: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –≤ src –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–ï—Å–ª–∏ –≤ src —É–∫–∞–∑–∞–Ω–æ `media/blog/images/...` –±–µ–∑ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —Å–ª–µ—à–∞:

- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**`media/blog/images/file.jpg`
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**`/media/blog/images/file.jpg`

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤ –º–µ—Ç–æ–¥–µ `_process_images`:

python

```
# –í –º–µ—Ç–æ–¥–µ _process_images, –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É:
media_url = f"/media/blog/images/{unique_name}"

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—É—Ç—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å /media/
if not media_url.startswith('/media/'):
    media_url = '/media/' + media_url.lstrip('/')
```

### –ü—Ä–æ–±–ª–µ–º–∞ B: markdownify –Ω–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç Markdown –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ markdownify —Ä–∞–±–æ—Ç–∞–µ—Ç:

django

```
<!-- –í—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –≤ —à–∞–±–ª–æ–Ω–µ -->
<h3>–¢–µ—Å—Ç markdownify:</h3>
<p>–ü—Ä–æ—Å—Ç–æ–π Markdown: **–∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**</p>
<p>–ü–æ—Å–ª–µ markdownify: {{ "**–∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**"|markdownify|safe }}</p>

<p>–°—Å—ã–ª–∫–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º: ![](/media/blog/images/test.jpg)</p>
<p>–ü–æ—Å–ª–µ markdownify: {{ "![](/media/blog/images/test.jpg)"|markdownify|safe }}</p>
```

### –ü—Ä–æ–±–ª–µ–º–∞ C: –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –∏–ª–∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–∞–º–∏

–ï—Å–ª–∏ –≤ –∏–º–µ–Ω–∞—Ö —Ñ–∞–π–ª–æ–≤ –µ—Å—Ç—å —Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã –∏–ª–∏ —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã:

python

```
# –í –º–µ—Ç–æ–¥–µ _process_images –¥–æ–±–∞–≤—å—Ç–µ:
import urllib.parse

# –ö–æ–¥–∏—Ä—É–µ–º URL –ø—Ä–∞–≤–∏–ª—å–Ω–æ
media_url = f"/media/blog/images/{urllib.parse.quote(unique_name)}"
return f'![{caption}]({media_url} "{caption}")'
```

---

## üß™ –ë–´–°–¢–†–´–ô –¢–ï–°–¢ –†–ê–ë–û–¢–´ –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô:

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç—É—é —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç–∞—Ç—å—é –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É:

1. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é** –≤ –∞–¥–º–∏–Ω–∫–µ
2. **–í—Å—Ç–∞–≤—å—Ç–µ –ø—Ä—è–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:**`![](/media/blog/images/–ò–ú–Ø_–í–ê–®–ï–ì–û_–§–ê–ô–õ–ê.png)`
3. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ**

**–ï—Å–ª–∏ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è**, –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, –∫–∞–∫ markdownify –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫–∏ –∏–∑ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞.

---

## üîß –≠–ö–°–¢–†–ï–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å safe –≤–º–µ—Å—Ç–æ markdownify

–í—Ä–µ–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ —à–∞–±–ª–æ–Ω:

django

```
<!-- –ó–ê–ú–ï–ù–ò–¢–ï: -->
<div class="markdown-content">
    {{ article.content|markdownify }}
</div>

<!-- –ù–ê: -->
<div class="markdown-content">
    {{ article.content|safe }}
</div>
```

**–ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è** \- –∑–Ω–∞—á–∏—Ç markdownify –ª–æ–º–∞–µ—Ç —Å—Å—ã–ª–∫–∏.

---

## üìã –ß–ï–ö–õ–ò–°–¢ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å raw content** –≤ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–º –±–ª–æ–∫–µ
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** —á–µ—Ä–µ–∑ Django shell
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ –¥–∏—Å–∫–µ**
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å markdownify** –Ω–∞ –ø—Ä–æ—Å—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ
5. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç–∞—Ç—å—é** —Å –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–æ–π

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É raw content (–®–∞–≥ 1) –∏ —Å–æ–æ–±—â–∏—Ç–µ:**

1. –ö–∞–∫–∏–µ –∏–º–µ–Ω–Ω–æ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∏–¥–Ω—ã –≤ raw content?
2. –ü—Ä–∏–º–µ—Ä –æ–¥–Ω–æ–π –ø–æ–ª–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–∑ raw content.

1 –¥–æ–±–∞–≤–∏–ª –¥–µ—Ç–∞–ª—å–Ω—É—é –æ—Ç–ª–∞–¥–∫—É 2 (venv) kirillkravcov@MacBook-Pro-Kirill uch-backend % python manage.py shell ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –º–µ–¥–∏–∞ —Å–æ–∑–¥–∞–Ω–∞: /Users/kirillkravcov/UniversalCreativeHub/uch-backend/media Python 3.8.9 (default, May 17 2022, 12:55:41) \[Clang 13.1.6 (clang-1316.0.21.2.5)\] on darwin Type "help", "copyright", "credits" or "license" for more information. (InteractiveConsole) >>> # –í Django shell –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: >>> from uch.apps.blog.models import Article >>> >>> # –ù–∞–π–¥–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç–∞—Ç—å—é >>> article = Article.objects.get(slug="test-image-paths") # –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞—á–∞–ª–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ print("–ü–µ—Ä–≤—ã–µ 500 —Å–∏–º–≤–æ–ª–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:") print(article.content\[:500\]) >>> >>> # –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞—á–∞–ª–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ >>> print("–ü–µ—Ä–≤—ã–µ 500 —Å–∏–º–≤–æ–ª–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:") –ü–µ—Ä–≤—ã–µ 500 —Å–∏–º–≤–æ–ª–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: >>> print(article.content\[:500\]) # –¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø—É—Ç–µ–π ## 1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ!\[test-image\](/media/blog/images/test-image-paths\_ab9363de\_test-image.png "test-image") ## 2. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–æ–¥–ø–∞–ø–∫–µ!\[test-image\](/media/blog/images/test-image-paths\_ab9363de\_test-image.png "test-image") ## 3. –° –ø–æ–¥–ø–∏—Å—å—é!\[–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞\](/media/blog/images/test-image-paths\_aa3264a7\_Kirillkravt.png "–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞") ## 4. –° –ø—Ä–æ–±–µ–ª–∞–º–∏ –≤ –∏–º–µ–Ω–∏!\[–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33\](/media/blog/images/test-image-paths\_ >>> >>> # –ò–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ >>> with open('/tmp/article\_content.txt', 'w', encoding='utf-8') as f:... f.write(article.content)... 587 >>> print("–ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ /tmp/article\_content.txt") 3 (venv) kirillkravcov@MacBook-Pro-Kirill images % ls -la total 12640 drwxr-xr-x 7 kirillkravcov staff 224 Dec 9 14:35. drwxr-xr-x 3 kirillkravcov staff 96 Dec 9 11:25.. -rw-r--r--@ 1 kirillkravcov staff 1861265 Nov 30 2024 article-944429\_3aa473c8\_–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2022-02-05 –≤ 15.41.39.png -rw-r--r-- 1 kirillkravcov staff 109508 Sep 1 2023 test-image-paths\_aa3264a7\_Kirillkravt.png -rw-r--r--@ 1 kirillkravcov staff 1861265 Nov 30 2024 test-image-paths\_ab9363de\_test-image.png -rw-r--r--@ 1 kirillkravcov staff 1055031 Apr 25 2023 test-image-paths\_f6104e59\_–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33.png -rw-r--r--@ 1 kirillkravcov staff 1573766 Feb 7 2022 test-images-import\_b36f9cd5\_–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2022-02-07 –≤ 11.41.47.png –ü—Ä–æ–≤–µ—Ä—å, —Ä–µ—à–∞–µ–º —Ç–æ–ª—å–∫–æ —ç—Ç–æ. –î–∞–ª—å—à–µ –Ω–µ –∏–¥–µ–º

–û—Ç–ª–∏—á–Ω–æ! –¢–µ–ø–µ—Ä—å —è –≤–∏–∂—É –ø—Ä–æ–±–ª–µ–º—É.

**–ü—Ä–æ–±–ª–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞:**

1. **–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö** —Å—Å—ã–ª–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ: `/media/blog/images/test-image-paths_ab9363de_test-image.png`
2. **–§–∞–π–ª—ã –Ω–∞ –¥–∏—Å–∫–µ** —Å—É—â–µ—Å—Ç–≤—É—é—Ç: `test-image-paths_ab9363de_test-image.png`
3. **MEDIA\_URL –Ω–∞—Å—Ç—Ä–æ–µ–Ω**: `/media/`

–ù–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è. –ó–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ **–±—Ä–∞—É–∑–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å —ç—Ç–∏ —Ñ–∞–π–ª—ã**.

---

## üîç –ü–†–û–í–ï–†–ö–ê: –î–æ—Å—Ç—É–ø–Ω—ã –ª–∏ —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é?

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –æ–¥–Ω—É –∏–∑ —Å—Å—ã–ª–æ–∫ –Ω–∞–ø—Ä—è–º—É—é:

text

```
http://localhost:8000/media/blog/images/test-image-paths_ab9363de_test-image.png
```

**–ß—Ç–æ –≤–∏–¥–∏—Ç–µ?**

1. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è** \- –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ –≤ HTML/CSS
2. **404 –æ—à–∏–±–∫–∞** \- –∑–Ω–∞—á–∏—Ç –ø—Ä–æ–±–ª–µ–º–∞ —Å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π Django
3. **403 –æ—à–∏–±–∫–∞** \- –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

---

## üõ† –†–ï–®–ï–ù–ò–ï 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ urls.py

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `uch/urls.py` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤:

python

```
# uch/urls.py - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ
from django.conf import settings
from django.conf.urls.static import static
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('markdownx/', include('markdownx.urls')),
    path('', include('uch.apps.blog.urls')),
]

# –≠–¢–û –î–û–õ–ñ–ù–û –ë–´–¢–¨ –ü–û–°–õ–ï urlpatterns
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π.**

---

## üõ† –†–ï–®–ï–ù–ò–ï 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

bash

```
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º
ls -la uch-backend/media/blog/images/test-image-paths_ab9363de_test-image.png

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ: -rw-r--r--
# –ï—Å–ª–∏ –Ω–µ—Ç, –∏—Å–ø—Ä–∞–≤—å—Ç–µ:
chmod 644 uch-backend/media/blog/images/*.png
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å MIME-—Ç–∏–ø—ã

Django –º–æ–∂–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å MIME-—Ç–∏–ø –¥–ª—è —Ñ–∞–π–ª–æ–≤ —Å –ø—Ä–æ–±–µ–ª–∞–º–∏ –∏–ª–∏ –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π. –î–æ–±–∞–≤—å—Ç–µ –≤ `settings.py`:

python

```
# uch/settings.py
import os

# –î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
DATA_UPLOAD_MAX_MEMORY_SIZE = 52428800  # 50 MB
FILE_UPLOAD_MAX_MEMORY_SIZE = 52428800  # 50 MB

# –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —Ä—É—Å—Å–∫–∏–º–∏ –∏–º–µ–Ω–∞–º–∏ —Ñ–∞–π–ª–æ–≤
DEFAULT_CHARSET = 'utf-8'
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 4: –í—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—Ö–æ–¥–Ω–æ–π –ø—É—Ç—å (—Ç–µ—Å—Ç)

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

python

```
# uch/urls.py - –¥–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç
from django.views.static import serve
from django.conf import settings

urlpatterns = [
    # ... –≤–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Ä—à—Ä—É—Ç—ã ...
    
    # –¢–µ—Å—Ç–æ–≤—ã–π –º–∞—Ä—à—Ä—É—Ç –¥–ª—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤
    path('test-media/<path:path>', serve, {
        'document_root': settings.MEDIA_ROOT,
        'show_indexes': True,
    }),
]
```

–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

text

```
http://localhost:8000/test-media/blog/images/test-image-paths_ab9363de_test-image.png
```

---

## üß™ –ë–´–°–¢–†–´–ô –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ô –¢–ï–°–¢:

–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π HTML —Ñ–∞–π–ª –¥–ª—è —Ç–µ—Å—Ç–∞:

bash

```
# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π HTML —Ñ–∞–π–ª
cat > /tmp/test_image.html << 'EOF'
<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</title>
</head>
<body>
    <h1>–¢–µ—Å—Ç 1: –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞</h1>
    <img src="http://localhost:8000/media/blog/images/test-image-paths_ab9363de_test-image.png" 
         alt="–¢–µ—Å—Ç 1" width="300">
    
    <h1>–¢–µ—Å—Ç 2: –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞</h1>
    <img src="/media/blog/images/test-image-paths_ab9363de_test-image.png" 
         alt="–¢–µ—Å—Ç 2" width="300">
    
    <h1>–¢–µ—Å—Ç 3: –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª</h1>
    <img src="file:///Users/kirillkravcov/UniversalCreativeHub/uch-backend/media/blog/images/test-image-paths_ab9363de_test-image.png" 
         alt="–¢–µ—Å—Ç 3" width="300">
</body>
</html>
EOF

# –û—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open /tmp/test_image.html
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò:

1. **–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –≤ –±—Ä–∞—É–∑–µ—Ä–µ**: `http://localhost:8000/media/blog/images/test-image-paths_ab9363de_test-image.png`
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ `urls.py`** \- –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ static()
3. **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º** (644)
4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞** (F12 ‚Üí Console) –Ω–∞ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏

---

## üîß –ï–°–õ–ò –§–ê–ô–õ –ù–ï –î–û–°–¢–£–ü–ï–ù –ü–û –ü–†–Ø–ú–û–ô –°–°–´–õ–ö–ï:

–î–æ–±–∞–≤—å—Ç–µ –≤ `uch/urls.py` **–ë–ï–ó —É—Å–ª–æ–≤–∏—è DEBUG**:

python

```
# –í –ö–û–ù–¶–ï uch/urls.py, –ü–û–°–õ–ï –≤—Å–µ—Ö urlpatterns:
urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

**–≠—Ç–æ –æ—Ç–∫–ª—é—á–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É DEBUG —Ä–µ–∂–∏–º–∞ –¥–ª—è –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤.**

---

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ —Å–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.** –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.

–ø—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∫ —Ñ–∞–π–ª—É –µ—Å—Ç—å, (venv) kirillkravcov@MacBook-Pro-Kirill images % ls -la test-image-paths\_ab9363de\_test-image.png -rw-r--r--@ 1 kirillkravcov staff 1861265 Nov 30 2024 test-image-paths\_ab9363de\_test-image.png

–û—Ç–ª–∏—á–Ω–æ! –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª—É –µ—Å—Ç—å. –ó–Ω–∞—á–∏—Ç **–ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤ Django –∏–ª–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ**, –∞ –≤ **HTML/CSS –∏–ª–∏ –±—Ä–∞—É–∑–µ—Ä–µ**.

---

## üîç –ü–†–û–ë–õ–ï–ú–ê: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ HTML –µ—Å—Ç—å, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **CSS —Å–∫—Ä—ã–≤–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** (display: none, opacity: 0)
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã** (width: 0, height: 0)
3. **AdBlock/–±—Ä–∞—É–∑–µ—Ä–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è** –±–ª–æ–∫–∏—Ä—É—é—Ç
4. **–û—à–∏–±–∫–∞ –≤ HTML —Ä–∞–∑–º–µ—Ç–∫–µ**
5. **markdownify –ª–æ–º–∞–µ—Ç HTML**

---

## üõ† –†–ï–®–ï–ù–ò–ï 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π HTML

–î–æ–±–∞–≤–∏–º –≤ —à–∞–±–ª–æ–Ω –≤—ã–≤–æ–¥ **–ø–æ–ª–Ω–æ–≥–æ HTML –ø–æ—Å–ª–µ markdownify**:

django

```
<!-- –í article_detail.html, –≤ –±–ª–æ–∫–µ –æ—Ç–ª–∞–¥–∫–∏ –¥–æ–±–∞–≤—å—Ç–µ: -->
<h5>–ü–æ–ª–Ω—ã–π HTML –ø–æ—Å–ª–µ markdownify:</h5>
<textarea style="width: 100%; height: 300px; font-family: monospace;">
{% filter force_escape %}
{{ article.content|markdownify }}
{% endfilter %}
</textarea>

<h5>HTML –ø–æ—Å–ª–µ safe:</h5>
<textarea style="width: 100%; height: 200px; font-family: monospace;">
{% filter force_escape %}
{{ article.content|safe }}
{% endfilter %}
</textarea>
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å –ø–æ–º–æ—â—å—é —á–∏—Å—Ç–æ–≥–æ HTML

–í—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–º–µ–Ω–∏—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞:

django

```
<!-- –ó–ê–ö–û–ú–ú–ï–ù–¢–ò–†–£–ô–¢–ï –≠–¢–û: -->
<!-- <div class="markdown-content">
    {{ article.content|markdownify }}
</div> -->

<!-- –ò –î–û–ë–ê–í–¨–¢–ï –≠–¢–û: -->
<div class="markdown-content" style="border: 2px solid red; padding: 20px;">
    <h3>–¢–µ—Å—Ç 1: –ü—Ä—è–º–æ–π HTML</h3>
    <img src="/media/blog/images/test-image-paths_ab9363de_test-image.png" 
         alt="–¢–µ—Å—Ç –ø—Ä—è–º–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ" 
         style="max-width: 300px; border: 3px solid green;">
    
    <h3>–¢–µ—Å—Ç 2: –ò–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—á–µ—Ä–µ–∑ safe)</h3>
    <div style="border: 1px solid blue; padding: 10px;">
        {{ article.content|safe }}
    </div>
    
    <h3>–¢–µ—Å—Ç 3: –ò–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—á–µ—Ä–µ–∑ markdownify)</h3>
    <div style="border: 1px solid orange; padding: 10px;">
        {{ article.content|markdownify }}
    </div>
</div>
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CSS —Å—Ç–∏–ª–∏

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω–µ—Ü `style.css` –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

css

```
/* uch-backend/static/css/style.css - –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω–µ—Ü */

/* –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
.markdown-content img {
    border: 3px solid #00ff00 !important; /* –ó–µ–ª–µ–Ω–∞—è —Ä–∞–º–∫–∞ */
    background-color: rgba(255, 0, 0, 0.1) !important; /* –ö—Ä–∞—Å–Ω—ã–π —Ñ–æ–Ω */
    display: block !important;
    max-width: 100% !important;
    height: auto !important;
}

/* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Å–∫—Ä—ã—Ç—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è */
.markdown-content img[style*="display: none"],
.markdown-content img[style*="visibility: hidden"] {
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
}

/* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ */
.debug-image {
    position: relative;
}

.debug-image::after {
    content: '‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ';
    position: absolute;
    top: 0;
    left: 0;
    background: green;
    color: white;
    padding: 2px 5px;
    font-size: 10px;
}
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É** —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
2. **–ù–∞–∂–º–∏—Ç–µ F12** ‚Üí –≤–∫–ª–∞–¥–∫–∞ **Console**
3. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫–∏** (–∫—Ä–∞—Å–Ω—ã–π —Ç–µ–∫—Å—Ç)
4. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É Network**
5. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (F5)
6. **–ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º** (—Ñ–∏–ª—å—Ç—Ä: img)

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**

- ‚úÖ –°—Ç–∞—Ç—É—Å 200 –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ > 0
- ‚úÖ –¢–∏–ø Content-Type: image/png

---

## üõ† –†–ï–®–ï–ù–ò–ï 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HTML –≤–∞–ª–∏–¥–∞—Ç–æ—Ä

–î–æ–±–∞–≤—å—Ç–µ –≤ —à–∞–±–ª–æ–Ω –ø—Ä–æ–≤–µ—Ä–∫—É:

django

```
<!-- –í article_detail.html -->
<div style="background: #ffe6e6; padding: 10px; margin: 10px 0;">
    <h4>üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ HTML:</h4>
    <p>–û—Ç–∫—Ä–æ–π—Ç–µ <a href="https://validator.w3.org/#validate_by_input" target="_blank">–≤–∞–ª–∏–¥–∞—Ç–æ—Ä W3C</a></p>
    <p>–í—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç HTML:</p>
    <textarea id="htmlForValidation" style="width: 100%; height: 200px; font-family: monospace;">
<!DOCTYPE html>
<html>
<head>
    <title>–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏</title>
</head>
<body>
    <div class="markdown-content">
        {{ article.content|markdownify|safe }}
    </div>
</body>
</html>
    </textarea>
    <button onclick="copyToClipboard()">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å HTML</button>
</div>

<script>
function copyToClipboard() {
    var textarea = document.getElementById('htmlForValidation');
    textarea.select();
    document.execCommand('copy');
    alert('HTML —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
}
</script>
```

---

## üß™ –¢–ï–°–¢: –°–æ–∑–¥–∞–π—Ç–µ —á–∏—Å—Ç—É—é —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç–∞—Ç—å—é

–ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å—Ç–∞—Ç—å—é —Å —Ç–∞–∫–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º:

markdown

```
# –¢–µ—Å—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## –¢–µ—Å—Ç 1: –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞
![](/media/blog/images/test-image-paths_ab9363de_test-image.png)

## –¢–µ—Å—Ç 2: –ß–µ—Ä–µ–∑ HTML
<img src="/media/blog/images/test-image-paths_ab9363de_test-image.png" 
     alt="–¢–µ—Å—Ç HTML" 
     width="300" 
     style="border: 3px solid red;">

## –¢–µ—Å—Ç 3: –ú–∞–ª–µ–Ω—å–∫–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
![](/media/blog/images/test-image-paths_ab9363de_test-image.png){: width="100"}
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Console –±—Ä–∞—É–∑–µ—Ä–∞** –Ω–∞ –æ—à–∏–±–∫–∏
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Network –≤–∫–ª–∞–¥–∫—É** \- –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è?
3. **–û—Ç–∫–ª—é—á–∏—Ç—å AdBlock –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è** –±—Ä–∞—É–∑–µ—Ä–∞
4. **–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä** (Chrome/Firefox/Safari)
5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π HTML** —á–µ—Ä–µ–∑ "–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞"
6. **–í—Ä–µ–º–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç —Å —á–∏—Å—Ç—ã–º HTML** –±–µ–∑ markdownify

---

## üîß –≠–ö–°–¢–†–ï–ù–ù–û–ï –†–ï–®–ï–ù–ò–ï: –û—Ç–∫–ª—é—á–∏—Ç—å markdownify

–í—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–º–µ–Ω–∏—Ç–µ –≤ —à–∞–±–ª–æ–Ω–µ:

django

```
<!-- –ë–´–õ–û: -->
{{ article.content|markdownify }}

<!-- –°–¢–ê–õ–û: -->
{{ article.content|safe }}
```

**–ï—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è** \- –ø—Ä–æ–±–ª–µ–º–∞ –≤ `django-markdownify`.

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫—É Console –±—Ä–∞—É–∑–µ—Ä–∞ (–†–µ—à–µ–Ω–∏–µ 4) –∏ —Å–æ–æ–±—â–∏—Ç–µ:**

1. –ï—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏ –≤ Console?
2. –í–∏–¥–Ω—ã –ª–∏ –∑–∞–ø—Ä–æ—Å—ã –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –≤–æ –≤–∫–ª–∞–¥–∫–µ Network?
3. –°—Ç–∞—Ç—É—Å —ç—Ç–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤?

üîß –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤: –ù–∞—Å—Ç—Ä–æ–π–∫–∏: MEDIA\_URL: /media/ –°—Ç–∞—Ç—å—è ID: 23 Slug: test-image-paths –¢–µ—Å—Ç —Å—Å—ã–ª–æ–∫: –¢–µ—Å—Ç 1: /media/blog/images/test\_123.jpg –¢–µ—Å—Ç 2: media/blog/images/test\_123.jpg –¢–µ—Å—Ç 3: http://localhost:8000/media/blog/images/test\_123.jpg –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç–∞—Ç—å–∏ (–ø–µ—Ä–≤—ã–µ 1000 —Å–∏–º–≤–æ–ª–æ–≤): # –¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø—É—Ç–µ–π ## 1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ!\[test-image\](/media/blog/images/test-image-paths\_ab9363de\_test-image.png "test-image") ## 2. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–æ–¥–ø–∞–ø–∫–µ!\[test-image\](/media/blog/images/test-image-paths\_ab9363de\_test-image.png "test-image") ## 3. –° –ø–æ–¥–ø–∏—Å—å—é!\[–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞\](/media/blog/images/test-image-paths\_aa3264a7\_Kirillkravt.png "–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞") ## 4. –° –ø—Ä–æ–±–µ–ª–∞–º–∏ –≤ –∏–º–µ–Ω–∏!\[–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33\](/media/blog/images/test-image-paths\_f6104e59\_–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33.png "–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33") HTML –ø–æ—Å–ª–µ markdownify: –¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø—É—Ç–µ–π 1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ 2. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–æ–¥–ø–∞–ø–∫–µ 3. –° –ø–æ–¥–ø–∏—Å—å—é 4. –° –ø—Ä–æ–±–µ–ª–∞–º–∏ –≤ –∏–º–µ–Ω–∏ –ü–æ–ª–Ω—ã–π HTML –ø–æ—Å–ª–µ markdownify: <h1>–¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø—É—Ç–µ–π</h1> <h2>1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ</h2> <p></p> <h2>2. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–æ–¥–ø–∞–ø–∫–µ</h2> <p></p> <h2>3. –° –ø–æ–¥–ø–∏—Å—å—é</h2> <p></p> <h2>4. –° –ø—Ä–æ–±–µ–ª–∞–º–∏ –≤ –∏–º–µ–Ω–∏</h2> <p></p> HTML –ø–æ—Å–ª–µ safe: # –¢–µ—Å—Ç —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø—É—Ç–µ–π ## 1. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ!\[test-image\](/media/blog/images/test-image-paths\_ab9363de\_test-image.png "test-image") ## 2. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ø–æ–¥–ø–∞–ø–∫–µ!\[test-image\](/media/blog/images/test-image-paths\_ab9363de\_test-image.png "test-image") ## 3. –° –ø–æ–¥–ø–∏—Å—å—é!\[–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞\](/media/blog/images/test-image-paths\_aa3264a7\_Kirillkravt.png "–ú–æ—è —Ç–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞") ## 4. –° –ø—Ä–æ–±–µ–ª–∞–º–∏ –≤ –∏–º–µ–Ω–∏!\[–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33\](/media/blog/images/test-image-paths\_f6104e59\_–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33.png "–°–Ω–∏–º–æ–∫ —ç–∫—Ä–∞–Ω–∞ 2023-04-25 –≤ 21.06.33")

**–ü—Ä–æ–±–ª–µ–º–∞ –Ω–∞–π–¥–µ–Ω–∞!**

markdownify **—É–¥–∞–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** –∏–∑ HTML! –í–∏–¥–Ω–æ —á—Ç–æ:

1. **–î–æ markdownify** (–≤ safe): –µ—Å—Ç—å —Ç–µ–≥–∏ `![...](...)` —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
2. **–ü–æ—Å–ª–µ markdownify**: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—á–µ–∑–ª–∏, –æ—Å—Ç–∞–ª–∏—Å—å –ø—É—Å—Ç—ã–µ `<p></p>`

---

## üéØ –ü–†–ò–ß–ò–ù–ê –ü–†–û–ë–õ–ï–ú–´:

**django-markdownify** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–¥–∞–ª—è–µ—Ç –∏–ª–∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–µ–≥–∏ `<img>` –∏–∑ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

---

## üõ† –†–ï–®–ï–ù–ò–ï 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å markdownify –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–î–æ–±–∞–≤—å—Ç–µ –≤ `settings.py` –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è markdownify:

python

```
# uch/settings.py
MARKDOWNIFY = {
    "default": {
        "WHITELIST_TAGS": [
            'a', 'abbr', 'acronym', 'b', 'blockquote', 'code', 'em', 'i', 
            'li', 'ol', 'p', 'strong', 'ul', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6',
            'img',  # ‚Üê –î–û–ë–ê–í–ò–¢–¨ –≠–¢–û–¢ –¢–ï–ì!
        ],
        "WHITELIST_ATTRS": [
            'href', 'src', 'alt', 'title', 'width', 'height',  # –†–∞–∑—Ä–µ—à–∏—Ç—å –∞—Ç—Ä–∏–±—É—Ç—ã img
        ],
        "MARKDOWN_EXTENSIONS": [
            'markdown.extensions.fenced_code',
            'markdown.extensions.extra',
        ],
        "STRIP": False,
        "BLEACH": False,  # ‚Üê –û–¢–ö–õ–Æ–ß–ò–¢–¨ BLEACH –µ—Å–ª–∏ –æ–Ω —É–¥–∞–ª—è–µ—Ç img
    }
}
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 2: –û—Ç–∫–ª—é—á–∏—Ç—å BLEACH –≤ markdownify

–ï—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ –ø–æ–º–æ–≥–∞—é—Ç, –æ—Ç–∫–ª—é—á–∏—Ç–µ bleach –ø–æ–ª–Ω–æ—Å—Ç—å—é:

python

```
# uch/settings.py
MARKDOWNIFY = {
    "default": {
        "WHITELIST_TAGS": [],
        "WHITELIST_ATTRS": [],
        "MARKDOWN_EXTENSIONS": [],
        "STRIP": False,
        "BLEACH": False,  # –í–ê–ñ–ù–û: –æ—Ç–∫–ª—é—á–∏—Ç—å bleach
    }
}
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å markdown –≤–º–µ—Å—Ç–æ markdownify

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `django-markdown` –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ:

bash

```
pip install django-markdown
```

python

```
# settings.py
INSTALLED_APPS = [
    # ...
    'markdown',
]

# –í —à–∞–±–ª–æ–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
{% load markdown_tags %}
{{ article.content|markdown|safe }}
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä

–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —Ñ–∏–ª—å—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —É–¥–∞–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:

–í —à–∞–±–ª–æ–Ω–µ:

django

```
{% load custom_markdown %}
{{ article.content|custom_markdown }}
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 5: –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å safe

–¢–∞–∫ –∫–∞–∫ –≤–∞—à –∫–æ–Ω—Ç–µ–Ω—Ç —É–∂–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `safe`:

django

```
<!-- –í article_detail.html –ó–ê–ú–ï–ù–ò–¢–ï: -->
<div class="markdown-content">
    {{ article.content|markdownify }}
</div>

<!-- –ù–ê: -->
<div class="markdown-content">
    {{ article.content|safe }}
</div>
```

**–ù–æ —Ç–æ–≥–¥–∞ markdown-—Ä–∞–∑–º–µ—Ç–∫–∞ –Ω–µ –±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∞ –≤ HTML!**

---

## üß™ –¢–ï–°–¢: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ markdownify —Å –ø—Ä–æ—Å—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º

–î–æ–±–∞–≤—å—Ç–µ –≤ —à–∞–±–ª–æ–Ω —Ç–µ—Å—Ç:

django

```
<h3>–¢–µ—Å—Ç markdownify:</h3>
<p>1. –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç: {{ "**–∂–∏—Ä–Ω—ã–π** —Ç–µ–∫—Å—Ç"|markdownify|safe }}</p>
<p>2. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ: {{ "![](/media/test.jpg)"|markdownify|safe }}</p>
<p>3. –°—Å—ã–ª–∫–∞: {{ "[—Å—Å—ã–ª–∫–∞](http://example.com)"|markdownify|safe }}</p>
```

---

## üîß –ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é):

1. **–î–æ–±–∞–≤—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ markdownify** (–†–µ—à–µ–Ω–∏–µ 1)
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `markdown` \+ `safe` –≤–º–µ—Å—Ç–æ `markdownify`:**

django

```
{% load markdown_tags %}
<div class="markdown-content">
    {{ article.content|markdown|safe }}
</div>
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≥–∏–±—Ä–∏–¥–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä:

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ markdownify** –≤ settings.py
2. **–û—Ç–∫–ª—é—á–∏—Ç—å BLEACH** –µ—Å–ª–∏ –æ–Ω –≤–∫–ª—é—á–µ–Ω
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å markdown –≤–º–µ—Å—Ç–æ markdownify**
4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –≤—ã–≤–æ–¥** –≤ —à–∞–±–ª–æ–Ω–µ
5. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä** –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

---

**–ù–∞—á–Ω–∏—Ç–µ —Å –†–µ—à–µ–Ω–∏—è 1 (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ markdownify). –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–∂–µ—Ç, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –∫ –†–µ—à–µ–Ω–∏—é 4 (–∫–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä).**

–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è setting –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø–æ—è–≤–∏–ª–∏—Å—å! –ï—Å—Ç—å –¥—Ä—É–≥–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤—ã–ª–µ–∑–∞—é—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞

–û—Ç–ª–∏—á–Ω–æ! –ö–∞—Ä—Ç–∏–Ω–∫–∏ –ø–æ—è–≤–∏–ª–∏—Å—å! –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –≤—ã—Ö–æ–¥–∏–ª–∏ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã —ç–∫—Ä–∞–Ω–∞.

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–µ –∏ –≤—ã—Ö–æ–¥—è—Ç –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã

---

## üõ† –†–ï–®–ï–ù–ò–ï 1: –î–æ–±–∞–≤–∏—Ç—å CSS –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à —Ñ–∞–π–ª —Å—Ç–∏–ª–µ–π:

css

```
/* uch-backend/static/css/style.css - –¥–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω–µ—Ü */

/* –°—Ç–∏–ª–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ —Å—Ç–∞—Ç—å—è—Ö */
.markdown-content img {
    max-width: 100%;          /* –ù–µ –±–æ–ª—å—à–µ —à–∏—Ä–∏–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    height: auto;             /* –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
    display: block;           /* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã —Å–Ω–∏–∑—É */
    margin: 1rem auto;        /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç—Å—Ç—É–ø—ã */
    border-radius: 8px;       /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å */
}

/* –î–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
@media (max-width: 768px) {
    .markdown-content img {
        margin: 0.5rem auto;  /* –ú–µ–Ω—å—à–µ –æ—Ç—Å—Ç—É–ø–æ–≤ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        border-radius: 6px;
    }
}

/* –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π - –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É */
.markdown-content img[width*="px"] {
    max-width: 100% !important; /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º inline —à–∏—Ä–∏–Ω—É */
    height: auto !important;
}

/* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø–æ–¥–ø–∏—Å—è–º–∏ (–µ—Å–ª–∏ –±—É–¥–µ—Ç–µ –¥–æ–±–∞–≤–ª—è—Ç—å) */
.markdown-content figure {
    margin: 1.5rem auto;
    text-align: center;
}

.markdown-content figcaption {
    font-size: 0.9rem;
    color: #666;
    margin-top: 0.5rem;
    font-style: italic;
}
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 2: –î–æ–±–∞–≤–∏—Ç—å JavaScript –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è, –¥–æ–±–∞–≤—å—Ç–µ JavaScript:

html

```
<!-- –í base.html –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã–≤–∞—é—â–∏–º </body> –¥–æ–±–∞–≤—å—Ç–µ: -->
<script>
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
document.addEventListener('DOMContentLoaded', function() {
    const images = document.querySelectorAll('.markdown-content img');
    
    images.forEach(img => {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —à–∏—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
        const containerWidth = img.parentElement.clientWidth;
        const imgWidth = img.naturalWidth;
        
        if (imgWidth > containerWidth) {
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            img.classList.add('large-image');
            
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±–µ—Ä—Ç–∫—É –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∑—É–º–∞
            const wrapper = document.createElement('div');
            wrapper.className = 'image-wrapper';
            img.parentNode.insertBefore(wrapper, img);
            wrapper.appendChild(img);
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
            const zoomBtn = document.createElement('button');
            zoomBtn.className = 'image-zoom-btn';
            zoomBtn.innerHTML = 'üì± –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å';
            zoomBtn.onclick = function() {
                img.classList.toggle('full-size');
                this.textContent = img.classList.contains('full-size') 
                    ? 'üì± –í–µ—Ä–Ω—É—Ç—å' 
                    : 'üì± –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å';
            };
            wrapper.appendChild(zoomBtn);
        }
    });
});
</script>

<style>
/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è JavaScript */
.image-wrapper {
    position: relative;
    margin: 1rem 0;
}

.large-image {
    cursor: zoom-in;
    transition: transform 0.3s ease;
}

.large-image.full-size {
    max-width: none !important;
    width: auto !important;
    cursor: zoom-out;
}

.image-zoom-btn {
    position: absolute;
    bottom: 10px;
    right: 10px;
    background: rgba(0, 0, 0, 0.7);
    color: white;
    border: none;
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    z-index: 10;
}

.image-zoom-btn:hover {
    background: rgba(0, 0, 0, 0.9);
}
</style>
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Bootstrap –∫–ª–∞—Å—Å—ã

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Bootstrap 5, –¥–æ–±–∞–≤—å—Ç–µ –∫–ª–∞—Å—Å—ã:

django

```
<!-- –í article_detail.html –æ–±–µ—Ä–Ω–∏—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç: -->
<div class="markdown-content container-fluid">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-10 col-xl-8">
            {{ article.content|markdownify }}
        </div>
    </div>
</div>

<!-- –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –∫–ª–∞—Å—Å—ã –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º —á–µ—Ä–µ–∑ JavaScript: -->
<script>
document.querySelectorAll('.markdown-content img').forEach(img => {
    img.classList.add('img-fluid', 'rounded', 'shadow-sm');
});
</script>
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 4: –§–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤ –º–µ—Ç–æ–¥–µ –∏–º–ø–æ—Ä—Ç–∞

–ú–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –∏–∑ Obsidian:

python

```
# –í –º–µ—Ç–æ–¥–µ _process_images –¥–æ–±–∞–≤—å—Ç–µ:
return f'![{caption}]({media_url} "{caption}"){{: width="100%" }}'

# –ò–ª–∏ —Å –∫–ª–∞—Å—Å–æ–º:
return f'![{caption}]({media_url} "{caption}"){{: .img-fluid }}'
```

–ù–æ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –≤ markdownify.

---

## üõ† –†–ï–®–ï–ù–ò–ï 5: –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π - inline —Å—Ç–∏–ª–∏

–î–æ–±–∞–≤—å—Ç–µ –≤ —à–∞–±–ª–æ–Ω:

django

```
<style>
/* –ù–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —à–∞–±–ª–æ–Ω–µ */
.markdown-content img {
    max-width: 100% !important;
    height: auto !important;
    display: block;
    margin-left: auto;
    margin-right: auto;
}
</style>

<div class="markdown-content">
    {{ article.content|markdownify }}
</div>
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

1. **–î–æ–±–∞–≤–∏—Ç—å CSS –ø—Ä–∞–≤–∏–ª–∞** –¥–ª—è `max-width: 100%`
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞** (–º–æ–±–∏–ª—å–Ω—ã–π, –ø–ª–∞–Ω—à–µ—Ç, –¥–µ—Å–∫—Ç–æ–ø)
3. **–î–æ–±–∞–≤–∏—Ç—å –æ—Ç—Å—Ç—É–ø—ã –∏ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –ª—É—á—à–µ–≥–æ –≤–∏–¥–∞
4. **–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏—Ç—å JavaScript** –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏** (–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ, –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–µ)

---

## üé® –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ï –°–¢–ò–õ–ò:

css

```
/* –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –±–ª–æ–≥–µ */
.markdown-content {
    line-height: 1.6;
    font-size: 1.1rem;
}

.markdown-content img {
    max-width: 100%;           /* –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ! */
    height: auto;              /* –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
    display: block;            /* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã */
    margin: 2rem auto;         /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø—ã */
    border-radius: 8px;        /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
    box-shadow: 0 3px 15px rgba(0, 0, 0, 0.1); /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å */
    border: 1px solid #eee;    /* –¢–æ–Ω–∫–∞—è —Ä–∞–º–∫–∞ */
}

/* –î–ª—è –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
.markdown-content img[height] {
    max-height: 80vh;          /* –ù–µ –±–æ–ª—å—à–µ 80% –≤—ã—Å–æ—Ç—ã —ç–∫—Ä–∞–Ω–∞ */
    object-fit: contain;       /* –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
}

/* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
@media (max-width: 768px) {
    .markdown-content img {
        margin: 1rem auto;
        border-radius: 6px;
    }
}

/* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–µ—Å–ª–∏ –±—É–¥–µ—Ç–µ –¥–µ–ª–∞—Ç—å) */
@media (prefers-color-scheme: dark) {
    .markdown-content img {
        border-color: #444;
        box-shadow: 0 3px 15px rgba(0, 0, 0, 0.3);
    }
}
```

---

**–ù–∞—á–Ω–∏—Ç–µ —Å —Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –†–µ—à–µ–Ω–∏—è 5 (inline —Å—Ç–∏–ª–∏ –≤ —à–∞–±–ª–æ–Ω–µ) –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ CSS –≤ style.css.** –≠—Ç–æ–≥–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã.

–®–∞–≥ 1 –¥–æ–±–∞–≤–∏–ª –≤ css –®–∞–≥ 2 –¥–æ–±–∞–≤–∏–ª —Å–∫—Ä–∏–ø—Ç —à–∞–≥ 3 –æ–±–µ—Ä–Ω—É–ª –∫–æ–Ω—Ç–µ–Ω—Ç –≤ article\_detail –£–±—Ä–∞–ª –æ—Ç–ª–∞–¥–∫—É –ü–æ–∫–∞ –≤—Å–µ —Ä–∞–≤–Ω–æ –æ–≥—Ä–æ–º–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –≤—ã–ª–µ–∑–∞—é—â–∏–µ –∑–∞ —ç–∫—Ä–∞–Ω

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ **—Å—Ç–∏–ª–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è** –∏–ª–∏ **–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è**. –î–∞–≤–∞–π—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä—É–µ–º –∏ –∏—Å–ø—Ä–∞–≤–∏–º.

---

## üîç –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∏–º, –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ª–∏ —Å—Ç–∏–ª–∏

–î–æ–±–∞–≤—å—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—É—é –æ—Ç–ª–∞–¥–∫—É –ø—Ä—è–º–æ –≤ —à–∞–±–ª–æ–Ω:

django

```
<!-- –í article_detail.html, –≤ –Ω–∞—á–∞–ª–µ –±–ª–æ–∫–∞ content: -->
<style>
/* –í–†–ï–ú–ï–ù–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –û–¢–õ–ê–î–ö–ò - –Ø–†–ö–ò–ï –ò –ó–ê–ú–ï–¢–ù–´–ï */
.markdown-content img {
    max-width: 100% !important;
    height: auto !important;
    border: 5px solid red !important;  /* –Ø—Ä–∫–∞—è –∫—Ä–∞—Å–Ω–∞—è —Ä–∞–º–∫–∞ */
    background-color: yellow !important;  /* –ñ–µ–ª—Ç—ã–π —Ñ–æ–Ω */
    display: block !important;
    margin: 20px auto !important;
}

/* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—Å–µ inline —Å—Ç–∏–ª–∏ */
.markdown-content img[style] {
    max-width: 100% !important;
    width: auto !important;
    height: auto !important;
}
</style>

<div style="background: #f0f8ff; padding: 15px; margin: 15px 0; border: 2px solid blue;">
    <h4 style="color: blue;">üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h4>
    <p>–ï—Å–ª–∏ —Å—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è, –≤—ã —É–≤–∏–¥–∏—Ç–µ:</p>
    <ul>
        <li>‚úÖ –ö—Ä–∞—Å–Ω—É—é —Ä–∞–º–∫—É 5px –≤–æ–∫—Ä—É–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</li>
        <li>‚úÖ –ñ–µ–ª—Ç—ã–π —Ñ–æ–Ω –∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏</li>
        <li>‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ —Ü–µ–Ω—Ç—Ä—É —Å –æ—Ç—Å—Ç—É–ø–∞–º–∏</li>
    </ul>
</div>

<div class="markdown-content">
    {{ article.content|markdownify }}
</div>
```

---

## üîç –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∏–º HTML –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É** —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
2. **–ù–∞–∂–º–∏—Ç–µ F12** ‚Üí **Elements**
3. **–ù–∞–π–¥–∏—Ç–µ —Ç–µ–≥ `<img>`**
4. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫–∏–µ —Å—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è** (–ø—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å)

**–ß—Ç–æ –∏—â–µ–º:**

- –ö–∞–∫–∏–µ CSS –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é?
- –ï—Å—Ç—å –ª–∏ `!important` –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è?
- –ö–∞–∫–∞—è `width` –∏ `height` —É–∫–∞–∑–∞–Ω—ã?

---

## üîç –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∏–º –ø–æ—Ä—è–¥–æ–∫ –∑–∞–≥—Ä—É–∑–∫–∏ CSS

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à `style.css` –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è **–ü–û–°–õ–ï** Bootstrap:

html

```
<!-- –í base.html –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫: -->
<head>
    <!-- Bootstrap first -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Your styles AFTER Bootstrap -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
    <!-- Additional styles -->
    <style>
    /* –ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –∑–¥–µ—Å—å */
    </style>
</head>
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 1: –°–∏–ª—å–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ –≤ `style.css` **–æ—á–µ–Ω—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã**:

css

```
/* uch-backend/static/css/style.css */

/* –û–ß–ï–ù–¨ –°–ü–ï–¶–ò–§–ò–ß–ù–´–ô –°–ï–õ–ï–ö–¢–û–† */
article .markdown-content img,
article div.markdown-content img,
article .markdown-content p img,
div.markdown-content img {
    max-width: 100% !important;
    height: auto !important;
    width: auto !important;
    display: block !important;
    margin: 1.5rem auto !important;
    border: 3px solid #28a745 !important; /* –ó–µ–ª–µ–Ω–∞—è —Ä–∞–º–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ */
}

/* –£–±–∏—Ä–∞–µ–º –≤—Å–µ inline —Ä–∞–∑–º–µ—Ä—ã */
.markdown-content img[width],
.markdown-content img[height],
.markdown-content img[style*="width"],
.markdown-content img[style*="height"] {
    max-width: 100% !important;
    width: 100% !important;
    height: auto !important;
}

/* –î–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Ç–æ–∂–µ */
.markdown-content {
    max-width: 100%;
    overflow: hidden; /* –û–±—Ä–µ–∑–∞–µ—Ç –≤—ã—Ö–æ–¥—è—â–µ–µ –∑–∞ –≥—Ä–∞–Ω–∏—Ü—ã */
}
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 2: JavaScript –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

–î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:

html

```
<!-- –í base.html –ø–µ—Ä–µ–¥ </body> -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('üîÑ –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è...');
    
    // –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Å—Ç–∞—Ç—å—è—Ö
    const images = document.querySelectorAll('.markdown-content img, article img');
    
    images.forEach(img => {
        console.log('–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:', img.src);
        
        // 1. –£–¥–∞–ª—è–µ–º inline width –∏ height
        img.removeAttribute('width');
        img.removeAttribute('height');
        
        // 2. –£–¥–∞–ª—è–µ–º –∏–∑ style
        img.style.width = '';
        img.style.height = '';
        img.style.maxWidth = '';
        
        // 3. –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–µ–º —Å—Ç–∏–ª–∏
        img.style.setProperty('max-width', '100%', 'important');
        img.style.setProperty('height', 'auto', 'important');
        img.style.setProperty('display', 'block', 'important');
        img.style.setProperty('margin', '1rem auto', 'important');
        
        // 4. –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è CSS
        img.classList.add('responsive-image');
        
        // 5. –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ, –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º
        const container = img.closest('.markdown-content') || img.closest('article') || document.body;
        const maxWidth = container.clientWidth - 40; // - –æ—Ç—Å—Ç—É–ø—ã
        
        if (img.naturalWidth > maxWidth) {
            img.style.maxWidth = maxWidth + 'px';
        }
        
        console.log('‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:', img.src);
    });
    
    // –¢–∞–∫–∂–µ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ –±—É–¥—É—â–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
    const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            if (mutation.addedNodes.length) {
                mutation.addedNodes.forEach(function(node) {
                    if (node.tagName === 'IMG') {
                        node.style.maxWidth = '100%';
                        node.style.height = 'auto';
                    }
                });
            }
        });
    });
    
    observer.observe(document.body, { childList: true, subtree: true });
});
</script>
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 3: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ markdownify

–í–æ–∑–º–æ–∂–Ω–æ, markdownify –¥–æ–±–∞–≤–ª—è–µ—Ç inline —Å—Ç–∏–ª–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π —Ñ–∏–ª—å—Ç—Ä:

django

```
<!-- –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–º–µ–Ω–∞: -->
{% load markdown_tags %}

<div class="markdown-content">
    {{ article.content|markdown|safe }}
</div>
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π —Ñ–∏–ª—å—Ç—Ä:

–í —à–∞–±–ª–æ–Ω–µ:

django

```
{% load img_fix %}

<div class="markdown-content">
    {{ article.content|markdownify|fix_images }}
</div>
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç–∞—Ç—å—é

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:

python

```
# –í Django shell
from uch.apps.blog.models import Article

article = Article.objects.get(slug="test-image-paths")
print(article.content[:500])  # –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –Ω–µ—Ç –ª–∏ —Ç–∞–º inline —Å—Ç–∏–ª–µ–π
```

---

## üìã –≠–ö–°–ü–†–ï–°–°-–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞** –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

javascript

```
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
var img = document.querySelector('.markdown-content img');
console.log('–®–∏—Ä–∏–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:', img.width);
console.log('–®–∏—Ä–∏–Ω–∞ natural:', img.naturalWidth);
console.log('–®–∏—Ä–∏–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:', img.parentElement.clientWidth);
console.log('–ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏:', window.getComputedStyle(img).maxWidth);
```

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network –≤–∫–ª–∞–¥–∫—É** \- —Ä–µ–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
2. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ** (—á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å –∫—ç—à)

---

## üéØ –°–ê–ú–û–ï –ü–†–û–°–¢–û–ï –†–ï–®–ï–ù–ò–ï:

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–æ **–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —à–∞–±–ª–æ–Ω** –ø–µ—Ä–µ–¥ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º:

django

```
<!-- article_detail.html -->
<style>
/* –Ø–î–ï–†–ù–´–ô –í–ê–†–ò–ê–ù–¢ - –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –í–°–ï */
img {
    max-width: 100% !important;
    height: auto !important;
    width: auto !important;
}

/* –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –¥–ª—è —Å—Ç–∞—Ç–µ–π */
article img,
.container img,
.row img,
.col img {
    max-width: 100% !important;
}

/* –£–±–∏–≤–∞–µ–º –≤—Å–µ inline —Ä–∞–∑–º–µ—Ä—ã */
img[width],
img[height],
img[style*="width"],
img[style*="height"] {
    max-width: 100% !important;
    width: auto !important;
    height: auto !important;
}
</style>

<div class="markdown-content" style="overflow: hidden;">
    {{ article.content|markdownify }}
</div>
```

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –®–∞–≥ 1 (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ —Å –∫—Ä–∞—Å–Ω–æ–π —Ä–∞–º–∫–æ–π) –∏ —Å–æ–æ–±—â–∏—Ç–µ:**

1. –í–∏–¥–Ω—ã –ª–∏ –∫—Ä–∞—Å–Ω—ã–µ —Ä–∞–º–∫–∏ –≤–æ–∫—Ä—É–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π?
2. –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Console –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞?

–®–∞–≥ 1 —Ä–∞–±–æ—Ç–∞–µ—Ç. –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–º–µ—â–∞—é—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤ –∫—Ä–∞—Å–Ω–æ–π —Ä–∞–º–∫–µ –≤ –∫–æ–Ω—Å–æ–ª–µ –Ω–∏—á–µ–≥–æ

–û—Ç–ª–∏—á–Ω–æ! –ó–Ω–∞—á–∏—Ç **—Å—Ç–∏–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç**, –∫–æ–≥–¥–∞ –º—ã –∏—Ö –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω—è–µ–º. –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–∏ —Å—Ç–∏–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏.

---

## üéØ –†–ï–®–ï–ù–ò–ï: –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Ä–∞–±–æ—á–∏–µ —Å—Ç–∏–ª–∏ –≤ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π CSS

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–∞–±–æ—á–∏–µ —Å—Ç–∏–ª–∏ –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –≤ –≤–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª —Å—Ç–∏–ª–µ–π:

css

```
/* uch-backend/static/css/style.css - –î–û–ë–ê–í–¨–¢–ï –í –ö–û–ù–ï–¶ –§–ê–ô–õ–ê */

/* =========================================== */
/* –°–¢–ò–õ–ò –î–õ–Ø –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô –í –°–¢–ê–¢–¨–Ø–• –ë–õ–û–ì–ê */
/* =========================================== */

/* –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –í–°–ï–• –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –∫–æ–Ω—Ç–µ–Ω—Ç–µ —Å—Ç–∞—Ç–µ–π */
.markdown-content img,
article .markdown-content img,
.markdown-content p img {
    max-width: 100% !important;    /* –ù–µ –±–æ–ª—å—à–µ —à–∏—Ä–∏–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
    height: auto !important;       /* –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
    display: block !important;     /* –£–±–∏—Ä–∞–µ–º –ª–∏—à–Ω–∏–µ –æ—Ç—Å—Ç—É–ø—ã —Å–Ω–∏–∑—É */
    margin: 1.5rem auto !important; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç—Å—Ç—É–ø—ã */
    border-radius: 8px;            /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* –õ–µ–≥–∫–∞—è —Ç–µ–Ω—å */
}

/* –£–±–∏—Ä–∞–µ–º –≤—Å–µ inline –∞—Ç—Ä–∏–±—É—Ç—ã —à–∏—Ä–∏–Ω—ã –∏ –≤—ã—Å–æ—Ç—ã */
.markdown-content img[width],
.markdown-content img[height],
.markdown-content img[style*="width"],
.markdown-content img[style*="height"] {
    width: auto !important;
    height: auto !important;
    max-width: 100% !important;
}

/* –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å data-–∞—Ç—Ä–∏–±—É—Ç–∞–º–∏ (–ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Ç.–¥.) */
.markdown-content img[data-width],
.markdown-content img[data-height] {
    max-width: 100% !important;
}

/* –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö */
.container .markdown-content img,
.row .markdown-content img,
.col .markdown-content img {
    max-width: 100% !important;
}

/* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ */
@media (max-width: 768px) {
    .markdown-content img {
        margin: 1rem auto !important;
        border-radius: 6px;
        max-width: 100% !important;
    }
}

/* –î–ª—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É */
@media (min-width: 1200px) {
    .markdown-content img {
        max-width: 1000px !important; /* –ú–∞–∫—Å–∏–º—É–º 1000px –Ω–∞ –±–æ–ª—å—à–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
    }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –æ–±–µ—Ä—Ç–æ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–µ—Å–ª–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è) */
.markdown-content .image-wrapper {
    text-align: center;
    margin: 1.5rem 0;
}

.markdown-content .image-wrapper img {
    display: inline-block; /* –î–ª—è —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ wrapper */
}

/* –ü–æ–¥–ø–∏—Å–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º */
.markdown-content figcaption {
    font-size: 0.9rem;
    color: #666;
    margin-top: 0.5rem;
    text-align: center;
    font-style: italic;
}
```

---

## üõ† –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û: –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ CSS –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `base.html`:

html

```
<!-- uch/templates/base.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Universal Creative Hub{% endblock %}</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- –í–∞—à–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –ü–û–°–õ–ï Bootstrap -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ -->
    <style>
        /* –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ inline —Å—Ç–∏–ª–∏ –∑–¥–µ—Å—å */
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
```

---

## üîß –û–ß–ò–°–¢–ö–ê: –£–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏–∑ —à–∞–±–ª–æ–Ω–∞

–£–¥–∞–ª–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –∏–∑ `article_detail.html`:

django

```
<!-- –£–î–ê–õ–ò–¢–ï –≠–¢–û: -->
<style>
/* –í–†–ï–ú–ï–ù–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –û–¢–õ–ê–î–ö–ò - –Ø–†–ö–ò–ï –ò –ó–ê–ú–ï–¢–ù–´–ï */
.markdown-content img {
    max-width: 100% !important;
    height: auto !important;
    border: 5px solid red !important;
    background-color: yellow !important;
    display: block !important;
    margin: 20px auto !important;
}
</style>

<div style="background: #f0f8ff; padding: 15px; margin: 15px 0; border: 2px solid blue;">
    <h4 style="color: blue;">üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∏–ª–µ–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h4>
    <!-- ... -->
</div>

<!-- –û–°–¢–ê–í–¨–¢–ï –¢–û–õ–¨–ö–û –≠–¢–û: -->
<div class="markdown-content">
    {{ article.content|markdownify }}
</div>
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê:

1. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É** (Ctrl+F5 –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –∫—ç—à–∞)
2. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ –µ—â–µ –≤–ø–∏—Å—ã–≤–∞—é—Ç—Å—è** –≤ —ç–∫—Ä–∞–Ω
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞** (–∏–∑–º–µ–Ω–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –æ–∫–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–∞)
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ –º–æ–±–∏–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ** DevTools (F12 ‚Üí Toggle device toolbar)

---

## üé® –£–õ–£–ß–®–ï–ù–ò–ï: –î–æ–±–∞–≤—å—Ç–µ –ø–ª–∞–≤–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —É–ª—É—á—à–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π –≤–∏–¥:

css

```
/* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */
.markdown-content img {
    transition: all 0.3s ease; /* –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã */
}

.markdown-content img:hover {
    transform: translateY(-2px); /* –õ–µ–≥–∫–∏–π –ø–æ–¥—ä–µ–º –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15); /* –£—Å–∏–ª–µ–Ω–Ω–∞—è —Ç–µ–Ω—å */
}

/* –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π */
.markdown-content img.loading {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
}

@keyframes loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}
```

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ó–ê–í–ï–†–®–ï–ù–ò–Ø:

- **–°—Ç–∏–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã** –∏–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ `style.css`
- **–£–¥–∞–ª–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏** –∏–∑ —à–∞–±–ª–æ–Ω–∞
- **CSS –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ Bootstrap**
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** –Ω–∞ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–∞—Ö —ç–∫—Ä–∞–Ω–∞
- **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ –≤ –º–æ–±–∏–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ**
- **–ö—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ –æ—á–∏—â–µ–Ω** (Ctrl+F5)

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç–∏–ª–µ–π –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ö–∞—Ä—Ç–∏–Ω–∫–∏ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —ç–∫—Ä–∞–Ω–∞ —Å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏ –∏ —Ç–µ–Ω—è–º–∏.**

–í—ã–ø–æ–ª–Ω–∏–ª, –Ω–æ –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å–Ω–æ–≤–∞ –æ–≥—Ä–æ–º–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –∏ –Ω–µ –≤–ª–µ–∑–∞—é—Ç –≤ —ç–∫—Ä–∞–Ω

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ –≤–∞—à–∏ —Å—Ç–∏–ª–∏ –∏–∑ `style.css` **–Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è** –∏–ª–∏ **–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è**. –î–∞–≤–∞–π—Ç–µ –Ω–∞–π–¥–µ–º –ø—Ä–∏—á–∏–Ω—É.

---

## üîç –®–ê–ì 1: –ü—Ä–æ–≤–µ—Ä–∏–º –∑–∞–≥—Ä—É–∑–∫—É CSS —Ñ–∞–π–ª–∞

–î–æ–±–∞–≤—å—Ç–µ –≤ `base.html` –æ—Ç–ª–∞–¥–∫—É:

html

```
<!-- –í base.html –≤ <head> –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∏–ª–µ–π: -->
<script>
console.log('üîÑ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ CSS...');
console.log('CSS —Ñ–∞–π–ª:', "{% static 'css/style.css' %}");
</script>
```

–û—Ç–∫—Ä–æ–π—Ç–µ Console –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. –í–∏–¥–∏—Ç–µ –ª–∏ –≤—ã —Å–æ–æ–±—â–µ–Ω–∏–µ?
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ª–∏ —Ñ–∞–π–ª —Å—Ç–∏–ª–µ–π –ø–æ —Å—Å—ã–ª–∫–µ?

---

## üîç –®–ê–ì 2: –ü—Ä–æ–≤–µ—Ä–∏–º –ø—É—Ç—å –∫ CSS —Ñ–∞–π–ª—É

–ü—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –æ—Ç–∫—Ä–æ–π—Ç–µ: `http://localhost:8000/static/css/style.css`

**–ß—Ç–æ –≤–∏–¥–∏—Ç–µ?**

- ‚úÖ –í–∏–¥–µ–Ω CSS –∫–æ–¥ - —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚ùå 404 –æ—à–∏–±–∫–∞ - —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω
- ‚ùå –î—Ä—É–≥–æ–π CSS –∫–æ–¥ - –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–µ —Ç–æ—Ç —Ñ–∞–π–ª

---

## üîç –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∏–º, –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ª–∏ —Å—Ç–∏–ª–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console):

javascript

```
// –ü—Ä–æ–≤–µ—Ä–∏–º –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
var img = document.querySelector('.markdown-content img');
console.log('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ:', img);

// –ö–∞–∫–∏–µ —Å—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è?
var styles = window.getComputedStyle(img);
console.log('max-width:', styles.maxWidth);
console.log('width:', styles.width);
console.log('height:', styles.height);

// –ü—Ä–æ–≤–µ—Ä–∏–º –∫–ª–∞—Å—Å—ã
console.log('–ö–ª–∞—Å—Å—ã:', img.className);

// –ü—Ä–æ–≤–µ—Ä–∏–º inline —Å—Ç–∏–ª–∏
console.log('Inline style:', img.getAttribute('style'));

// –ü—Ä–æ–≤–µ—Ä–∏–º, –∫–∞–∫–æ–π CSS —Ñ–∞–π–ª –ø–æ—Å–ª–µ–¥–Ω–∏–π
var links = document.querySelectorAll('link[rel="stylesheet"]');
links.forEach(function(link, i) {
    console.log('CSS ' + i + ':', link.href);
});
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 1: –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ static —Ñ–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `settings.py`:

python

```
# uch/settings.py

# –í development –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
DEBUG = True

# –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
STATIC_URL = 'static/'
STATIC_ROOT = BASE_DIR / 'staticfiles'  # –î–ª—è collectstatic
STATICFILES_DIRS = [
    BASE_DIR / 'static',  # –í–∞—à–∏ –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
]

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
import os
if not os.path.exists(BASE_DIR / 'static'):
    os.makedirs(BASE_DIR / 'static')
    os.makedirs(BASE_DIR / 'static' / 'css')
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ collectstatic:

bash

```
python manage.py collectstatic --noinput
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 2: –î–æ–±–∞–≤–∏–º inline —Å—Ç–∏–ª–∏ –≤ —à–∞–±–ª–æ–Ω (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

–ü–æ–∫–∞ —Ä–∞–∑–±–∏—Ä–∞–µ–º—Å—è —Å CSS, –¥–æ–±–∞–≤–∏–º —Å—Ç–∏–ª–∏ –ø—Ä—è–º–æ –≤ —à–∞–±–ª–æ–Ω:

django

```
<!-- –í article_detail.html –ü–ï–†–ï–î –±–ª–æ–∫–æ–º —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º: -->
<style>
/* –ù–ï–£–ë–ò–í–ê–ï–ú–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô */
.markdown-content img {
    max-width: 100% !important;
    height: auto !important;
    width: auto !important;
    display: block !important;
    margin: 1.5rem auto !important;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border: 2px solid #4CAF50 !important; /* –ó–µ–ª–µ–Ω–∞—è —Ä–∞–º–∫–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ */
}

/* –Ø–¥–µ—Ä–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç - –¥–ª—è –≤—Å–µ—Ö img –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ */
article img {
    max-width: 100% !important;
}

/* –£–±–∏–≤–∞–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è */
img[width],
img[height],
img[style*="width"],
img[style*="height"] {
    max-width: 100% !important;
    width: auto !important;
    height: auto !important;
}
</style>

<div class="markdown-content">
    {{ article.content|markdownify }}
</div>
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 3: –ü—Ä–æ–≤–µ—Ä–∏–º order –∑–∞–≥—Ä—É–∑–∫–∏ CSS

–í `base.html` —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–∏ —Å—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è **–ø–æ—Å–ª–µ–¥–Ω–∏–º–∏**:

html

```
<head>
    <!-- 1. Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- 2. –î—Ä—É–≥–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ -->
    
    <!-- 3. –í–ê–®–ò –°–¢–ò–õ–ò - –î–û–õ–ñ–ù–´ –ë–´–¢–¨ –ü–û–°–õ–ï–î–ù–ò–ú–ò -->
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
    <!-- 4. Inline —Å—Ç–∏–ª–∏ (—Å–∞–º—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ) -->
    <style>
    /* –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á—Ç–æ —É–≥–æ–¥–Ω–æ */
    </style>
</head>
```

---

## üõ† –†–ï–®–ï–ù–ò–ï 4: –î–æ–±–∞–≤–∏–º JavaScript –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

html

```
<!-- –í base.html –ø–µ—Ä–µ–¥ </body> -->
<script>
// –Ø–î–ï–†–ù–û–ï –†–ï–®–ï–ù–ò–ï - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ –ó–∞–ø—É—Å–∫–∞—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...');
    
    function fixAllImages() {
        var images = document.querySelectorAll('img');
        var fixedCount = 0;
        
        images.forEach(function(img) {
            // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∏–∫–æ–Ω–∫–∏, –º–∞–ª–µ–Ω—å–∫–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            if (img.width < 50 || img.height < 50) return;
            
            // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–¥–∞–µ–º —Å—Ç–∏–ª–∏
            img.style.setProperty('max-width', '100%', 'important');
            img.style.setProperty('height', 'auto', 'important');
            img.style.setProperty('display', 'block', 'important');
            img.style.setProperty('margin', '1rem auto', 'important');
            
            // –£–¥–∞–ª—è–µ–º –≤—Ä–µ–¥–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã
            img.removeAttribute('width');
            img.removeAttribute('height');
            
            // –£–¥–∞–ª—è–µ–º inline width/height –∏–∑ style
            img.style.width = '';
            img.style.height = '';
            
            fixedCount++;
        });
        
        console.log('‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:', fixedCount);
        
        if (fixedCount > 0) {
            // –î–æ–±–∞–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
            var indicator = document.createElement('div');
            indicator.style.cssText = 'position:fixed;bottom:10px;right:10px;background:#4CAF50;color:white;padding:5px 10px;border-radius:4px;z-index:9999;';
            indicator.textContent = 'üñºÔ∏è ' + fixedCount + ' –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ';
            document.body.appendChild(indicator);
            
            setTimeout(function() {
                indicator.remove();
            }, 3000);
        }
    }
    
    // –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Å—Ä–∞–∑—É
    fixAllImages();
    
    // –ò –∫–∞–∂–¥—ã–µ 500–º—Å –Ω–∞ —Å–ª—É—á–∞–π –ª–µ–Ω–∏–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
    setInterval(fixAllImages, 500);
    
    // –¢–∞–∫–∂–µ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ DOM
    var observer = new MutationObserver(fixAllImages);
    observer.observe(document.body, { childList: true, subtree: true });
});
</script>
```

---

## üîß –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ò–ô –°–ö–†–ò–ü–¢:

–î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É –∫–Ω–æ–ø–∫—É –≤ —à–∞–±–ª–æ–Ω –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

django

```
<!-- –í article_detail.html –≥–¥–µ-–Ω–∏–±—É–¥—å –≤–Ω–∏–∑—É: -->
<button onclick="diagnoseImages()" class="btn btn-info btn-sm">
    üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
</button>

<script>
function diagnoseImages() {
    var img = document.querySelector('.markdown-content img');
    if (!img) {
        alert('–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã!');
        return;
    }
    
    var styles = window.getComputedStyle(img);
    var html = \`
        <h3>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
        <p><strong>Src:</strong> ${img.src}</p>
        <p><strong>Natural size:</strong> ${img.naturalWidth} √ó ${img.naturalHeight}</p>
        <p><strong>Display size:</strong> ${img.width} √ó ${img.height}</p>
        <p><strong>max-width:</strong> ${styles.maxWidth}</p>
        <p><strong>width:</strong> ${styles.width}</p>
        <p><strong>CSS rules:</strong></p>
        <ul>
    \`;
    
    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ CSS –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —ç—Ç–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
    var sheets = document.styleSheets;
    for (var i = 0; i < sheets.length; i++) {
        try {
            var rules = sheets[i].cssRules || sheets[i].rules;
            for (var j = 0; j < rules.length; j++) {
                if (img.matches(rules[j].selectorText)) {
                    html += \`<li>${sheets[i].href}: ${rules[j].cssText}</li>\`;
                }
            }
        } catch(e) {
            // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º cross-origin —Å—Ç–∏–ª–∏
        }
    }
    
    html += \`</ul>\`;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    var win = window.open('', '_blank');
    win.document.write(html);
}
</script>
```

---

## üìã –≠–ö–°–ü–†–ï–°–°-–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –í –ö–û–ù–°–û–õ–ò –ë–†–ê–£–ó–ï–†–ê:

–û—Ç–∫—Ä–æ–π—Ç–µ Console (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

javascript

```
// 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É CSS
Array.from(document.querySelectorAll('link[rel="stylesheet"]'))
  .forEach(link => console.log(link.href));

// 2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à style.css
var myCss = Array.from(document.styleSheets)
  .find(sheet => sheet.href && sheet.href.includes('style.css'));

if (myCss) {
  console.log('‚úÖ style.css –∑–∞–≥—Ä—É–∂–µ–Ω');
  
  // –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è img
  var rules = Array.from(myCss.cssRules || myCss.rules || []);
  var imgRules = rules.filter(r => r.selectorText && r.selectorText.includes('img'));
  console.log('–ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è img:', imgRules);
} else {
  console.log('‚ùå style.css –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω!');
}

// 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–¥–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
var testImg = document.querySelector('img');
console.log('Inline —Å—Ç–∏–ª–∏:', testImg.style.cssText);
console.log('–ü—Ä–∏–º–µ–Ω–µ–Ω–Ω—ã–µ max-width:', getComputedStyle(testImg).maxWidth);
```

---

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É —á–µ—Ä–µ–∑ Console –±—Ä–∞—É–∑–µ—Ä–∞ –∏ —Å–æ–æ–±—â–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.** –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ:

1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ª–∏ `style.css`?
2. –ö–∞–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º?
3. –ö–∞–∫–∞—è `max-width` –≤ computed styles?

–®–∞–≥ 1 –¥–æ–±–∞–≤–∏–ª, –Ω–æ –≤ console –ø—É—Å—Ç–æ –®–∞–≥ 2 –¥—Ä—É–≥–æ–π css –∫–æ–¥ - –Ω–µ —Ç–æ—Ç —Ñ–∞–π–ª –®–∞–≥ 3 –≤ –∫–æ—Å–Ω–æ–ª—å –Ω–µ –¥–∞–µ—Ç –≤—Å—Ç–∞–≤–∏—Ç—å –∫–æ–¥. –í—ã—Å–∫–∞–∫–∏–≤–∞–µ—Ç –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å. –í—ã–¥–∞–≤–∞–π –Ω–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è –∞ –Ω–∞–∏–±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∏ –Ω–∞–¥–µ–∂–Ω—ã–µ

–ü–æ–Ω—è–ª. –ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ **–Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–∞—à `style.css` —Ñ–∞–π–ª**. –í–º–µ—Å—Ç–æ –Ω–µ–≥–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π CSS.

---

## üéØ –û–ü–¢–ò–ú–ê–õ–¨–ù–û–ï –†–ï–®–ï–ù–ò–ï: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É CSS

### 1\. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫:

bash

```
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —Ñ–∞–π–ª
ls -la uch-backend/static/css/style.css

# –ï—Å–ª–∏ –Ω–µ—Ç - —Å–æ–∑–¥–∞–π—Ç–µ
mkdir -p uch-backend/static/css
touch uch-backend/static/css/style.css
```

### 2\. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É CSS –≤ —à–∞–±–ª–æ–Ω:

–í `base.html` –∏–∑–º–µ–Ω–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —Å—Ç–∏–ª–µ–π:

html

```
<!-- –ó–ê–ú–ï–ù–ò–¢–ï –≠–¢–û: -->
{% load static %}
<link rel="stylesheet" href="{% static 'css/style.css' %}">

<!-- –ù–ê –≠–¢–û (—Å —è–≤–Ω—ã–º –ø—É—Ç–µ–º): -->
<link rel="stylesheet" href="/static/css/style.css?v=1">
```

### 3\. –°–æ–∑–¥–∞–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–±–æ—á–∏–π CSS:

–í —Ñ–∞–π–ª `uch-backend/static/css/style.css` –¥–æ–±–∞–≤—å—Ç–µ:

css

```
/* –Ø–î–ï–†–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô - —Å—Ä–∞–±–æ—Ç–∞—é—Ç 100% */
img {
    max-width: 100% !important;
    height: auto !important;
}

/* –ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ –¥–ª—è —Å—Ç–∞—Ç–µ–π –±–ª–æ–≥–∞ */
article img,
.markdown-content img,
.container img {
    max-width: 100% !important;
    height: auto !important;
    display: block;
    margin: 1rem auto;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* –£–±–∏–≤–∞–µ–º –≤—Å–µ inline —Ä–∞–∑–º–µ—Ä—ã */
img[width],
img[height] {
    width: auto !important;
    height: auto !important;
}
```

### 4\. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å –æ—á–∏—Å—Ç–∫–æ–π –∫—ç—à–∞:

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:8000/static/css/style.css?v=1`

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –≤–∞—à CSS –∫–æ–¥ - —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è.  
–ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–±–ª–µ–º–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ static —Ñ–∞–π–ª–æ–≤.

---

## üéØ –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–û–ï –†–ï–®–ï–ù–ò–ï: Inline —Å—Ç–∏–ª–∏ –≤ —à–∞–±–ª–æ–Ω–µ (—Å–∞–º–æ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ)

–ï—Å–ª–∏ CSS –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è, –¥–æ–±–∞–≤—å—Ç–µ —Å—Ç–∏–ª–∏ –ø—Ä—è–º–æ –≤ —à–∞–±–ª–æ–Ω `article_detail.html`:

django

```
{% block extra_css %}
<style>
/* –ù–ï–£–ë–ò–í–ê–ï–ú–´–ï –°–¢–ò–õ–ò - —Ä–∞–±–æ—Ç–∞—é—Ç –≤—Å–µ–≥–¥–∞ */
.markdown-content {
    overflow: hidden; /* –û–±—Ä–µ–∑–∞–µ—Ç –≤—ã–ª–µ–∑–∞—é—â–µ–µ */
}

.markdown-content img {
    max-width: 100% !important;
    height: auto !important;
    width: auto !important;
    display: block !important;
    margin: 1.5rem auto !important;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

/* –Ø–¥–µ—Ä–Ω–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ */
img {
    max-width: 100% !important;
}
</style>
{% endblock %}

<div class="markdown-content">
    {{ article.content|markdownify }}
</div>
```

---

## üîß –ü–†–û–í–ï–†–ö–ê –ó–ê 30 –°–ï–ö–£–ù–î:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª:**`uch-backend/static/css/style.css` \- —Å—É—â–µ—Å—Ç–≤—É–µ—Ç?
2. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**`http://localhost:8000/static/css/style.css`
3. **–î–æ–±–∞–≤—å—Ç–µ inline —Å—Ç–∏–ª–∏** –≤ —à–∞–±–ª–æ–Ω –∫–∞–∫ –≤—ã—à–µ
4. **–û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É** —Å Ctrl+F5

**–≠—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç 100%, –ø–æ—Ç–æ–º—É —á—Ç–æ inline —Å—Ç–∏–ª–∏ –∏–º–µ—é—Ç –≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.**

---

## üìã –ß–ï–ö–õ–ò–°–¢ –ù–ê 5 –ú–ò–ù–£–¢:

- –§–∞–π–ª `style.css` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–æ –ø—É—Ç–∏ `uch-backend/static/css/`
- –í `base.html` –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ CSS
- –í —à–∞–±–ª–æ–Ω –¥–æ–±–∞–≤–ª–µ–Ω—ã inline —Å—Ç–∏–ª–∏ –∫–∞–∫ –∑–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç
- –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∫—ç—à –æ—á–∏—â–µ–Ω (Ctrl+F5)
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –≤–ª–µ–∑–∞—é—Ç –≤ —ç–∫—Ä–∞–Ω

---

**–ù–∞—á–Ω–∏—Ç–µ —Å inline —Å—Ç–∏–ª–µ–π –≤ —à–∞–±–ª–æ–Ω–µ - —ç—Ç–æ —Ç–æ—á–Ω–æ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç.** –ü–æ—Ç–æ–º —Ä–∞–∑–±–µ—Ä–µ—Ç–µ—Å—å —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ CSS —Ñ–∞–π–ª–∞.

1-4 —Å—Ä–∞–±–æ—Ç–∞–ª–æ! –§–∞–π–ª –Ω—É–∂–Ω—ã–π, –∫–∞—Ä—Ç–∏–Ω–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞

–û—Ç–ª–∏—á–Ω–æ! üéâ **–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!** –ö–∞—Ä—Ç–∏–Ω–∫–∏ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ.

---

## ‚úÖ –ò–¢–û–ì–ò –†–ï–®–ï–ù–ò–Ø:

1. ‚úÖ **Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä** —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∞–¥–º–∏–Ω–∫–µ
2. ‚úÖ **–ò–º–ø–æ—Ä—Ç –∏–∑ Obsidian** —Ä–∞–±–æ—Ç–∞–µ—Ç (—Å—Ç–∞—Ç—å–∏ + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
3. ‚úÖ **–ö–∞—Ä—Ç–∏–Ω–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
4. ‚úÖ **CSS —Å—Ç–∏–ª–∏** –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üìã –§–ò–ù–ê–õ–¨–ù–´–ô –ß–ï–ö–õ–ò–°–¢ –§–ê–ó–´ 1:

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–ª–æ–≥–∞:

- Django –ø—Ä–æ–µ–∫—Ç —Å Docker Compose
- –ú–æ–¥–µ–ª–∏ Article, Category, —Ç–µ–≥–∏
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–µ–π
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã (Bootstrap 5)
- Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä –≤ –∞–¥–º–∏–Ω–∫–µ (django-markdownx)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ Markdown –Ω–∞ —Å–∞–π—Ç–µ (django-markdownify)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:

- –†–∞–±–æ—á–∏–π –±–ª–æ–≥ –Ω–∞ localhost:8000
- –ê–¥–º–∏–Ω–∫–∞ `/admin/`
- Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

### –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –±–ª–æ–≥–∞:

1. **RSS/Atom —Ñ–∏–¥—ã** \- –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏
2. **–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** \- —á–µ—Ä–µ–∑ PostgreSQL –∏–ª–∏ Elasticsearch
3. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** \- —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∫ —Å—Ç–∞—Ç—å—è–º
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤** \- —Å—á–µ—Ç—á–∏–∫–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å—Ç–∞—Ç–µ–π
5. **–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ share** \- –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Å–æ—Ü—Å–µ—Ç–µ–π

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∏–º–ø–æ—Ä—Ç–∞:

1. **Watchdog —Å–µ—Ä–≤–∏—Å** \- –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Obsidian
2. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–º–ø–æ—Ä—Ç–∞** \- –∫–Ω–æ–ø–∫–∞ –≤ –∞–¥–º–∏–Ω–∫–µ
3. **Git –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** \- —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º Obsidian
4. **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á** \- —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç

---

## üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –°–¢–†–£–ö–¢–£–†–ï:

–û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ –∫–æ–¥ –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

text

```
uch-backend/
‚îú‚îÄ‚îÄ media/                    # –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ blog/
‚îÇ       ‚îî‚îÄ‚îÄ images/          # –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ static/                   # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îî‚îÄ‚îÄ css/
‚îÇ       ‚îî‚îÄ‚îÄ style.css        # –í–∞—à–∏ —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ uch/
‚îÇ   ‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ blog/            # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–ª–æ–≥–∞
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ management/
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ commands/
‚îÇ   ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ import_obsidian.py
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ templatetags/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ settings.py          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îî‚îÄ‚îÄ ...
```

---

## üìä –ì–û–¢–û–í–ù–û–°–¢–¨ –ö –§–ê–ó–ï 2:

**–§–∞–∑–∞ 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ.** –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ **–§–∞–∑–µ 2: –Ø–¥—Ä–æ —Å—Ç—É–¥–∏–∏ (–¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ä–µ–¥–∞)**.

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞:

1. **–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** (git commit)
2. **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
3. **–ù–∞—á–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞** –¥–ª—è —Å—Ç—É–¥–∏–∏ (React + TypeScript)

---

## ‚ùì –í–û–ü–†–û–°:

**–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –§–∞–∑–µ 2 (–¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ç—É–¥–∏—è) –∏–ª–∏ –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —á—Ç–æ-—Ç–æ –µ—â–µ –≤ –±–ª–æ–≥–µ?**

–§–∏–∫—Å–∏—Ä—É–π –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è —Ü–µ–ª–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ß—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üìä –û–§–ò–¶–ò–ê–õ–¨–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –ü–†–û–ì–†–ï–°–°–ê: Universal Creative Hub v0.3

## üìÖ –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 09.12.2025

**–í–µ—Ä—Å–∏—è:** –§–∞–∑–∞ 1 (–ë–ª–æ–≥/–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ) - –ü–û–õ–ù–û–°–¢–¨–Æ –ó–ê–í–ï–†–®–ï–ù–ê ‚úÖ

---

## üéØ –ö–õ–Æ–ß–ï–í–´–ï –î–û–°–¢–ò–ñ–ï–ù–ò–Ø –§–ê–ó–´ 1

### ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û (100%)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
| --- | --- | --- | --- |
| **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** | ‚úÖ | Django 4.2.7 + Docker Compose | –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é |
| **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** | ‚úÖ | PostgreSQL/SQLite, django-taggit | –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ —Å—Ç–∞—Ç–µ–π |
| **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** | ‚úÖ | Django Admin + –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏ | –£–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º |
| **Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä** | ‚úÖ | django-markdownx + Pillow | WYSIWYG —Å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º |
| **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ Markdown** | ‚úÖ | django-markdownify | –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ |
| **–ê–≤—Ç–æ–∏–º–ø–æ—Ä—Ç –∏–∑ Obsidian** | ‚úÖ | python-frontmatter, watchdog | –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** | ‚úÖ | shutil, PIL | –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ + –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ |
| **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** | ‚úÖ | Bootstrap 5 + –∫–∞—Å—Ç–æ–º–Ω—ã–π CSS | –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è |
| **–°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤/–∫–∞—Ç–µ–≥–æ—Ä–∏–π** | ‚úÖ | django-taggit | –ì–∏–±–∫–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è |

---

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê (–¢–ï–ö–£–©–ê–Ø)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:

text

```
UniversalCreativeHub/
‚îú‚îÄ‚îÄ uch-backend/                    # Django –±—ç–∫–µ–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                 # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml         # Docker Compose
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îÇ   ‚îú‚îÄ‚îÄ media/                     # –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ blog/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ images/            # –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ static/                    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ css/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ style.css          # –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ uch/                       # Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ       ‚îú‚îÄ‚îÄ settings.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ urls.py              # –ú–∞—Ä—à—Ä—É—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ apps/
‚îÇ           ‚îî‚îÄ‚îÄ blog/            # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–ª–æ–≥–∞
‚îÇ               ‚îú‚îÄ‚îÄ models.py    # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ               ‚îú‚îÄ‚îÄ views.py     # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ               ‚îú‚îÄ‚îÄ urls.py      # URL –±–ª–æ–≥–∞
‚îÇ               ‚îú‚îÄ‚îÄ admin.py     # –ê–¥–º–∏–Ω–∫–∞ —Å markdownx
‚îÇ               ‚îú‚îÄ‚îÄ management/commands/import_obsidian.py  # –ò–º–ø–æ—Ä—Ç
‚îÇ               ‚îî‚îÄ‚îÄ templates/blog/  # –®–∞–±–ª–æ–Ω—ã
```

---

## üîå –¢–ï–•–ù–û–õ–û–ì–ò–ß–ï–°–ö–ò–ô –°–¢–ï–ö (–§–ê–ó–ê 1)

### –ë—ç–∫–µ–Ω–¥:

- **Python 3.8.9** \- –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **Django 4.2.7** \- –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL/SQLite** \- –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **django-taggit** \- —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤
- **django-markdownx** \- —Ä–µ–¥–∞–∫—Ç–æ—Ä Markdown
- **django-markdownify** \- —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ Markdown
- **python-frontmatter** \- –ø–∞—Ä—Å–∏–Ω–≥ Obsidian —Ñ–∞–π–ª–æ–≤
- **watchdog** \- –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (–ë–ª–æ–≥):

- **Bootstrap 5.3.0** \- CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **–ö–∞—Å—Ç–æ–º–Ω—ã–π CSS** \- –∞–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –ø—Ä–æ–µ–∫—Ç
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** \- mobile-first –ø–æ–¥—Ö–æ–¥
- **Markdown ‚Üí HTML** \- –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–º–µ—Ç–∫–∏

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

- **Docker + Docker Compose** \- –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Virtualenv** \- –∏–∑–æ–ª—è—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **SQLite (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)** / **PostgreSQL (–ø—Ä–æ–¥–∞–∫—à–Ω)**

---

## üé® –î–ò–ó–ê–ô–ù-–°–ò–°–¢–ï–ú–ê

### –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞:

css

```
:root {
    --primary-color: #4361ee;      /* –û—Å–Ω–æ–≤–Ω–æ–π —Å–∏–Ω–∏–π */
    --secondary-color: #3a0ca3;    /* –¢–µ–º–Ω—ã–π —Å–∏–Ω–∏–π */
    --accent-color: #f72585;       /* –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ä–æ–∑–æ–≤—ã–π */
    --light-color: #f8f9fa;        /* –°–≤–µ—Ç–ª—ã–π —Ñ–æ–Ω */
    --dark-color: #212529;         /* –¢–µ–∫—Å—Ç */
}
```

### –°—Ç–∏–ª–∏ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

css

```
.markdown-content img {
    max-width: 100% !important;    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    height: auto !important;       /* –ü—Ä–æ–ø–æ—Ä—Ü–∏–∏ */
    display: block !important;     /* –£–±—Ä–∞—Ç—å –æ—Ç—Å—Ç—É–ø—ã */
    margin: 1.5rem auto !important; /* –¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ */
    border-radius: 8px;            /* –ó–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–µ —É–≥–ª—ã */
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); /* –¢–µ–Ω—å */
}
```

---

## üîß –ö–õ–Æ–ß–ï–í–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

### 1\. –ú–æ–¥–µ–ª—å Article (—É—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ–≤–∞–Ω–Ω–∞—è):

python

```
class Article(models.Model):
    title = models.CharField(max_length=200)
    slug = models.SlugField(unique=True)
    content = MarkdownxField()  # Markdown —Å —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
    status = models.CharField(choices=STATUS_CHOICES, default='draft')
    category = models.ForeignKey(Category, on_delete=models.PROTECT)
    tags = TaggableManager()  # django-taggit
    author = models.ForeignKey(User, on_delete=models.CASCADE)
    featured_image = models.ImageField(upload_to='blog/', blank=True)
    created_at = models.DateTimeField(auto_now_add=True)
    published_at = models.DateTimeField(null=True, blank=True)
```

### 2\. –ö–æ–º–∞–Ω–¥–∞ –∏–º–ø–æ—Ä—Ç–∞ –∏–∑ Obsidian:

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ slug** –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞
- **–ü–∞—Ä—Å–∏–Ω–≥ front matter** (YAML –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö)
- **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** —Å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Å—ã–ª–æ–∫** Obsidian (`[[note]]` ‚Üí HTML —Å—Å—ã–ª–∫–∏)
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–≥–æ–≤** –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- **DRY RUN —Ä–µ–∂–∏–º** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ó–∞–ø—É—Å–∫:**`python manage.py import_obsidian /path/to/obsidian --author admin`

---

## üìà –ú–ï–¢–†–ò–ö–ò –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
| --- | --- | --- |
| –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ | < 2 —Å–µ–∫ | ‚úÖ |
| –ó–∞–≥—Ä—É–∑–∫–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã | < 500 –º—Å | ‚úÖ |
| –ò–º–ø–æ—Ä—Ç —Å—Ç–∞—Ç—å–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ | < 1 —Å–µ–∫ | ‚úÖ |
| –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (10 —Å—Ç–∞—Ç–µ–π) | ~ 2 MB | ‚úÖ |
| –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã | –í—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ | ‚úÖ |

---

## ‚úÖ –ö–†–ò–¢–ï–†–ò–ò –ì–û–¢–û–í–ù–û–°–¢–ò –§–ê–ó–´ 1

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –î–µ—Ç–∞–ª–∏ |
| --- | --- | --- |
| –ë–ª–æ–≥ –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –¥–æ–º–µ–Ω—É | ‚úÖ | localhost:8000 |
| –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å | ‚úÖ | –ü–æ–ª–Ω—ã–π CRUD |
| Docker Compose –¥–µ–ø–ª–æ–π | ‚úÖ | –ì–æ—Ç–æ–≤–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| Markdown —Ä–µ–¥–∞–∫—Ç–æ—Ä | ‚úÖ | WYSIWYG —Å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º |
| –ò–º–ø–æ—Ä—Ç –∏–∑ Obsidian | ‚úÖ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π + –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è |
| –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω | ‚úÖ | Mobile-first |
| –°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤/–∫–∞—Ç–µ–≥–æ—Ä–∏–π | ‚úÖ | –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è |
| –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è | ‚ö†Ô∏è | –ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è |
| RSS/Atom —Ñ–∏–¥—ã | ‚è≥ | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ | ‚è≥ | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |

---

## üö® –ò–ó–í–ï–°–¢–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

1. **–ü–æ–∏—Å–∫**: –¢–æ–ª—å–∫–æ –±–∞–∑–æ–≤–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –Ω–µ—Ç –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞
2. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ `@cache_page`)
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: `DEBUG=True` –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ, –Ω—É–∂–Ω–æ –æ—Ç–∫–ª—é—á–∞—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**: –ú–æ–¥–µ–ª—å –µ—Å—Ç—å, –Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
5. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è**: –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ —Å—Ç–∞—Ç–µ–π

---

## üîÑ –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–û–í

### –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã:

bash

```
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
git clone <repository>
cd uch-backend

# 2. –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 3. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# 4. –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
python manage.py migrate
python manage.py createsuperuser

# 5. –ó–∞–ø—É—Å–∫
python manage.py runserver
```

### –ò–º–ø–æ—Ä—Ç –∏–∑ Obsidian:

bash

```
# –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è)
python manage.py import_obsidian /path/to/obsidian/vault --dry-run

# –†–µ–∞–ª—å–Ω—ã–π –∏–º–ø–æ—Ä—Ç
python manage.py import_obsidian /path/to/obsidian/vault --author admin --update-existing

# –° –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ (watchdog)
# (–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥—ã)
```

---

## üìã –ü–ï–†–ï–î–ê–ß–ê –ü–†–û–ï–ö–¢–ê –î–õ–Ø –§–ê–ó–´ 2

### –ß—Ç–æ –≥–æ—Ç–æ–≤–æ –¥–ª—è —Å—Ç—É–¥–∏–∏:

1. ‚úÖ **–ë—ç–∫–µ–Ω–¥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** \- Django + API
2. ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** \- —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. ‚úÖ **–ú–µ–¥–∏–∞-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç** \- –∑–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
4. ‚úÖ **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** \- —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
5. ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** \- –º–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Å—Ç—É–¥–∏–∏:

1. ‚è≥ **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ React** \- –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
2. ‚è≥ **WebSocket —Å–µ—Ä–≤–µ—Ä** \- –¥–ª—è real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
3. ‚è≥ **–ê—É–¥–∏–æ-–¥–≤–∏–∂–æ–∫** \- Tone.js/Web Audio API
4. ‚è≥ **–ù–æ–¥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞** \- —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –§–ê–ó–´ 2

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å—Ç—É–¥–∏–∏:

text

```
uch-frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/    # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ core/         # –Ø–¥—Ä–æ-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä (TypeScript)
‚îÇ   ‚îú‚îÄ‚îÄ nodes/        # –ù–æ–¥—ã-—Ä–µ–¥–∞–∫—Ç–æ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ store/        # Zustand —Å–æ—Å—Ç–æ—è–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ styles/       # Tailwind CSS
‚îú‚îÄ‚îÄ public/           # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ package.json      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Node.js
```

### –ü–µ—Ä–≤—ã–µ —à–∞–≥–∏ –§–∞–∑—ã 2:

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å React + TypeScript + Vite** –ø—Ä–æ–µ–∫—Ç
2. **–°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π Layout** —Å—Ç—É–¥–∏–∏
3. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** —Å –±—ç–∫–µ–Ω–¥–æ–º
4. **–°–æ–∑–¥–∞—Ç—å CoreOrchestrator** –Ω–∞ TypeScript
5. **–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–µ –Ω–æ–¥—ã** (MasterClock, StrudelREPL)

---

## üìä –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò

### –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã:

- `uch/settings.py` \- –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Django
- `uch/urls.py` \- –º–∞—Ä—à—Ä—É—Ç—ã, –≤–∫–ª—é—á–∞—è media –≤ DEBUG
- `uch/apps/blog/management/commands/import_obsidian.py` \- –∏–º–ø–æ—Ä—Ç Obsidian
- `static/css/style.css` \- –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏
- `templates/base.html` \- –±–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

python

```
# settings.py - –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã
INSTALLED_APPS = [
    'markdownx',      # –†–µ–¥–∞–∫—Ç–æ—Ä Markdown
    'markdownify',    # –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ Markdown
    'taggit',         # –°–∏—Å—Ç–µ–º–∞ —Ç–µ–≥–æ–≤
]

# –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã
MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'

# Markdownify –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
MARKDOWNIFY = {
    "default": {
        "WHITELIST_TAGS": ['img', 'a', 'p', 'h1', 'h2', 'h3', ...],
        "BLEACH": False,  # –í–∞–∂–Ω–æ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π!
    }
}
```

---

## üéâ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï –§–ê–ó–´ 1

**–§–∞–∑–∞ 1 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!** –ü–æ–ª—É—á–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –±–ª–æ–≥/–ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ —Å:

1. ‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π –∞–¥–º–∏–Ω–∫–æ–π** —Å Markdown-—Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
2. ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏–º–ø–æ—Ä—Ç–æ–º** –∏–∑ Obsidian —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
3. ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º** –º–µ–¥–∏–∞–∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
4. ‚úÖ **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–º –¥–∏–∑–∞–π–Ω–æ–º** –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
5. ‚úÖ **–ì–æ—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π** –¥–ª—è –¥–µ–ø–ª–æ—è (Docker)

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ –§–∞–∑—É 2: –¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ç—É–¥–∏—è —Å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π —è–¥—Ä–∞-–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞.**

---

**–î–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω:** 09.12.2025  
**–ê–≤—Ç–æ—Ä:** –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç Universal Creative Hub  
**–°—Ç–∞—Ç—É—Å:** –§–∞–∑–∞ 1 –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –≥–æ—Ç–æ–≤–æ –∫ –§–∞–∑–µ 2 ‚úÖ

---

\* –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ù–∞—á–∞—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –§–∞–∑—ã 2 - –Ø–¥—Ä–æ —Å—Ç—É–¥–∏–∏ (Core Orchestrator) –Ω–∞ TypeScript/React \*

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –ò–ò, —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏