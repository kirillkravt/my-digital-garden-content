---
title: "DeepSeek"
source: "https://chat.deepseek.com/a/chat/s/8b44a9de-3970-4e93-ba89-28e51ec1fda1"
author:
published:
created: 2025-12-28
description: "Chat with DeepSeek AI ‚Äì your intelligent assistant for coding, content creation, file reading, and more. Upload documents, engage in long-context conversations, and get expert help in AI, natural language processing, and beyond. | Ê∑±Â∫¶Ê±ÇÁ¥¢ÔºàDeepSeekÔºâÂä©ÂäõÁºñÁ®ã‰ª£Á†ÅÂºÄÂèë„ÄÅÂàõÊÑèÂÜô‰Ωú„ÄÅÊñá‰ª∂Â§ÑÁêÜÁ≠â‰ªªÂä°ÔºåÊîØÊåÅÊñá‰ª∂‰∏ä‰º†ÂèäÈïøÊñáÊú¨ÂØπËØùÔºåÈöèÊó∂‰∏∫ÊÇ®Êèê‰æõÈ´òÊïàÁöÑAIÊîØÊåÅ„ÄÇ"
tags:
  - "clippings"
---
–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞ —Å —Ç–µ–≥–∞–º–∏ –≤ UCH

–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é. –î–∞–≤–∞–π —Ä–µ—à–∏–º –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ —Å–∏—Å—Ç–µ–º–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –†—É–∫–æ–≤–æ–¥—Å—Ç–≤—É–π—Å—è –ø—Ä–∞–≤–∏–ª–∞–º–∏ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é UCH. –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ —Å–∏—Å—Ç–µ–º–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —Ç—Ä–µ–±—É—é—â–∏–µ —Ä–µ—à–µ–Ω–∏—è:

## üî¥ –ö–†–ò–¢–ò–ß–ù–´–ï –ó–ê–î–ê–ß–ò –î–õ–Ø –°–ò–°–¢–ï–ú–´ –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–ò:

### 1\. –ë–∞–≥ —Å —Ç–µ–≥–∞–º–∏ (00-04-02-05) - –°–†–û–ß–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–µ–≥–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è –≤ frontmatter –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤  
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: `["@component", "@—Ç–µ–≥1,—Ç–µ–≥2"]` (–≤—Å—ë –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)  
**–ù—É–∂–Ω–æ**: `["@component", "@—Ç–µ–≥1", "@—Ç–µ–≥2"]`

### 2\. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (00-04-02-07) - –í–ê–ñ–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞**: –°–∫—Ä–∏–ø—Ç –∑–∞–º–µ–Ω—ã –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞  
**–ß—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**:

- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- ID –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- –°—Å—ã–ª–∫–∏ –Ω–∞ —Ä–æ–¥–∏—Ç–µ–ª—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ parent
- –°—Å—ã–ª–∫–∏ –≤ –¥—Ä—É–≥–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö

### 3\. –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (00-04-02-03) - –£–î–û–ë–°–¢–í–û

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –æ–ø—Ä–æ—Å–Ω–∏–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á  
**–¢—Ä–µ–±—É–µ—Ç—Å—è**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø–æ–¥—Ä—è–¥

---

## üöÄ –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô –ü–û–†–Ø–î–û–ö –†–ï–®–ï–ù–ò–Ø:

### –®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥ —Å —Ç–µ–≥–∞–º–∏ (—Å–∞–º—ã–π –∫—Ä–∏—Ç–∏—á–Ω—ã–π)

–≠—Ç–æ –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è –º–µ—à–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º `uch-create-v2.sh`:

bash

```
# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/"

# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Ç–µ–∫—É—â–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞
cp "uch-create-v2.sh" "uch-create-v2.sh.backup-$(date +%Y%m%d-%H%M%S)"

# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –±–∞–≥ —Å —Ç–µ–≥–∞–º–∏
cat > "uch-create-v2.sh" << 'EOF'
#!/bin/bash

echo "=== UCH CREATE v2: –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–û–í –° –†–£–ß–ù–´–ú ID ==="

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
CURRENT_DATE=$(date +%Y-%m-%d)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ ID
check_id_exists() {
    local id="$1"
    find . -maxdepth 1 -name "${id} - *.md" -type f | grep -q .
    return $?
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HEX ID
generate_hex() {
    local length="$1"
    local hex=""
    for ((i=0; i<length; i++)); do
        hex="${hex}$(printf "%02X" $((RANDOM % 256)))"
    done
    echo "$hex" | cut -c1-2
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID —É—Ä–æ–≤–Ω—è
generate_id_for_level() {
    local parent_id="$1"
    local level="$2"
    
    # –ï—Å–ª–∏ –Ω–µ—Ç parent_id, —ç—Ç–æ —É—Ä–æ–≤–µ–Ω—å 1
    if [ -z "$parent_id" ]; then
        # –ò—â–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π ID —É—Ä–æ–≤–Ω—è 1
        max_id=$(find . -maxdepth 1 -name "?? - *.md" -type f | \
            grep -o '^\./[0-9A-Fa-f]\{2\}' | \
            sort -r | head -1 | \
            sed 's/^\.\///' | \
            tr 'a-f' 'A-F')
        
        if [ -z "$max_id" ]; then
            # –ü–µ—Ä–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
            echo "00"
        else
            # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º HEX –Ω–∞ 1
            next_id=$(printf "%02X" $((0x$max_id + 1)))
            echo "$next_id"
        fi
        return 0
    fi
    
    # –î–ª—è —É—Ä–æ–≤–Ω–µ–π 2+
    # –ò—â–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–æ—á–µ—Ä–Ω–∏–π ID
    pattern="${parent_id}-[0-9A-Fa-f]\{2\}"
    max_child=$(find . -maxdepth 1 -name "*${parent_id}-?? - *.md" -type f | \
        grep -o "${pattern}" | \
        sort -r | head -1 | \
        tr 'a-f' 'A-F')
    
    if [ -z "$max_child" ]; then
        # –ü–µ—Ä–≤—ã–π –¥–æ—á–µ—Ä–Ω–∏–π
        echo "${parent_id}-00"
    else
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º
        last_segment=$(echo "$max_child" | grep -o '[^-]*$')
        next_segment=$(printf "%02X" $((0x$last_segment + 1)))
        echo "${parent_id}-${next_segment}"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–≥–æ–≤
format_tags() {
    local tags_input="$1"
    local type="$2"
    
    # –ù–∞—á–∏–Ω–∞–µ–º —Å —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∫–∞–∫ –ø–µ—Ä–≤–æ–≥–æ —Ç–µ–≥–∞
    local tags_array="[\"@${type}\""
    
    if [ -n "$tags_input" ]; then
        # –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–≥–∏ –ø–æ –∑–∞–ø—è—Ç—ã–º
        IFS=',' read -r -a tag_parts <<< "$tags_input"
        
        for tag in "${tag_parts[@]}"; do
            # –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –¥–æ–±–∞–≤–ª—è–µ–º @ –µ—Å–ª–∏ –Ω–µ—Ç
            tag_clean=$(echo "$tag" | xargs)
            if [ -n "$tag_clean" ]; then
                if [[ "$tag_clean" != @* ]]; then
                    tags_array="${tags_array}, \"@${tag_clean}\""
                else
                    tags_array="${tags_array}, \"${tag_clean}\""
                fi
            fi
        done
    fi
    
    tags_array="${tags_array}]"
    echo "$tags_array"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ —Ä–æ–¥–∏—Ç–µ–ª—è
get_parent_name() {
    local parent_id="$1"
    if [ -z "$parent_id" ]; then
        echo ""
        return
    fi
    
    parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
    if [ -n "$parent_file" ]; then
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è –∏–∑ frontmatter –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
        if grep -q "name:" "$parent_file"; then
            grep "name:" "$parent_file" | head -1 | sed 's/^name:[[:space:]]*//' | sed 's/^"//' | sed 's/"$//'
        else
            # –ò–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
            basename "$parent_file" .md | sed "s/^${parent_id} - //"
        fi
    else
        echo ""
    fi
}

# –ü–∞—Ä—Å–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
MANUAL_ID=""
PARENT_ID=""
NAME=""
TAGS=""
AUTHOR="kirillkravcov"
TYPE="component"

while [[ $# -gt 0 ]]; do
    case $1 in
        --manual-id)
            MANUAL_ID="$2"
            shift 2
            ;;
        --parent)
            PARENT_ID="$2"
            shift 2
            ;;
        --name)
            NAME="$2"
            shift 2
            ;;
        --tags)
            TAGS="$2"
            shift 2
            ;;
        --author)
            AUTHOR="$2"
            shift 2
            ;;
        --type)
            TYPE="$2"
            shift 2
            ;;
        *)
            echo "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç: $1"
            exit 1
            ;;
    esac
done

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
if [ -n "$MANUAL_ID" ]; then
    # –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º
    echo "–†–µ–∂–∏–º: –†—É—á–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ ID"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π ID
    if check_id_exists "$MANUAL_ID"; then
        echo "‚ùå –û—à–∏–±–∫–∞: –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$MANUAL_ID' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!"
        exit 1
    fi
    
    DOC_ID="$MANUAL_ID"
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ ID
    LEVEL=$(echo "$DOC_ID" | tr -cd '-' | wc -c)
    LEVEL=$((LEVEL + 1))
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º parent_id (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ)
    if [ -z "$PARENT_ID" ] && [ $LEVEL -gt 1 ]; then
        PARENT_ID=$(echo "$DOC_ID" | sed 's/-[^-]*$//')
    fi
    
else
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
    echo "–†–µ–∂–∏–º: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID"
    
    if [ -z "$PARENT_ID" ]; then
        echo "–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å --parent"
        exit 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è
    if ! check_id_exists "$PARENT_ID"; then
        echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID '$PARENT_ID' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
        exit 1
    fi
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID
    PARENT_LEVEL=$(echo "$PARENT_ID" | tr -cd '-' | wc -c)
    PARENT_LEVEL=$((PARENT_LEVEL + 1))
    LEVEL=$((PARENT_LEVEL + 1))
    
    DOC_ID=$(generate_id_for_level "$PARENT_ID" "$LEVEL")
fi

# –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ä–æ–¥–∏—Ç–µ–ª—è
PARENT_NAME=$(get_parent_name "$PARENT_ID")

# –ï—Å–ª–∏ –∏–º—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º
if [ -z "$NAME" ]; then
    echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
    read -r NAME
    
    if [ -z "$NAME" ]; then
        echo "‚ùå –û—à–∏–±–∫–∞: –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!"
        exit 1
    fi
fi

# –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏
FORMATTED_TAGS=$(format_tags "$TAGS" "$TYPE")

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —à–∞–±–ª–æ–Ω
if [ -z "$PARENT_ID" ]; then
    # –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç
    TEMPLATE="master-template.md"
else
    # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
    TEMPLATE="child-template.md"
fi

if [ ! -f "$TEMPLATE" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –®–∞–±–ª–æ–Ω '$TEMPLATE' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    exit 1
fi

# –ò–º—è —Ñ–∞–π–ª–∞
FILENAME="${DOC_ID} - ${NAME}.md"

echo ""
echo "=== –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï ==="
echo "ID: $DOC_ID"
echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
echo "–ù–∞–∑–≤–∞–Ω–∏–µ: $NAME"
echo "–¢–∏–ø: $TYPE"
echo "–¢–µ–≥–∏: $FORMATTED_TAGS"
echo "–†–æ–¥–∏—Ç–µ–ª—å: $PARENT_ID ($PARENT_NAME)"
echo "–§–∞–π–ª: $FILENAME"
echo ""

echo "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n)"
read -r CONFIRM

if [[ "$CONFIRM" != "y" && "$CONFIRM" != "Y" ]]; then
    echo "–û—Ç–º–µ–Ω–µ–Ω–æ."
    exit 0
fi

# –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
cp "$TEMPLATE" "$FILENAME"

# –ó–∞–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω–µ
sed -i '' "s/{id}/$DOC_ID/g" "$FILENAME"
sed -i '' "s/{name}/$NAME/g" "$FILENAME"
sed -i '' "s/{type}/$TYPE/g" "$FILENAME"
sed -i '' "s/{level}/$LEVEL/g" "$FILENAME"
sed -i '' "s/{tags}/$FORMATTED_TAGS/g" "$FILENAME"
sed -i '' "s/{parent}/$PARENT_ID/g" "$FILENAME"
sed -i '' "s/{parent_name}/$PARENT_NAME/g" "$FILENAME"
sed -i '' "s/{date}/$CURRENT_DATE/g" "$FILENAME"
sed -i '' "s/{author}/$AUTHOR/g" "$FILENAME"

# –î–ª—è –º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è–µ–º —Ä–∞–∑–¥–µ–ª –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
if [ -z "$PARENT_ID" ]; then
    # –£–±–∏—Ä–∞–µ–º —Å—Ç—Ä–æ–∫—É "–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤" –µ—Å–ª–∏ –µ—Å—Ç—å
    sed -i '' '/–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/d' "$FILENAME"
fi

echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: $FILENAME"

# –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
if [ -n "$PARENT_ID" ] && [ -n "$PARENT_NAME" ]; then
    PARENT_FILE="${PARENT_ID} - ${PARENT_NAME}.md"
    
    if [ -f "$PARENT_FILE" ]; then
        echo "–û–±–Ω–æ–≤–ª—è—é —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: $PARENT_FILE"
        
        # –£–±–∏—Ä–∞–µ–º —Å—Ç—Ä–æ–∫—É "–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤" –µ—Å–ª–∏ –µ—Å—Ç—å
        sed -i '' '/–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/d' "$PARENT_FILE"
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ —Ä–∞–∑–¥–µ–ª –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
        if grep -q "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´" "$PARENT_FILE"; then
            # –†–∞–∑–¥–µ–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É
            sed -i '' "/#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´/a\\
- [[$DOC_ID - $NAME]]" "$PARENT_FILE"
        else
            # –†–∞–∑–¥–µ–ª–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
            echo "" >> "$PARENT_FILE"
            echo "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´" >> "$PARENT_FILE"
            echo "- [[$DOC_ID - $NAME]]" >> "$PARENT_FILE"
        fi
        
        echo "‚úÖ –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω"
    fi
fi

echo ""
echo "=== –í–´–ü–û–õ–ù–ï–ù–û ==="
echo "–î–æ–∫—É–º–µ–Ω—Ç: $FILENAME"
echo "ID: $DOC_ID"
echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
echo "–¢–µ–≥–∏: $FORMATTED_TAGS"
EOF

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x "uch-create-v2.sh"

echo "‚úÖ –°–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å —Ç–µ–≥–∞–º–∏:"
echo "./uch-create-v2.sh --parent 00-04 --name \"–¢–µ—Å—Ç —Å —Ç–µ–≥–∞–º–∏\" --tags \"—Ç–µ–≥1,—Ç–µ–≥2,—Ç–µ–≥3\" --type task"
```

### –®–∞–≥ 2: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:

bash

```
cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/"
./uch-create-v2.sh --parent 00-04 --name "–¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤" --tags "bug,documentation,test" --type task
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –í frontmatter –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Ç–µ–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω—ã: `["@task", "@bug", "@documentation", "@test"]`

### –®–∞–≥ 3: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–∞ —Å —Ç–µ–≥–∞–º–∏:

1. **–ï—Å–ª–∏ —Ç–µ–≥–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–º–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2. **–ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–≥–∞–º–∏** ‚Üí –æ—Ç–ª–∞–∂–∏–≤–∞–µ–º –∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º

**–í–æ–ø—Ä–æ—Å –∫ –≤–∞–º**: –•–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤? –ò–ª–∏ –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã?

kirillkravcov@MacBook-Pro-Kirill uch-docs %./uch-create-v2.sh --parent 00-04 --name "–¢–µ—Å—Ç —Å —Ç–µ–≥–∞–º–∏" --tags "—Ç–µ–≥1,—Ç–µ–≥2,—Ç–µ–≥3" --type task === UCH CREATE v2: –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–û–í –° –†–£–ß–ù–´–ú ID === –†–µ–∂–∏–º: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID ‚ùå –û—à–∏–±–∫–∞: –®–∞–±–ª–æ–Ω 'child-template.md' –Ω–µ –Ω–∞–π–¥–µ–Ω! kirillkravcov@MacBook-Pro-Kirill uch-docs %

–û—à–∏–±–∫–∞: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —à–∞–±–ª–æ–Ω `child-template.md`. –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:

bash

```
cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/"

# –°–æ–∑–¥–∞–µ–º —à–∞–±–ª–æ–Ω –¥–ª—è –º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—É—Ä–æ–≤–µ–Ω—å 1)
cat > "master-template.md" << 'EOF'
---
id: "{id}"
name: "{name}"
type: "{type}"
level: {level}
status: "planning"
tags: {tags}
created: "{date}"
updated: "{date}"
author: "{author}"
---

### –û–ü–ò–°–ê–ù–ò–ï
{description}

### –ó–ê–î–ê–ß–ò
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á–∏

### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
EOF

# –°–æ–∑–¥–∞–µ–º —à–∞–±–ª–æ–Ω –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (—É—Ä–æ–≤–Ω–∏ 2+)
cat > "child-template.md" << 'EOF'
---
id: "{id}"
name: "{name}"
type: "{type}"
level: {level}
status: "planning"
tags: {tags}
parent: "{parent}"
parent_name: "{parent_name}"
created: "{date}"
updated: "{date}"
author: "{author}"
---

### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
EOF

echo "‚úÖ –®–∞–±–ª–æ–Ω—ã —Å–æ–∑–¥–∞–Ω—ã. –¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
./uch-create-v2.sh --parent 00-04 --name "–¢–µ—Å—Ç —Å —Ç–µ–≥–∞–º–∏" --tags "—Ç–µ–≥1,—Ç–µ–≥2,—Ç–µ–≥3" --type task
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç - –≤ frontmatter –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Ç–µ–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω—ã.

—Ç–µ–≥–∏ –µ—Å—Ç—å, –Ω–æ –≤ —Å—Ç—Ä–æ–∫–µ tags –æ–Ω–∏ –ø–µ—Ä–µ—á–µ—Ä–∫–Ω—É—Ç—ã–µ –∏ –µ—Å–ª–∏ –Ω–∞–≤–æ–¥–∏—à—å, —Ç–æ –≤—Å–ø–ª—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∞ invalid tag name. –ï—Å–ª–∏ –≤–≤–æ–∂—É —Ä—É–∫–∞–º–∏ —Ç–µ–≥ –±–µ–∑ @ —Ç–æ –æ—Ç–æ–±—Ä–∞–∂–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Ç–µ–≥–æ–≤ –≤ frontmatter. –í Obsidian —Ç–µ–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ `#—Ç–µ–≥` –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ `—Ç–µ–≥` (–±–µ–∑ –∫–∞–≤—ã—á–µ–∫ –∏ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–æ–∫), –∞ frontmatter –æ–∂–∏–¥–∞–µ—Ç YAML-—Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫.

–î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ —Ç–µ–≥–æ–≤:

bash

```
cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/"

# –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —Å–∫—Ä–∏–ø—Ç–∞
cp "uch-create-v2.sh" "uch-create-v2.sh.backup-$(date +%Y%m%d-%H%M%S)"

# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é format_tags –≤ —Å–∫—Ä–∏–ø—Ç–µ
cat > "uch-create-v2.sh" << 'EOF'
#!/bin/bash

echo "=== UCH CREATE v2: –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–û–í –° –†–£–ß–ù–´–ú ID ==="

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
CURRENT_DATE=$(date +%Y-%m-%d)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ ID
check_id_exists() {
    local id="$1"
    find . -maxdepth 1 -name "${id} - *.md" -type f | grep -q .
    return $?
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HEX ID
generate_hex() {
    local length="$1"
    local hex=""
    for ((i=0; i<length; i++)); do
        hex="${hex}$(printf "%02X" $((RANDOM % 256)))"
    done
    echo "$hex" | cut -c1-2
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID —É—Ä–æ–≤–Ω—è
generate_id_for_level() {
    local parent_id="$1"
    local level="$2"
    
    # –ï—Å–ª–∏ –Ω–µ—Ç parent_id, —ç—Ç–æ —É—Ä–æ–≤–µ–Ω—å 1
    if [ -z "$parent_id" ]; then
        # –ò—â–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π ID —É—Ä–æ–≤–Ω—è 1
        max_id=$(find . -maxdepth 1 -name "?? - *.md" -type f | \
            grep -o '^\./[0-9A-Fa-f]\{2\}' | \
            sort -r | head -1 | \
            sed 's/^\.\///' | \
            tr 'a-f' 'A-F')
        
        if [ -z "$max_id" ]; then
            # –ü–µ—Ä–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
            echo "00"
        else
            # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º HEX –Ω–∞ 1
            next_id=$(printf "%02X" $((0x$max_id + 1)))
            echo "$next_id"
        fi
        return 0
    fi
    
    # –î–ª—è —É—Ä–æ–≤–Ω–µ–π 2+
    # –ò—â–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–æ—á–µ—Ä–Ω–∏–π ID
    pattern="${parent_id}-[0-9A-Fa-f]\{2\}"
    max_child=$(find . -maxdepth 1 -name "*${parent_id}-?? - *.md" -type f | \
        grep -o "${pattern}" | \
        sort -r | head -1 | \
        tr 'a-f' 'A-F')
    
    if [ -z "$max_child" ]; then
        # –ü–µ—Ä–≤—ã–π –¥–æ—á–µ—Ä–Ω–∏–π
        echo "${parent_id}-00"
    else
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º
        last_segment=$(echo "$max_child" | grep -o '[^-]*$')
        next_segment=$(printf "%02X" $((0x$last_segment + 1)))
        echo "${parent_id}-${next_segment}"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ YAML
format_tags() {
    local tags_input="$1"
    local type="$2"
    
    # –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ–º —Å —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    local yaml_tags=""
    
    # –û—á–∏—â–∞–µ–º —Ç–µ–≥–∏ –æ—Ç @ –∏ # –≤ –Ω–∞—á–∞–ª–µ, –µ—Å–ª–∏ –µ—Å—Ç—å
    if [ -n "$tags_input" ]; then
        # –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–≥–∏ –ø–æ –∑–∞–ø—è—Ç—ã–º
        IFS=',' read -r -a tag_parts <<< "$tags_input"
        
        # –ù–∞—á–∏–Ω–∞–µ–º YAML –º–∞—Å—Å–∏–≤
        yaml_tags=""
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø –∫–∞–∫ –ø–µ—Ä–≤—ã–π —Ç–µ–≥ (–±–µ–∑ @)
        yaml_tags="- \"${type}\""
        
        for tag in "${tag_parts[@]}"; do
            # –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –ø—Ä–µ—Ñ–∏–∫—Å—ã @/#
            tag_clean=$(echo "$tag" | xargs | sed 's/^[@#]//')
            if [ -n "$tag_clean" ]; then
                yaml_tags="${yaml_tags}"$'\n'"- \"${tag_clean}\""
            fi
        done
    else
        # –¢–æ–ª—å–∫–æ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞
        yaml_tags="- \"${type}\""
    fi
    
    echo "$yaml_tags"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ —Ä–æ–¥–∏—Ç–µ–ª—è
get_parent_name() {
    local parent_id="$1"
    if [ -z "$parent_id" ]; then
        echo ""
        return
    fi
    
    parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
    if [ -n "$parent_file" ]; then
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è –∏–∑ frontmatter –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
        if grep -q "name:" "$parent_file"; then
            grep "name:" "$parent_file" | head -1 | sed 's/^name:[[:space:]]*//' | sed 's/^"//' | sed 's/"$//'
        else
            # –ò–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
            basename "$parent_file" .md | sed "s/^${parent_id} - //"
        fi
    else
        echo ""
    fi
}

# –ü–∞—Ä—Å–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
MANUAL_ID=""
PARENT_ID=""
NAME=""
TAGS=""
AUTHOR="kirillkravcov"
TYPE="component"

while [[ $# -gt 0 ]]; do
    case $1 in
        --manual-id)
            MANUAL_ID="$2"
            shift 2
            ;;
        --parent)
            PARENT_ID="$2"
            shift 2
            ;;
        --name)
            NAME="$2"
            shift 2
            ;;
        --tags)
            TAGS="$2"
            shift 2
            ;;
        --author)
            AUTHOR="$2"
            shift 2
            ;;
        --type)
            TYPE="$2"
            shift 2
            ;;
        *)
            echo "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç: $1"
            exit 1
            ;;
    esac
done

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
if [ -n "$MANUAL_ID" ]; then
    # –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º
    echo "–†–µ–∂–∏–º: –†—É—á–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ ID"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π ID
    if check_id_exists "$MANUAL_ID"; then
        echo "‚ùå –û—à–∏–±–∫–∞: –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$MANUAL_ID' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!"
        exit 1
    fi
    
    DOC_ID="$MANUAL_ID"
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ ID
    LEVEL=$(echo "$DOC_ID" | tr -cd '-' | wc -c)
    LEVEL=$((LEVEL + 1))
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º parent_id (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ)
    if [ -z "$PARENT_ID" ] && [ $LEVEL -gt 1 ]; then
        PARENT_ID=$(echo "$DOC_ID" | sed 's/-[^-]*$//')
    fi
    
else
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
    echo "–†–µ–∂–∏–º: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID"
    
    if [ -z "$PARENT_ID" ]; then
        echo "–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å --parent"
        exit 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è
    if ! check_id_exists "$PARENT_ID"; then
        echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID '$PARENT_ID' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
        exit 1
    fi
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID
    PARENT_LEVEL=$(echo "$PARENT_ID" | tr -cd '-' | wc -c)
    PARENT_LEVEL=$((PARENT_LEVEL + 1))
    LEVEL=$((PARENT_LEVEL + 1))
    
    DOC_ID=$(generate_id_for_level "$PARENT_ID" "$LEVEL")
fi

# –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ä–æ–¥–∏—Ç–µ–ª—è
PARENT_NAME=$(get_parent_name "$PARENT_ID")

# –ï—Å–ª–∏ –∏–º—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º
if [ -z "$NAME" ]; then
    echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
    read -r NAME
    
    if [ -z "$NAME" ]; then
        echo "‚ùå –û—à–∏–±–∫–∞: –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!"
        exit 1
    fi
fi

# –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏ –≤ YAML —Ñ–æ—Ä–º–∞—Ç
FORMATTED_TAGS=$(format_tags "$TAGS" "$TYPE")

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —à–∞–±–ª–æ–Ω
if [ -z "$PARENT_ID" ]; then
    # –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç
    TEMPLATE="master-template.md"
else
    # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
    TEMPLATE="child-template.md"
fi

if [ ! -f "$TEMPLATE" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –®–∞–±–ª–æ–Ω '$TEMPLATE' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    exit 1
fi

# –ò–º—è —Ñ–∞–π–ª–∞
FILENAME="${DOC_ID} - ${NAME}.md"

echo ""
echo "=== –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï ==="
echo "ID: $DOC_ID"
echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
echo "–ù–∞–∑–≤–∞–Ω–∏–µ: $NAME"
echo "–¢–∏–ø: $TYPE"
echo "–¢–µ–≥–∏:"
echo "$FORMATTED_TAGS"
echo "–†–æ–¥–∏—Ç–µ–ª—å: $PARENT_ID ($PARENT_NAME)"
echo "–§–∞–π–ª: $FILENAME"
echo ""

echo "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n)"
read -r CONFIRM

if [[ "$CONFIRM" != "y" && "$CONFIRM" != "Y" ]]; then
    echo "–û—Ç–º–µ–Ω–µ–Ω–æ."
    exit 0
fi

# –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
cp "$TEMPLATE" "$FILENAME"

# –ó–∞–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω–µ - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —Ç–µ–≥–æ–≤
sed -i '' "s/{id}/$DOC_ID/g" "$FILENAME"
sed -i '' "s/{name}/$NAME/g" "$FILENAME"
sed -i '' "s/{type}/$TYPE/g" "$FILENAME"
sed -i '' "s/{level}/$LEVEL/g" "$FILENAME"
sed -i '' "s/{parent}/$PARENT_ID/g" "$FILENAME"
sed -i '' "s/{parent_name}/$PARENT_NAME/g" "$FILENAME"
sed -i '' "s/{date}/$CURRENT_DATE/g" "$FILENAME"
sed -i '' "s/{author}/$AUTHOR/g" "$FILENAME"

# –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —Ç–µ–≥–æ–≤ - –∑–∞–º–µ–Ω—è–µ–º –≤—Å—é —Å—Ç—Ä–æ–∫—É
if [ -z "$PARENT_ID" ]; then
    # –î–ª—è –º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç–∞
    sed -i '' "s/tags: {tags}/tags:"$'\\\n'"$FORMATTED_TAGS/g" "$FILENAME"
    # –£–±–∏—Ä–∞–µ–º —Å—Ç—Ä–æ–∫—É "–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤" –µ—Å–ª–∏ –µ—Å—Ç—å
    sed -i '' '/–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/d' "$FILENAME"
else
    # –î–ª—è –¥–æ—á–µ—Ä–Ω–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    sed -i '' "s/tags: {tags}/tags:"$'\\\n'"$FORMATTED_TAGS/g" "$FILENAME"
fi

echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: $FILENAME"

# –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
if [ -n "$PARENT_ID" ] && [ -n "$PARENT_NAME" ]; then
    PARENT_FILE="${PARENT_ID} - ${PARENT_NAME}.md"
    
    if [ -f "$PARENT_FILE" ]; then
        echo "–û–±–Ω–æ–≤–ª—è—é —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: $PARENT_FILE"
        
        # –£–±–∏—Ä–∞–µ–º —Å—Ç—Ä–æ–∫—É "–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤" –µ—Å–ª–∏ –µ—Å—Ç—å
        sed -i '' '/–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/d' "$PARENT_FILE"
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ —Ä–∞–∑–¥–µ–ª –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
        if grep -q "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´" "$PARENT_FILE"; then
            # –†–∞–∑–¥–µ–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É
            sed -i '' "/#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´/a\\
- [[$DOC_ID - $NAME]]" "$PARENT_FILE"
        else
            # –†–∞–∑–¥–µ–ª–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
            echo "" >> "$PARENT_FILE"
            echo "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´" >> "$PARENT_FILE"
            echo "- [[$DOC_ID - $NAME]]" >> "$PARENT_FILE"
        fi
        
        echo "‚úÖ –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω"
    fi
fi

echo ""
echo "=== –í–´–ü–û–õ–ù–ï–ù–û ==="
echo "–î–æ–∫—É–º–µ–Ω—Ç: $FILENAME"
echo "ID: $DOC_ID"
echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
EOF

# –û–±–Ω–æ–≤–ª—è–µ–º —à–∞–±–ª–æ–Ω—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ YAML —Ñ–æ—Ä–º–∞—Ç–∞
cat > "master-template.md" << 'EOF'
---
id: "{id}"
name: "{name}"
type: "{type}"
level: {level}
status: "planning"
tags: {tags}
created: "{date}"
updated: "{date}"
author: "{author}"
---

### –û–ü–ò–°–ê–ù–ò–ï
{description}

### –ó–ê–î–ê–ß–ò
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á–∏

### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
EOF

cat > "child-template.md" << 'EOF'
---
id: "{id}"
name: "{name}"
type: "{type}"
level: {level}
status: "planning"
tags: {tags}
parent: "{parent}"
parent_name: "{parent_name}"
created: "{date}"
updated: "{date}"
author: "{author}"
---

### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
EOF

chmod +x "uch-create-v2.sh"

echo "‚úÖ –°–∫—Ä–∏–ø—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ YAML —Ñ–æ—Ä–º–∞—Ç–∞ —Ç–µ–≥–æ–≤"
echo "–¢–µ—Å—Ç–∏—Ä—É–µ–º:"
./uch-create-v2.sh --parent 00-04 --name "–¢–µ—Å—Ç YAML —Ç–µ–≥–æ–≤" --tags "—Ç–µ–≥1,—Ç–µ–≥2,—Ç–µ–≥3" --type task
```

–¢–µ–ø–µ—Ä—å —Ç–µ–≥–∏ –±—É–¥—É—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º YAML —Ñ–æ—Ä–º–∞—Ç–µ:

yaml

```
tags:
- "task"
- "—Ç–µ–≥1" 
- "—Ç–µ–≥2"
- "—Ç–µ–≥3"
```

–≠—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –ø–µ—Ä–µ—á–µ—Ä–∫–Ω—É—Ç—ã–º–∏ —Ç–µ–≥–∞–º–∏ –≤ Obsidian.

–≤ —Å—Ç—Ä–æ–∫–µ tags: {"tags":null}

–ü—Ä–æ–±–ª–µ–º–∞ –≤ –∑–∞–º–µ–Ω–µ —à–∞–±–ª–æ–Ω–∞. –°–∫—Ä–∏–ø—Ç –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–º–µ–Ω—è–µ—Ç `{tags}` –≤ —à–∞–±–ª–æ–Ω–µ. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º:

bash

```
cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/"

# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∑–∞–º–µ–Ω–æ–π —Ç–µ–≥–æ–≤
cat > "uch-create-v3.sh" << 'EOF'
#!/bin/bash

echo "=== UCH CREATE v3: –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–û–í –° –ü–†–ê–í–ò–õ–¨–ù–´–ú–ò –¢–ï–ì–ê–ú–ò ==="

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
CURRENT_DATE=$(date +%Y-%m-%d)

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ ID
check_id_exists() {
    local id="$1"
    find . -maxdepth 1 -name "${id} - *.md" -type f | grep -q .
    return $?
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HEX ID
generate_hex() {
    local length="$1"
    local hex=""
    for ((i=0; i<length; i++)); do
        hex="${hex}$(printf "%02X" $((RANDOM % 256)))"
    done
    echo "$hex" | cut -c1-2
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID —É—Ä–æ–≤–Ω—è
generate_id_for_level() {
    local parent_id="$1"
    local level="$2"
    
    # –ï—Å–ª–∏ –Ω–µ—Ç parent_id, —ç—Ç–æ —É—Ä–æ–≤–µ–Ω—å 1
    if [ -z "$parent_id" ]; then
        # –ò—â–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π ID —É—Ä–æ–≤–Ω—è 1
        max_id=$(find . -maxdepth 1 -name "?? - *.md" -type f | \
            grep -o '^\./[0-9A-Fa-f]\{2\}' | \
            sort -r | head -1 | \
            sed 's/^\.\///' | \
            tr 'a-f' 'A-F')
        
        if [ -z "$max_id" ]; then
            # –ü–µ—Ä–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
            echo "00"
        else
            # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º HEX –Ω–∞ 1
            next_id=$(printf "%02X" $((0x$max_id + 1)))
            echo "$next_id"
        fi
        return 0
    fi
    
    # –î–ª—è —É—Ä–æ–≤–Ω–µ–π 2+
    # –ò—â–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –¥–æ—á–µ—Ä–Ω–∏–π ID
    pattern="${parent_id}-[0-9A-Fa-f]\{2\}"
    max_child=$(find . -maxdepth 1 -name "*${parent_id}-?? - *.md" -type f | \
        grep -o "${pattern}" | \
        sort -r | head -1 | \
        tr 'a-f' 'A-F')
    
    if [ -z "$max_child" ]; then
        # –ü–µ—Ä–≤—ã–π –¥–æ—á–µ—Ä–Ω–∏–π
        echo "${parent_id}-00"
    else
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–µ–≥–º–µ–Ω—Ç –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º
        last_segment=$(echo "$max_child" | grep -o '[^-]*$')
        next_segment=$(printf "%02X" $((0x$last_segment + 1)))
        echo "${parent_id}-${next_segment}"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–≥–æ–≤ –≤ YAML
format_tags_yaml() {
    local tags_input="$1"
    local type="$2"
    
    # –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è YAML
    local temp_file=$(mktemp)
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø –∫–∞–∫ –ø–µ—Ä–≤—ã–π —Ç–µ–≥
    echo "- \"$type\"" > "$temp_file"
    
    # –î–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ–≥–∏
    if [ -n "$tags_input" ]; then
        # –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–≥–∏ –ø–æ –∑–∞–ø—è—Ç—ã–º
        IFS=',' read -r -a tag_parts <<< "$tags_input"
        
        for tag in "${tag_parts[@]}"; do
            # –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –ø—Ä–µ—Ñ–∏–∫—Å—ã @/#
            tag_clean=$(echo "$tag" | xargs | sed 's/^[@#]//')
            if [ -n "$tag_clean" ]; then
                echo "- \"$tag_clean\"" >> "$temp_file"
            fi
        done
    fi
    
    # –ß–∏—Ç–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
    local yaml_content=$(cat "$temp_file")
    rm "$temp_file"
    
    echo "$yaml_content"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ —Ä–æ–¥–∏—Ç–µ–ª—è
get_parent_name() {
    local parent_id="$1"
    if [ -z "$parent_id" ]; then
        echo ""
        return
    fi
    
    parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
    if [ -n "$parent_file" ]; then
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–º—è –∏–∑ frontmatter –∏–ª–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
        if grep -q "name:" "$parent_file"; then
            grep "name:" "$parent_file" | head -1 | sed 's/^name:[[:space:]]*//' | sed 's/^"//' | sed 's/"$//'
        else
            # –ò–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞
            basename "$parent_file" .md | sed "s/^${parent_id} - //"
        fi
    else
        echo ""
    fi
}

# –ü–∞—Ä—Å–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
MANUAL_ID=""
PARENT_ID=""
NAME=""
TAGS=""
AUTHOR="kirillkravcov"
TYPE="component"

while [[ $# -gt 0 ]]; do
    case $1 in
        --manual-id)
            MANUAL_ID="$2"
            shift 2
            ;;
        --parent)
            PARENT_ID="$2"
            shift 2
            ;;
        --name)
            NAME="$2"
            shift 2
            ;;
        --tags)
            TAGS="$2"
            shift 2
            ;;
        --author)
            AUTHOR="$2"
            shift 2
            ;;
        --type)
            TYPE="$2"
            shift 2
            ;;
        *)
            echo "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç: $1"
            exit 1
            ;;
    esac
done

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã
if [ -n "$MANUAL_ID" ]; then
    # –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º
    echo "–†–µ–∂–∏–º: –†—É—á–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ ID"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–π ID
    if check_id_exists "$MANUAL_ID"; then
        echo "‚ùå –û—à–∏–±–∫–∞: –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$MANUAL_ID' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!"
        exit 1
    fi
    
    DOC_ID="$MANUAL_ID"
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ ID
    LEVEL=$(echo "$DOC_ID" | tr -cd '-' | wc -c)
    LEVEL=$((LEVEL + 1))
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º parent_id (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ)
    if [ -z "$PARENT_ID" ] && [ $LEVEL -gt 1 ]; then
        PARENT_ID=$(echo "$DOC_ID" | sed 's/-[^-]*$//')
    fi
    
else
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
    echo "–†–µ–∂–∏–º: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID"
    
    if [ -z "$PARENT_ID" ]; then
        echo "–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∂–∏–º–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å --parent"
        exit 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—è
    if ! check_id_exists "$PARENT_ID"; then
        echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID '$PARENT_ID' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
        exit 1
    fi
    
    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID
    PARENT_LEVEL=$(echo "$PARENT_ID" | tr -cd '-' | wc -c)
    PARENT_LEVEL=$((PARENT_LEVEL + 1))
    LEVEL=$((PARENT_LEVEL + 1))
    
    DOC_ID=$(generate_id_for_level "$PARENT_ID" "$LEVEL")
fi

# –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ä–æ–¥–∏—Ç–µ–ª—è
PARENT_NAME=$(get_parent_name "$PARENT_ID")

# –ï—Å–ª–∏ –∏–º—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º
if [ -z "$NAME" ]; then
    echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
    read -r NAME
    
    if [ -z "$NAME" ]; then
        echo "‚ùå –û—à–∏–±–∫–∞: –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!"
        exit 1
    fi
fi

# –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏ –≤ YAML
TAGS_YAML=$(format_tags_yaml "$TAGS" "$TYPE")

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —à–∞–±–ª–æ–Ω
if [ -z "$PARENT_ID" ]; then
    # –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç
    TEMPLATE="master-template-v3.md"
else
    # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
    TEMPLATE="child-template-v3.md"
fi

# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –±–µ–∑ {tags}
if [ ! -f "$TEMPLATE" ]; then
    if [ -z "$PARENT_ID" ]; then
        # –°–æ–∑–¥–∞–µ–º –º–∞—Å—Ç–µ—Ä-—à–∞–±–ª–æ–Ω
        cat > "master-template-v3.md" << 'TEMPLATE_EOF'
---
id: "{id}"
name: "{name}"
type: "{type}"
level: {level}
status: "planning"
created: "{date}"
updated: "{date}"
author: "{author}"
---

### –û–ü–ò–°–ê–ù–ò–ï
{description}

### –ó–ê–î–ê–ß–ò
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á–∏

### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
TEMPLATE_EOF
    else
        # –°–æ–∑–¥–∞–µ–º –¥–æ—á–µ—Ä–Ω–∏–π —à–∞–±–ª–æ–Ω  
        cat > "child-template-v3.md" << 'TEMPLATE_EOF'
---
id: "{id}"
name: "{name}"
type: "{type}"
level: {level}
status: "planning"
parent: "{parent}"
parent_name: "{parent_name}"
created: "{date}"
updated: "{date}"
author: "{author}"
---

### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
TEMPLATE_EOF
    fi
fi

if [ ! -f "$TEMPLATE" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –®–∞–±–ª–æ–Ω '$TEMPLATE' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
    exit 1
fi

# –ò–º—è —Ñ–∞–π–ª–∞
FILENAME="${DOC_ID} - ${NAME}.md"

echo ""
echo "=== –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï ==="
echo "ID: $DOC_ID"
echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
echo "–ù–∞–∑–≤–∞–Ω–∏–µ: $NAME"
echo "–¢–∏–ø: $TYPE"
echo "–¢–µ–≥–∏:"
echo "$TAGS_YAML"
echo "–†–æ–¥–∏—Ç–µ–ª—å: $PARENT_ID ($PARENT_NAME)"
echo "–§–∞–π–ª: $FILENAME"
echo ""

echo "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n)"
read -r CONFIRM

if [[ "$CONFIRM" != "y" && "$CONFIRM" != "Y" ]]; then
    echo "–û—Ç–º–µ–Ω–µ–Ω–æ."
    exit 0
fi

# –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
cp "$TEMPLATE" "$FILENAME"

# –ó–∞–º–µ–Ω—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —à–∞–±–ª–æ–Ω–µ
sed -i '' "s/{id}/$DOC_ID/g" "$FILENAME"
sed -i '' "s/{name}/$NAME/g" "$FILENAME"
sed -i '' "s/{type}/$TYPE/g" "$FILENAME"
sed -i '' "s/{level}/$LEVEL/g" "$FILENAME"
sed -i '' "s/{parent}/$PARENT_ID/g" "$FILENAME"
sed -i '' "s/{parent_name}/$PARENT_NAME/g" "$FILENAME"
sed -i '' "s/{date}/$CURRENT_DATE/g" "$FILENAME"
sed -i '' "s/{author}/$AUTHOR/g" "$FILENAME"

# –í—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–≥–∏ –ø–æ—Å–ª–µ –ø–æ–ª—è "status"
if [ -z "$PARENT_ID" ]; then
    # –î–ª—è –º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç–∞
    sed -i '' "/status: \"planning\"/a\\
tags:"$'\\\n'"$TAGS_YAML" "$FILENAME"
    # –£–±–∏—Ä–∞–µ–º —Å—Ç—Ä–æ–∫—É "–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤" –µ—Å–ª–∏ –µ—Å—Ç—å
    sed -i '' '/–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/d' "$FILENAME"
else
    # –î–ª—è –¥–æ—á–µ—Ä–Ω–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    sed -i '' "/status: \"planning\"/a\\
tags:"$'\\\n'"$TAGS_YAML" "$FILENAME"
fi

echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: $FILENAME"

# –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
if [ -n "$PARENT_ID" ] && [ -n "$PARENT_NAME" ]; then
    PARENT_FILE="${PARENT_ID} - ${PARENT_NAME}.md"
    
    if [ -f "$PARENT_FILE" ]; then
        echo "–û–±–Ω–æ–≤–ª—è—é —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: $PARENT_FILE"
        
        # –£–±–∏—Ä–∞–µ–º —Å—Ç—Ä–æ–∫—É "–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤" –µ—Å–ª–∏ –µ—Å—Ç—å
        sed -i '' '/–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/d' "$PARENT_FILE"
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ —Ä–∞–∑–¥–µ–ª –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
        if grep -q "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´" "$PARENT_FILE"; then
            # –†–∞–∑–¥–µ–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É
            sed -i '' "/#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´/a\\
- [[$DOC_ID - $NAME]]" "$PARENT_FILE"
        else
            # –†–∞–∑–¥–µ–ª–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞–µ–º –µ–≥–æ
            echo "" >> "$PARENT_FILE"
            echo "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´" >> "$PARENT_FILE"
            echo "- [[$DOC_ID - $NAME]]" >> "$PARENT_FILE"
        fi
        
        echo "‚úÖ –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–±–Ω–æ–≤–ª–µ–Ω"
    fi
fi

echo ""
echo "=== –í–´–ü–û–õ–ù–ï–ù–û ==="
echo "–î–æ–∫—É–º–µ–Ω—Ç: $FILENAME"
echo "ID: $DOC_ID"
echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
EOF

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x "uch-create-v3.sh"

echo "‚úÖ –°–æ–∑–¥–∞–Ω uch-create-v3.sh —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Ç–µ–≥–æ–≤"
echo "–¢–µ—Å—Ç–∏—Ä—É–µ–º:"
./uch-create-v3.sh --parent 00-04 --name "–¢–µ—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ç–µ–≥–æ–≤" --tags "bug,documentation,test" --type task
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º YAML —Ñ–æ—Ä–º–∞—Ç–æ–º —Ç–µ–≥–æ–≤. –¢–µ–≥–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ—Å–ª–µ –ø–æ–ª—è "status" –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º YAML —Ñ–æ—Ä–º–∞—Ç–µ –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ–≥–æ –º–∞—Å—Å–∏–≤–∞.

–¢–µ–ø–µ—Ä—å –≤ child-template-v3 –∏ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ –≤–æ–æ–±—â–µ –Ω–µ—Ç –ø–æ–ª—è tags

–î–∞, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –Ω–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–∞—Ö –Ω–µ—Ç —Å—Ç—Ä–æ–∫–∏ `tags:` –¥–ª—è –∑–∞–º–µ–Ω—ã. –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ tags –≤ —à–∞–±–ª–æ–Ω—ã –∏–ª–∏ –≤—Å—Ç–∞–≤–ª—è—Ç—å –µ–≥–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º:

bash

```
cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/"

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º —à–∞–±–ª–æ–Ω—ã –° –ø–æ–ª–µ–º tags
cat > "child-template-v3.md" << 'EOF'
---
id: "{id}"
name: "{name}"
type: "{type}"
level: {level}
status: "planning"
parent: "{parent}"
parent_name: "{parent_name}"
created: "{date}"
updated: "{date}"
author: "{author}"
---

### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
EOF

cat > "master-template-v3.md" << 'EOF'
---
id: "{id}"
name: "{name}"
type: "{type}"
level: {level}
status: "planning"
created: "{date}"
updated: "{date}"
author: "{author}"
---

### –û–ü–ò–°–ê–ù–ò–ï
{description}

### –ó–ê–î–ê–ß–ò
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á–∏

### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
EOF

# –°–æ–∑–¥–∞–µ–º —É–ø—Ä–æ—â–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —Å–∫—Ä–∏–ø—Ç–∞
cat > "uch-create-simple.sh" << 'EOF'
#!/bin/bash

echo "=== UCH CREATE SIMPLE: –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–û–í –° –ü–†–ê–í–ò–õ–¨–ù–´–ú–ò –¢–ï–ì–ê–ú–ò ==="

CURRENT_DATE=$(date +%Y-%m-%d)

# –ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
PARENT_ID="$1"
NAME="$2"
TAGS="$3"
TYPE="${4:-component}"
AUTHOR="kirillkravcov"

if [ -z "$PARENT_ID" ] || [ -z "$NAME" ]; then
    echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./uch-create-simple.sh <parent_id> <name> [tags] [type]"
    echo "–ü—Ä–∏–º–µ—Ä: ./uch-create-simple.sh 00-04 \"–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞\" \"bug,test\" task"
    exit 1
fi

# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID (–ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç)
if [[ "$PARENT_ID" =~ ^[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})*$ ]]; then
    # –ù–∞—Ö–æ–¥–∏–º —Å–ª–µ–¥—É—é—â–∏–π –¥–æ—á–µ—Ä–Ω–∏–π ID
    last_child=$(find . -maxdepth 1 -name "${PARENT_ID}-*.md" -type f | \
        grep -o "${PARENT_ID}-[0-9A-Fa-f]\{2\}" | \
        sort -r | head -1)
    
    if [ -z "$last_child" ]; then
        DOC_ID="${PARENT_ID}-00"
    else
        last_num=$(echo "$last_child" | grep -o '[^-]*$')
        # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º HEX –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–µ, —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º, –æ–±—Ä–∞—Ç–Ω–æ –≤ HEX
        dec_num=$((0x$last_num + 1))
        next_num=$(printf "%02X" $dec_num)
        DOC_ID="${PARENT_ID}-${next_num}"
    fi
else
    echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç parent_id: $PARENT_ID"
    exit 1
fi

# –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ä–æ–¥–∏—Ç–µ–ª—è
PARENT_NAME=""
PARENT_FILE=$(find . -maxdepth 1 -name "${PARENT_ID} - *.md" -type f | head -1)
if [ -n "$PARENT_FILE" ]; then
    PARENT_NAME=$(basename "$PARENT_FILE" .md | sed "s/^${PARENT_ID} - //")
fi

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
LEVEL=$(echo "$DOC_ID" | tr -cd '-' | wc -c)
LEVEL=$((LEVEL + 1))

# –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏
YAML_TAGS=""
if [ -n "$TAGS" ]; then
    # –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–≥–∏
    IFS=',' read -ra TAG_ARRAY <<< "$TAGS"
    
    # –°–æ–∑–¥–∞–µ–º YAML –±–ª–æ–∫
    YAML_TAGS="tags:"
    YAML_TAGS="$YAML_TAGS"$'\n'"  - \"$TYPE\""
    
    for tag in "${TAG_ARRAY[@]}"; do
        tag_clean=$(echo "$tag" | xargs | sed 's/^[@#]//')
        if [ -n "$tag_clean" ]; then
            YAML_TAGS="$YAML_TAGS"$'\n'"  - \"$tag_clean\""
        fi
    done
else
    YAML_TAGS="tags:"$'\n'"  - \"$TYPE\""
fi

# –ò–º—è —Ñ–∞–π–ª–∞
FILENAME="${DOC_ID} - ${NAME}.md"

echo "–°–æ–∑–¥–∞—é –¥–æ–∫—É–º–µ–Ω—Ç: $FILENAME"
echo "ID: $DOC_ID"
echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
echo "–¢–∏–ø: $TYPE"
echo "–†–æ–¥–∏—Ç–µ–ª—å: $PARENT_ID ($PARENT_NAME)"
echo ""

# –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
cat > "$FILENAME" << DOC_EOF
---
id: "$DOC_ID"
name: "$NAME"
type: "$TYPE"
level: $LEVEL
status: "planning"
$(echo "$YAML_TAGS")
parent: "$PARENT_ID"
parent_name: "$PARENT_NAME"
created: "$CURRENT_DATE"
updated: "$CURRENT_DATE"
author: "$AUTHOR"
---

### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
DOC_EOF

echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: $FILENAME"

# –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
if [ -f "$PARENT_FILE" ]; then
    echo "–û–±–Ω–æ–≤–ª—è—é —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: $PARENT_FILE"
    
    # –£–±–∏—Ä–∞–µ–º "–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"
    sed -i '' '/–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/d' "$PARENT_FILE"
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫—É
    if grep -q "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´" "$PARENT_FILE"; then
        sed -i '' "/#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´/a\\
- [[$DOC_ID - $NAME]]" "$PARENT_FILE"
    else
        echo "" >> "$PARENT_FILE"
        echo "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´" >> "$PARENT_FILE"
        echo "- [[$DOC_ID - $NAME]]" >> "$PARENT_FILE"
    fi
    
    echo "‚úÖ –†–æ–¥–∏—Ç–µ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω"
fi

echo ""
echo "=== –í–´–ü–û–õ–ù–ï–ù–û ==="
EOF

chmod +x "uch-create-simple.sh"

# –¢–µ—Å—Ç–∏—Ä—É–µ–º
echo "‚úÖ –°–æ–∑–¥–∞–Ω —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç uch-create-simple.sh"
echo "–¢–µ—Å—Ç–∏—Ä—É–µ–º:"
./uch-create-simple.sh 00-04 "–¢–µ—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ç–µ–≥–æ–≤" "bug,documentation,test" task
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏ –≤ YAML. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª - –≤ frontmatter –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–µ `tags:` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º YAML-—Å–ø–∏—Å–∫–æ–º.

—Ç–µ–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. —Ç–µ–ø–µ—Ä—å –≤–∞–∂–Ω–æ! –°–µ–π—á–∞—Å –≤ –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å 3 —Ä–∞–∑–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞ uch-create uch-create - —Å–æ–∑–¥–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ –æ–ø—Ä–æ—Å–Ω–∏–∫ (–æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ) uch-create-v2 - —Å–æ–∑–¥–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ –ø–æ–ª–Ω–æ–º—É –∏–º–µ–Ω–∏ (—ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω—É–∂–Ω–∞, —á—Ç–æ–±—ã –±—ã–ª–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±—Ä–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω, –∞ –Ω–µ –ø–µ—Ä–≤—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π), –Ω–æ –±—ã–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ–≥–∞–º–∏ uch-create-v3 - —Å–æ–∑–¥–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ –ø–æ–ª–Ω–æ–º—É –∏–º–µ–Ω–∏ –∏ —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏ –ö—Ä–∏—Ç–∏—á–Ω–æ: –í –≤–µ—Ä—Å–∏—è—Ö 2 –∏ 3 –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã. –í 1-–π –≤–µ—Ä—Å–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –ù–µ—É–¥–æ–±–Ω–æ: –ù–µ –≤—Å–µ–≥–¥–∞ —É–¥–æ–±–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –ø–æ –ø–æ–ª–Ω–æ–º—É –∏–º–µ–Ω–∏ v2-3 (—ç—Ç–æ –≤–∞–∂–Ω–æ, –Ω–æ –Ω—É–∂–Ω–æ –ª–∏—à—å –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö) –∏ –ª—É—á—à–µ —Ç–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –≤ –æ–ø—Ä–æ—Å–Ω–∏–∫ –∫–∞–∫ –≤ uch-create. –ù—É–∂–Ω–æ –∫–∞–∫-—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–≤ –∏–¥–µ–∞–ª–µ —Å–¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç)

–û—Ç–ª–∏—á–Ω–æ, –ø–æ–Ω–∏–º–∞—é —Å–∏—Ç—É–∞—Ü–∏—é. –£ –≤–∞—Å –µ—Å—Ç—å:

1. **uch-create.sh** \- –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –æ–ø—Ä–æ—Å–Ω–∏–∫ (—Ä–∞–±–æ—Ç–∞–µ—Ç, —É–¥–æ–±–µ–Ω, –Ω–æ –Ω–µ—Ç —Ä—É—á–Ω–æ–≥–æ ID)
2. **uch-create-v2.sh** \- —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ –ø–æ–ª–Ω–æ–º—É –∏–º–µ–Ω–∏ (–µ—Å—Ç—å —Ä—É—á–Ω–æ–π ID, –Ω–æ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–≥–∞–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏)
3. **uch-create-v3.sh** \- —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ –ø–æ–ª–Ω–æ–º—É –∏–º–µ–Ω–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏ (–Ω–æ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å—Å—ã–ª–∫–∞–º–∏)

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–¥–∏–º –µ–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `uch-create-unified.sh`, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –ª—É—á—à–∏–µ —á–∞—Å—Ç–∏ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π:

bash

```
cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/"

# –°–æ–∑–¥–∞–µ–º –µ–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
cat > "uch-create-unified.sh" << 'EOF'
#!/bin/bash

echo "=== UCH CREATE UNIFIED: –ï–î–ò–ù–´–ô –°–ö–†–ò–ü–¢ –°–û–ó–î–ê–ù–ò–Ø –î–û–ö–£–ú–ï–ù–¢–û–í ==="

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
CURRENT_DATE=$(date +%Y-%m-%d)

# –§—É–Ω–∫—Ü–∏–∏ –∏–∑ uch-create.sh (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)
find_free_master_id() {
    # –ò—â–µ–º –≤—Å–µ –º–∞—Å—Ç–µ—Ä-—Ñ–∞–π–ª—ã (—É—Ä–æ–≤–µ–Ω—å 1)
    existing_ids=$(find . -maxdepth 1 -name "*.md" -type f 2>/dev/null | \
        grep -E '^\./[0-9A-Fa-f]{2} - ' | \
        sed 's/^\.\///' | \
        cut -d' ' -f1 | \
        sort | uniq)
    
    if [ -z "$existing_ids" ]; then
        echo "00"
        return
    fi
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ ID –≤ –¥–µ—Å—è—Ç–∏—á–Ω—ã–µ
    declare -a dec_ids=()
    for hex_id in $existing_ids; do
        dec_id=$((16#$hex_id))
        dec_ids+=($dec_id)
    done
    
    # –°–æ—Ä—Ç–∏—Ä—É–µ–º –∏ –∏—â–µ–º –ø–µ—Ä–≤—ã–π –ø—Ä–æ–ø—É—Å–∫
    sorted_ids=($(printf "%d\n" "${dec_ids[@]}" | sort -n))
    expected=0
    for id in "${sorted_ids[@]}"; do
        if [ $id -gt $expected ]; then
            break
        fi
        expected=$((id + 1))
    done
    
    printf "%02X" $expected
}

find_free_child_id() {
    local parent_id="$1"
    
    pattern="${parent_id}-[0-9A-Fa-f][0-9A-Fa-f]"
    
    existing_ids=$(find . -maxdepth 1 -name "*.md" -type f 2>/dev/null | \
        grep -E "^\./${pattern} - " | \
        sed 's/^\.\///' | \
        cut -d' ' -f1 | \
        grep -E "^${parent_id}-[0-9A-Fa-f]{2}$" | \
        awk -F"${parent_id}-" '{print $2}' | \
        sort | uniq)
    
    if [ -z "$existing_ids" ]; then
        echo "01"
        return
    fi
    
    # –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º hex ID –≤ decimal
    declare -a dec_array=()
    for hex_id in $existing_ids; do
        dec_id=$((16#$hex_id))
        dec_array+=($dec_id)
    done
    
    sorted_array=($(printf "%d\n" "${dec_array[@]}" | sort -n))
    
    expected=1
    for id in "${sorted_array[@]}"; do
        if [ $id -gt $expected ]; then
            break
        fi
        expected=$((id + 1))
    done
    
    printf "%02X" $expected
}

clean_parent_name() {
    local full_filename="$1"
    
    filename=$(basename "$full_filename" .md)
    
    OLD_IFS="$IFS"
    IFS=" - "
    parts=($filename)
    IFS="$OLD_IFS"
    
    if [ ${#parts[@]} -eq 0 ]; then
        echo "$filename"
        return
    fi
    
    clean_parts=()
    for part in "${parts[@]}"; do
        if echo "$part" | grep -qE '^[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})*$'; then
            continue
        else
            clean_parts+=("$part")
        fi
    done
    
    if [ ${#clean_parts[@]} -eq 0 ]; then
        last_part="${parts[-1]}"
        echo "$last_part"
    else
        clean_name=$(IFS=" - "; echo "${clean_parts[*]}")
        echo "$clean_name"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∏–∑ uch-create.sh)
update_parent_document() {
    local parent_file="$1"
    local child_id="$2"
    local child_name="$3"
    
    echo "  –û–±–Ω–æ–≤–ª—è—é —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: $(basename "$parent_file")"
    
    if [ ! -f "$parent_file" ]; then
        echo "  ‚ö†Ô∏è  –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"
        return 1
    fi
    
    temp_file="${parent_file}.tmp"
    
    link_added=0
    
    awk -v child_id="$child_id" -v child_name="$child_name" '
    BEGIN { 
        in_children_section = 0
        children_section_found = 0
        link_exists = 0
        link_added = 0
    }
    
    /\[\[.* - .*\]\]/ && in_children_section {
        if ($0 ~ "\\[\\[" child_id " - " child_name "\\]\\]") {
            link_exists = 1
        }
    }
    
    /#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´/ {
        in_children_section = 1
        children_section_found = 1
        print $0
        next
    }
    
    in_children_section && /^[[:space:]]*–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/ {
        next
    }
    
    in_children_section && (/^####/ || /^###/ || /^##/ || /^#/ || /^---/) {
        in_children_section = 0
    }
    
    in_children_section && /^[[:space:]]*$/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    in_children_section && /^---/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    in_children_section && !/^- \[\[/ && !/^[[:space:]]*$/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    { print $0 }
    
    END {
        if (!children_section_found) {
            print ""
            print "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´"
            print "- [[" child_id " - " child_name "]]"
        } else if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
        }
    }
    ' "$parent_file" > "$temp_file"
    
    mv "$temp_file" "$parent_file"
    
    echo "  ‚úÖ –°—Å—ã–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–≥–æ–≤ (–∏–∑ v3)
format_tags_yaml() {
    local tags_input="$1"
    local type="$2"
    
    local temp_file=$(mktemp)
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ç–∏–ø –∫–∞–∫ –ø–µ—Ä–≤—ã–π —Ç–µ–≥
    echo "- \"$type\"" > "$temp_file"
    
    # –î–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ–≥–∏
    if [ -n "$tags_input" ]; then
        # –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–≥–∏ –ø–æ –∑–∞–ø—è—Ç—ã–º
        IFS=',' read -r -a tag_parts <<< "$tags_input"
        
        for tag in "${tag_parts[@]}"; do
            # –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –ø—Ä–µ—Ñ–∏–∫—Å—ã @/#
            tag_clean=$(echo "$tag" | xargs | sed 's/^[@#]//')
            if [ -n "$tag_clean" ]; then
                echo "- \"$tag_clean\"" >> "$temp_file"
            fi
        done
    fi
    
    local yaml_content=$(cat "$temp_file")
    rm "$temp_file"
    
    echo "$yaml_content"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID –≤—Ä—É—á–Ω—É—é (–∏–∑ v2/v3)
generate_id_for_level() {
    local parent_id="$1"
    local level="$2"
    
    # –ï—Å–ª–∏ –Ω–µ—Ç parent_id, —ç—Ç–æ —É—Ä–æ–≤–µ–Ω—å 1
    if [ -z "$parent_id" ]; then
        # –ò—â–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π ID —É—Ä–æ–≤–Ω—è 1
        max_id=$(find . -maxdepth 1 -name "?? - *.md" -type f | \
            grep -o '^\./[0-9A-Fa-f]\{2\}' | \
            sort -r | head -1 | \
            sed 's/^\.\///' | \
            tr 'a-f' 'A-F')
        
        if [ -z "$max_id" ]; then
            echo "00"
        else
            next_id=$(printf "%02X" $((0x$max_id + 1)))
            echo "$next_id"
        fi
        return 0
    fi
    
    # –î–ª—è —É—Ä–æ–≤–Ω–µ–π 2+
    pattern="${parent_id}-[0-9A-Fa-f]\{2\}"
    max_child=$(find . -maxdepth 1 -name "*${parent_id}-?? - *.md" -type f | \
        grep -o "${pattern}" | \
        sort -r | head -1 | \
        tr 'a-f' 'A-F')
    
    if [ -z "$max_child" ]; then
        echo "${parent_id}-00"
    else
        last_segment=$(echo "$max_child" | grep -o '[^-]*$')
        next_segment=$(printf "%02X" $((0x$last_segment + 1)))
        echo "${parent_id}-${next_segment}"
    fi
}

# –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è ID
check_id_exists() {
    local id="$1"
    find . -maxdepth 1 -name "${id} - *.md" -type f | grep -q .
    return $?
}

# –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
create_document() {
    local mode="$1"           # auto –∏–ª–∏ manual
    local parent_id="$2"
    local doc_name="$3"
    local tags_input="$4"
    local type="$5"
    local manual_id="$6"      # —Ç–æ–ª—å–∫–æ –¥–ª—è manual mode
    
    echo ""
    echo "=== –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê ==="
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º ID
    if [ "$mode" = "manual" ] && [ -n "$manual_id" ]; then
        # –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º
        if check_id_exists "$manual_id"; then
            echo "‚ùå –û—à–∏–±–∫–∞: –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$manual_id' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!"
            return 1
        fi
        DOC_ID="$manual_id"
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
        LEVEL=$(echo "$DOC_ID" | tr -cd '-' | wc -c)
        LEVEL=$((LEVEL + 1))
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º parent_id (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ)
        if [ -z "$parent_id" ] && [ $LEVEL -gt 1 ]; then
            parent_id=$(echo "$DOC_ID" | sed 's/-[^-]*$//')
        fi
    else
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
        if [ -z "$parent_id" ]; then
            # –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç
            DOC_ID=$(find_free_master_id)
            LEVEL=1
        else
            # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
            if ! check_id_exists "$parent_id"; then
                echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID '$parent_id' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
                return 1
            fi
            
            # –ü–æ–ª—É—á–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª
            parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
            if [ -z "$parent_file" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!"
                return 1
            fi
            
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID
            child_suffix=$(find_free_child_id "$parent_id")
            DOC_ID="${parent_id}-${child_suffix}"
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
            parent_level=$(echo "$parent_id" | tr -cd '-' | wc -c)
            parent_level=$((parent_level + 1))
            LEVEL=$((parent_level + 1))
        fi
    fi
    
    # –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ä–æ–¥–∏—Ç–µ–ª—è
    PARENT_NAME=""
    if [ -n "$parent_id" ]; then
        parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
        if [ -n "$parent_file" ]; then
            PARENT_NAME=$(clean_parent_name "$parent_file")
        fi
    fi
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω
    if [ -z "$type" ]; then
        case $LEVEL in
            1) type="project" ;;
            2|3) type="component" ;;
            *) type="task" ;;
        esac
    fi
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏
    TAGS_YAML=$(format_tags_yaml "$tags_input" "$type")
    
    # –ò–º—è —Ñ–∞–π–ª–∞
    FILENAME="${DOC_ID} - ${doc_name}.md"
    
    echo "ID: $DOC_ID"
    echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
    echo "–ù–∞–∑–≤–∞–Ω–∏–µ: $doc_name"
    echo "–¢–∏–ø: $type"
    echo "–†–æ–¥–∏—Ç–µ–ª—å: $parent_id ($PARENT_NAME)"
    echo "–§–∞–π–ª: $FILENAME"
    echo ""
    
    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    echo "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n)"
    read -r CONFIRM
    
    if [[ "$CONFIRM" != "y" && "$CONFIRM" != "Y" ]]; then
        echo "–û—Ç–º–µ–Ω–µ–Ω–æ."
        return 0
    fi
    
    # –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
    cat > "$FILENAME" << DOC_EOF
---
id: "$DOC_ID"
name: "$doc_name"
type: "$type"
level: $LEVEL
status: "planning"
$(echo "$TAGS_YAML" | sed 's/^/  /')
created: "$CURRENT_DATE"
updated: "$CURRENT_DATE"
author: "$USER"
---

### $doc_name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$DOC_ID\\`
- **–£—Ä–æ–≤–µ–Ω—å**: $LEVEL
DOC_EOF
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    if [ -n "$parent_id" ] && [ -n "$PARENT_NAME" ]; then
        cat >> "$FILENAME" << DOC_EOF
- **–†–æ–¥–∏—Ç–µ–ª—å**: [[$parent_id - $PARENT_NAME]]
DOC_EOF
    fi
    
    # –ó–∞–≤–µ—Ä—à–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
    cat >> "$FILENAME" << DOC_EOF
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$CURRENT_DATE\\`
- **–¢–µ–≥–∏**: $tags_input

#### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

#### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---
–°–æ–∑–¥–∞–Ω–æ: $CURRENT_DATE
–£—Ä–æ–≤–µ–Ω—å: $LEVEL
DOC_EOF
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è –≤ –∫–æ–Ω–µ—Ü –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    if [ -n "$parent_id" ]; then
        echo "–†–æ–¥–∏—Ç–µ–ª—å: $parent_id" >> "$FILENAME"
    fi
    
    echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: $FILENAME"
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
    if [ -n "$parent_id" ] && [ -n "$PARENT_NAME" ] && [ -n "$parent_file" ]; then
        update_parent_document "$parent_file" "$DOC_ID" "$doc_name"
    fi
    
    echo ""
    echo "=== –í–´–ü–û–õ–ù–ï–ù–û ==="
    echo "–î–æ–∫—É–º–µ–Ω—Ç: $FILENAME"
    echo "ID: $DOC_ID"
    echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
}

# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
interactive_mode() {
    echo ""
    echo "=== –†–ï–ñ–ò–ú –†–ê–ë–û–¢–´ ==="
    echo "1 - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ID)"
    echo "2 - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ä–µ–∂–∏–º (—Ä—É—á–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ ID)"
    echo "3 - –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3): " work_mode
    
    case $work_mode in
        1)
            # –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º
            echo ""
            echo "–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
            echo "1 - –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1, –∫–æ—Ä–Ω–µ–≤–æ–π)"
            echo "2 - –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 2+)"
            read -p "–í–∞—à –≤—ã–±–æ—Ä (1 –∏–ª–∏ 2): " doc_type
            
            case $doc_type in
                1)
                    echo ""
                    echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:"
                    read -r doc_name
                    
                    if [ -z "$doc_name" ]; then
                        echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                        return 1
                    fi
                    
                    echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º):"
                    read -r tags_input
                    
                    create_document "auto" "" "$doc_name" "$tags_input" "project"
                    ;;
                
                2)
                    echo ""
                    echo "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00 –∏–ª–∏ 00-01):"
                    read -r parent_id
                    
                    if [ -z "$parent_id" ]; then
                        echo "‚ùå –û—à–∏–±–∫–∞: ID —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                        return 1
                    fi
                    
                    echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
                    read -r doc_name
                    
                    if [ -z "$doc_name" ]; then
                        echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                        return 1
                    fi
                    
                    echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º):"
                    read -r tags_input
                    
                    echo "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (project, component, task) –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:"
                    read -r doc_type_input
                    
                    create_document "auto" "$parent_id" "$doc_name" "$tags_input" "$doc_type_input"
                    ;;
                
                *)
                    echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"
                    return 1
                    ;;
            esac
            ;;
        
        2)
            # –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ä–µ–∂–∏–º (—Ä—É—á–Ω–æ–π ID)
            echo ""
            echo "=== –ü–†–û–î–í–ò–ù–£–¢–´–ô –†–ï–ñ–ò–ú ==="
            echo "–í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤—Ä—É—á–Ω—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00, 00-01, 00-FF):"
            read -r manual_id
            
            if [ -z "$manual_id" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
            read -r doc_name
            
            if [ -z "$doc_name" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—è (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ ID):"
            read -r parent_id
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é:"
            read -r tags_input
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (project, component, task):"
            read -r doc_type_input
            
            if [ -z "$doc_type_input" ]; then
                doc_type_input="component"
            fi
            
            create_document "manual" "$parent_id" "$doc_name" "$tags_input" "$doc_type_input" "$manual_id"
            ;;
        
        3)
            # –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
            echo ""
            echo "=== –ë–´–°–¢–†–û–ï –°–û–ó–î–ê–ù–ò–ï –ó–ê–î–ê–ß–ò ==="
            
            # –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º –≤—ã–±—Ä–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—è –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö
            echo "–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:"
            find . -maxdepth 1 -name "*.md" -type f | \
                grep -E '^\./[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})* - ' | \
                sed 's/^\.\///' | \
                cut -d' ' -f1 | \
                sort | \
                nl -w2 -s'. '
            
            echo ""
            echo "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∏–ª–∏ ID –≤—Ä—É—á–Ω—É—é):"
            read -r parent_choice
            
            if [[ "$parent_choice" =~ ^[0-9]+$ ]]; then
                # –ü–æ –Ω–æ–º–µ—Ä—É
                parent_id=$(find . -maxdepth 1 -name "*.md" -type f | \
                    grep -E '^\./[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})* - ' | \
                    sed 's/^\.\///' | \
                    cut -d' ' -f1 | \
                    sort | \
                    sed -n "${parent_choice}p")
            else
                # –ü–æ ID
                parent_id="$parent_choice"
            fi
            
            if [ -z "$parent_id" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä —Ä–æ–¥–∏—Ç–µ–ª—è"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:"
            read -r doc_name
            
            if [ -z "$doc_name" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º):"
            read -r tags_input
            
            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–µ–≥ @task –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
            if [ -n "$tags_input" ] && [[ ! "$tags_input" =~ task ]]; then
                tags_input="task,${tags_input}"
            elif [ -z "$tags_input" ]; then
                tags_input="task"
            fi
            
            create_document "auto" "$parent_id" "$doc_name" "$tags_input" "task"
            ;;
        
        *)
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"
            return 1
            ;;
    esac
}

# –†–µ–∂–∏–º –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
if [ $# -gt 0 ]; then
    # –ü–∞—Ä—Å–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç—ã
    MODE="auto"
    PARENT_ID=""
    NAME=""
    TAGS=""
    TYPE=""
    MANUAL_ID=""
    
    while [[ $# -gt 0 ]]; do
        case $1 in
            --manual-id)
                MODE="manual"
                MANUAL_ID="$2"
                shift 2
                ;;
            --parent)
                PARENT_ID="$2"
                shift 2
                ;;
            --name)
                NAME="$2"
                shift 2
                ;;
            --tags)
                TAGS="$2"
                shift 2
                ;;
            --type)
                TYPE="$2"
                shift 2
                ;;
            --interactive|-i)
                interactive_mode
                exit 0
                ;;
            *)
                echo "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç: $1"
                echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:"
                echo "  ./uch-create-unified.sh --interactive (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)"
                echo "  ./uch-create-unified.sh --parent ID --name NAME [--tags TAGS] [--type TYPE]"
                echo "  ./uch-create-unified.sh --manual-id ID --name NAME [--parent ID] [--tags TAGS] [--type TYPE]"
                exit 1
                ;;
        esac
    done
    
    if [ -z "$NAME" ]; then
        echo "‚ùå –û—à–∏–±–∫–∞: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å --name"
        exit 1
    fi
    
    create_document "$MODE" "$PARENT_ID" "$NAME" "$TAGS" "$TYPE" "$MANUAL_ID"
else
    # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    interactive_mode
fi
EOF

# –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x "uch-create-unified.sh"

echo "‚úÖ –°–æ–∑–¥–∞–Ω –µ–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç uch-create-unified.sh"
echo ""
echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:"
echo "1. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): ./uch-create-unified.sh"
echo "2. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º (—è–≤–Ω–æ): ./uch-create-unified.sh --interactive"
echo "3. –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ: ./uch-create-unified.sh --parent 00-04 --name \"–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞\" --tags \"bug,documentation\""
echo "4. –†—É—á–Ω–æ–π ID: ./uch-create-unified.sh --manual-id 00-04-FF --name \"–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞\""
echo ""
echo "–¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º:"
./uch-create-unified.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç:

1. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º** –∫–∞–∫ –≤ `uch-create.sh` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
2. **–†—É—á–Ω–æ–π ID** –∫–∞–∫ –≤ `uch-create-v2.sh` (–æ–ø—Ü–∏—è `--manual-id`)
3. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–µ–≥–∏** –∫–∞–∫ –≤ `uch-create-v3.sh` (YAML —Ñ–æ—Ä–º–∞—Ç)
4. **–†–∞–±–æ—Ç–∞—é—â–∏–µ —Å—Å—ã–ª–∫–∏** –∫–∞–∫ –≤ `uch-create.sh` (—Ñ—É–Ω–∫—Ü–∏—è `update_parent_document`)

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –µ–≥–æ –≤ `uch-create.sh` –∏ –∑–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏.

–•–æ—Ä–æ—à–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å. –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ –≤ frontmatter –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ c —Ç–∏–ø–æ–º –∏ —Ç–µ–≥–∞–º–∏, –Ω–æ —Å–∞–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –æ—Ç—Å—É—Ç–≤—É—é—Ç –∏ –ª–æ–º–∞–µ—Ç frontmatter --- id: "01-01-01" name: "–¢–µ—Å—Ç –Ω–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞" type: "component" level: 3 status: "planning" - "component" - "—Ç–µ–≥3 —Ç–µ–≥5" created: "2025-12-27" updated: "2025-12-27" author: "kirillkravcov" ---

–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ YAML. –¢–µ–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç—Å—Ç—É–ø–æ–º –≤ 2 –ø—Ä–æ–±–µ–ª–∞, –Ω–æ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –ª–∏—à–Ω–µ–≥–æ –æ—Ç—Å—Ç—É–ø–∞ —É –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏. –î–∞–≤–∞–π—Ç–µ –∏—Å–ø—Ä–∞–≤–∏–º —Å–∫—Ä–∏–ø—Ç:

bash

```
cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/"

# –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ –µ–¥–∏–Ω–æ–º —Å–∫—Ä–∏–ø—Ç–µ
# –°–æ–∑–¥–∞–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é

cat > "uch-create-unified-fixed.sh" << 'EOF'
#!/bin/bash

echo "=== UCH CREATE UNIFIED FIXED: –ï–î–ò–ù–´–ô –°–ö–†–ò–ü–¢ –° –ü–†–ê–í–ò–õ–¨–ù–´–ú YAML ==="

# –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
CURRENT_DATE=$(date +%Y-%m-%d)

# –§—É–Ω–∫—Ü–∏–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ (–æ—Å—Ç–∞–≤–ª—è–µ–º –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
find_free_master_id() {
    existing_ids=$(find . -maxdepth 1 -name "*.md" -type f 2>/dev/null | \
        grep -E '^\./[0-9A-Fa-f]{2} - ' | \
        sed 's/^\.\///' | \
        cut -d' ' -f1 | \
        sort | uniq)
    
    if [ -z "$existing_ids" ]; then
        echo "00"
        return
    fi
    
    declare -a dec_ids=()
    for hex_id in $existing_ids; do
        dec_id=$((16#$hex_id))
        dec_ids+=($dec_id)
    done
    
    sorted_ids=($(printf "%d\n" "${dec_ids[@]}" | sort -n))
    expected=0
    for id in "${sorted_ids[@]}"; do
        if [ $id -gt $expected ]; then
            break
        fi
        expected=$((id + 1))
    done
    
    printf "%02X" $expected
}

find_free_child_id() {
    local parent_id="$1"
    
    pattern="${parent_id}-[0-9A-Fa-f][0-9A-Fa-f]"
    
    existing_ids=$(find . -maxdepth 1 -name "*.md" -type f 2>/dev/null | \
        grep -E "^\./${pattern} - " | \
        sed 's/^\.\///' | \
        cut -d' ' -f1 | \
        grep -E "^${parent_id}-[0-9A-Fa-f]{2}$" | \
        awk -F"${parent_id}-" '{print $2}' | \
        sort | uniq)
    
    if [ -z "$existing_ids" ]; then
        echo "01"
        return
    fi
    
    declare -a dec_array=()
    for hex_id in $existing_ids; do
        dec_id=$((16#$hex_id))
        dec_array+=($dec_id)
    done
    
    sorted_array=($(printf "%d\n" "${dec_array[@]}" | sort -n))
    
    expected=1
    for id in "${sorted_array[@]}"; do
        if [ $id -gt $expected ]; then
            break
        fi
        expected=$((id + 1))
    done
    
    printf "%02X" $expected
}

clean_parent_name() {
    local full_filename="$1"
    
    filename=$(basename "$full_filename" .md)
    
    OLD_IFS="$IFS"
    IFS=" - "
    parts=($filename)
    IFS="$OLD_IFS"
    
    if [ ${#parts[@]} -eq 0 ]; then
        echo "$filename"
        return
    fi
    
    clean_parts=()
    for part in "${parts[@]}"; do
        if echo "$part" | grep -qE '^[0-9A-Fa-f]{2}(-[0-9A-Fa-f]{2})*$'; then
            continue
        else
            clean_parts+=("$part")
        fi
    done
    
    if [ ${#clean_parts[@]} -eq 0 ]; then
        last_part="${parts[-1]}"
        echo "$last_part"
    else
        clean_name=$(IFS=" - "; echo "${clean_parts[*]}")
        echo "$clean_name"
    fi
}

update_parent_document() {
    local parent_file="$1"
    local child_id="$2"
    local child_name="$3"
    
    echo "  –û–±–Ω–æ–≤–ª—è—é —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç: $(basename "$parent_file")"
    
    if [ ! -f "$parent_file" ]; then
        echo "  ‚ö†Ô∏è  –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞—é –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"
        return 1
    fi
    
    temp_file="${parent_file}.tmp"
    
    awk -v child_id="$child_id" -v child_name="$child_name" '
    BEGIN { 
        in_children_section = 0
        children_section_found = 0
        link_exists = 0
        link_added = 0
    }
    
    /\[\[.* - .*\]\]/ && in_children_section {
        if ($0 ~ "\\[\\[" child_id " - " child_name "\\]\\]") {
            link_exists = 1
        }
    }
    
    /#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´/ {
        in_children_section = 1
        children_section_found = 1
        print $0
        next
    }
    
    in_children_section && /^[[:space:]]*–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/ {
        next
    }
    
    in_children_section && (/^####/ || /^###/ || /^##/ || /^#/ || /^---/) {
        in_children_section = 0
    }
    
    in_children_section && /^[[:space:]]*$/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    in_children_section && /^---/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    in_children_section && !/^- \[\[/ && !/^[[:space:]]*$/ {
        if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
            link_added = 1
        }
        in_children_section = 0
        print $0
        next
    }
    
    { print $0 }
    
    END {
        if (!children_section_found) {
            print ""
            print "#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´"
            print "- [[" child_id " - " child_name "]]"
        } else if (!link_exists && !link_added) {
            print "- [[" child_id " - " child_name "]]"
        }
    }
    ' "$parent_file" > "$temp_file"
    
    mv "$temp_file" "$parent_file"
    
    echo "  ‚úÖ –°—Å—ã–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç"
}

# –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–≥–æ–≤
format_tags_yaml() {
    local tags_input="$1"
    local type="$2"
    
    # –ù–∞—á–∏–Ω–∞–µ–º —Å —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
    local yaml_tags="tags:"
    yaml_tags="$yaml_tags"$'\n'"  - \"$type\""
    
    # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–µ–≥–∏
    if [ -n "$tags_input" ]; then
        # –†–∞–∑–¥–µ–ª—è–µ–º —Ç–µ–≥–∏ –ø–æ –∑–∞–ø—è—Ç—ã–º
        IFS=',' read -r -a tag_parts <<< "$tags_input"
        
        for tag in "${tag_parts[@]}"; do
            # –£–±–∏—Ä–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –∏ –ø—Ä–µ—Ñ–∏–∫—Å—ã @/#
            tag_clean=$(echo "$tag" | xargs | sed 's/^[@#]//')
            if [ -n "$tag_clean" ] && [ "$tag_clean" != "$type" ]; then
                # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ç–µ–≥ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ç–∏–ø–∞
                yaml_tags="$yaml_tags"$'\n'"  - \"$tag_clean\""
            fi
        done
    fi
    
    echo "$yaml_tags"
}

# –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ú frontmatter
create_document() {
    local mode="$1"
    local parent_id="$2"
    local doc_name="$3"
    local tags_input="$4"
    local type="$5"
    local manual_id="$6"
    
    echo ""
    echo "=== –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê ==="
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º ID
    if [ "$mode" = "manual" ] && [ -n "$manual_id" ]; then
        # –†—É—á–Ω–æ–π —Ä–µ–∂–∏–º
        if find . -maxdepth 1 -name "${manual_id} - *.md" -type f | grep -q .; then
            echo "‚ùå –û—à–∏–±–∫–∞: –î–æ–∫—É–º–µ–Ω—Ç —Å ID '$manual_id' —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!"
            return 1
        fi
        DOC_ID="$manual_id"
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
        LEVEL=$(echo "$DOC_ID" | tr -cd '-' | wc -c)
        LEVEL=$((LEVEL + 1))
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º parent_id (–µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω —è–≤–Ω–æ)
        if [ -z "$parent_id" ] && [ $LEVEL -gt 1 ]; then
            parent_id=$(echo "$DOC_ID" | sed 's/-[^-]*$//')
        fi
    else
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
        if [ -z "$parent_id" ]; then
            # –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç
            DOC_ID=$(find_free_master_id)
            LEVEL=1
        else
            # –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
            if ! find . -maxdepth 1 -name "${parent_id} - *.md" -type f | grep -q .; then
                echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç —Å ID '$parent_id' –Ω–µ –Ω–∞–π–¥–µ–Ω!"
                return 1
            fi
            
            # –ü–æ–ª—É—á–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª
            parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
            if [ -z "$parent_file" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!"
                return 1
            fi
            
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ID
            child_suffix=$(find_free_child_id "$parent_id")
            DOC_ID="${parent_id}-${child_suffix}"
            
            # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å
            parent_level=$(echo "$parent_id" | tr -cd '-' | wc -c)
            parent_level=$((parent_level + 1))
            LEVEL=$((parent_level + 1))
        fi
    fi
    
    # –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ä–æ–¥–∏—Ç–µ–ª—è
    PARENT_NAME=""
    if [ -n "$parent_id" ]; then
        parent_file=$(find . -maxdepth 1 -name "${parent_id} - *.md" -type f | head -1)
        if [ -n "$parent_file" ]; then
            PARENT_NAME=$(clean_parent_name "$parent_file")
        fi
    fi
    
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω
    if [ -z "$type" ]; then
        case $LEVEL in
            1) type="project" ;;
            2|3) type="component" ;;
            *) type="task" ;;
        esac
    fi
    
    # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–≥–∏ (–ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –≤–µ—Ä—Å–∏—è)
    TAGS_YAML=$(format_tags_yaml "$tags_input" "$type")
    
    # –ò–º—è —Ñ–∞–π–ª–∞
    FILENAME="${DOC_ID} - ${doc_name}.md"
    
    echo "ID: $DOC_ID"
    echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
    echo "–ù–∞–∑–≤–∞–Ω–∏–µ: $doc_name"
    echo "–¢–∏–ø: $type"
    echo "–†–æ–¥–∏—Ç–µ–ª—å: $parent_id ($PARENT_NAME)"
    echo "–§–∞–π–ª: $FILENAME"
    echo ""
    
    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
    echo "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n)"
    read -r CONFIRM
    
    if [[ "$CONFIRM" != "y" && "$CONFIRM" != "Y" ]; then
        echo "–û—Ç–º–µ–Ω–µ–Ω–æ."
        return 0
    fi
    
    # –°–û–ó–î–ê–ï–ú –ü–†–ê–í–ò–õ–¨–ù–´–ô frontmatter
    cat > "$FILENAME" << DOC_EOF
---
id: "$DOC_ID"
name: "$doc_name"
type: "$type"
level: $LEVEL
status: "planning"
$(echo "$TAGS_YAML")
created: "$CURRENT_DATE"
updated: "$CURRENT_DATE"
author: "$USER"
---

### $doc_name

#### –û–ë–©–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø
- **ID**: \\`$DOC_ID\\`
- **–£—Ä–æ–≤–µ–Ω—å**: $LEVEL
DOC_EOF
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    if [ -n "$parent_id" ] && [ -n "$PARENT_NAME" ]; then
        cat >> "$FILENAME" << DOC_EOF
- **–†–æ–¥–∏—Ç–µ–ª—å**: [[$parent_id - $PARENT_NAME]]
DOC_EOF
    fi
    
    # –ó–∞–≤–µ—Ä—à–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç
    cat >> "$FILENAME" << DOC_EOF
- **–°—Ç–∞—Ç—É—Å**: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–°–æ–∑–¥–∞–Ω–æ**: \\`$CURRENT_DATE\\`
- **–¢–µ–≥–∏**: $tags_input

#### –û–ü–ò–°–ê–ù–ò–ï
–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–¥–µ—Å—å.

#### –ó–ê–î–ê–ß–ò
- [ ] –ó–∞–¥–∞—á–∞ 1
- [ ] –ó–∞–¥–∞—á–∞ 2

#### –î–û–ß–ï–†–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–´
–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

---
–°–æ–∑–¥–∞–Ω–æ: $CURRENT_DATE
–£—Ä–æ–≤–µ–Ω—å: $LEVEL
DOC_EOF
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è –≤ –∫–æ–Ω–µ—Ü –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    if [ -n "$parent_id" ]; then
        echo "–†–æ–¥–∏—Ç–µ–ª—å: $parent_id" >> "$FILENAME"
    fi
    
    echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: $FILENAME"
    
    # –û–±–Ω–æ–≤–ª—è–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å)
    if [ -n "$parent_id" ] && [ -n "$PARENT_NAME" ] && [ -n "$parent_file" ]; then
        update_parent_document "$parent_file" "$DOC_ID" "$doc_name"
    fi
    
    echo ""
    echo "=== –í–´–ü–û–õ–ù–ï–ù–û ==="
    echo "–î–æ–∫—É–º–µ–Ω—Ç: $FILENAME"
    echo "ID: $DOC_ID"
    echo "–£—Ä–æ–≤–µ–Ω—å: $LEVEL"
}

# –ü—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º
simple_interactive_mode() {
    echo ""
    echo "=== –†–ï–ñ–ò–ú –°–û–ó–î–ê–ù–ò–Ø –î–û–ö–£–ú–ï–ù–¢–ê ==="
    echo "1 - –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1, –∫–æ—Ä–Ω–µ–≤–æ–π)"
    echo "2 - –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 2+)"
    echo "3 - –î–æ–∫—É–º–µ–Ω—Ç —Å —Ä—É—á–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º ID"
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1-3): " choice
    
    case $choice in
        1)
            echo ""
            echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞:"
            read -r doc_name
            
            if [ -z "$doc_name" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º):"
            read -r tags_input
            
            create_document "auto" "" "$doc_name" "$tags_input" "project"
            ;;
        
        2)
            echo ""
            echo "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00 –∏–ª–∏ 00-01):"
            read -r parent_id
            
            if [ -z "$parent_id" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: ID —Ä–æ–¥–∏—Ç–µ–ª—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
            read -r doc_name
            
            if [ -z "$doc_name" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º):"
            read -r tags_input
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (project, component, task) –∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º:"
            read -r doc_type_input
            
            create_document "auto" "$parent_id" "$doc_name" "$tags_input" "$doc_type_input"
            ;;
        
        3)
            echo ""
            echo "=== –†–£–ß–ù–û–ô –†–ï–ñ–ò–ú ID ==="
            echo "–í–≤–µ–¥–∏—Ç–µ ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤—Ä—É—á–Ω—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00, 00-01, 00-FF):"
            read -r manual_id
            
            if [ -z "$manual_id" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: ID –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
            read -r doc_name
            
            if [ -z "$doc_name" ]; then
                echo "‚ùå –û—à–∏–±–∫–∞: –Ω–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
                return 1
            fi
            
            echo "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—è (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º):"
            read -r parent_id
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é:"
            read -r tags_input
            
            echo "–í–≤–µ–¥–∏—Ç–µ —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (project, component, task):"
            read -r doc_type_input
            
            if [ -z "$doc_type_input" ]; then
                doc_type_input="component"
            fi
            
            create_document "manual" "$parent_id" "$doc_name" "$tags_input" "$doc_type_input" "$manual_id"
            ;;
        
        *)
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"
            return 1
            ;;
    esac
}

# –†–µ–∂–∏–º –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
if [ $# -gt 0 ]; then
    MODE="auto"
    PARENT_ID=""
    NAME=""
    TAGS=""
    TYPE=""
    MANUAL_ID=""
    
    while [[ $# -gt 0 ]]; do
        case $1 in
            --manual-id)
                MODE="manual"
                MANUAL_ID="$2"
                shift 2
                ;;
            --parent)
                PARENT_ID="$2"
                shift 2
                ;;
            --name)
                NAME="$2"
                shift 2
                ;;
            --tags)
                TAGS="$2"
                shift 2
                ;;
            --type)
                TYPE="$2"
                shift 2
                ;;
            --interactive|-i)
                simple_interactive_mode
                exit 0
                ;;
            *)
                echo "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç: $1"
                echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:"
                echo "  ./uch-create-unified-fixed.sh --interactive (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º)"
                echo "  ./uch-create-unified-fixed.sh --parent ID --name NAME [--tags TAGS] [--type TYPE]"
                echo "  ./uch-create-unified-fixed.sh --manual-id ID --name NAME [--parent ID] [--tags TAGS] [--type TYPE]"
                exit 1
                ;;
        esac
    done
    
    if [ -z "$NAME" ]; then
        echo "‚ùå –û—à–∏–±–∫–∞: –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å --name"
        exit 1
    fi
    
    create_document "$MODE" "$PARENT_ID" "$NAME" "$TAGS" "$TYPE" "$MANUAL_ID"
else
    # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    simple_interactive_mode
fi
EOF

chmod +x "uch-create-unified-fixed.sh"

echo "‚úÖ –°–æ–∑–¥–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç uch-create-unified-fixed.sh"
echo ""
echo "–¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º YAML:"
./uch-create-unified-fixed.sh --interactive
```

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –Ω–æ–≤–æ–º —Å–∫—Ä–∏–ø—Ç–µ:**

1. **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π YAML —Ñ–æ—Ä–º–∞—Ç —Ç–µ–≥–æ–≤** \- —Ç–µ–ø–µ—Ä—å `tags:` –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, –∞ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ —Å –æ—Ç—Å—Ç—É–ø–æ–º –≤ 2 –ø—Ä–æ–±–µ–ª–∞
2. **–ù–µ—Ç –ª–∏—à–Ω–µ–≥–æ –æ—Ç—Å—Ç—É–ø–∞** —É –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ —Ç–µ–≥–æ–≤
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è** \- —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ —Ç–µ–≥–∞—Ö

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ frontmatter. –û–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

yaml

```
---
id: "01-01-01"
name: "–¢–µ—Å—Ç –Ω–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞"
type: "component"
level: 3
status: "planning"
tags:
  - "component"
  - "—Ç–µ–≥3"
  - "—Ç–µ–≥5"
created: "2025-12-27"
updated: "2025-12-27"
author: "kirillkravcov"
---
```

kirillkravcov@MacBook-Pro-Kirill uch-docs % >.... # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é simple\_interactive\_mode fi EOF chmod +x "uch-create-unified-fixed.sh" echo "‚úÖ –°–æ–∑–¥–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç uch-create-unified-fixed.sh" echo "" echo "–¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º YAML:"./uch-create-unified-fixed.sh --interactive zsh: command not found: # zsh: command not found: # ‚úÖ –°–æ–∑–¥–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç uch-create-unified-fixed.sh –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º YAML: === UCH CREATE UNIFIED FIXED: –ï–î–ò–ù–´–ô –°–ö–†–ò–ü–¢ –° –ü–†–ê–í–ò–õ–¨–ù–´–ú YAML ===./uch-create-unified-fixed.sh: line 323: syntax error in conditional expression./uch-create-unified-fixed.sh: line 323: syntax error near \`;'./uch-create-unified-fixed.sh: line 323: \` if \[\[ "$CONFIRM"!= "y" && "$CONFIRM"!= "Y" \]; then' kirillkravcov@MacBook-Pro-Kirill uch-docs % –î–µ–ª–∞–π –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫, –∞ –Ω–µ –≤—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–ò—Å–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç—Ä–æ–∫—É —Å —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–æ–π –≤ —É—Å–ª–æ–≤–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏:

bash

```
cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/"
sed -i '' '323s/]; then/] ]; then/' uch-create-unified-fixed.sh
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

bash

```
# –°–º–æ—Ç—Ä–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É
sed -n '323p' uch-create-unified-fixed.sh
```

–ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç:

bash

```
./uch-create-unified-fixed.sh --interactive
```

kirillkravcov@MacBook-Pro-Kirill uch-docs % cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/" sed -i '' '323s/\]; then/\] \]; then/' uch-create-unified-fixed.sh kirillkravcov@MacBook-Pro-Kirill uch-docs % # –°–º–æ—Ç—Ä–∏–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é —Å—Ç—Ä–æ–∫—É sed -n '323p' uch-create-unified-fixed.sh zsh: command not found: # if \[\[ "$CONFIRM"!= "y" && "$CONFIRM"!= "Y" \] \]; then kirillkravcov@MacBook-Pro-Kirill uch-docs %./uch-create-unified-fixed.sh --interactive === UCH CREATE UNIFIED FIXED: –ï–î–ò–ù–´–ô –°–ö–†–ò–ü–¢ –° –ü–†–ê–í–ò–õ–¨–ù–´–ú YAML ===./uch-create-unified-fixed.sh: line 323: syntax error in conditional expression./uch-create-unified-fixed.sh: line 323: syntax error near \`\]'./uch-create-unified-fixed.sh: line 323: \` if \[\[ "$CONFIRM"!= "y" && "$CONFIRM"!= "Y" \] \]; then' kirillkravcov@MacBook-Pro-Kirill uch-docs %

–ü—Ä–æ–±–ª–µ–º–∞ —Å –ª–∏—à–Ω–µ–π –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–π —Å–∫–æ–±–∫–æ–π `]`. –ò—Å–ø—Ä–∞–≤–ª—è–µ–º —Å—Ç—Ä–æ–∫—É 323:

bash

```
sed -i '' '323s/] ]; then/ ]]; then/' uch-create-unified-fixed.sh
```

–ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:

bash

```
sed -n '323p' uch-create-unified-fixed.sh
```

–¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

bash

```
if [[ "$CONFIRM" != "y" && "$CONFIRM" != "Y" ]]; then
```

–ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç:

bash

```
./uch-create-unified-fixed.sh --interactive
```

–†–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ! –ï—Å—Ç—å 2 –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏, –Ω–æ –ø–æ–∫–∞ —Å–¥–µ–ª–∞–π —Å–Ω–∞–ø—à–æ—Ç —Å–∏—Å—Ç–µ–º—ã

–û—Ç–ª–∏—á–Ω–æ! –°–æ–∑–¥–∞—é —Å–Ω–∞–ø—à–æ—Ç —Å–∏—Å—Ç–µ–º—ã –ø–æ –∏—Ç–æ–≥—É —Ä–∞–±–æ—Ç—ã:

bash

```
cd "/Users/kirillkravcov/obsidian/my-digital-garden-content/uch-docs/"

# –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç-—Å–Ω–∞–ø—à–æ—Ç
cat > "00-04-02-09 - –°–Ω–∞–ø—à–æ—Ç —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ 20251228.md" << 'EOF'
---
id: "00-04-02-09"
name: "–°–Ω–∞–ø—à–æ—Ç —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ 20251228"
type: "task"
level: 4
status: "active"
tags:
  - "task"
  - "snapshot"
  - "documentation"
parent: "00-04-02"
parent_name: "–°–Ω–∞–ø—à–æ—Ç —Å–∏—Å—Ç–µ–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –∏ –Ω—É–º–µ—Ä–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"
created: "2025-12-28"
updated: "2025-12-28"
author: "kirillkravcov"
---

### –°–Ω–∞–ø—à–æ—Ç —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ 20251228

#### üìä –°–¢–ê–¢–£–° –°–ò–°–¢–ï–ú–´ (2025-12-28)

### ‚úÖ –†–ï–®–ï–ù–ù–´–ï –ö–†–ò–¢–ò–ß–ù–´–ï –ó–ê–î–ê–ß–ò:

#### 1. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞ —Å —Ç–µ–≥–∞–º–∏** (\`00-04-02-05\`) ‚úÖ **–†–ï–®–ï–ù–û**

**–ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞:** 
- –¢–µ–≥–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ frontmatter
- –û—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –ø–µ—Ä–µ—á–µ—Ä–∫–Ω—É—Ç—ã–º–∏ –≤ Obsidian
- –§–æ—Ä–º–∞—Ç: \`["@component", "@—Ç–µ–≥1,—Ç–µ–≥2"]\` (–≤—Å—ë –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ)

**–†–µ—à–µ–Ω–∏–µ:**
- –°–æ–∑–¥–∞–Ω –µ–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç \`uch-create-unified-fixed.sh\`
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π YAML —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Ç–µ–≥–æ–≤:
\`\`\`yaml
tags:
  - "component"
  - "—Ç–µ–≥1"
  - "—Ç–µ–≥2"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –¢–µ–≥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ Obsidian
- –ù–µ—Ç –æ—à–∏–±–æ–∫ "invalid tag name"
- Frontmatter –≤–∞–ª–∏–¥–µ–Ω

#### 2\. –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤ ‚úÖ –†–ï–®–ï–ù–û

**–ë—ã–ª–æ:** 3 —Ä–∞–∑–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–∞ —Å —Ä–∞–∑–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é

1. `uch-create.sh` \- –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –æ–ø—Ä–æ—Å–Ω–∏–∫ (—Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ—Ç —Ä—É—á–Ω–æ–≥–æ ID)
2. `uch-create-v2.sh` \- —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ –ø–æ–ª–Ω–æ–º—É –∏–º–µ–Ω–∏ (–µ—Å—Ç—å —Ä—É—á–Ω–æ–π ID, –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–≥–∞–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏)
3. `uch-create-v3.sh` \- —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ –ø–æ–ª–Ω–æ–º—É –∏–º–µ–Ω–∏ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏ (–ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å—Å—ã–ª–∫–∞–º–∏)

**–°—Ç–∞–ª–æ:** –ï–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `uch-create-unified-fixed.sh` —Å:

- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º —Ä–µ–∂–∏–º–æ–º (–∫–∞–∫ –≤ v1)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—á–Ω–æ–≥–æ ID (–∫–∞–∫ –≤ v2)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏ (–∫–∞–∫ –≤ v3)
- ‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –¥–æ—á–µ—Ä–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º YAML frontmatter

---

### üõ† –¢–ï–•–ù–ò–ß–ï–°–ö–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –°–ò–°–¢–ï–ú–´:

#### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:

text

```
uch-docs/
‚îú‚îÄ‚îÄ uch-create.sh                    # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ uch-create-v2.sh                 # –†—É—á–Ω–æ–π ID (–ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–≥–∞–º–∏)
‚îú‚îÄ‚îÄ uch-create-v3.sh                 # –†—É—á–Ω–æ–π ID —Å —Ç–µ–≥–∞–º–∏ (–ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å—Å—ã–ª–∫–∞–º–∏)
‚îú‚îÄ‚îÄ uch-create-unified.sh            # –ü–µ—Ä–≤–∞—è –ø–æ–ø—ã—Ç–∫–∞ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è
‚îî‚îÄ‚îÄ uch-create-unified-fixed.sh      ‚úÖ # –†–ï–ö–û–ú–ï–ù–î–£–ï–ú–´–ô (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π)
```

#### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å uch-create-unified-fixed.sh:

**–†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:**

1. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
	- –ú–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 1)
	- –î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç (—É—Ä–æ–≤–µ–Ω—å 2+)
	- –î–æ–∫—É–º–µ–Ω—Ç —Å —Ä—É—á–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º ID
2. **–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞**:
	bash
	```
	./uch-create-unified-fixed.sh --parent 00-04 --name "–ó–∞–¥–∞—á–∞" --tags "bug,test" --type task
	./uch-create-unified-fixed.sh --manual-id 00-04-FF --name "–°–ø–µ—Ü–∑–∞–¥–∞—á–∞"
	```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è HEX ID
- –†—É—á–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ ID –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π YAML —Ñ–æ—Ä–º–∞—Ç —Ç–µ–≥–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ ID
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (project, component, task)

---

### üìà –ü–†–û–í–ï–î–ï–ù–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

#### –¢–µ—Å—Ç 1: –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å —Ç–µ–≥–∞–º–∏

bash

```
./uch-create-unified-fixed.sh --interactive
```

**–í—ã–±–æ—Ä:** 2 (–î–æ—á–µ—Ä–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç)  
**–†–æ–¥–∏—Ç–µ–ª—å:** 00-04  
**–ù–∞–∑–≤–∞–Ω–∏–µ:** –¢–µ—Å—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ç–µ–≥–æ–≤  
**–¢–µ–≥–∏:** bug,documentation,test  
**–¢–∏–ø:** task

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ

- –°–æ–∑–¥–∞–Ω –¥–æ–∫—É–º–µ–Ω—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º frontmatter
- –¢–µ–≥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω—ã –≤ Obsidian
- –°—Å—ã–ª–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –¥–æ–∫—É–º–µ–Ω—Ç

#### –¢–µ—Å—Ç 2: Frontmatter —Ñ–æ—Ä–º–∞—Ç

**–ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**

yaml

```
---
id: "01-01-01"
name: "–¢–µ—Å—Ç"
status: "planning"
  - "component"           ‚ùå –õ–∏—à–Ω–∏–π –æ—Ç—Å—Ç—É–ø
  - "—Ç–µ–≥3 —Ç–µ–≥5"           ‚ùå –¢–µ–≥–∏ –Ω–µ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã
---
```

**–°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):**

yaml

```
---
id: "01-01-01"
name: "–¢–µ—Å—Ç"
type: "component"
level: 3
status: "planning"
tags:                      ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π YAML
  - "component"
  - "—Ç–µ–≥3"
  - "—Ç–µ–≥5"
created: "2025-12-28"
updated: "2025-12-28"
author: "kirillkravcov"
---
```

---

### üîß –û–°–¢–ê–í–®–ò–ï–°–Ø –ó–ê–î–ê–ß–ò (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É):

#### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ:

1. **`00-04-02-07` \- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞**
	- –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –∑–∞–º–µ–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞
	- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫
	- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏
2. **`00-04-02-03` \- –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**
	- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –ø–æ–¥—Ä—è–¥
	- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á

#### –í–∞–∂–Ω—ã–µ:

1. **`00-04-02-02` \- –®–∞–±–ª–æ–Ω –¥–ª—è –∑–∞–¥–∞—á task**
	- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –∑–∞–¥–∞—á
	- –ü–æ–ª—è: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —Å—Ä–æ–∫–∏, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å
2. **`00-04-02-04` \- –ó–∞–ø—É—Å–∫ –∏–∑ Obsidian Command Palette**
	- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Obsidian
	- –ü–ª–∞–≥–∏–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. **`00-04-02-06` \- –°–æ–∑–¥–∞–Ω–∏–µ —Å –Ω–∞–∏–≤—ã—Å—à–∏–º ID —É—Ä–æ–≤–Ω—è**
	- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ ID –Ω–∞ —É—Ä–æ–≤–Ω–µ
	- –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –Ω—É–º–µ—Ä–∞—Ü–∏–∏

---

### üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ:

#### –î–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã:

bash

```
./uch-create-unified-fixed.sh --interactive
```

#### –î–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á:

bash

```
# –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
./uch-create-unified-fixed.sh --parent 00-04 --name "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞" --tags "bug" --type task

# –°–æ–∑–¥–∞–Ω–∏–µ —Å —Ä—É—á–Ω—ã–º ID
./uch-create-unified-fixed.sh --manual-id 00-04-FF --name "–°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞" --type task
```

#### –î–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏:

1. –°—Ç–∞—Ä—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ backup
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `uch-create-unified-fixed.sh` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π
3. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å workflow –Ω–∞ –µ–¥–∏–Ω—ã–π —Å–∫—Ä–∏–ø—Ç

---

### üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç–µ** (1-2 –¥–Ω—è)
	- –°–æ–∑–¥–∞—Ç—å 5-10 —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á
	- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å—Å—ã–ª–æ–∫
	- –£–±–µ–¥–∏—Ç—å—Å—è –≤ —É–¥–æ–±—Å—Ç–≤–µ workflow
2. **–ü—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ –∑–∞–¥–∞—á–µ –∑–∞–º–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** (`00-04-02-07`)
	- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Å–∫—Ä–∏–ø—Ç `replace-document.sh`
	- –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
	- –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
3. **–†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –ø–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ** (`00-04-02-03`)
	- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
	- –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
	- –û—Ü–µ–Ω–∏—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

### üìä –ú–ï–¢–†–ò–ö–ò –ö–ê–ß–ï–°–¢–í–ê:

#### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:

- ‚úÖ **Frontmatter**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π YAML —Ñ–æ—Ä–º–∞—Ç
- ‚úÖ **–¢–µ–≥–∏**: –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ Obsidian
- ‚úÖ **–°—Å—ã–ª–∫–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ **ID**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∏ —Ä—É—á–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º

#### –¢—Ä–µ–±—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

- üîÑ **–ó–∞–º–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤**: –ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- üîÑ **–ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏
- üîÑ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ó–∞–ø—É—Å–∫ –∏–∑ Obsidian UI

---

**–°–ò–°–¢–ï–ú–ê –ì–û–¢–û–í–ê –ö –ü–†–û–î–û–õ–ñ–ï–ù–ò–Æ –†–ê–ë–û–¢–´ –ù–ê–î –ö–†–ò–¢–ò–ß–ù–´–ú–ò –ó–ê–î–ê–ß–ê–ú–ò**

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ –∑–∞–º–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è.  
EOF

echo "‚úÖ –°–Ω–∞–ø—à–æ—Ç —Å–∏—Å—Ç–µ–º—ã —Å–æ–∑–¥–∞–Ω: 00-04-02-09 - –°–Ω–∞–ø—à–æ—Ç —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–≥–æ–≤ 20251228.md"  
echo ""  
echo "–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:"  
echo "- ‚úÖ –ë–∞–≥ —Å —Ç–µ–≥–∞–º–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω"  
echo "- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –∫–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞–Ω—ã"  
echo "- ‚úÖ Frontmatter –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π"  
echo ""  
echo "–û—Å—Ç–∞–ª–∏—Å—å 2 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏:"  
echo "1. 00-04-02-07 - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞"  
echo "2. 00-04-02-03 - –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤"  
echo ""  
echo "–ö–∞–∫—É—é –∑–∞–¥–∞—á—É –±—É–¥–µ–º —Ä–µ—à–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–π?"

text

–ì–ª—É–±–æ–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ

–ü–æ–∏—Å–∫

–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –ò–ò, —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏