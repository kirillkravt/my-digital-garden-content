---
title: "DeepSeek"
source: "https://chat.deepseek.com/a/chat/s/ecff58ea-77c7-4678-b5da-7921931e552c"
author:
published:
created: 2025-12-26
description: "Chat with DeepSeek AI – your intelligent assistant for coding, content creation, file reading, and more. Upload documents, engage in long-context conversations, and get expert help in AI, natural language processing, and beyond. | 深度求索（DeepSeek）助力编程代码开发、创意写作、文件处理等任务，支持文件上传及长文本对话，随时为您提供高效的AI支持。"
tags:
  - "clippings"
---


**3.1 Обработка авторизации**

**Описание процесса:**  
Процесс начинается с инициации клиентом (отправителем) платежной операции через систему дистанционного банковского обслуживания (СДБО). Основная цель этапа — в режиме реального времени проверить операцию на признаки мошенничества до ее авторизации в процессинговом центре (ПЦ). Результат проверки влиет на решение ПЦ об авторизации операции.

**Предусловия:**

1. СДБО, ПЦ и ФМ-система находятся в работоспособном состоянии.
2. Между системами установлено и настроено сетевое соединение.
3. В ФМ-системе настроены правила, профили и списки (черные/белые) для анализа транзакций.
4. ПЦ сконфигурирован на отправку запросов проверки (`check` / `checkecom`) в ФМ-систему для определенных типов операций.

**Детальное описание шагов:**

| № | Участники | Описание | Комментарий |
| --- | --- | --- | --- |
| **1** | Отправитель → СДБО | Отправитель (клиент) инициирует процесс, отправляя запрос на исполнение платежного документа через СДБО. |  |
| **2** | СДБО → ПЦ | СДБО перенаправляет запрос на авторизацию в платежный шлюз ПЦ. |  |
| **3** | ПЦ → ФМ-система | ПЦ, в соответствии с настройками и протоколом FMB, формирует и отправляет онлайн-запрос на проверку операции (`check` для наземного эквайринга/эмиссии или `checkecom` для интернет-эквайринга) в ФМ-систему. Запрос содержит все необходимые для анализа данные транзакции. | *Критический шаг для мониторинга. Ошибка передачи не должна блокировать авторизацию (см. шаг 6).* |
| **4** | ФМ-система → ФМ-система | ФМ-система принимает запрос, выполняет его маппинг и проводит анализ. Оценка риска осуществляется на основе настроенных правил, статистических профилей и проверок по черным/белым спискам. | *Ядро процесса обнаружения мошенничества.* |
| **5** | ФМ-система → ПЦ | ФМ-система возвращает ПЦ синхронный ответ на запрос проверки. Ответ содержит общий вердикт (например, `ALLOW`, `DENY`, `REVIEW`) и детализацию (коды сработавших правил, оценку риска). | *Ответ должен быть передан в рамках согласованного таймаута ПЦ.* |
| **6** | ПЦ → ПЦ | ПЦ анализирует ответ от ФМ-системы. Вердикт учитывается при принятии итогового решения об авторизации операции. **В случае, если запрос в ФМ-систему не был отправлен, не был получен ответ или получена ошибка, процесс авторизации продолжается без учета проверки на мошенничество (т.н. "fall-through").** | *Ключевое ограничение (fall-through) для обеспечения бесперебойности процессинга.* |
| **7** | ПЦ → СДБО | ПЦ направляет в СДБО ответ с результатом авторизации операции (разрешение или отказ). |  |
| **8** | СДБО → Отправитель | СДБО уведомляет клиента о результате исполнения платежного документа. | *Конец основного потока для клиента.* |
| **9** | ПЦ → ФМ-система | После завершения авторизации (независимо от того, была ли проверка на шаге 3), ПЦ отправляет в ФМ-систему асинхронный `update` / `updateecom` запрос. Он содержит финальный статус операции (например, `APPROVED`, `DECLINED`) и может включать доп. информацию (код ответа карты). | *Необходим для корректного обновления профилей и статистик в ФМ-системе.* |
| **10** | ФМ-система → ФМ-система | ФМ-система обрабатывает `update` \-запрос, обновляя историю и профили по карте/устройству/счету. Эта информация используется для анализа последующих транзакций. |  |
| **11** | ФМ-система → ПЦ | ФМ-система отправляет техническое подтверждение (`ACK`) о получении `update` \-запроса. |  |

**Постусловия:**

1. Клиент уведомлен о результате операции.
2. ПЦ зафиксировал результат авторизации.
3. ФМ-система сохранила запись о транзакции и обновила соответствующие профили (если `update` \-запрос был успешно получен и обработан).

**Критерии успешности процесса:**

- Операция авторизована (или отклонена) с учетом вердикта ФМ-системы (при его наличии).
- Запрос на проверку (`check` / `checkecom`) и уведомление об итоге (`update` / `updateecom`) успешно доставлены в ФМ-систему.
- ФМ-система корректно обработала оба типа запросов, сохранила данные и вернула ответы.
- Время обработки `check` \-запроса в ФМ-системе не превысило таймаут, установленный на стороне ПЦ.

**Возможные ограничения и исключения:**

- **Тайм-аут ПЦ:** Если ответ от ФМ-системы на `check` \-запрос не получен в установленный ПЦ таймаут, операция авторизуется без проверки.
- **Ошибки связи:** При недоступности ФМ-системы ПЦ продолжает обработку операций. Повторная отправка сообщений со стороны ФМ-системы не предусмотрена.
- **Ошибки в данных:** Если запрос от ПЦ содержит некорректные или неполные данные, ФМ-система возвращает ответ с кодом ошибки, но ПЦ может принять решение об авторизации.

---

**3.2 Обработка эдвайса/отмены**

**Описание процесса:**  
Процесс предназначен для информирования ФМ-системы об операциях, которые были проведены ПЦ **без** предварительной онлайн-проверки (`check`). К таким операциям относятся, например, финансовые транзакции (списания/возвраты) после предварительной авторизации, офлайн-транзакции, служебные операции (отмена, чистинг). Цель — обеспечить полноту данных в ФМ-системе для анализа и построения точных профилей поведения.

**Предусловия:**

1. В ПЦ произошла операция, не требующая или не прошедшая онлайн-проверки в ФМ-системе.
2. ПЦ настроен на отправку `advice` / `adviceecom` сообщений для соответствующих типов транзакций.

**Детальное описание шагов:**

| № | Шаг | Описание | Комментарий |
| --- | --- | --- | --- |
| **1** | СДБО → ПЦ | ПЦ получает от СДБО эдвайс (уведомление) о выполненной операции или ее отмене. |  |
| **2** | ПЦ → ФМ-система | ПЦ, по протоколу FMB, отправляет асинхронный `advice` / `adviceecom` запрос в ФМ-систему. Запрос содержит детали завершенной операции. | *Основная цель — информирование, а не запрос решения.* |
| **3** | ФМ-система → ФМ-система | ФМ-система обрабатывает запрос: сохраняет данные о транзакции и обновляет статистические профили (средние суммы, частотность) по карте, устройству, мерчанту и т.д. **Изменение статуса или отмена самой операции в ПЦ не предполагается.** | *Ключевое отличие от `update` — операция уже окончательно завершена в ПЦ.* |
| **4** | ФМ-система → ПЦ | ФМ-система отправляет техническое подтверждение (`ACK`) о получении `advice` \-запроса. |  |

**Постусловия:**

1. Операция учтена в процессинге ПЦ.
2. Информация об операции сохранена в ФМ-системе и использована для актуализации профилей.

**Критерии успешности процесса:**

- `Advice` \-сообщение успешно доставлено из ПЦ в ФМ-систему.
- ФМ-система корректно сохранила данные транзакции и обновила профили.
- Подтверждение (`ACK`) от ФМ-системы получено ПЦ.

**Возможные ограничения и исключения:**

- **Потеря `advice` \-сообщения:** В случае ошибки передачи или обработки `advice`, профили в ФМ-системе могут стать неполными, что снизит точность последующего анализа. Восстановление данных может потребовать ручного вмешательства или репликации из ПЦ.
- **Отсутствие конвертации валют:** Если сумма в `advice` указана в валюте, отличной от базовой валюты профиля, конвертация не производится, что может исказить статистики.

---

**3.3 Обработка аутентификации держателя карты на ACS**

**Описание процесса:**  
Процесс выполняется в рамках протокола EMV 3-D Secure (3DS) для операций интернет-эквайринга. ПЦ, выступая в роли Access Control Server (ACS), запрашивает у ФМ-системы оценку риска, связанного с попыткой аутентификации держателя карты. На основе этой оценки ПЦ/ACS выбирает метод аутентификации: бесшовный (`frictionless`) или с дополнительной верификацией (например, вводом OTP). Это позволяет балансировать между безопасностью и удобством пользователя.

**Предусловия:**

1. Инициирована операция по карте, поддерживающей EMV 3DS.
2. ПЦ (в роли ACS) получил запрос на аутентификацию от системы мерчанта (или Directory Server).
3. Настроена интеграция между модулем ACS ПЦ и ФМ-системой по протоколу FMB для запросов `checkacs` / `updateacs`.

**Детальное описание шагов:**

| № | Шаг | Описание |
| --- | --- | --- |
| **1** | Мерчант → ПЦ (ACS) | Мерчант (чесь Directory Server) направляет запрос на аутентификацию держателя карты в ACS ПЦ. |
| **2** | ПЦ (ACS) → ФМ-система | ACS ПЦ, по протоколу FMB, отправляет онлайн-запрос `checkacs` в ФМ-систему. Запрос содержит данные о держателе карты, устройстве, истории и параметрах текущей сессии. |
| **3** | ФМ-система → ФМ-система | ФМ-система проверяет и анализирует запрос на основе правил и профилей, специфичных для сценариев 3DS (например, анализ поведения в браузере, доверенность устройства). |
| **4** | ФМ-система → ПЦ (ACS) | ФМ-система возвращает ACS ПЦ результат проверки. Ответ содержит рекомендацию по типу аутентификации (например, `FRICTIONLESS`, `CHALLENGE`) и может включать оценку риска и коды причин. |
| **5** | ПЦ (ACS) → ПЦ (ACS) | ACS ПЦ анализирует ответ от ФМ-системы и на его основе, а также с учетом собственных политик, принимает решение о методе аутентификации:   • **С дополнительной проверкой (Challenge):** Требуется активное действие держателя (ввод OTP, пароля из СМС).   • **Бесшовная (Frictionless):** Аутентификация проходит без дополнительных действий со стороны пользователя. |
| **6** | ПЦ (ACS) → Мерчант | ACS ПЦ направляет подтверждение аутентификации (с результатом `Y`, `N` или `A`) в систему мерчанта (через Directory Server). |
| **7** | ПЦ (ACS) → ФМ-система | После завершения процесса аутентификации (независимо от метода и результата), ACS ПЦ отправляет в ФМ-систему асинхронный `updateacs` запрос. Он содержит финальный результат аутентификации (`SUCCESS`, `FAILURE`, `ATTEMPTED`) и детали (если были). |
| **8** | ФМ-система → ФМ-система | ФМ-система обрабатывает `updateacs` запрос, обновляя историю и профили по карте и устройству. Эта информация критически важна для точности будущих проверок `checkacs`. |
| **9** | ФМ-система → ПЦ (ACS) | ФМ-система отправляет техническое подтверждение (`ACK`) о получении `updateacs` запроса. |

**Постусловия:**

1. Мерчант получил результат аутентификации для продолжения/прекращения транзакции.
2. ФМ-система обновила профили держателя карты и устройства на основе финального исхода аутентификации.

**Критерии успешности процесса:**

- ACS ПЦ получил от ФМ-системы рекомендацию в рамках установленного таймаута.
- Решение об методе аутентификации принято и реализовано.
- Результат аутентификации успешно передан мерчанту и зафиксирован в ФМ-системе через `updateacs`.

**Возможные ограничения и исключения:**

- **Тайм-аут:** Если ответ на `checkacs` не получен вовремя, ACS ПЦ должен применить политику по умолчанию (чаще всего — `Challenge`), чтобы обеспечить безопасность.
- **Неполные данные:** Отсутствие критических данных (например, `deviceFingerprint`) в запросе `checkacs` может привести к необоснованному ужесточению метода аутентификации.
- **Отсутствие `updateacs`:** Если `updateacs` запрос потерян, профили в ФМ-системе не узнают о результате аутентификации, что может негативно сказаться на точности последующих оценок риска.

Глубокое мышление

Поиск

Сгенерировано ИИ, только для справки