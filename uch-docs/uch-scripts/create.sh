#!/bin/bash
# –ú–æ–¥—É–ª—å —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)

# –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
create_document_basic() {
    echo ""
    echo "üìù –°–û–ó–î–ê–ù–ò–ï –î–û–ö–£–ú–ï–ù–¢–ê"
    echo ""
    
    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
    read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞: " name
    if [ -z "$name" ]; then
        echo "‚ùå –ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
        return 1
    fi
    
    echo ""
    echo "–í—ã–±–µ—Ä–∏—Ç–µ —É—Ä–æ–≤–µ–Ω—å –¥–æ–∫—É–º–µ–Ω—Ç–∞:"
    echo "1 - –£—Ä–æ–≤–µ–Ω—å 1 (–º–∞—Å—Ç–µ—Ä-–¥–æ–∫—É–º–µ–Ω—Ç)"
    echo "2 - –£—Ä–æ–≤–µ–Ω—å 2 (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç/–º–æ–¥—É–ª—å)"
    echo "3 - –£—Ä–æ–≤–µ–Ω—å 3 (–∑–∞–¥–∞—á–∞/–∏–Ω—Ü–∏–¥–µ–Ω—Ç)"
    echo "4 - –£—Ä–æ–≤–µ–Ω—å 4 (—Ä–µ—à–µ–Ω–∏–µ/–ø–æ–¥–∑–∞–¥–∞—á–∞)"
    echo "N - –ù–µ–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π (–∏–¥–µ—è/—Å—Å—ã–ª–∫–∞/–≤—Å—Ç—Ä–µ—á–∞)"
    echo ""
    read -p "–í–∞—à –≤—ã–±–æ—Ä (1/2/3/4/N): " level_choice
    
    case $level_choice in
        1) level=1 ;;
        2) level=2 ;;
        3) level=3 ;;
        4) level=4 ;;
        N|n) level="N" ;;
        *) 
            echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä —É—Ä–æ–≤–Ω—è"
            return 1
            ;;
    esac
    
    # –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—è –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
    parent_id=""
    if [ "$level" != "N" ] && [ "$level" -gt 1 ]; then
        echo ""
        read -p "–í–≤–µ–¥–∏—Ç–µ ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: 00 –∏–ª–∏ 00-01): " parent_id
    fi
    
    # –í—ã–±–æ—Ä —Ç–∏–ø–∞
    if [ -f "$SCRIPT_DIR/types.sh" ]; then
        source "$SCRIPT_DIR/types.sh"
        default_type=$(get_default_type_for_level "$level")
        type=$(select_type_interactive "$level" "$default_type")
    else
        type="document"
    fi
    
    echo ""
    read -p "–í–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): " tags
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–≤–æ–¥–∫—É
    echo ""
    echo "üìã –°–í–û–î–ö–ê:"
    echo "  –ù–∞–∑–≤–∞–Ω–∏–µ: $name"
    echo "  –£—Ä–æ–≤–µ–Ω—å: $level"
    echo "  –¢–∏–ø: $type"
    echo "  –†–æ–¥–∏—Ç–µ–ª—å: ${parent_id:-–Ω–µ—Ç}"
    echo "  –¢–µ–≥–∏: ${tags:-–Ω–µ—Ç}"
    echo ""
    
    read -p "–°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç? (y/n): " confirm
    if [[ "$confirm" != "y" && "$confirm" != "Y" ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ"
        return 0
    fi
    
    echo "‚úÖ –î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω (–∑–∞–≥–ª—É—à–∫–∞)"
    echo "   –í –±—É–¥—É—â–µ–º –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è
create_batch_documents() {
    echo "‚ö†Ô∏è  –ü–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ"
    echo "   –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö"
}
