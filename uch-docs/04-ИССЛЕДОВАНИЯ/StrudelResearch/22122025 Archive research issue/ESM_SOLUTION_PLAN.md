## –ü–õ–ê–ù: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã ESM –º–æ–¥—É–ª–µ–π –≤ UCH

## üéØ –¶–ï–õ–¨

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–±–æ—Ä–∫—É Strudel –ø–∞–∫–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–∞–Ω–¥–ª–µ—Ä (Vite/Rollup) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ª–Ω–æ–º—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É:

- @strudel/tonal (–∞–∫–∫–æ—Ä–¥—ã, –≥–∞–º–º—ã, –º—É–∑—ã–∫–∞–ª—å–Ω–∞—è —Ç–µ–æ—Ä–∏—è)
- @strudel/soundfonts (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã GM: piano, strings, etc.)
- @strudel/midi (MIDI –≤—ã–≤–æ–¥)
- @strudel/xen (–º–∏–∫—Ä–æ—Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

## üìã –ü–†–ï–î–í–ê–†–ò–¢–ï–õ–¨–ù–´–ï –¢–ï–°–¢–´

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ Skypack CDN

html

<!-- test-skypack.html -->
<script type="module">
  import { chord } from 'https://cdn.skypack.dev/@strudel/tonal';
  console.log('Tonal loaded:', chord('Cmajor'));
</script>

### –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ esm.sh CDN

html

<!-- test-esm.html -->
<script type="module">
  import { chord } from 'https://esm.sh/@strudel/tonal';
  console.log('Tonal loaded via esm.sh');
</script>

### –¢–µ—Å—Ç 3: –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ Vite

bash

# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
npm create vite@latest strudel-esm-test -- --template vanilla-ts
cd strudel-esm-test
npm install @strudel/tonal @strudel/soundfonts

## üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –†–ï–®–ï–ù–ò–Ø

### –í–∞—Ä–∏–∞–Ω—Ç A: –ú–∏–≥—Ä–∞—Ü–∏—è –≤—Å–µ–≥–æ UCH –Ω–∞ Vite

**–ü–ª—é—Å—ã:**

- –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏
- Hot Module Replacement
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**–ú–∏–Ω—É—Å—ã:**

- –ë–æ–ª—å—à–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –ø—Ä–æ–µ–∫—Ç–µ
- –†–∏—Å–∫ –ø–æ–ª–æ–º–∫–∏ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –∫–æ–¥–∞

### –í–∞—Ä–∏–∞–Ω—Ç B: –û—Ç–¥–µ–ª—å–Ω—ã–π –±–∞–Ω–¥–ª –¥–ª—è Strudel

**–ü–ª—é—Å—ã:**

- –ò–∑–æ–ª—è—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

**–ú–∏–Ω—É—Å—ã:**

- –î–≤–∞ –±–∞–Ω–¥–ª–µ—Ä–∞ –≤ –ø—Ä–æ–µ–∫—Ç–µ
- –°–ª–æ–∂–Ω–µ–µ –¥–µ–±–∞–≥–≥–∏–Ω–≥

### –í–∞—Ä–∏–∞–Ω—Ç C: Runtime –∑–∞–≥—Ä—É–∑–∫–∞ ESM

**–ü–ª—é—Å—ã:**

- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

**–ú–∏–Ω—É—Å—ã:**

- –°–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- –ü—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

## üöÄ –í–´–ë–†–ê–ù–ù–´–ô –ü–£–¢–¨: –í–∞—Ä–∏–∞–Ω—Ç B

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:

text

uch-backend/uch/apps/studio/
‚îú‚îÄ‚îÄ frontend/           # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π React
‚îú‚îÄ‚îÄ strudel-bundle/     # –ù–æ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è Strudel
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Strudel
‚îÇ   ‚îú‚îÄ‚îÄ vite.config.js  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Vite
‚îÇ   ‚îî‚îÄ‚îÄ dist/           # –°–æ–±—Ä–∞–Ω–Ω—ã–π –±–∞–Ω–¥–ª
‚îî‚îÄ‚îÄ integrate-strudel.js # –ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–Ω–¥–ª–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç

## üìÖ –ü–õ–ê–ù –†–ê–ë–û–¢–´ –ü–û –î–ù–Ø–ú

### –î–µ–Ω—å 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã

bash

# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç Vite
cd /Users/kirillkravcov/UniversalCreativeHub/experiments
mkdir vite-strudel-test
cd vite-strudel-test
npm init vite@latest . -- --template react-ts
npm install @strudel/web @strudel/tonal @strudel/soundfonts

### –î–µ–Ω—å 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤

typescript

// src/main.tsx
import { initStrudel } from '@strudel/web';
import { chord } from '@strudel/tonal';
import { loadSoundfont } from '@strudel/soundfonts';

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
// –ò–∑–º–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞

### –î–µ–Ω—å 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

javascript

// vite.config.js
export default {
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'strudel-core': ['@strudel/core', '@strudel/webaudio'],
          'strudel-extras': ['@strudel/tonal', '@strudel/soundfonts']
        }
      }
    }
  }
}

### –î–µ–Ω—å 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–µ–∫—Ç

javascript

// –°—Ç—Ä–∞—Ç–µ–≥–∏—è:
// 1. –°–æ–±—Ä–∞—Ç—å Strudel –±–∞–Ω–¥–ª –æ—Ç–¥–µ–ª—å–Ω–æ
// 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞–∫ –≤–Ω–µ—à–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç
// 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –î–µ–Ω—å 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

- Soundfonts –∑–∞–≥—Ä—É–∑–∫–∞
- –ê–∫–∫–æ—Ä–¥—ã –∏ –≥–∞–º–º—ã
- MIDI –≤—ã–≤–æ–¥ (–µ—Å–ª–∏ –µ—Å—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –î–µ–Ω—å 6-7: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

- –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–±–æ—Ä–∫–µ
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
- –î–æ–±–∞–≤–∏—Ç—å fallback –Ω–∞ CDN –µ—Å–ª–∏ —Å–±–æ—Ä–∫–∞ fails

## üß™ –ö–†–ò–¢–ï–†–ò–ò –£–°–ü–ï–•–ê

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:

- –ë–∞–Ω–¥–ª —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –†–∞–∑–º–µ—Ä < 800KB (gzipped)
- –í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ < 30 —Å–µ–∫—É–Ω–¥
- Hot reload —Ä–∞–±–æ—Ç–∞–µ—Ç

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ:

- `chord("Cmajor")` —Ä–∞–±–æ—Ç–∞–µ—Ç
- Soundfonts –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- MIDI —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

- –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ < 3 —Å–µ–∫—É–Ω–¥
- FPS > 50 –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏
- –ü–∞–º—è—Ç—å < 200MB –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

## ‚ö†Ô∏è –†–ò–°–ö–ò –ò –ú–ò–¢–ò–ì–ê–¶–ò–Ø

### –†–∏—Å–∫ 1: –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤ –≤ package.json

### –†–∏—Å–∫ 2: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –±–∞–Ω–¥–ª–∞

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** Code splitting, lazy loading

### –†–∏—Å–∫ 3: –ü—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏ TypeScript

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å @types –ø–∞–∫–µ—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å tsconfig

### –†–∏—Å–∫ 4: –°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** Source maps, –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üìû –≠–°–ö–ê–õ–ê–¶–ò–Ø

–ï—Å–ª–∏ —Ä–µ—à–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ 3 –¥–Ω—è:

1. –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ CDN-only —Ä–µ—à–µ–Ω–∏—é
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
3. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ Vite –ø–æ–∑–∂–µ

---

*–ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç: 23.12.2025*  
*–û–∂–∏–¥–∞–µ–º–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ: 29.12.2025*  
EOF

## 5\. –°–æ–∑–¥–∞–µ–º —Å–∫—Ä–∏–ø—Ç –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ ESM
