## üìä –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Vite + Django

### ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **Django** –æ—Ç–¥–∞—ë—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω `index.html` —Å –ø–æ—Ä—Ç–æ–º 5173
2. **Vite dev-—Å–µ—Ä–≤–µ—Ä** –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 5173 —Å `BASE=/static/studio/`
3. **React-—Å–∫—Ä–∏–ø—Ç—ã** —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ Vite –≤ Django-—à–∞–±–ª–æ–Ω
4. **–°–æ–æ–±—â–µ–Ω–∏–µ "‚úÖ React –∑–∞–≥—Ä—É–∂–µ–Ω!"** –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å–µ
5. **WebSocket –¥–ª—è HMR** –ø–æ–¥–∫–ª—é—á–µ–Ω

### ‚ùå –û—Å—Ç–∞—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã:

1. **React –Ω–µ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ DOM** ‚Äî –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
2. **–û—à–∏–±–∫–∞ React Refresh:**`@vitejs/plugin-react can't detect preamble`
3. **–°–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Å—Ç–∞—ë—Ç—Å—è** –≤–º–µ—Å—Ç–æ React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ:

text

```
1. –≠–ª–µ–º–µ–Ω—Ç #studio-root —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: –î–ê
2. main.tsx —Å–æ–¥–µ—Ä–∂–∏—Ç studio-root: –î–ê  
3. main.tsx –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è: –î–ê (–ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏)
4. –û—à–∏–±–∫–∞ React Refresh: –ï–°–¢–¨ (cross-origin –ø—Ä–æ–±–ª–µ–º–∞)
5. ReactDOM.createRoot –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è: –ù–ï–ò–ó–í–ï–°–¢–ù–û
```

### üéØ –ì–∏–ø–æ—Ç–µ–∑–∞ –ø—Ä–æ–±–ª–µ–º—ã:

**Cross-origin React Refresh –∫–æ–Ω—Ñ–ª–∏–∫—Ç:** Vite dev-—Å–µ—Ä–≤–µ—Ä (localhost:5173) –ø—ã—Ç–∞–µ—Ç—Å—è –≤–Ω–µ–¥—Ä–∏—Ç—å React Refresh –¥–ª—è HMR, –Ω–æ –∏–∑-–∑–∞ cross-origin –∑–∞–≥—Ä—É–∑–∫–∏ (—Å –ø–æ—Ä—Ç–∞ 8000) –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –±–ª–æ–∫–∏—Ä—É–µ—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ React.

---

## üõ†Ô∏è –®–∞–≥ 41: –†–µ—à–∞—é—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî –≤—Ä–µ–º–µ–Ω–Ω—ã–π –æ–±—Ö–æ–¥ –ø—Ä–æ–±–ª–µ–º—ã

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å production-—Å–±–æ—Ä–∫—É React –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏, –∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –Ω–∞ localhost:5173/

### 1\. –°–æ–±–∏—Ä–∞–µ–º production-–≤–µ—Ä—Å–∏—é React:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/studio/frontend
npm run build
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –§–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `../static/studio/`

### 2\. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

bash

```
ls -la ../static/studio/
```

### 3\. –û–±–Ω–æ–≤–ª—è–µ–º Django-—à–∞–±–ª–æ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/studio/templates/studio
cat > index_prod.html << 'EOF'
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ç—É–¥–∏—è - UCH v0.3</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    {% load static %}
</head>
<body>
    <div class="container mt-4">
        <h1>–¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ç—É–¥–∏—è</h1>
        <p class="lead">Universal Creative Hub - –õ–∏–Ω–∏—è –ë (–§–∞–∑–∞ 2)</p>
        
        <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
        <div id="studio-root">
            <div class="alert alert-info text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                </div>
                <p class="mt-2">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–π —Å—Ç—É–¥–∏–∏...</p>
                <p id="studio-status" class="mb-0">
                    üöÄ Production mode: —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã...
                </p>
            </div>
        </div>
    </div>
    
    <!-- Production —Å–±–æ—Ä–∫–∞ React -->
    <script src="{% static 'studio/js/main.js' %}"></script>
    
    <script>
        // –°–∫—Ä—ã–≤–∞–µ–º —Å–ø–∏–Ω–Ω–µ—Ä –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        setTimeout(() => {
            const spinner = document.querySelector('.spinner-border');
            const statusText = document.querySelector('.mt-2');
            if (spinner) spinner.style.display = 'none';
            if (statusText) statusText.style.display = 'none';
        }, 1000);
    </script>
</body>
</html>
EOF
```

### 4\. –û–±–Ω–æ–≤–ª—è–µ–º views.py –¥–ª—è production-—Ä–µ–∂–∏–º–∞:

bash

```
cd /Users/kirillkravcov/UniversalCreativeHub/uch-backend/uch/apps/studio
cat > views.py << 'EOF'
from django.shortcuts import render
from django.conf import settings

def studio_index(request):
    """–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–∏–∏"""
    context = {
        'title': '–¢–≤–æ—Ä—á–µ—Å–∫–∞—è —Å—Ç—É–¥–∏—è',
        'debug': settings.DEBUG,
    }
    
    # –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º dev-—à–∞–±–ª–æ–Ω, –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ ‚Äî production
    if settings.DEBUG:
        return render(request, 'studio/index.html', context)
    else:
        return render(request, 'studio/index_prod.html', context)

def test_view(request):
    return render(request, 'studio/test.html', {
        'debug': settings.DEBUG,
    })

def simple_test(request):
    return render(request, 'studio/simple.html')

def debug_view(request):
    return render(request, 'studio/debug.html')
EOF
```

---

## üìã –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π:

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—Å–µ–π—á–∞—Å):

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å production-—Å–±–æ—Ä–∫—É –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Django
2. –†–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ `localhost:5173/` —Å hot-reload
3. –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–ø—É—Å–∫–∞—Ç—å `npm run build` –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É Django

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (–ø–æ—Å–ª–µ MVP):

1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Django proxy –¥–ª—è Vite dev-—Å–µ—Ä–≤–µ—Ä–∞
2. –†–µ—à–∏—Ç—å cross-origin –ø—Ä–æ–±–ª–µ–º—É React Refresh
3. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å django-vite –ø–ª–∞–≥–∏–Ω –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –ø–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã:

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è **CoreOrchestrator.ts** —Å–æ–≥–ª–∞—Å–Ω–æ –§–∞–∑–µ 2 –ø–ª–∞–Ω–∞ v0.3:

- MasterClock & Transport
- NodeGraph Manager
- –ë–∞–∑–æ–≤—ã–µ –Ω–æ–¥—ã (StrudelREPL, TrackerEditor)

---