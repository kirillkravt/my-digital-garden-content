#!/bin/bash
echo "üîç –ê–ù–ê–õ–ò–ó –ù–ï–°–û–û–¢–í–ï–¢–°–¢–í–ò–ô –°–¢–ê–†–û–ô –ò –ù–û–í–û–ô –°–ò–°–¢–ï–ú"
echo "=============================================="
echo ""
echo "üìä –¢–ï–ö–£–©–ê–Ø –°–ò–¢–£–ê–¶–ò–Ø:"
echo "-------------------"

# –°—á–∏—Ç–∞–µ–º —Ñ–∞–π–ª—ã –ø–æ —Ç–∏–ø–∞–º –∏–º–µ–Ω
echo "1. –§–æ—Ä–º–∞—Ç—ã –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤:"
echo "   ‚Ä¢ Decimal —Ñ–æ—Ä–º–∞—Ç (–Ω–æ–≤—ã–π): $(find . -name "[0-9]-[0-9]*.md" -type f | wc -l)"
echo "   ‚Ä¢ Hex —Ñ–æ—Ä–º–∞—Ç (—Å—Ç–∞—Ä—ã–π): $(find . -name "[0-9A-F]*-[0-9A-F]*.md" -type f | grep -v "[0-9]-[0-9]" | wc -l)"
echo "   ‚Ä¢ Zettel —Ñ–æ—Ä–º–∞—Ç: $(find . -name "Z-*.md" -type f | wc -l)"
echo ""

echo "2. –ü—Ä–∏–º–µ—Ä—ã –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π (–ø–µ—Ä–≤—ã–µ 10):"
echo "-------------------------------------"
count=0
find . -name "*.md" -type f | while read f && [ $count -lt 10 ]; do
    filename=$(basename "$f")
    file_id=$(echo "$filename" | grep -oE '^[0-9A-Z]+-[0-9A-Z]+-[0-9A-Z]+' | head -1)
    frontmatter_id=$(grep -m1 "id:" "$f" 2>/dev/null | head -1 | cut -d: -f2 | tr -d ' "')
    
    if [ -n "$file_id" ] && [ -n "$frontmatter_id" ] && [ "$file_id" != "$frontmatter_id" ]; then
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —É—Ä–æ–≤–µ–Ω—å –ø–æ –Ω–æ–≤–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É
        level=$(echo "$file_id" | cut -d'-' -f1)
        
        echo "   ‚Ä¢ $filename"
        echo "     –£—Ä–æ–≤–µ–Ω—å: $level (–∏–∑ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞)"
        echo "     ID –≤ –∏–º–µ–Ω–∏: $file_id"
        echo "     ID –≤ frontmatter: $frontmatter_id"
        echo ""
        count=$((count + 1))
    fi
done

echo ""
echo "üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø –ü–û –ú–ò–ì–†–ê–¶–ò–ò:"
echo "---------------------------"
echo "1. –°–Ω–∞—á–∞–ª–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç—å frontmatter ID —á—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –∏–º–µ–Ω–∞–º —Ñ–∞–π–ª–æ–≤"
echo "2. –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ø–æ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)"
echo "3. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Å—ã–ª–∫–∏"
echo ""
echo "–•–æ—Ç–∏—Ç–µ –Ω–∞—á–∞—Ç—å —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è frontmatter? (y/N)"
