---
id: "4-010400-0800-1"
name: "Исправление скрипта uch-create.sh для генерации правильных id"
type: "TASK"
level: 4
status: "active"
tags: ["docs", "system", "script", "fix"]
parent: "2-010400"
parent_name: "docs system"
created: "2026-02-04"
updated: "2026-02-04"
author: "kirillkravcov"
slug: "4-010400-0800-1_TASK_Исправление_скрипта_uch-create.sh_для_генерации_правильных_id"
---

### Задача: Исправление скрипта uch-create.sh для генерации правильных ID

#### ОПИСАНИЕ
После исправления существующих файлов (задача 0700) необходимо исправить основной скрипт создания документов `uch-create.sh`, чтобы он изначально генерировал правильные ID.

**Проблема:** Текущий `uch-create.sh` генерирует ID без номера типа в frontmatter, что приводит к несоответствию с именем файла.

**Пример неправильной генерации:**
- Имя файла: `4-010400-XXXX-1_TASK_...md`
- Frontmatter: `id: 4-010400-XXXX` ❌

**Должно быть:**
- Имя файла: `4-010400-XXXX-1_TASK_...md`
- Frontmatter: `id: 4-010400-XXXX-1` ✅

#### КРИТЕРИИ ВЫПОЛНЕНИЯ
- [ ] Проанализирован текущий `uch-create.sh`
- [ ] Определены места, где генерируется/записывается ID
- [ ] Исправлена логика генерации ID (добавлен номер типа)
- [ ] Протестировано создание документов всех уровней (1-6, Z)
- [ ] Убедиться, что все созданные документы имеют правильные ID

#### ТЕХНИЧЕСКИЕ ТРЕБОВАНИЯ
1. **Анализ текущего скрипта:**
   - Найти функцию/блок генерации ID
   - Найти запись ID в frontmatter
   - Найти генерацию имени файла

2. **Исправления:**
   - ID в frontmatter должен включать номер типа
   - Проверка: `id` в frontmatter = часть имени файла до первого `_`
   - Поддержка всех форматов:
     - Уровни 1-3: `X-XXXXXX-X`
     - Уровни 4-5: `X-XXXXXX-XXXX-X`
     - Уровень 6: `X-XXXXXX-XXXX-X`
     - Уровень Z: `Z-YYMMDD-HHMM-XXXX-X`

3. **Тестирование:**
   - Создать тестовые документы каждого уровня
   - Проверить соответствие ID
   - Проверить работу с существующими командами

#### КОМАНДЫ ДЛЯ АНАЛИЗА

# 1. Найти текущий uch-create.sh
find . -name "uch-create.sh" -type f

# 2. Посмотреть структуру
head -50 uch-create.sh

# 3. Найти генерацию ID
grep -n "id" uch-create.sh

# 4. Найти запись в файл
grep -n ">>.*\.md" uch-create.sh

СЛЕДУЮЩИЕ ШАГИ
После выполнения этой задачи:

Обновить другие скрипты создания (uch-create-modular.sh и т.д.)

Обновить документацию

Создать автоматические тесты для проверки целостности

ПРИМЕЧАНИЯ
Убедиться в обратной совместимости

Сохранить все существующие параметры и флаги

Добавить комментарии о формате ID